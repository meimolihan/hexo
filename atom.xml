<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>凡凡小站</title>
  
  
  <link href="https://www.meimolihan.eu.org/atom.xml" rel="self"/>
  
  <link href="https://www.meimolihan.eu.org/"/>
  <updated>2025-09-22T06:09:55.000Z</updated>
  <id>https://www.meimolihan.eu.org/</id>
  
  <author>
    <name>凡凡小站</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hexo + Fomalhaut 主题修改与优化指南 📝</title>
    <link href="https://www.meimolihan.eu.org/posts/771f472a.html"/>
    <id>https://www.meimolihan.eu.org/posts/771f472a.html</id>
    <published>2025-09-22T06:09:55.000Z</published>
    <updated>2025-09-22T06:09:55.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Hexo + Fomalhaut 主题修改与优化指南 📝</h1><p><img src="https://file.meimolihan.eu.org/img/hexo-fomalhaut-01.webp" alt=""></p><blockquote><p>本文档详细介绍了如何对 Fomalhaut 主题进行个性化修改与优化，包括壁纸更换、样式调整、功能配置等，助你打造独一无二的博客外观！✨</p></blockquote><hr><h2 id="导航目录-📚">导航目录 📚</h2><ul><li><a href="#change-wallpapers">🖼️ 修改日夜模式壁纸</a></li><li><a href="#profile-card-background">🎨 调整个人信息卡片背景</a></li><li><a href="#category-magnets">🧲 小冰分类磁贴样式</a></li><li><a href="#hide-waves">🌊 隐藏波浪模式</a></li><li><a href="#announcement-config">📢 公告栏设置</a></li><li><a href="#theme-variables">🎨 主题变量对接</a></li><li><a href="#css-tips">💡 常用 CSS 技巧</a></li><li><a href="#font-modification">🔤 字体修改指南</a></li></ul><hr><p><a id="change-wallpapers"></a></p><h2 id="🖼️-修改日夜模式壁纸">🖼️ 修改日夜模式壁纸</h2><p>Fomalhaut 主题支持为日间和夜间模式分别设置不同的壁纸，让你的博客在不同时间展现不同风格！</p><p><strong>修改方法：</strong></p><ol><li>找到文件：<code>[BlogRoot]/themes/butterfly/source/css/_custom/custom.css</code></li><li>搜索以下CSS变量进行修改：</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line"><span class="attr">--default-bg</span>: <span class="built_in">url</span>(<span class="string">https://file.meimolihan.eu.org/hexo/default-bg.png</span>);  <span class="comment">/* 电脑日间壁纸 */</span></span><br><span class="line"><span class="attr">--darkmode-bg</span>: <span class="built_in">url</span>(<span class="string">https://file.meimolihan.eu.org/hexo/darkmode-bg.webp</span>);  <span class="comment">/* 电脑夜间壁纸 */</span></span><br><span class="line"><span class="attr">--mobileday-bg</span>: <span class="built_in">url</span>(<span class="string">https://file.meimolihan.eu.org/hexo/mobileday-bg.png</span>);  <span class="comment">/* 手机日间壁纸 */</span></span><br><span class="line"><span class="attr">--mobilenight-bg</span>: <span class="built_in">url</span>(<span class="string">https://file.meimolihan.eu.org/hexo/mobilenight-bg.webp</span>); <span class="comment">/* 手机夜间壁纸 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>💡 <strong>提示</strong>：建议使用高质量图片（推荐分辨率：1920×1080），并确保图片URL可正常访问。</p></blockquote><p><a id="profile-card-background"></a></p><h2 id="🎨-调整个人信息卡片背景">🎨 调整个人信息卡片背景</h2><p>个性化你的博主信息卡片，让它与整体主题风格更匹配！</p><p><strong>修改方法：</strong></p><ol><li>同样在 <code>custom.css</code> 文件中搜索：</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.author-content</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;你的卡片背景图URL&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>✨ <strong>特点</strong>：支持渐变色、静态图片和动态GIF，让你的名片更加生动！</p></blockquote><p><a id="category-magnets"></a></p><h2 id="🧲-小冰分类磁贴样式">🧲 小冰分类磁贴样式</h2><p>小冰分类磁贴是Fomalhaut的特色功能之一，可以让分类目录以磁贴形式展示，更加美观实用。</p><p><strong>修改方法：</strong></p><ol><li>在 <code>custom.css</code> 中搜索 <code>.magnet_item</code></li><li>调整以下样式属性：</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.magnet_item</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--theme-color); <span class="comment">/* 背景色 */</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span>; <span class="comment">/* 圆角大小 */</span></span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">3px</span> <span class="number">8px</span> <span class="built_in">var</span>(--shadow-color); <span class="comment">/* 阴影效果 */</span></span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease; <span class="comment">/* 悬停动画 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.magnet_item</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">5px</span>); <span class="comment">/* 悬停效果 */</span></span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">16px</span> <span class="built_in">var</span>(--shadow-color-hover);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="hide-waves"></a></p><h2 id="🌊-隐藏波浪模式">🌊 隐藏波浪模式</h2><p>如果你觉得波浪效果影响阅读体验，可以轻松隐藏它。</p><p><strong>修改方法：</strong></p><ol><li>在 <code>custom.css</code> 中搜索 <code>.main-hero-waves-area</code></li><li>添加以下代码：</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.main-hero-waves-area</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>⚠️ <strong>注意</strong>：隐藏波浪效果后，首页底部会变得简洁，但也会失去动态效果。</p></blockquote><p><a id="announcement-config"></a></p><h2 id="📢-公告栏设置">📢 公告栏设置</h2><p>公告栏是向访客展示重要信息的理想位置，如更新日志、活动通知等。</p><p><strong>配置方法：</strong></p><ol><li>打开 <code>[BlogRoot]/_config.butterfly.yml</code></li><li>搜索 <code>card_announcement</code></li><li>修改配置：</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">card_announcement:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">content:</span> <span class="string">&quot;🎉 欢迎访问我的博客！这里记录我的学习笔记和生活感悟～&quot;</span></span><br></pre></td></tr></table></figure><blockquote><p>🔧 <strong>功能</strong>：支持HTML格式，可以添加链接、表情等丰富内容。</p></blockquote><p><a id="theme-variables"></a></p><h2 id="🎨-主题变量对接">🎨 主题变量对接</h2><p>Fomalhaut 主题使用CSS变量统一管理样式，方便自定义主题色彩。</p><p><strong>常用变量对接示例：</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* MD引用标签背景接入 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-tag">blockquote</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">blockquote</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-dark);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 悬停元素背景接入 */</span></span><br><span class="line"><span class="selector-class">.aside-list-item</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--theme-color);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 悬停字体颜色 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-tag-cloud</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--font-color) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 鼠标悬停边框阴影效果 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#post</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">3px</span> <span class="built_in">var</span>(--theme-color) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 边框装饰线（Fomalhaut白色装饰线） */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#post</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--border-style);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="css-tips"></a></p><h2 id="💡-常用-CSS-技巧">💡 常用 CSS 技巧</h2><p>这里收集了一些实用的CSS代码片段，方便快速修改样式：</p><p><strong>文字样式调整：</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#post</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>; <span class="comment">/* 字体大小 */</span></span><br><span class="line">    <span class="attribute">font-weight</span>: bold; <span class="comment">/* 字体加粗 */</span></span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#000000</span>; <span class="comment">/* 文字颜色 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>元素位置调整：</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#post</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">20px</span> <span class="meta">!important</span>;  <span class="comment">/* 调整高度 */</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20px</span> <span class="meta">!important</span>;   <span class="comment">/* 调整宽度 */</span></span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">10px</span> <span class="meta">!important</span>; <span class="comment">/* 向上移动10px */</span></span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">10px</span> <span class="meta">!important</span>;    <span class="comment">/* 向下移动10px */</span></span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">10px</span> <span class="meta">!important</span>;  <span class="comment">/* 向左移动10px */</span></span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">10px</span> <span class="meta">!important</span>;   <span class="comment">/* 向右移动10px */</span></span><br><span class="line">    <span class="attribute">vertical-align</span>: middle; <span class="comment">/* 默认居中对齐 */</span></span><br><span class="line">    <span class="attribute">vertical-align</span>: -<span class="number">0.3em</span>; <span class="comment">/* 上下移动 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="font-modification"></a></p><h2 id="🔤-字体修改指南">🔤 字体修改指南</h2><p>Fomalhaut 主题支持自定义字体，让你的博客拥有独特的排版风格。</p><h3 id="字体资源推荐">字体资源推荐</h3><ul><li><strong>字体天下</strong>：<a href="https://www.fonts.net.cn/">https://www.fonts.net.cn/</a>（丰富的中文字体资源）</li><li><strong>谷歌字体</strong>：<a href="https://fonts.google.com/">https://fonts.google.com/</a>（免费的英文字体库）</li><li><strong>格式转换工具</strong>：<a href="https://products.groupdocs.app/zh/conversion/ttf-to-woff2">TTF 到 WOFF2转换器</a>（优化网络字体加载）</li></ul><h3 id="字体更换步骤">字体更换步骤</h3><p><strong>1. 下载并替换字体文件</strong><br>以「杨任东竹石体」为例：</p><p>修改 <code>[BlogRoot]/themes/butterfly/source/css/_custom/custom.css</code>：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@font-face &#123;</span><br><span class="line">  font-family: ZhuZiAWan;</span><br><span class="line"><span class="deletion">-  src: url(https://data-static.netdun.net/Fomalhaut/fonts/ZhuZiAWan2.woff2);</span></span><br><span class="line"><span class="addition">+  src: url(https://cdn.meimolihan.eu.org/hexo/fonts/Heavy.woff2);</span></span><br><span class="line">  font-display: swap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2. 引入字体到样式</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#post</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="built_in">var</span>(--global-font), ZhuZiAWan; <span class="comment">/* 引入字体 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>3. 更新字体切换控制台</strong><br>修改 <code>[BlogRoot]/source/js/fomal.js</code>：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">- &lt;a class=&quot;swf&quot; id=&quot;swf_ZhuZiAWan&quot; href=&quot;javascript:;&quot; rel=&quot;noopener external nofollow&quot; style=&quot;font-family:&#x27;ZhuZiAWan&#x27;!important;color:black&quot; onclick=&quot;setFont(&#x27;ZhuZiAWan&#x27;)&quot;&gt;筑紫A丸标准体2.0&lt;/a&gt;</span></span><br><span class="line"><span class="addition">+ &lt;a class=&quot;swf&quot; id=&quot;swf_ZhuZiAWan&quot; href=&quot;javascript:;&quot; rel=&quot;noopener external nofollow&quot; style=&quot;font-family:&#x27;ZhuZiAWan&#x27;!important;color:black&quot; onclick=&quot;setFont(&#x27;ZhuZiAWan&#x27;)&quot;&gt;杨任东竹石体&lt;/a&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>📌 <strong>提示</strong>：修改后记得清除浏览器缓存，才能看到字体变化效果！</p></blockquote><hr><p>希望本篇指南能帮助你更好地定制Fomalhaut主题！如有任何问题，欢迎在主题Git仓库提交Issue或讨论！🚀</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Hexo + Fomalhaut 主题修改与优化指南 📝&lt;/h1&gt;
&lt;p&gt;&lt;img src=&quot;https://file.meimolihan.eu.org/img/hexo-fomalhaut-01.webp&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;本</summary>
      
    
    
    
    <category term="默认分类" scheme="https://www.meimolihan.eu.org/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/"/>
    
    
    <category term="hexo" scheme="https://www.meimolihan.eu.org/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>Hugo + Stack 主题美化指南 🎨</title>
    <link href="https://www.meimolihan.eu.org/posts/f1ee3303.html"/>
    <id>https://www.meimolihan.eu.org/posts/f1ee3303.html</id>
    <published>2025-09-17T08:33:08.000Z</published>
    <updated>2025-09-17T08:33:08.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Hugo + Stack 主题美化指南 🎨</h1><p><img src="https://file.meimolihan.eu.org/img/hugo-stack-01.webp" alt=""></p><blockquote><p>本文详细介绍了 Hugo Stack 主题的美化配置方法，包含全局样式调整、文章内容优化、侧边栏美化及其他功能增强，助你打造个性化博客。</p></blockquote><hr><h2 id="🌟-特点与功能">🌟 特点与功能</h2><p>本美化指南为 Hugo Stack 主题提供了全面的自定义方案，包含以下特色功能：</p><ul><li>🎨 <strong>多主题配色</strong> - 支持明亮/暗黑双模式，可自定义代码块样式和圆角大小</li><li>📱 <strong>响应式布局</strong> - 完美适配移动端和桌面端，三栏式灵活布局</li><li>✨ <strong>交互动画</strong> - 丰富的悬停动画效果，包括头像旋转、社交图标转动等</li><li>💻 <strong>代码高亮</strong> - MacOS风格代码块，支持语法高亮和复制功能</li><li>📊 <strong>数据统计</strong> - 文章数量、字数和访问量统计，支持多语言显示</li><li>🖼️ <strong>媒体增强</strong> - 图片灯箱效果、外部图床图片居中显示</li><li>🎯 <strong>用户体验</strong> - 返回顶部按钮、预加载动画、鼠标样式自定义</li><li>💬 <strong>评论系统</strong> - 集成giscus评论功能，基于GitHub Discussions</li><li>🌌 <strong>动态背景</strong> - 可配置粒子动态背景，增强视觉吸引力</li></ul><hr><h2 id="📑-导航目录">📑 导航目录</h2><ul><li><a href="#global-config">🌍 全局配置</a><ul><li><a href="#color-scheme">🎨 页面基本配色</a></li><li><a href="#layout-adjustment">📐 全局布局调整</a></li></ul></li><li><a href="#article-beautification">📝 文章内容美化</a><ul><li><a href="#basic-article-styling">✨ 文章内容基本美化</a></li><li><a href="#blockquote-styling">💬 MD 引用块样式</a></li><li><a href="#image-center">🖼️ 使图床链接的图片居中</a></li><li><a href="#word-count">📊 统计站点文章数量和字数</a></li><li><a href="#homepage-articles">🏠 首页文章样式</a></li><li><a href="#internal-images">🖼️ 文章内部图片样式</a></li><li><a href="#macos-codeblocks">💻 MacOS 风格代码块</a></li><li><a href="#codeblock-styling">🔧 修改代码块样式</a></li><li><a href="#syntax-highlighting">🎯 代码块高亮</a></li><li><a href="#hide-language">🚫 关闭代码块语言显示</a></li><li><a href="#external-links">🔗 外部链接后面显示图标</a></li><li><a href="#copy-buttons">📋 语言和复制按钮</a></li></ul></li><li><a href="#sidebar-beautification">📌 侧边栏美化</a><ul><li><a href="#sidebar-width">📏 页面左右边栏宽度</a></li><li><a href="#right-sidebar-animation">🎭 右侧导航栏动画</a></li><li><a href="#left-sidebar-styling">🎨 左侧导航栏美化</a></li><li><a href="#left-sidebar-animation">✨ 左侧导航栏动画</a></li><li><a href="#social-icons">🤝 社交 social</a></li><li><a href="#dark-mode-toggle">🌓 明亮模式调整位置</a></li><li><a href="#manual-sidebar">⚙️ 手动修改左右侧边栏设置样式</a></li><li><a href="#avatar-rotation">🔄 头像旋转</a></li><li><a href="#three-column-layout">📂 友情链接+分类+标签+归档【三栏显示】</a></li><li><a href="#archive-cards">📦 缩小归档页的分类卡片尺寸</a></li><li><a href="#toc-spacing">📋 调整 TOC 目录间距</a></li><li><a href="#link-hover">🔍 鼠标悬停超链接的显示</a></li></ul></li><li><a href="#other-widgets">🔧 其它小部件</a><ul><li><a href="#site-stats">📈 添加站点统计信息与 i18n</a></li><li><a href="#visitor-map">🗺️ 添加访客地图</a></li><li><a href="#custom-cursor">🖱️ 鼠标样式</a></li><li><a href="#welcome-banner">🎉 首页欢迎横幅</a></li><li><a href="#remove-footer">🗑️ 删除&quot;使用 Hugo 构建 主题Stack由Jimmy设计&quot;等字样</a></li><li><a href="#back-to-top">⬆️ 添加【返回顶部】按钮</a></li></ul></li><li><a href="#comments">💬 Hugo 接入评论</a></li><li><a href="#preload-animation">🌀 Hugo Stack 预加载动画</a></li><li><a href="#image-lightbox">🖼️ Hugo 图片灯箱</a></li><li><a href="#particles-background">✨ 引入动态背景（点线漂浮(particles.js)）</a></li><li><a href="#view-count">📊 【Hugo】博客文章浏览数统计</a></li></ul><hr><p><a id="global-config"></a></p><h2 id="🌍-全局配置">🌍 全局配置</h2><p><a id="color-scheme"></a></p><h3 id="🎨-页面基本配色">🎨 页面基本配色</h3><ul><li>✨ <strong>功能</strong>：自定义博客全局配色方案，包括明亮/暗黑模式下的代码块样式、圆角大小等</li><li>📌 <strong>位置</strong>：在 <code>/assets/scss/custom.scss</code> 中加入以下代码：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ---------------页面基本配色---------------</span></span><br><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="comment">// 全局顶部边距</span></span><br><span class="line">  <span class="attr">--main-top-padding</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="comment">// 全局卡片圆角</span></span><br><span class="line">  <span class="attr">--card-border-radius</span>: <span class="number">25px</span>;</span><br><span class="line">  <span class="comment">// 标签云卡片圆角</span></span><br><span class="line">  <span class="attr">--tag-border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="comment">// 卡片间距</span></span><br><span class="line">  <span class="attr">--section-separation</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="comment">// 全局字体大小</span></span><br><span class="line">  <span class="attr">--article-font-size</span>: <span class="number">1.8rem</span>;</span><br><span class="line">  <span class="comment">// 行内代码背景色</span></span><br><span class="line">  <span class="attr">--code-background-color</span>: <span class="number">#f8f8f8</span>;</span><br><span class="line">  <span class="comment">// 行内代码前景色</span></span><br><span class="line">  <span class="attr">--code-text-color</span>: <span class="number">#e96900</span>;</span><br><span class="line">  <span class="comment">// 暗色模式下样式</span></span><br><span class="line">  &amp;<span class="selector-attr">[data-scheme=<span class="string">&quot;dark&quot;</span>]</span> &#123;</span><br><span class="line">    <span class="comment">// 行内代码背景色</span></span><br><span class="line">    <span class="attr">--code-background-color</span>: <span class="number">#ff6d1b17</span>;</span><br><span class="line">    <span class="comment">// 行内代码前景色</span></span><br><span class="line">    <span class="attr">--code-text-color</span>: <span class="number">#e96900</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="layout-adjustment"></a></p><h3 id="📐-全局布局调整">📐 全局布局调整</h3><ul><li>✨ <strong>功能</strong>：调整整体页面布局结构，包括三栏宽度比例、下拉菜单样式等</li><li>📌 <strong>位置</strong>：在 <code>./assets/scss/custom.scss</code> 中加入以下代码：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//---------------------------------------------------</span></span><br><span class="line"><span class="comment">// 全局页面布局间距调整</span></span><br><span class="line"><span class="selector-class">.main-container</span> &#123;</span><br><span class="line">  <span class="attribute">min-height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">align-items</span>: flex-start;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">gap</span>: <span class="built_in">var</span>(--section-separation);</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="built_in">var</span>(--main-top-padding);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">@include</span> respond(md) &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">37px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//--------------------------------------------------</span></span><br><span class="line"><span class="comment">//页面三栏宽度调整</span></span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: auto;</span><br><span class="line">  <span class="attribute">margin-right</span>: auto;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.left-sidebar</span> &#123;</span><br><span class="line">    <span class="attribute">order</span>: -<span class="number">3</span>;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="built_in">var</span>(--left-sidebar-max-width);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.right-sidebar</span> &#123;</span><br><span class="line">    <span class="attribute">order</span>: -<span class="number">1</span>;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="built_in">var</span>(--right-sidebar-max-width);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// Display right sidebar when min-width: lg</span></span><br><span class="line">    <span class="keyword">@include</span> respond(lg) &#123;</span><br><span class="line">      <span class="attribute">display</span>: flex;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;<span class="selector-class">.extended</span> &#123;</span><br><span class="line">    <span class="keyword">@include</span> respond(md) &#123;</span><br><span class="line">      <span class="attribute">max-width</span>: <span class="number">1024px</span>;</span><br><span class="line">      <span class="attr">--left-sidebar-max-width</span>: <span class="number">25%</span>;</span><br><span class="line">      <span class="attr">--right-sidebar-max-width</span>: <span class="number">22%</span> <span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">@include</span> respond(lg) &#123;</span><br><span class="line">      <span class="attribute">max-width</span>: <span class="number">1280px</span>;</span><br><span class="line">      <span class="attr">--left-sidebar-max-width</span>: <span class="number">20%</span>;</span><br><span class="line">      <span class="attr">--right-sidebar-max-width</span>: <span class="number">30%</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">@include</span> respond(xl) &#123;</span><br><span class="line">      <span class="attribute">max-width</span>: <span class="number">1453px</span>; <span class="comment">//1536px;</span></span><br><span class="line">      <span class="attr">--left-sidebar-max-width</span>: <span class="number">15%</span>;</span><br><span class="line">      <span class="attr">--right-sidebar-max-width</span>: <span class="number">25%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;<span class="selector-class">.compact</span> &#123;</span><br><span class="line">    <span class="keyword">@include</span> respond(md) &#123;</span><br><span class="line">      <span class="attr">--left-sidebar-max-width</span>: <span class="number">25%</span>;</span><br><span class="line">      <span class="attribute">max-width</span>: <span class="number">768px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">@include</span> respond(lg) &#123;</span><br><span class="line">      <span class="attribute">max-width</span>: <span class="number">1024px</span>;</span><br><span class="line">      <span class="attr">--left-sidebar-max-width</span>: <span class="number">20%</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">@include</span> respond(xl) &#123;</span><br><span class="line">      <span class="attribute">max-width</span>: <span class="number">1280px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//-------------------------------------------------------</span></span><br><span class="line"><span class="comment">//全局页面小图片样式微调</span></span><br><span class="line"><span class="selector-class">.article-list--compact</span> <span class="selector-tag">article</span> <span class="selector-class">.article-image</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="built_in">var</span>(--image-size);</span><br><span class="line">  <span class="attribute">height</span>: <span class="built_in">var</span>(--image-size);</span><br><span class="line">  <span class="selector-tag">object</span>-fit: cover;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">17%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// --------------------------------</span></span><br><span class="line"><span class="comment">// 下拉菜单改圆角样式</span></span><br><span class="line"><span class="selector-class">.menu</span> &#123;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">list-style</span>: none;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">overflow-x</span>: hidden;</span><br><span class="line">  <span class="comment">// overflow-y: scroll;</span></span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.6rem</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--card-background);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// box-shadow: var(--shadow-l2); // 手机端下拉菜单会有莫名小方块</span></span><br><span class="line">  <span class="attribute">box-shadow</span>: none;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>; <span class="comment">//改为0</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>; <span class="comment">//加个圆角</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">30px</span> <span class="number">30px</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">@include</span> respond(xl) &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">15px</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;,</span><br><span class="line">  <span class="selector-class">.menu-bottom-section</span> &#123;</span><br><span class="line">    <span class="attribute">gap</span>: <span class="number">30px</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">@include</span> respond(xl) &#123;</span><br><span class="line">      <span class="attribute">gap</span>: <span class="number">25px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;<span class="selector-class">.show</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">@include</span> respond(md) &#123;</span><br><span class="line">    <span class="attribute">align-items</span>: flex-end;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">background-color</span>: transparent;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: none;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">@include</span> respond(md) &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">svg</span> &#123;</span><br><span class="line">      <span class="attribute">stroke-width</span>: <span class="number">1.33</span>;</span><br><span class="line"></span><br><span class="line">      <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">a</span> &#123;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">      <span class="attribute">display</span>: inline-flex;</span><br><span class="line">      <span class="attribute">align-items</span>: center;</span><br><span class="line">      <span class="attribute">color</span>: <span class="built_in">var</span>(--body-text-color);</span><br><span class="line">      <span class="attribute">gap</span>: <span class="built_in">var</span>(--menu-icon-separation);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">span</span> &#123;</span><br><span class="line">      <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp;<span class="selector-class">.current</span> &#123;</span><br><span class="line">      <span class="selector-tag">a</span> &#123;</span><br><span class="line">        <span class="attribute">color</span>: <span class="built_in">var</span>(--accent-color);</span><br><span class="line">        <span class="attribute">font-weight</span>: bold;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*手机模式下的菜单滚动条美化*/</span></span><br><span class="line"><span class="selector-class">.menu</span>::-webkit-scrollbar &#123;</span><br><span class="line">  <span class="attribute">display</span>: none; <span class="comment">//防止大屏幕时出现滚动条</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.sidebar</span> <span class="selector-tag">header</span> <span class="selector-class">.site-name</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">2rem</span>; <span class="comment">//字体大小</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="article-beautification"></a></p><h2 id="📝-文章内容美化">📝 文章内容美化</h2><p><a id="basic-article-styling"></a></p><h3 id="✨-文章内容基本美化">✨ 文章内容基本美化</h3><ul><li>✨ <strong>功能</strong>：优化文章内代码块、图片、引用等元素的显示效果</li><li>📌 <strong>位置</strong>：在 <code>./assets/scss/custom.scss</code> 中加入以下代码：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//------------------------------------------------</span></span><br><span class="line"><span class="comment">// 文章内容引用块样式</span></span><br><span class="line"><span class="selector-class">.article-content</span> &#123;</span><br><span class="line">  <span class="selector-tag">blockquote</span> &#123;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">6px</span> solid <span class="number">#358b9a1f</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#3a97431f</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ---------------------------------------</span></span><br><span class="line"><span class="comment">// 代码块基础样式修改</span></span><br><span class="line"><span class="selector-class">.highlight</span> &#123;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">102%</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--pre-background-color);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="built_in">var</span>(--card-padding);</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">7px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: -<span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--shadow-l1) <span class="meta">!important</span>;</span><br><span class="line"></span><br><span class="line">  &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="selector-class">.copyCodeButton</span> &#123;</span><br><span class="line">      <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// keep Codeblocks LTR</span></span><br><span class="line">  <span class="selector-attr">[dir=<span class="string">&quot;rtl&quot;</span>]</span> &amp; &#123;</span><br><span class="line">    <span class="attribute">direction</span>: ltr;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  pre &#123;</span><br><span class="line">    <span class="attribute">margin</span>: initial;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: auto;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//----------------------------------------------</span></span><br><span class="line"><span class="comment">// light模式下的代码块样式调整</span></span><br><span class="line"><span class="selector-attr">[data-scheme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-class">.article-content</span> <span class="selector-class">.highlight</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff9f3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-scheme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-class">.chroma</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff6f00</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff9f3cc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//---------------------------------------------------</span></span><br><span class="line"><span class="comment">// 文章内容图片圆角</span></span><br><span class="line"><span class="selector-class">.article-page</span> <span class="selector-class">.main-article</span> <span class="selector-class">.article-content</span> &#123;</span><br><span class="line">  <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">96%</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">height</span>: auto <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//-------------------------------------------</span></span><br><span class="line"><span class="comment">// 设置选中字体的区域背景颜色</span></span><br><span class="line"><span class="selector-pseudo">::selection</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#001572</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="selector-tag">text</span>-decoration: none;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--accent-color);</span><br><span class="line"></span><br><span class="line">  &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--accent-color-darker);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.link</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">800</span>; <span class="comment">/* 字体粗细为700（加粗） */</span></span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">2px</span>; <span class="comment">/* 内边距为左右各2px */</span></span><br><span class="line">    <span class="selector-tag">text</span>-decoration: none; <span class="comment">/* 取消默认的下划线 */</span></span><br><span class="line">    <span class="attribute">cursor</span>: pointer; <span class="comment">/* 鼠标指针为指针样式 */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 超链接默认颜色（明亮模式） */</span></span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#000000</span>; <span class="comment">/* 明亮模式下链接字体为黑色#000000 */</span></span><br><span class="line"></span><br><span class="line">    &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">        <span class="selector-tag">text</span>-decoration: underline;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">prefers-color-scheme</span>: dark) &#123;</span><br><span class="line">    <span class="selector-class">.link</span> &#123;</span><br><span class="line">        <span class="comment">/* 超链接默认颜色（暗色模式） */</span></span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#FFFFFF</span>; <span class="comment">/* 暗色模式下链接字体为白色#FFFFFF */</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//-------------------------------------------------</span></span><br><span class="line"><span class="comment">//文章封面高度更改</span></span><br><span class="line"><span class="selector-class">.article-list</span> <span class="selector-tag">article</span> <span class="selector-class">.article-image</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">150px</span>; <span class="comment">// 设置图片的高度为 150px</span></span><br><span class="line">  <span class="selector-tag">object</span>-fit: cover;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">@include</span> respond(md) &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">@include</span> respond(xl) &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">305px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//------------------------------------------------------</span></span><br><span class="line"><span class="comment">// 修复引用块内容窄页面显示问题</span></span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">word-break</span>: break-all;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">code</span> &#123;</span><br><span class="line">  <span class="attribute">word-break</span>: break-all;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="blockquote-styling"></a></p><h3 id="💬-MD-引用块样式">💬 MD 引用块样式</h3><ul><li>✨ <strong>功能</strong>：为Markdown引用块添加特殊样式，增强视觉效果</li><li>📌 <strong>位置</strong>：在 <code>./assets/scss/custom.scss</code> 中加入以下代码：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 文章内容引用块样式</span></span><br><span class="line"><span class="selector-class">.article-content</span> &#123;</span><br><span class="line">  <span class="selector-tag">blockquote</span> &#123;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">6px</span> solid <span class="number">#004b28</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#366e33</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="image-center"></a></p><h3 id="🖼️-使图床链接的图片居中">🖼️ 使图床链接的图片居中</h3><ul><li>✨ <strong>功能</strong>：让外部图床的图片也能像本地图片一样居中显示</li><li>📌 <strong>位置</strong>：在 <code>./assets/scss/partials/layout/article.scss</code> Line 256 处（同级任意位置）增加以下代码：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 图床链接的图片居中</span></span><br><span class="line"><span class="selector-tag">p</span> &gt; <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="word-count"></a></p><h3 id="📊-统计站点文章数量和字数">📊 统计站点文章数量和字数</h3><ul><li>✨ <strong>功能</strong>：在页脚显示博客总文章数和总字数统计</li><li>📌 <strong>位置</strong>：在<code>./layout/partials/footer/footer.html</code> 的 <code>&lt;section class=&quot;powerby&quot;&gt;</code> 里边，加入代码：</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; $articleCount := len .Site.RegularPages &#125;&#125;</span><br><span class="line">&#123;&#123; $totalWordCount := 0 &#125;&#125;</span><br><span class="line">&#123;&#123; range .Site.Pages &#125;&#125;</span><br><span class="line">&#123;&#123; $totalWordCount = add $totalWordCount .WordCount &#125;&#125;</span><br><span class="line">&#123;&#123; end &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>发布了 &#123;&#123; $articleCount &#125;&#125; 篇文章 | 共 &#123;&#123;$totalWordCount&#125;&#125; 字<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p><a id="homepage-articles"></a></p><h3 id="🏠-首页文章样式">🏠 首页文章样式</h3><ul><li>✨ <strong>功能</strong>：美化首页文章列表的显示效果，包括图片圆角和悬停动画</li><li>📌 <strong>位置</strong>：在 <code>./assets/scss/custom.scss</code> 加入代码：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*主页文章图片样式*/</span></span><br><span class="line"><span class="variable">$image-scale</span>: <span class="number">1.2</span>;</span><br><span class="line"><span class="selector-class">.article-list</span> <span class="selector-tag">article</span> <span class="selector-class">.article-image</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">150px</span>;</span><br><span class="line">  <span class="selector-tag">object</span>-fit: cover;</span><br><span class="line">  <span class="comment">//不同显示器（手机，小屏幕电脑，大屏幕电脑）显示的图片高度大小</span></span><br><span class="line">  <span class="keyword">@include</span> respond(sm) &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">305px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">@include</span> respond(md) &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">305px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">@include</span> respond(xl) &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">325px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*主页文章图片圆角*/</span></span><br><span class="line"><span class="selector-class">.article-list</span> <span class="selector-tag">article</span> &#123;</span><br><span class="line">  <span class="attr">--card-border-radius</span>: <span class="number">24px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*文章标签圆角*/</span></span><br><span class="line"><span class="selector-class">.article-category</span> <span class="selector-tag">a</span>, <span class="selector-class">.article-tags</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">11px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*鼠标移动到文章图片放大*/</span></span><br><span class="line"><span class="selector-class">.article-list</span> <span class="selector-tag">article</span> <span class="selector-class">.article-image</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden; <span class="comment">//不显示超出的部分</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.article-list</span> <span class="selector-tag">article</span> <span class="selector-class">.article-image</span> <span class="selector-tag">img</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="variable">$image-scale</span>); <span class="comment">//放大尺寸</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.article-list</span> <span class="selector-tag">article</span> <span class="selector-class">.article-image</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: transform <span class="number">0.85s</span> ease-in-out;<span class="comment">//持续时间</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="internal-images"></a></p><h3 id="🖼️-文章内部图片样式">🖼️ 文章内部图片样式</h3><ul><li>✨ <strong>功能</strong>：优化文章内部相关文章区域的图片显示效果</li><li>📌 <strong>位置</strong>：在 <code>./assets/scss/custom.scss</code> 加入代码：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*文章内部-页脚-相关文章图片圆角*/</span></span><br><span class="line"><span class="selector-class">.article-list--compact</span> <span class="selector-tag">article</span> <span class="selector-class">.article-image</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">17%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*文章内部-页脚-相关文章图片放大动画*/</span></span><br><span class="line"><span class="selector-class">.article-list--compact</span> <span class="selector-tag">article</span> &gt; <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: .<span class="number">6s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.article-list--compact</span> <span class="selector-tag">article</span> &gt; <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.03</span>, <span class="number">1.03</span>);</span><br><span class="line">  <span class="attribute">overflow</span>: visible;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="macos-codeblocks"></a></p><h3 id="💻-MacOS-风格代码块">💻 MacOS 风格代码块</h3><ul><li>✨ <strong>功能</strong>：为代码块添加MacOS风格顶部栏，增强视觉美感</li><li>📌 <strong>位置</strong>：在 <code>./assets/scss/custom.scss</code> 中加入以下代码：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MacOS 风格代码块</span></span><br><span class="line"><span class="selector-class">.article-content</span> &#123;</span><br><span class="line">  <span class="selector-class">.highlight</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(/code-header.svg);</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">32px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">57px</span>;</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">background-position</span>: -<span class="number">1px</span> <span class="number">2px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// light模式下的代码块样式调整</span></span><br><span class="line"><span class="selector-attr">[data-scheme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-class">.article-content</span> <span class="selector-class">.highlight</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fdf4eb</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-scheme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-class">.chroma</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff6f00</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fcf0e4cc</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>📌 <strong>位置</strong>：在 <code>./static</code> 文件夹下新建 <code>code-header.svg</code>写入以下代码：</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span>  <span class="attr">x</span>=<span class="string">&quot;0px&quot;</span> <span class="attr">y</span>=<span class="string">&quot;0px&quot;</span> <span class="attr">width</span>=<span class="string">&quot;470px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;130px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">cx</span>=<span class="string">&quot;65&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;65&quot;</span> <span class="attr">rx</span>=<span class="string">&quot;50&quot;</span> <span class="attr">ry</span>=<span class="string">&quot;52&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;rgb(220,60,54)&quot;</span> <span class="attr">stroke-width</span>=<span class="string">&quot;2&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;rgb(237,108,96)&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">cx</span>=<span class="string">&quot;225&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;65&quot;</span> <span class="attr">rx</span>=<span class="string">&quot;50&quot;</span> <span class="attr">ry</span>=<span class="string">&quot;52&quot;</span>  <span class="attr">stroke</span>=<span class="string">&quot;rgb(218,151,33)&quot;</span> <span class="attr">stroke-width</span>=<span class="string">&quot;2&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;rgb(247,193,81)&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">cx</span>=<span class="string">&quot;385&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;65&quot;</span> <span class="attr">rx</span>=<span class="string">&quot;50&quot;</span> <span class="attr">ry</span>=<span class="string">&quot;52&quot;</span>  <span class="attr">stroke</span>=<span class="string">&quot;rgb(27,161,37)&quot;</span> <span class="attr">stroke-width</span>=<span class="string">&quot;2&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;rgb(100,200,86)&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><p><a id="codeblock-styling"></a></p><h3 id="🔧-修改代码块样式">🔧 修改代码块样式</h3><ul><li>✨ <strong>功能</strong>：调整代码块的边距、圆角和复制按钮位置</li><li>📌 <strong>位置</strong>：修改 <code>.\assets\scss\partials\layout\article.scss,</code>在文件尾添加：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// --------------------代码块样式------------------------</span></span><br><span class="line"><span class="comment">// * 修改边距</span></span><br><span class="line"><span class="comment">// * 背景框添加圆角</span></span><br><span class="line"><span class="comment">// * 调整 copy 按钮位置</span></span><br><span class="line"><span class="selector-class">.highlight</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">100%</span>);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="built_in">var</span>(--card-border-radius);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.copyCodeButton</span> &#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">6px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="syntax-highlighting"></a></p><h3 id="🎯-代码块高亮">🎯 代码块高亮</h3><ul><li>✨ <strong>功能</strong>：配置代码语法高亮样式，支持行号显示</li><li>📌 <strong>位置</strong>：在 <code>hugo.yaml</code> 中，添加 <code>highlight</code> 参数：</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">markup:</span></span><br><span class="line">    <span class="attr">highlight:</span></span><br><span class="line">        <span class="attr">noClasses:</span> <span class="literal">false</span></span><br><span class="line">        <span class="attr">codeFences:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">guessSyntax:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">lineNoStart:</span> <span class="number">1</span></span><br><span class="line">        <span class="attr">lineNos:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">lineNumbersInTable:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">tabWidth:</span> <span class="number">4</span></span><br><span class="line">        <span class="attr">style:</span> <span class="string">github-dark</span></span><br></pre></td></tr></table></figure><p><a id="hide-language"></a></p><h3 id="🚫-关闭代码块语言显示">🚫 关闭代码块语言显示</h3><ul><li>✨ <strong>功能</strong>：隐藏代码块顶部的语言标识</li><li>📌 <strong>位置</strong>：在 <code>./assets/scss/custom.scss</code> 中加入以下代码：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 关闭代码块语言显示</span></span><br><span class="line"><span class="selector-class">.languageCodeButton</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="external-links"></a></p><h3 id="🔗-外部链接后面显示图标">🔗 外部链接后面显示图标</h3><ul><li>✨ <strong>功能</strong>：为外部链接添加图标标识，提示用户这是外部链接</li><li>📌 <strong>位置</strong>：创建<code>./layouts/_default/_markup/render-link.html</code>文件之后增加如下代码:</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; .Destination | safeURL &#125;&#125;&quot;</span> &#123;&#123; <span class="attr">with</span> <span class="attr">.Title</span> &#125;&#125; <span class="attr">title</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span> &#123;&#123; <span class="attr">end</span> &#125;&#125; &#123;&#123; <span class="attr">if</span> <span class="attr">strings.HasPrefix</span> <span class="attr">.Destination</span> &quot;<span class="attr">http</span>&quot; &#125;&#125; <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;noopener&quot;</span> &#123;&#123; <span class="attr">end</span> &#125;&#125;&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;display: inline-flex; align-items: center; gap: 0.5em;&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; .Text | safeHTML &#125;&#125;</span><br><span class="line">        &#123;&#123; if strings.HasPrefix .Destination &quot;http&quot; &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">svg</span> <span class="attr">width</span>=<span class="string">&quot;.7em&quot;</span> <span class="attr">height</span>=<span class="string">&quot;.7em&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 21 21&quot;</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;currentColor&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;currentColor&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">        &#123;&#123; end &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p><a id="copy-buttons"></a></p><h3 id="📋-语言和复制按钮">📋 语言和复制按钮</h3><ul><li>✨ <strong>功能</strong>：改进代码块的语言标识和复制按钮的显示方式</li><li>📌 <strong>位置</strong>：在 <code>./assets/ts/main.ts</code> 中，第 66 行开始，改成以下代码</li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> highlights = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.article-content div.highlight&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> copyText = <span class="string">`📄拷贝`</span>,</span><br><span class="line">    copiedText = <span class="string">`已拷贝!`</span>;</span><br><span class="line"></span><br><span class="line">highlights.<span class="title function_">forEach</span>(<span class="function">(<span class="params">highlight</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> copyButton = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;button&quot;</span>);</span><br><span class="line">    copyButton.<span class="property">innerHTML</span> = copyText;</span><br><span class="line">    copyButton.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;copyCodeButton&quot;</span>);</span><br><span class="line">    highlight.<span class="title function_">appendChild</span>(copyButton);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> codeBlock = highlight.<span class="title function_">querySelector</span>(<span class="string">&quot;code[data-lang]&quot;</span>);</span><br><span class="line">    <span class="comment">// 获取语言</span></span><br><span class="line">    <span class="keyword">const</span> lang = codeBlock.<span class="title function_">getAttribute</span>(<span class="string">&quot;data-lang&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (!codeBlock) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    copyButton.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        navigator.<span class="property">clipboard</span></span><br><span class="line">            .<span class="title function_">writeText</span>(codeBlock.<span class="property">textContent</span>)</span><br><span class="line">            .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                copyButton.<span class="property">textContent</span> = copiedText;</span><br><span class="line"></span><br><span class="line">                <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    copyButton.<span class="property">textContent</span> = copyText;</span><br><span class="line">                &#125;, <span class="number">1000</span>);</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">alert</span>(err);</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Something went wrong&quot;</span>, err);</span><br><span class="line">            &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Add language code button</span></span><br><span class="line">    <span class="keyword">const</span> languageButton = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;button&quot;</span>);</span><br><span class="line">    languageButton.<span class="property">innerHTML</span> = lang.<span class="title function_">toUpperCase</span>() + <span class="string">&quot;&amp;nbsp;&amp;nbsp;&quot;</span>;</span><br><span class="line">    languageButton.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;languageCodeButton&quot;</span>);</span><br><span class="line"></span><br><span class="line">    highlight.<span class="title function_">appendChild</span>(languageButton);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">StackColorScheme</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;dark-mode-toggle&quot;</span>));</span><br></pre></td></tr></table></figure><ul><li>📌 <strong>位置</strong>：在 <code>./assets/scss/custom.scss</code> 中加入以下代码调整按钮位置：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 复制按钮样式调整 */</span></span><br><span class="line"><span class="selector-class">.article-content</span> <span class="selector-class">.copyCodeButton</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffffff</span>; </span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#3d3c3c</span>; </span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#333</span>; </span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">500</span>;</span><br><span class="line">  <span class="selector-tag">text</span>-shadow: <span class="number">0</span> <span class="number">0</span> <span class="number">1px</span> <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.5</span>); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 注释语言代码框 */</span></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">.article-content .languageCodeButton &#123;</span></span><br><span class="line"><span class="comment">  position: absolute;</span></span><br><span class="line"><span class="comment">  top: 9px;</span></span><br><span class="line"><span class="comment">  right: 100px; </span></span><br><span class="line"><span class="comment">  border-radius: 12px;</span></span><br><span class="line"><span class="comment">  color: #000; </span></span><br><span class="line"><span class="comment">  background: #ffff00; </span></span><br><span class="line"><span class="comment">  border: 1px solid #333; </span></span><br><span class="line"><span class="comment">  padding: 5px 10px;</span></span><br><span class="line"><span class="comment">  font-family: lato;</span></span><br><span class="line"><span class="comment">  font-size: 1.5rem;</span></span><br><span class="line"><span class="comment">  text-shadow: 0 0 1px rgba(255, 255, 255, 0.5); </span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.article-content</span> <span class="selector-class">.copyCodeButton</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#ffa500</span>; </span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#000</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="sidebar-beautification"></a></p><h2 id="📌-侧边栏美化">📌 侧边栏美化</h2><p><a id="sidebar-width"></a></p><h3 id="📏-页面左右边栏宽度">📏 页面左右边栏宽度</h3><ul><li>✨ <strong>功能</strong>：调整左右侧边栏的宽度比例，优化阅读体验</li><li>📌 <strong>位置</strong>：在 <code>/themes/hugo-theme-stack/assets/scss/grid.scss</code> 的第 29、30 行，修改为:</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">--left-sidebar-max-width</span>: <span class="number">14%</span>;</span><br><span class="line"><span class="attr">--right-sidebar-max-width</span>: <span class="number">22%</span>;</span><br></pre></td></tr></table></figure><p><a id="right-sidebar-animation"></a></p><h3 id="🎭-右侧导航栏动画">🎭 右侧导航栏动画</h3><ul><li>✨ <strong>功能</strong>：为右侧边栏元素添加悬停动画效果</li><li>📌 <strong>位置</strong>：在 <code>./assets/scss/custom.scss</code> 中加入以下代码：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//------------------------------------------------------</span></span><br><span class="line"><span class="comment">//归档小图标放大动画</span></span><br><span class="line"><span class="selector-class">.widget</span><span class="selector-class">.archives</span> <span class="selector-class">.widget-archive--list</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: transform .<span class="number">3s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.widget</span><span class="selector-class">.archives</span> <span class="selector-class">.widget-archive--list</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.05</span>, <span class="number">1.05</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//------------------------------------------------------</span></span><br><span class="line"><span class="comment">//右侧标签放大动画</span></span><br><span class="line"><span class="selector-class">.tagCloud</span> <span class="selector-class">.tagCloud-tags</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.4rem</span>;</span><br><span class="line">  <span class="attribute">transition</span>: transform .<span class="number">3s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tagCloud</span> <span class="selector-class">.tagCloud-tags</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>, <span class="number">1.1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="left-sidebar-styling"></a></p><h3 id="🎨-左侧导航栏美化">🎨 左侧导航栏美化</h3><ul><li>✨ <strong>功能</strong>：美化左侧边栏的头像、社交图标等元素</li><li>📌 <strong>位置</strong>：在 <code>./assets/scss/custom.scss</code> 加入代码：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*--------------------左侧导航栏---------------*/</span></span><br><span class="line"><span class="selector-class">.left-sidebar</span> &#123;</span><br><span class="line">  <span class="attr">--sidebar-avatar-size</span>: <span class="number">115px</span>; <span class="comment">//左侧头像大小</span></span><br><span class="line">  <span class="attr">--sidebar-element-separation</span>: <span class="number">15px</span>; <span class="comment">//头像下方间距</span></span><br><span class="line">  <span class="attr">--emoji-size</span>: <span class="number">40px</span>; <span class="comment">//emoji容器大小</span></span><br><span class="line">  <span class="attr">--emoji-font-size</span>: <span class="number">25px</span>; <span class="comment">//emoji字体大小</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*社交菜单居中*/</span></span><br><span class="line"><span class="selector-class">.social-menu</span> <span class="selector-tag">svg</span> &#123;</span><br><span class="line">  <span class="attribute">gap</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>; <span class="comment">//社交菜单大小</span></span><br><span class="line">  <span class="attribute">stroke</span>: <span class="built_in">var</span>(--body-text-color);</span><br><span class="line">  <span class="attribute">stroke-width</span>: <span class="number">1.33</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="left-sidebar-animation"></a></p><h3 id="✨-左侧导航栏动画">✨ 左侧导航栏动画</h3><ul><li>✨ <strong>功能</strong>：为左侧菜单项添加悬停动画效果</li><li>📌 <strong>位置</strong>：在 <code>./assets/scss/custom.scss</code> 中加入以下代码：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//------------------------------------------------------</span></span><br><span class="line"><span class="comment">/* 左侧栏选项动画 */</span></span><br><span class="line"><span class="selector-id">#main-menu</span> &#123;</span><br><span class="line">    <span class="attribute">overflow</span>: visible;</span><br><span class="line">    <span class="selector-tag">li</span> &#123;</span><br><span class="line">        <span class="selector-tag">a</span> &#123;</span><br><span class="line">            -webkit-<span class="attribute">font-smoothing</span>: antialiased;</span><br><span class="line">            <span class="attribute">will-change</span>: transform;</span><br><span class="line">            <span class="attribute">transition</span>: transform <span class="number">0.6s</span> ease;</span><br><span class="line">            &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">                <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>, <span class="number">1.1</span>);</span><br><span class="line">                <span class="attribute">will-change</span>: transform;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 归档和链接卡片动画 */</span></span><br><span class="line"><span class="selector-class">.article-list--compact</span> &#123;</span><br><span class="line">    <span class="attribute">overflow</span>: visible;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.article-list--compact</span> <span class="selector-tag">article</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: transform <span class="number">0.6s</span> ease;</span><br><span class="line">    -webkit-<span class="attribute">font-smoothing</span>: antialiased;</span><br><span class="line">    <span class="attribute">will-change</span>: transform;</span><br><span class="line">    </span><br><span class="line">    &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.05</span>,<span class="number">1.05</span>);</span><br><span class="line">        <span class="attribute">z-index</span>: <span class="number">4</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 分类页面动画 */</span></span><br><span class="line"><span class="selector-class">.article-list--tile</span> <span class="selector-tag">article</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.6s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.article-list--tile</span> <span class="selector-tag">article</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.05</span>, <span class="number">1.05</span>);</span><br><span class="line">  <span class="attribute">will-change</span>: transform;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="social-icons"></a></p><h3 id="🤝-社交-social">🤝 社交 social</h3><ul><li>✨ <strong>功能</strong>：自定义社交图标并添加旋转动画效果</li><li>📌 <strong>说明</strong>：自定义图标，iconfont 下载，颜色 #2c3e50，大小 24，格式 svg。下载后放到 <code>.\assets\icons</code></li><li>📌 <strong>说明</strong>：本主题自带了一些来自【<a href="https://tabler.io/icons">Tabler Icons</a>】的 SVG 图标。您可以在主题文件夹下找到它们 <code>.\assets\icons</code></li><li>💡 <strong>提示</strong>：将下载的 img 中的 svg 的所有 #2c3e50 改成 <code>currentColor</code>，否则切换为黑色模式，图标颜色不能自动切换，因为优先使用内部定义的 color</li><li>📌 <strong>位置</strong>：修改 hugo 主配置文件，修改下面的内容：</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">    <span class="attr">main:</span> [] <span class="comment"># 主菜单</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">social:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">identifier:</span> <span class="string">bilibili</span> <span class="comment"># 标识符</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">Bilibili</span> <span class="comment"># 显示名称</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">https://space.bilibili.com/35158479</span> <span class="comment"># 链接地址</span></span><br><span class="line">          <span class="attr">weight:</span> <span class="number">100</span> <span class="comment"># 项目的优先级，值越低，优先级越高。</span></span><br><span class="line">          <span class="attr">params:</span></span><br><span class="line">              <span class="attr">icon:</span> <span class="string">brand-bilibili</span> <span class="comment"># 图标名称</span></span><br><span class="line">              <span class="attr">newTab:</span> <span class="literal">true</span> <span class="comment"># 新标签页中打开此链接</span></span><br><span class="line"></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">identifier:</span> <span class="string">github</span> <span class="comment"># 标识符</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">GitHub</span> <span class="comment"># 显示名称</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">https://github.com/meimolihan</span> <span class="comment"># 链接地址</span></span><br><span class="line">          <span class="attr">weight:</span> <span class="number">200</span> <span class="comment"># 项目的优先级，值越低，优先级越高。</span></span><br><span class="line">          <span class="attr">params:</span></span><br><span class="line">              <span class="attr">icon:</span> <span class="string">brand-github</span> <span class="comment"># 图标名称</span></span><br><span class="line">              <span class="attr">newTab:</span> <span class="literal">true</span> <span class="comment"># 新标签页中打开此链接</span></span><br><span class="line"></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">identifier:</span> <span class="string">rss</span> <span class="comment"># 标识符</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">RSS</span> <span class="comment"># 显示名称</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">https://meimolihan.github.io/index.xml</span> <span class="comment"># 链接地址</span></span><br><span class="line">          <span class="attr">weight:</span> <span class="number">300</span> <span class="comment"># 项目的优先级，值越低，优先级越高。</span></span><br><span class="line">          <span class="attr">params:</span></span><br><span class="line">              <span class="attr">icon:</span> <span class="string">brand-rss</span> <span class="comment"># 图标名称</span></span><br><span class="line">              <span class="attr">newTab:</span> <span class="literal">true</span> <span class="comment"># 新标签页中打开此链接</span></span><br></pre></td></tr></table></figure><ul><li>📌 <strong>位置</strong>：图标360度旋转动画<code>.\assets\scss\custom.scss</code>追加以下代码：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.icon-tabler-brand-bilibili</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: transform <span class="number">1s</span> ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 鼠标悬停时让 SVG 图标旋转 360 度 */</span></span><br><span class="line"><span class="selector-class">.icon-tabler-brand-bilibili</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon-tabler-brand-github</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: transform <span class="number">1s</span> ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 鼠标悬停时让 SVG 图标旋转 360 度 */</span></span><br><span class="line"><span class="selector-class">.icon-tabler-brand-github</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon-tabler-rss</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: transform <span class="number">1s</span> ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 鼠标悬停时让 SVG 图标旋转 360 度 */</span></span><br><span class="line"><span class="selector-class">.icon-tabler-rss</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="dark-mode-toggle"></a></p><h3 id="🌓-明亮模式调整位置">🌓 明亮模式调整位置</h3><ul><li>✨ <strong>功能</strong>：调整明暗模式切换按钮的位置</li><li>📌 <strong>位置</strong>：在 <code>./assets/scss/custom.scss</code> 中加入以下代码：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 明暗模式切换按钮，调整位置</span></span><br><span class="line"><span class="selector-id">#dark-mode-toggle</span> &#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">100px</span>; <span class="comment">// 明暗模式，上下高度</span></span><br><span class="line">    <span class="comment">// margin-left: 10px;  // 明暗模式，左右调节</span></span><br><span class="line">    <span class="attribute">gap</span>: <span class="number">30px</span>; <span class="comment">// 明暗模式，横向宽度</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="manual-sidebar"></a></p><h3 id="⚙️-手动修改左右侧边栏设置样式">⚙️ 手动修改左右侧边栏设置样式</h3><ul><li>✨ <strong>功能</strong>：手动精确控制左右侧边栏的宽度比例</li><li>📌 <strong>位置</strong>：在 <code>/assets/scss/grid.scss</code> 中修改 <code>left-sidebar</code> 和 <code>right-sidebar</code> 的描述：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 为左右侧边栏设置样式，将左侧边栏的排列顺序设为 -3 并将最大宽度设为父容器的 10%，右侧边栏排列顺序设为 -1 且最大宽度为父容器的 20%，同时利用自定义响应式混合器，使右侧边栏在屏幕达到特定大尺寸（对应 lg）时以弹性布局显示。</span></span><br><span class="line">    <span class="selector-class">.left-sidebar</span> &#123;</span><br><span class="line">        <span class="attribute">order</span>: -<span class="number">3</span>;</span><br><span class="line">        <span class="comment">// max-width: var(--left-sidebar-max-width);</span></span><br><span class="line">        <span class="attribute">max-width</span>: <span class="number">10%</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.right-sidebar</span> &#123;</span><br><span class="line">        <span class="attribute">order</span>: -<span class="number">1</span>;</span><br><span class="line">        <span class="comment">// max-width: var(--right-sidebar-max-width);</span></span><br><span class="line">        <span class="attribute">max-width</span>: <span class="number">20%</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/// Display right sidebar when min-width: lg</span></span><br><span class="line">        <span class="keyword">@include</span> respond(lg) &#123;</span><br><span class="line">            <span class="attribute">display</span>: flex;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>把正文的占比改到了 70%, 原来的只有 50% 左右</p><p><a id="avatar-rotation"></a></p><h3 id="🔄-头像旋转">🔄 头像旋转</h3><ul><li>✨ <strong>功能</strong>：为博客头像添加旋转动画效果</li><li>📌 <strong>位置</strong>：在 <code>./assets/scss/custom.scss</code> 中加入以下代码：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ----------头像旋转动画--------------</span></span><br><span class="line"><span class="selector-class">.sidebar</span> <span class="selector-tag">header</span> <span class="selector-class">.site-avatar</span> <span class="selector-class">.site-logo</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: transform <span class="number">1.65s</span> ease-in-out; <span class="comment">// 旋转时间</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.sidebar</span> <span class="selector-tag">header</span> <span class="selector-class">.site-avatar</span> <span class="selector-class">.site-logo</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>); <span class="comment">// 旋转角度为360度</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="three-column-layout"></a></p><h3 id="📂-友情链接-分类-标签-归档【三栏显示】">📂 友情链接+分类+标签+归档【三栏显示】</h3><ul><li>✨ <strong>功能</strong>：将友情链接、分类、标签和归档以三栏网格布局显示</li><li>📌 <strong>位置</strong>：在 <code>./assets/scss/custom.scss</code> 中加入以下代码：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//------------------------------------------------------</span></span><br><span class="line"><span class="comment">// 友情链接+分类+标签+归档【三栏显示】</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">min-width</span>: <span class="number">1024px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.article-list--compact</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    <span class="comment">// 目前是三列，如需二列，则后面减去一个1fr，以此类推</span></span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">1</span>fr <span class="number">1</span>fr;</span><br><span class="line">    <span class="attribute">background</span>: none;</span><br><span class="line">    <span class="attribute">box-shadow</span>: none;</span><br><span class="line">    <span class="attribute">gap</span>: <span class="number">1rem</span>;</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">article</span> &#123;</span><br><span class="line">      <span class="attribute">background</span>: <span class="built_in">var</span>(--card-background);</span><br><span class="line">      <span class="attribute">border</span>: none;</span><br><span class="line">      <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--shadow-l2);</span><br><span class="line">      <span class="attribute">margin-bottom</span>: <span class="number">8px</span>;</span><br><span class="line">      <span class="attribute">margin-right</span>: <span class="number">8px</span>;</span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">16px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="archive-cards"></a></p><h3 id="📦-缩小归档页的分类卡片尺寸">📦 缩小归档页的分类卡片尺寸</h3><ul><li>✨ <strong>功能</strong>：调整归档页面分类卡片的尺寸，使其更加紧凑</li><li>📌 <strong>位置</strong>：在 <code>./assets/scss/partials/layout/list.scss</code>中加入以下代码：(并修改)</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//---------------缩小归档页的分类卡片尺寸---------------</span></span><br><span class="line"><span class="selector-class">.subsection-list</span> &#123;</span><br><span class="line">    <span class="attribute">overflow-x</span>: auto;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.article-list--tile</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">padding-bottom</span>: <span class="number">0px</span>;</span><br><span class="line"></span><br><span class="line">        <span class="selector-tag">article</span> &#123;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">230px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">120px</span>;</span><br><span class="line">            <span class="attribute">margin-right</span>: <span class="number">5px</span>;</span><br><span class="line">            <span class="attribute">flex-shrink</span>: <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="selector-class">.article-title</span> &#123;</span><br><span class="line">                <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">                <span class="attribute">font-size</span>: <span class="number">1.8rem</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="selector-class">.article-details</span> &#123;</span><br><span class="line">                <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="toc-spacing"></a></p><h3 id="📋-调整-TOC-目录间距">📋 调整 TOC 目录间距</h3><ul><li>✨ <strong>功能</strong>：优化目录显示的间距和样式，提高可读性</li><li>📌 <strong>位置</strong>：在 <code>./assets/scss/custom.scss</code> 中加入以下代码：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ----------------调整 TOC 目录间距------------------</span></span><br><span class="line"><span class="comment">// 主要解决了几个问题：</span></span><br><span class="line"><span class="comment">// 目录太高了，使得之前添加的返回顶部按钮可能会被顶出屏幕；</span></span><br><span class="line"><span class="comment">// 目录项前面的小黑点不太好看，隐去；</span></span><br><span class="line"><span class="comment">// 目录项之间的距离不够紧凑。</span></span><br><span class="line"><span class="selector-class">.widget--toc</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--card-background);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="built_in">var</span>(--card-border-radius);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--shadow-l2); <span class="comment">//修改阴影样式</span></span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--card-text-color-main);</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">display</span>:inline-block; <span class="comment">//根据内容调整宽度</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-id">#TableOfContents</span> &#123;</span><br><span class="line">      <span class="attribute">max-height</span>: <span class="number">65vh</span>;</span><br><span class="line"></span><br><span class="line">      <span class="selector-tag">ol</span>,</span><br><span class="line">      <span class="selector-tag">ul</span> &#123;</span><br><span class="line">          <span class="attribute">list-style-type</span>: none;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="selector-tag">li</span> &#123;</span><br><span class="line">          <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">10px</span>;</span><br><span class="line"></span><br><span class="line">          &amp; &gt; <span class="selector-tag">ol</span>,</span><br><span class="line">          &amp; &gt; <span class="selector-tag">ul</span> &#123;</span><br><span class="line">              <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">              <span class="attribute">padding-left</span>: <span class="number">10px</span>;</span><br><span class="line">              <span class="attribute">margin-bottom</span>: -<span class="number">5px</span>;</span><br><span class="line"></span><br><span class="line">              &amp; &gt; <span class="selector-tag">li</span><span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line">                  <span class="attribute">margin-bottom</span>: <span class="number">0</span>;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp; &gt; <span class="selector-tag">ul</span> &#123;</span><br><span class="line">          <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">1em</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="selector-tag">li</span> &#123;</span><br><span class="line">          <span class="attribute">margin</span>: <span class="number">5px</span> <span class="number">20px</span>; <span class="comment">//第一个参数是行间距，第二个是卡片周边的宽度</span></span><br><span class="line">          </span><br><span class="line">          <span class="attribute">padding</span>: <span class="number">6px</span>; <span class="comment">//控制内边距</span></span><br><span class="line"></span><br><span class="line">          &amp; &gt; <span class="selector-tag">ol</span>,</span><br><span class="line">          &amp; &gt; <span class="selector-tag">ul</span> &#123;</span><br><span class="line">              <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">              <span class="attribute">padding-left</span>: <span class="number">10px</span>;</span><br><span class="line">              <span class="attribute">margin-bottom</span>: -<span class="number">5px</span>;</span><br><span class="line"></span><br><span class="line">              &amp; &gt; <span class="selector-tag">li</span><span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line">                  <span class="attribute">margin-bottom</span>: <span class="number">0</span>;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="link-hover"></a></p><h3 id="🔍-鼠标悬停超链接的显示">🔍 鼠标悬停超链接的显示</h3><ul><li>✨ <strong>功能</strong>：为超链接添加悬停高亮效果，增强交互体验</li><li>📌 <strong>位置</strong>：在 <code>./assets/scss/custom.scss</code> 中加入以下代码：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ---------------------鼠标悬停，超链接的显示-------------------</span></span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="selector-tag">text</span>-decoration: none;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--accent-color);</span><br><span class="line"></span><br><span class="line">  &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--accent-color-darker);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;<span class="selector-class">.link</span> &#123;</span><br><span class="line">    <span class="comment">// 鼠标未悬停时，超链接显示2px的高亮</span></span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0px</span> -<span class="number">2px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="built_in">var</span>(--link-background-color), <span class="built_in">var</span>(--link-background-opacity-hover)) inset;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease;</span><br><span class="line"></span><br><span class="line">    &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">      <span class="comment">// 鼠标悬停，高亮为18px</span></span><br><span class="line">      <span class="attribute">box-shadow</span>: <span class="number">0px</span> -<span class="number">18px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="built_in">var</span>(--link-background-color), <span class="built_in">var</span>(--link-background-opacity-hover)) inset;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="other-widgets"></a></p><h2 id="🔧-其它小部件">🔧 其它小部件</h2><p><a id="site-stats"></a></p><h3 id="📈-添加站点统计信息与-i18n">📈 添加站点统计信息与 i18n</h3><ul><li><p>✨ <strong>功能</strong>：在页脚显示博客运行时间、文章统计和访问量数据，支持多语言</p></li><li><p>📌 <strong>展示格式</strong>：</p><ul><li>本博客已稳定运行 x 天 y 小时 z 分钟</li><li>共发表 x 篇文章・总计 y k 字</li><li>本站总访问量 x 次</li></ul></li><li><p>📌 <strong>位置</strong>：在根目录<code>./layouts/partials/footer/footer.html</code> 文件内添加如下代码:</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;count_info&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            &#123;&#123; T &quot;footer.runtime1&quot; &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;ds&quot;</span> <span class="attr">class</span>=<span class="string">&quot;running-days&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            &#123;&#123; T &quot;footer.runtime2&quot; &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;hs&quot;</span> <span class="attr">class</span>=<span class="string">&quot;running-days&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            &#123;&#123; T &quot;footer.runtime3&quot; &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;ms&quot;</span> <span class="attr">class</span>=<span class="string">&quot;running-days&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            &#123;&#123; T &quot;footer.runtime4&quot; &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            &#123;&#123;$scratch := newScratch&#125;&#125;</span><br><span class="line">            &#123;&#123; range (where .Site.Pages &quot;Kind&quot; &quot;page&quot; )&#125;&#125;</span><br><span class="line">            &#123;&#123;$scratch.Add &quot;total&quot; .WordCount&#125;&#125;</span><br><span class="line">            &#123;&#123; end &#125;&#125;</span><br><span class="line">            &#123;&#123; T &quot;footer.count1&quot; &#125;&#125; &#123;&#123; len (where .Site.RegularPages &quot;Section&quot; &quot;post&quot;) &#125;&#125; &#123;&#123; T &quot;footer.count2&quot; &#125;&#125; &#123;&#123; div ($scratch.Get &quot;total&quot;) 1000.0 | lang.FormatNumber 2 &#125;&#125; k &#123;&#123; T &quot;footer.count3&quot; &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;busuanzi_container_site_pv&quot;</span>&gt;</span>&#123;&#123; T &quot;footer.pv1&quot; &#125;&#125;<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;busuanzi_value_site_pv&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>&#123;&#123; T &quot;footer.pv2&quot; &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Add blog running time --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> s1 = <span class="string">&#x27;2023-6-18&#x27;</span>; <span class="comment">//website start date</span></span></span><br><span class="line"><span class="language-javascript">    s1 = <span class="keyword">new</span> <span class="title class_">Date</span>(s1.<span class="title function_">replace</span>(<span class="regexp">/-/g</span>, <span class="string">&quot;/&quot;</span>));</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> s2 = <span class="keyword">new</span> <span class="title class_">Date</span>();</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> timeDifference = s2.<span class="title function_">getTime</span>() - s1.<span class="title function_">getTime</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> days = <span class="title class_">Math</span>.<span class="title function_">floor</span>(timeDifference / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>));</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> hours = <span class="title class_">Math</span>.<span class="title function_">floor</span>((timeDifference % (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>)) / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>));</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> minutes = <span class="title class_">Math</span>.<span class="title function_">floor</span>((timeDifference % (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>)) / (<span class="number">1000</span> * <span class="number">60</span>));</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;ds&#x27;</span>).<span class="property">innerHTML</span> = days;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;hs&#x27;</span>).<span class="property">innerHTML</span> = hours;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;ms&#x27;</span>).<span class="property">innerHTML</span> = minutes;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>📌 <strong>位置</strong>：在主题目录<code>/i18n/zh-cn.yaml</code> 下找到对应语言的文件，在属性 footer 下添加相应字段，结果如下:</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line">    <span class="comment"># 本博客已稳定运行1天2小时3分钟</span></span><br><span class="line">    <span class="attr">runtime1:</span></span><br><span class="line">        <span class="attr">other:</span> <span class="string">本博客已稳定运行</span></span><br><span class="line">    <span class="attr">runtime2:</span></span><br><span class="line">        <span class="attr">other:</span> <span class="string">天</span></span><br><span class="line">    <span class="attr">runtime3:</span></span><br><span class="line">        <span class="attr">other:</span> <span class="string">小时</span></span><br><span class="line">    <span class="attr">runtime4:</span></span><br><span class="line">        <span class="attr">other:</span> <span class="string">分钟</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 共发表x篇文章，总计y k字</span></span><br><span class="line">    <span class="attr">count1:</span></span><br><span class="line">        <span class="attr">other:</span> <span class="string">共发表</span></span><br><span class="line">    <span class="attr">count2:</span></span><br><span class="line">        <span class="attr">other:</span> <span class="string">篇文章</span> <span class="string">·</span> <span class="string">总计</span></span><br><span class="line">    <span class="attr">count3:</span></span><br><span class="line">        <span class="attr">other:</span> <span class="string">字</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 本站总访问量X次</span></span><br><span class="line">    <span class="attr">pv1:</span></span><br><span class="line">        <span class="attr">other:</span> <span class="string">本站总访问量</span></span><br><span class="line">    <span class="attr">pv2:</span></span><br><span class="line">        <span class="attr">other:</span> <span class="string">次</span></span><br></pre></td></tr></table></figure><p><a id="visitor-map"></a></p><h3 id="🗺️-添加访客地图">🗺️ 添加访客地图</h3><ul><li>✨ <strong>功能</strong>：在右侧边栏添加访客地图，可视化显示访问来源</li><li>📌 <strong>位置</strong>：在根目录<code>./layouts/partials/sidebar/right.html</code> 添加后完整代码如下：</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;- $scope := default &quot;homepage&quot; .Scope -&#125;&#125;</span><br><span class="line">&#123;&#123;- $context := .Context -&#125;&#125;</span><br><span class="line">&#123;&#123;- with (index .Context.Site.Params.widgets $scope) -&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">aside</span> <span class="attr">class</span>=<span class="string">&quot;sidebar right-sidebar sticky&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; range $widget := . &#125;&#125;</span><br><span class="line">            &#123;&#123; if templates.Exists (printf &quot;partials/widget/%s.html&quot; .type) &#125;&#125;</span><br><span class="line">                &#123;&#123; partial (printf &quot;widget/%s&quot; .type) (dict &quot;Context&quot; $context &quot;Params&quot; .params) &#125;&#125;</span><br><span class="line">            &#123;&#123; else &#125;&#125;</span><br><span class="line">                &#123;&#123; warnf &quot;Widget %s not found&quot; .type &#125;&#125;</span><br><span class="line">            &#123;&#123; end &#125;&#125;</span><br><span class="line">        &#123;&#123; end &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;height: 30%;width: 30%&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">id</span>=<span class="string">&quot;clstr_globe&quot;</span> <span class="attr">src</span>=<span class="string">&quot;//clustrmaps.com/globe.js?d=xxxxx&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">&#123;&#123; end &#125;&#125;</span><br></pre></td></tr></table></figure><p><a id="custom-cursor"></a></p><h3 id="🖱️-鼠标样式">🖱️ 鼠标样式</h3><ul><li>✨ <strong>功能</strong>：自定义鼠标指针样式，增强博客个性化</li><li>📌 <strong>说明</strong>：准备好鼠标样式图片(默认，指针，文本…)，图片大小建议控制在 32px 左右，将.png图片放入<code>static/mouse</code>文件夹下(文件夹自己创建)<br>修改对应的图片名即可</li><li>📌 <strong>位置</strong>：修改<code>./assets/scss/custom.scss</code>(文件不存在则自己创建)，将以下代码复制进去，根据主题按实际情况填写对应的css选择器</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 【Stack主题鼠标样式写法】</span></span><br><span class="line"><span class="comment">// default光标图片</span></span><br><span class="line"><span class="selector-tag">body</span>,</span><br><span class="line"><span class="selector-tag">html</span>,</span><br><span class="line"><span class="selector-class">.article-content</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">cursor</span>: <span class="built_in">url</span>(../mouse/default.png),</span><br><span class="line">  auto <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// pointer光标图片</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-tag">button</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-class">.copyCodeButton</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-id">#dark-mode-toggle</span> &#123;</span><br><span class="line">  <span class="attribute">cursor</span>: <span class="built_in">url</span>(../mouse/pointer.png),</span><br><span class="line">  auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// text光标图片</span></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-class">.site-description</span>,</span><br><span class="line"><span class="selector-class">.article-subtitle</span>,</span><br><span class="line"><span class="selector-class">.article-content</span> <span class="selector-tag">span</span>,</span><br><span class="line"><span class="selector-class">.article-content</span> <span class="selector-tag">li</span>,</span><br><span class="line"><span class="selector-class">.article-content</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">cursor</span>: <span class="built_in">url</span>(../mouse/text.png),</span><br><span class="line">  auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*主页布局间距调整*/</span></span><br><span class="line"><span class="selector-class">.main-container</span> &#123;</span><br><span class="line">  <span class="attribute">gap</span>: <span class="number">50px</span>; <span class="comment">//文章宽度</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">@include</span> respond(md) &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">gap</span>: <span class="number">40px</span>; <span class="comment">//中等屏幕时的文章宽度</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.related-contents</span> &#123;</span><br><span class="line">  <span class="attribute">overflow-x</span>: visible; <span class="comment">//显示隐藏的图标</span></span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="welcome-banner"></a></p><h3 id="🎉-首页欢迎横幅">🎉 首页欢迎横幅</h3><ul><li>✨ <strong>功能</strong>：在首页顶部添加动态欢迎横幅，增强用户体验</li><li>📌 <strong>位置</strong>：在 <code>./layouts/index.html</code>的 <code>&lt;section class=&quot;article-list&quot;&gt;</code> 前添加以下代码：</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 首页欢迎字幅 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;welcome&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 2rem; text-align: center; font-weight: bold&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;shake&quot;</span>&gt;</span>👋<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;jump-text1&quot;</span> &gt;</span> Welcome<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;jump-text2&quot;</span>&gt;</span> To <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;jump-text3&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color:#e99312&quot;</span>&gt;</span>Xa<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;jump-text4&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color:#e99312&quot;</span>&gt;</span>l<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;jump-text5&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color:#e99312&quot;</span>&gt;</span>a<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;jump-text6&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color:#e99312&quot;</span>&gt;</span>o<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;jump-text7&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color:#e99312&quot;</span>&gt;</span>k<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;jump-text8&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color:#e99312&quot;</span>&gt;</span>&#x27;s<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;jump-text9&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color:#e99312&quot;</span>&gt;</span>Blog<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 首页欢迎字幅 --&gt;</span></span><br></pre></td></tr></table></figure><ul><li>📌 <strong>位置</strong>：在 <code>./assets/scss/custom.scss</code> 中加入以下代码：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ----------------首页欢迎板块样式----------------</span></span><br><span class="line"><span class="selector-class">.welcome</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--card-text-color-main);</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--card-background);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--shadow-l2);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 👋emoji实现摆动效果</span></span><br><span class="line"><span class="selector-class">.shake</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">animation</span>: shake <span class="number">1s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">1s</span>;</span><br><span class="line">  <span class="attribute">animation-timing-function</span>: ease;</span><br><span class="line">  <span class="attribute">animation-delay</span>: <span class="number">0s</span>;</span><br><span class="line">  <span class="attribute">animation-iteration-count</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">animation-direction</span>: normal;</span><br><span class="line">  <span class="attribute">animation-fill-mode</span>: none;</span><br><span class="line">  <span class="attribute">animation-play-state</span>: running;</span><br><span class="line">  <span class="attribute">animation-name</span>: shake;</span><br><span class="line">  <span class="attribute">animation-timeline</span>: auto;</span><br><span class="line">  <span class="attribute">animation-range-start</span>: normal;</span><br><span class="line">  <span class="attribute">animation-range-end</span>: normal;</span><br><span class="line">  <span class="attribute">animation-delay</span>: <span class="number">2s</span>;</span><br><span class="line">  <span class="keyword">@keyframes</span> shake &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">25%</span> &#123;</span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>) <span class="built_in">scale</span>(<span class="number">1.2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0</span>) <span class="built_in">scale</span>(<span class="number">1.2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">75%</span> &#123;</span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>) <span class="built_in">scale</span>(<span class="number">1.2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现字符跳动动画</span></span><br><span class="line"><span class="selector-class">.jump-text1</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">animation</span>: jump <span class="number">0.5s</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.jump-text2</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">animation</span>: jump <span class="number">0.5s</span> <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">animation-delay</span>: <span class="number">0.1s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.jump-text3</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">animation</span>: jump <span class="number">0.5s</span> <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">animation-delay</span>: <span class="number">0.2s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.jump-text4</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">animation</span>: jump <span class="number">0.5s</span> <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">animation-delay</span>: <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.jump-text5</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">animation</span>: jump <span class="number">0.5s</span> <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">animation-delay</span>: <span class="number">0.4s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.jump-text6</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">animation</span>: jump <span class="number">0.5s</span> <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">animation-delay</span>: <span class="number">0.5s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.jump-text7</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">animation</span>: jump <span class="number">0.5s</span> <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">animation-delay</span>: <span class="number">0.6s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.jump-text8</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">animation</span>: jump <span class="number">0.5s</span> <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">animation-delay</span>: <span class="number">0.7s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.jump-text9</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">animation</span>: jump <span class="number">0.5s</span> <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">animation-delay</span>: <span class="number">0.9s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> jump &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">20px</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a id="remove-footer"></a></p><h3 id="🗑️-删除-使用-Hugo-构建-主题Stack由Jimmy设计-等字样">🗑️ 删除&quot;使用 Hugo 构建 主题Stack由Jimmy设计&quot;等字样</h3><ul><li>✨ <strong>功能</strong>：移除页脚默认的版权信息，替换为自定义内容</li><li>📌 <strong>位置</strong>：删除掉<code>./layout/partials/footer/footer.html</code> 原先的代码，注意是 <section class="powerby"> 里边的</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;- $ThemeVersion := &quot;3.29.0&quot; -&#125;&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span> <span class="attr">class</span>=<span class="string">&quot;site-footer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;copyright&quot;</span>&gt;</span></span><br><span class="line">        <span class="symbol">&amp;copy;</span> </span><br><span class="line">        &#123;&#123; if and (.Site.Params.footer.since) (ne .Site.Params.footer.since (int (now.Format &quot;2006&quot;))) &#125;&#125;</span><br><span class="line">            &#123;&#123; .Site.Params.footer.since &#125;&#125; - </span><br><span class="line">        &#123;&#123; end &#125;&#125;</span><br><span class="line">        &#123;&#123; now.Format &quot;2006&quot; &#125;&#125; &#123;&#123; default .Site.Title .Site.Copyright &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!------------- 以下的删除掉 -------------&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;powerby&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; with .Site.Params.footer.customText &#125;&#125;</span><br><span class="line">            &#123;&#123; . | safeHTML &#125;&#125; <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        &#123;&#123; end &#125;&#125;</span><br><span class="line"></span><br><span class="line">        &#123;&#123;- $Generator := `<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://gohugo.io/&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;noopener&quot;</span>&gt;</span>Hugo<span class="tag">&lt;/<span class="name">a</span>&gt;</span>` -&#125;&#125;</span><br><span class="line">        &#123;&#123;- $Theme := printf `<span class="tag">&lt;<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://github.com/CaiJimmy/hugo-theme-stack&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;noopener&quot;</span> <span class="attr">data-version</span>=<span class="string">&quot;%s&quot;</span>&gt;</span>Stack<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span>` $ThemeVersion -&#125;&#125;</span><br><span class="line">        &#123;&#123;- $DesignedBy := `<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://jimmycai.com&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;noopener&quot;</span>&gt;</span>Jimmy<span class="tag">&lt;/<span class="name">a</span>&gt;</span>` -&#125;&#125;</span><br><span class="line"></span><br><span class="line">        &#123;&#123; T &quot;footer.builtWith&quot; (dict &quot;Generator&quot; $Generator) | safeHTML &#125;&#125; <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">        &#123;&#123; T &quot;footer.designedBy&quot; (dict &quot;Theme&quot; $Theme &quot;DesignedBy&quot; $DesignedBy) | safeHTML &#125;&#125;</span><br><span class="line"></span><br><span class="line">        &#123;&#123; $articleCount := len .Site.RegularPages &#125;&#125;</span><br><span class="line">        &#123;&#123; $totalWordCount := 0 &#125;&#125;</span><br><span class="line">        &#123;&#123; range .Site.Pages &#125;&#125;</span><br><span class="line">        &#123;&#123; $totalWordCount = add $totalWordCount .WordCount &#125;&#125;</span><br><span class="line">        &#123;&#123; end &#125;&#125;</span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>发布了 &#123;&#123; $articleCount &#125;&#125; 篇文章 | 共 &#123;&#123;$totalWordCount&#125;&#125; 字<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!------------- 以上的删除掉 -------------&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure><p><a id="back-to-top"></a></p><h3 id="⬆️-添加【返回顶部】按钮">⬆️ 添加【返回顶部】按钮</h3><ul><li>✨ <strong>功能</strong>：添加平滑滚动返回顶部的按钮，提升用户体验</li><li>📌 <strong>步骤</strong>：<ol><li>返回顶部图片，复制以下代码保存为<code>.svg</code>文件,放到<code>./assets/icons</code>文件夹下(不存在则自行创建)</li></ol></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;30&quot;</span> <span class="attr">height</span>=<span class="string">&quot;30&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 24 24&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;#707070&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">stroke-width</span>=<span class="string">&quot;2&quot;</span> <span class="attr">stroke-linecap</span>=<span class="string">&quot;round&quot;</span> <span class="attr">stroke-linejoin</span>=<span class="string">&quot;round&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">class</span>=<span class="string">&quot;icon icon-tabler icons-tabler-outline icon-tabler-square-rounded-arrow-up&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span> <span class="attr">stroke</span>=<span class="string">&quot;none&quot;</span> <span class="attr">d</span>=<span class="string">&quot;M0 0h24v24H0z&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M16 12l-4 -4l-4 4&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M12 16v-8&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M12 3c7.2 0 9 1.8 9 9s-1.8 9 -9 9s-9 -1.8 -9 -9s1.8 -9 9 -9z&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>将以下代码复制到<code>layouts/partials/footer/custom.html</code>文件中(不存在则自行创建)</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- layouts/partials/footer/custom.html --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 返回顶部按钮 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#backTopBtn</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">bottom</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">z-index</span>: <span class="number">99</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#123;&#123; (resources.Get &quot;icons/backTop.svg&quot;</span>).RelPermalink &#125;&#125;);</span></span><br><span class="line"><span class="language-css">      <span class="comment">/* 为 transform 属性添加过渡效果，持续时间 1 秒，过渡方式为缓入缓出 */</span></span></span><br><span class="line"><span class="language-css">      <span class="attribute">transition</span>: transform <span class="number">1s</span> ease-in-out;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#backTopBtn</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* 悬停时360度旋转 */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">   * 滚动回顶部初始化</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">   */</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">initScrollTop</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> rightSideBar = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.right-sidebar&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (!rightSideBar) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 添加返回顶部按钮到右侧边栏</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> btn = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      btn.<span class="property">id</span> = <span class="string">&quot;backTopBtn&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      btn.<span class="property">onclick</span> = backToTop</span></span><br><span class="line"><span class="language-javascript">      rightSideBar.<span class="title function_">appendChild</span>(btn)</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 滚动监听</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">window</span>.<span class="property">onscroll</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 当网页向下滑动 20px 出现&quot;返回顶部&quot; 按钮</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span> &gt; <span class="number">20</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> &gt; <span class="number">20</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              btn.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;block&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              btn.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">   * 返回顶部</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">   */</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">backToTop</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">window</span>.<span class="title function_">scrollTo</span>(&#123; <span class="attr">top</span>: <span class="number">0</span>, <span class="attr">behavior</span>: <span class="string">&quot;smooth&quot;</span> &#125;)</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">initScrollTop</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>我使用中的</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#backTopBtn</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">bottom</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* 新增右侧定位 */</span></span></span><br><span class="line"><span class="language-css">    <span class="comment">/* right: 480px; */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">z-index</span>: <span class="number">99</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#123;&#123; (resources.Get &quot;icons/backTop.svg&quot;</span>).RelPermalink &#125;&#125;);</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* 添加will-change优化渲染性能 */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">will-change</span>: transform;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">transition</span>: transform <span class="number">1s</span> ease-in-out;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#backTopBtn</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">     * 滚动回顶部初始化</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">     */</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">initScrollTop</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> rightSideBar = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.right-sidebar&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (!rightSideBar) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 添加返回顶部按钮到右侧边栏</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> btn = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      btn.<span class="property">id</span> = <span class="string">&quot;backTopBtn&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      btn.<span class="property">onclick</span> = backToTop</span></span><br><span class="line"><span class="language-javascript">      rightSideBar.<span class="title function_">appendChild</span>(btn)</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 滚动监听</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">window</span>.<span class="property">onscroll</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 统一获取页面滚动高度</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> scrollTop = <span class="variable language_">window</span>.<span class="property">pageYOffset</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> || <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span> || <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 当网页向下滑动 20px 出现&quot;返回顶部&quot; 按钮</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (scrollTop &gt; <span class="number">20</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          btn.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;block&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          btn.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">     * 返回顶部</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">     */</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">backToTop</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">window</span>.<span class="title function_">scrollTo</span>(&#123; <span class="attr">top</span>: <span class="number">0</span>, <span class="attr">behavior</span>: <span class="string">&quot;smooth&quot;</span> &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">initScrollTop</span>();</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="4"><li>解决 PJAX 刷新问题</li></ol><ul><li>📌 <strong>位置</strong>：编辑<code>.\layouts\partials\footer\pjax.html</code>文件 。<code>pjax:complete</code> 事件下，添加以下内容：</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 重新初始化返回顶部按钮</span></span><br><span class="line">topbar.<span class="title function_">hide</span>();</span><br><span class="line">       <span class="title function_">initScrollTop</span>();</span><br></pre></td></tr></table></figure><p><a id="comments"></a></p><h2 id="💬-Hugo-接入评论">💬 Hugo 接入评论</h2><h3 id="1、GitHub-打开评论">1、GitHub 打开评论</h3><ul><li>✨ <strong>功能</strong>：启用GitHub Discussions作为博客评论系统</li><li>📌 <strong>步骤</strong>：首先进入【<a href="https://github.com/">GitHub</a>】，hugo 博客项目主页–&gt;&gt;项目设置–&gt;&gt;找到Discussions Loading</li></ul><p><img src="https://file.meimolihan.eu.org/screenshot/giscus-001.jpg" alt=""></p><h3 id="2、giscus-配置">2、giscus 配置</h3><ul><li>✨ <strong>功能</strong>：安装并配置giscus评论系统</li><li>📌 <strong>步骤</strong>：在 github 上安装 【<a href="https://github.com/apps/giscus">giscus APP</a>】</li></ul><p><img src="https://file.meimolihan.eu.org/screenshot/giscus-002.jpg" alt=""></p><h3 id="3、GitHub-博客项目接入-giscus">3、GitHub 博客项目接入 giscus</h3><ul><li><p>✨ <strong>功能</strong>：将giscus与GitHub博客项目连接</p></li><li><p>📌 <strong>步骤</strong>：<br><img src="https://file.meimolihan.eu.org/screenshot/giscus-003.jpg" alt=""></p></li><li><p>随着官网的说明一步步配置下去。配置完成后便可在 启用 giscus 下找到需要的代码：</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://giscus.app/client.js&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">data-repo</span>=<span class="string">&quot;meimolihan/meimolihan.github.io&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">data-repo-id</span>=<span class="string">&quot;R_kgDONpRkKg&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">data-category</span>=<span class="string">&quot;Announcements&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">data-category-id</span>=<span class="string">&quot;DIC_kwDONpRkKs4CmwSa&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">data-mapping</span>=<span class="string">&quot;pathname&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">data-strict</span>=<span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">data-reactions-enabled</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">data-emit-metadata</span>=<span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">data-input-position</span>=<span class="string">&quot;bottom&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">data-theme</span>=<span class="string">&quot;dark&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">data-lang</span>=<span class="string">&quot;zh-CN&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">crossorigin</span>=<span class="string">&quot;anonymous&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">async</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4、修改-hugo-主配置文件">4、修改 hugo 主配置文件</h3><ul><li>✨ <strong>功能</strong>：在Hugo配置中启用giscus评论系统</li><li>📌 <strong>位置</strong>：我使用的是Hugo的stack主题，需要在 config.yaml 中设置</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">provider:</span> <span class="string">giscus</span></span><br></pre></td></tr></table></figure><h3 id="5、引入-giscus-js文件">5、引入 giscus-js文件</h3><ul><li>✨ <strong>功能</strong>：将giscus JavaScript文件引入到主题中</li><li>📌 <strong>步骤</strong>：将stack主题<code>./themes/hugo-theme-stack/layouts/partials/comments/provider/giscus.html</code>文件拷贝至<code>./layouts/partials/comments/provider/</code>目录下  (需新建)</li><li>然后将giscus-js代码放到下面的位置：</li></ul><p><img src="https://file.meimolihan.eu.org/screenshot/giscus-004.jpg" alt=""></p><h3 id="6、文章-index-md-打开评论">6、文章 <a href="http://index.md">index.md</a> 打开评论</h3><ul><li>✨ <strong>功能</strong>：控制每篇文章是否开启评论功能</li><li>📌 <strong>位置</strong>：<strong>false 关闭评论，true 显示评论。</strong></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><ul><li>配置完成，<code>hugo server -D</code>启动hugo，在本地就可以看到效果。</li></ul><p><a id="preload-animation"></a></p><h2 id="🌀-Hugo-Stack-预加载动画">🌀 Hugo Stack 预加载动画</h2><p><img src="https://file.meimolihan.eu.org/gif/%E5%BC%80%E5%B1%8F%E5%8A%A8%E7%94%BB.gif" alt=""></p><h3 id="1、新增组件">1、新增组件</h3><ul><li>✨ <strong>功能</strong>：添加页面加载时的预加载动画，提升用户体验</li><li>📌 <strong>位置</strong>：小组件放在<code>layouts/partials/widget/preload.html</code> 文件里，注意，这个文件是自己创建的：</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; if .Site.Params.enablePreloadingAnim &#125;&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;loading-box&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 页面加载完成之后帷幕拉开的效果 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loading-left-bg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loading-right-bg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 旋转盒子动效 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;spinner-box&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;configure-border-1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;configure-core&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;configure-border-2&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;configure-core&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loading-word&quot;</span>&gt;</span>加载中...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 页面加载动画 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 确保 jQuery 已加载</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (<span class="keyword">typeof</span> $ !== <span class="string">&#x27;function&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;jQuery is not loaded. Please ensure jQuery is included in your project.&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 使用 window.onload 确保所有资源加载完成后隐藏动画</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;load&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> loadingBox = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loading-box&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (loadingBox) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 延时一段时间以确保动画有足够的时间展示</span></span></span><br><span class="line"><span class="language-javascript">            <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                loadingBox.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;loaded&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Preloader hidden after all resources are loaded.&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;, <span class="number">500</span>); <span class="comment">// 延时 0.5 秒（可根据需要调整）</span></span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Preloader element not found!&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 如果需要显示加载进度，可以添加以下逻辑（可选）</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> loadedResources = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> totalResources = <span class="variable language_">document</span>.<span class="property">images</span>.<span class="property">length</span> + <span class="variable language_">document</span>.<span class="property">styleSheets</span>.<span class="property">length</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">checkResourceLoad</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        loadedResources++;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> progress = <span class="title class_">Math</span>.<span class="title function_">round</span>((loadedResources / totalResources) * <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> loadingWord = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.loading-word&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (loadingWord) &#123;</span></span><br><span class="line"><span class="language-javascript">            loadingWord.<span class="property">textContent</span> = <span class="string">`加载中... <span class="subst">$&#123;progress&#125;</span>%`</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (loadedResources &gt;= totalResources) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="title function_">dispatchEvent</span>(<span class="keyword">new</span> <span class="title class_">Event</span>(<span class="string">&#x27;load&#x27;</span>)); <span class="comment">// 手动触发 load 事件</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 监听图片加载</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="property">images</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">img</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        img.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, checkResourceLoad);</span></span><br><span class="line"><span class="language-javascript">        img.<span class="title function_">addEventListener</span>(<span class="string">&#x27;error&#x27;</span>, checkResourceLoad);</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 监听样式表加载</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="property">styleSheets</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">sheet</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">checkResourceLoad</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;&#123; end &#125;&#125;</span><br></pre></td></tr></table></figure><h3 id="2、组件样式">2、组件样式</h3><ul><li>✨ <strong>功能</strong>：定义预加载动画的样式和动画效果</li><li>📌 <strong>位置</strong>：找到 <code>./assets/scss/custom.scss</code> 在文件里面追加 ：</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#loading-box</span> <span class="selector-class">.loading-left-bg</span>,</span><br><span class="line"><span class="selector-id">#loading-box</span> <span class="selector-class">.loading-right-bg</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1000</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="comment">// 我在这里小改了一下颜色，</span></span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#b1c0c7</span>;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.5s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#loading-box</span> <span class="selector-class">.loading-right-bg</span> &#123;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#loading-box</span>&gt;<span class="selector-class">.spinner-box</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1001</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#loading-box</span> <span class="selector-class">.spinner-box</span> <span class="selector-class">.configure-border-1</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">115px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">115px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#ffab91</span>;</span><br><span class="line">    <span class="attribute">animation</span>: configure-clockwise <span class="number">3s</span> ease-in-out <span class="number">0s</span> infinite alternate;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#loading-box</span> <span class="selector-class">.spinner-box</span> <span class="selector-class">.configure-border-2</span> &#123;</span><br><span class="line">    <span class="attribute">left</span>: -<span class="number">115px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">115px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">115px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">63</span>, <span class="number">249</span>, <span class="number">220</span>);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">    <span class="attribute">animation</span>: configure-xclockwise <span class="number">3s</span> ease-in-out <span class="number">0s</span> infinite alternate;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#loading-box</span> <span class="selector-class">.spinner-box</span> <span class="selector-class">.loading-word</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">    <span class="comment">// 我在这里小改了一下文字大小和字体，注意！</span></span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.8rem</span>;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;Zhi Mang Xing&#x27;</span>, cursive;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#loading-box</span> <span class="selector-class">.spinner-box</span> <span class="selector-class">.configure-core</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#37474f</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.loaded</span> <span class="selector-tag">div</span><span class="selector-class">.loading-left-bg</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">100%</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.loaded</span> <span class="selector-tag">div</span><span class="selector-class">.loading-right-bg</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">100%</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.loaded</span> <span class="selector-tag">div</span><span class="selector-class">.spinner-box</span> &#123;</span><br><span class="line">    <span class="comment">// 你可以把这个注释掉，这样就能一直看那个动画的效果了！</span></span><br><span class="line">    <span class="attribute">display</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> configure-clockwise &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">25%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">90deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">180deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">75%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">270deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> configure-xclockwise &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">25%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">45deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">135deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">75%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">225deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">315deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3、配置文件">3、配置文件</h3><ul><li>✨ <strong>功能</strong>：通过配置文件控制预加载动画的开启与关闭</li><li>📌 <strong>位置</strong>：hugo配置文件<code>params</code> 栏目底下，加上 <code>enablePreloadingAnim: true</code></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">params:</span></span><br><span class="line">    <span class="attr">enablePreloadingAnim:</span> <span class="literal">true</span> <span class="comment"># 开屏动画，false为关闭，true为开启</span></span><br></pre></td></tr></table></figure><p><a id="image-lightbox"></a></p><h2 id="🖼️-Hugo-图片灯箱">🖼️ Hugo 图片灯箱</h2><p><img src="https://file.meimolihan.eu.org/2d/2d-001.jpg" alt=""></p><ul><li>✨ <strong>功能</strong>：使用 Fancybox 实现图片灯箱/放大功能</li><li>📌 <strong>说明</strong>：Hugo 自带的图片渲染是没有灯箱效果的，所以我们需要自己添加。灯箱效果就是点击图片后，图片会放大显示。</li></ul><h3 id="修改-Hugo-配置文件">修改 Hugo 配置文件</h3><ul><li>✨ <strong>功能</strong>：在配置中启用图片灯箱功能</li><li>📌 <strong>位置</strong>：修改网站根目录下的 config.toml 或者 config.yaml 文件，我的配置文件为 yaml 格式，toml 需要自行调整格式，在 params参数下添加以下内容：</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">params:</span></span><br><span class="line">    <span class="attr">fancybox:</span> <span class="literal">true</span> <span class="comment"># 图片灯箱，false为关闭，true为开启</span></span><br></pre></td></tr></table></figure><h3 id="创建-render-image-html-文件">创建 render-image.html 文件</h3><ul><li>✨ <strong>功能</strong>：创建图片渲染模板，支持灯箱效果</li><li>📌 <strong>位置</strong>：在你的 Hugo 根目录下创建以下路径和文件：<code>./layouts/_default/_markup/render-image.html</code></li><li>编辑 <code>render-image.html</code> 添加以下内容：</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;if .Page.Site.Params.fancybox &#125;&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;post-img-view&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">data-fancybox</span>=<span class="string">&quot;gallery&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; .Destination | safeURL &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123; .Destination | safeURL &#125;&#125;&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&#123;&#123; .Text &#125;&#125;&quot;</span> &#123;&#123; <span class="attr">with</span> <span class="attr">.Title</span>&#125;&#125; <span class="attr">title</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> &#125;&#125; /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;&#123; end &#125;&#125;</span><br></pre></td></tr></table></figure><h3 id="复制-custom-html-文件">复制 custom.html 文件</h3><ul><li>✨ <strong>功能</strong>：引入Fancybox所需的CSS和JavaScript文件</li><li>📌 <strong>位置</strong>：从你主题目录 <code>./themes/stack/layouts/partials/footer/custom.html</code>复制到 Hugo在你根目录 <code>layouts/partials/footer/custom.html</code> ,添加以下内容：</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;if .Page.Site.Params.fancybox &#125;&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;&#123; end &#125;&#125;</span><br></pre></td></tr></table></figure><p>接下来就可以直接 <code>hugo server -D</code> 看看效果了。</p><hr><p><a id="particles-background"></a></p><h2 id="✨-引入动态背景（点线漂浮-particles-js-）">✨ 引入动态背景（点线漂浮(particles.js)）</h2><ul><li>✨ <strong>功能</strong>：为博客添加动态粒子背景效果，增强视觉吸引力</li><li>📌 <strong>来源</strong>：<a href="https://letere-gzj.github.io/hugo-stack/p/hugo/custom-background/#22-%E7%82%B9%E7%BA%BF%E6%BC%82%E6%B5%AEparticlesjs">莱特雷-letere</a></li><li>📌 <strong>文档</strong>：【<a href="https://github.com/VincentGarreau/particles.js">particles.js文档</a>】</li></ul><h3 id="1-前往【配置页面】配置参数">1.  前往【配置页面】配置参数</h3><ul><li>✨ <strong>功能</strong>：自定义粒子效果参数</li><li>📌 <strong>步骤</strong>：前往【<a href="http://vincentgarreau.com/particles.js/">配置页面</a>】配置参数，参数按自己喜好即可，唯一注意要修改的参数是 detect_on，要改成 window</li></ul><p><img src="https://file.meimolihan.eu.org/screenshot/particles-001.png" alt=""></p><h3 id="2-下载配置文件，以及-particles-js-所需要的js文件">2. 下载配置文件，以及 particles.js 所需要的js文件</h3><ul><li>✨ <strong>功能</strong>：获取粒子效果所需的配置文件</li><li>📌 <strong>步骤</strong>：下载【<a href="https://letere-gzj.github.io/hugo-stack/p/hugo/custom-background/particlesjs-config.json">particlesjs-config.json</a>】(Ctrl + S 保存)，本博客的动态背景json配置，有需求的可直接下载</li></ul><p><img src="https://file.meimolihan.eu.org/screenshot/particles-002.png" alt=""></p><h3 id="3-把下载好的文件，解压并将以下两个文件放到assets-background文件夹下">3. 把下载好的文件，解压并将以下两个文件放到assets/background文件夹下</h3><ul><li>✨ <strong>功能</strong>：放置粒子效果所需文件</li><li>📌 <strong>文件</strong>：<ul><li>particlesjs-config.json</li><li>particles.min.js</li></ul></li></ul><p><img src="https://file.meimolihan.eu.org/screenshot/particles-003.png" alt=""></p><h3 id="4-在layouts-partials-footer-custom-html中，引入以下代码">4. 在layouts/partials/footer/custom.html中，引入以下代码</h3><ul><li>✨ <strong>功能</strong>：在页面中引入并初始化粒子效果</li><li>📌 <strong>位置</strong>：</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;particles-js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&#123;&#123;</span> (<span class="attr">resources.Get</span> &quot;<span class="attr">background</span>/<span class="attr">particles.min.js</span>&quot;)<span class="attr">.Permalink</span> &#125;&#125;&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  particlesJS.<span class="title function_">load</span>(<span class="string">&#x27;particles-js&#x27;</span>, &#123;&#123; (resources.<span class="property">Get</span> <span class="string">&quot;background/particlesjs-config.json&quot;</span>).<span class="property">Permalink</span> &#125;&#125;, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;particles.js loaded - callback&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#particles-js</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">z-index</span>: -<span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p><a id="view-count"></a></p><h2 id="📊-【Hugo】博客文章浏览数统计">📊 【Hugo】博客文章浏览数统计</h2><ul><li>✨ <strong>功能</strong>：引入第三方组件，来给博客文章统计浏览数</li><li>📌 <strong>前言</strong>：</li></ul><blockquote><ul><li>博客文章统计组件个人找到了两个，分别是<a href="https://busuanzi.ibruce.info/"><strong>不蒜子</strong></a>，以及<a href="https://cn.vercount.one/"><strong>vercount</strong></a></li><li><strong>不蒜子</strong>比较老，但很稳定，到现在仍然可以使用，没有停服</li><li><strong>vercount</strong>则比较新，并做了一些代码优化</li><li>两种使用都基本一样，差别不大，看自己喜好，下面的教程是以<strong>vercount</strong>来举例，用不蒜子的话，就把对应的脚本和元素标签替换一下就好</li></ul></blockquote><h3 id="1-基本引入">1 基本引入</h3><ul><li>（1）修改<code>layouts/partials/footer/custom.html</code>（不存在则自行创建），引入脚本</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- vercount的脚本；若用不蒜子，则更换成不蒜子的脚本就好 --&gt;</span> <span class="tag">&lt;<span class="name">script</span> <span class="attr">defer</span> <span class="attr">src</span>=<span class="string">&quot;https://cn.vercount.one/js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span><br></pre></td></tr></table></figure><ul><li><p>（2）准备一张<a href="https://letere-gzj.github.io/hugo-stack/p/hugo/view-count/eye.svg"><strong>浏览量</strong></a>的icon(Ctrl+S保存)，放到<code>assets/icons</code>文件夹下</p></li><li><p>（3）修改<code>layouts/article/components/details.html</code>，在合适的位置下加入以下代码</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;article-details&quot;</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="tag">&lt;<span class="name">footer</span> <span class="attr">class</span>=<span class="string">&quot;article-time&quot;</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">        <span class="comment">&lt;!-- 浏览量统计 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;viewCount&quot;</span>&gt;</span></span><br><span class="line">            &#123;&#123; partial &quot;helper/icon&quot; &quot;eye&quot; &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">time</span> <span class="attr">class</span>=<span class="string">&quot;article-time--reading&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- vercount统计当前页面浏览数的标签；若用不蒜子，更换成不蒜子对应的标签就好 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;vercount_value_page_pv&quot;</span>&gt;</span>loading... <span class="tag">&lt;/<span class="name">span</span>&gt;</span>次</span><br><span class="line">            <span class="tag">&lt;/<span class="name">time</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>（4）这样文章详情的开头就显示浏览数了</li></ul><p><a href="https://letere-gzj.github.io/hugo-stack/p/hugo/view-count/%E7%BB%9F%E8%AE%A1%E5%B1%95%E7%A4%BA.png"><img src="https://letere-gzj.github.io/hugo-stack/p/hugo/view-count/%E7%BB%9F%E8%AE%A1%E5%B1%95%E7%A4%BA.png" alt="img"></a></p><h3 id="2-问题修复">2 问题修复</h3><ul><li>问题描述：<ul><li>博客首页的文章列表显示了浏览数，且只有第一篇文章才有浏览数，并且浏览数的数字不正确</li></ul></li></ul><p><a href="https://letere-gzj.github.io/hugo-stack/p/hugo/view-count/%E7%BB%9F%E8%AE%A1%E4%BF%AE%E5%A4%8D1.png"><img src="https://letere-gzj.github.io/hugo-stack/p/hugo/view-count/%E7%BB%9F%E8%AE%A1%E4%BF%AE%E5%A4%8D1.png" alt="img"></a></p><ul><li><p>产生原因：</p><ul><li><code>layouts/partials/article/components/details.html</code>此html文件也被用在了博客首页的文章列表，所以也触发了vercount读取当前页面的浏览数</li><li>因为读取的数据是当前页面的浏览数，也就是首页的浏览数，并非文章的浏览数，所以数据只加载一次，且不准确</li></ul></li><li><p>解决思路：</p><ul><li>由于vercount并未提供<code>只查询文章浏览数</code>的接口，只有一个<code>文章浏览数+1，并且返回浏览数</code>的接口，所以无法实现首页对每篇文章的浏览数的单独查询</li><li>既然无法实现首页展示每篇文章的单独浏览数，那就直接隐藏就好了，等点入文章才看到具体的浏览数</li></ul></li><li><p>具体操作：</p><ul><li>（1）修改<code>layouts/partials/footer/custom.html</code>，引入以下代码</li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">showHideView</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 判断是否存在vercount标签</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> viewCounts = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;#viewCount&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (viewCounts) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 判断是否为文章页</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> article =  <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.article-page&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (!article) &#123;</span></span><br><span class="line"><span class="language-javascript">                viewCounts.<span class="title function_">forEach</span>(<span class="function"><span class="params">ele</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    ele.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">showHideView</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>如果嫌麻烦，浏览数统计可以和更新时间一样，放到文章末尾就好，就不会显示到首页上了</li><li>具体修改<code>layouts/partials/article/footer.html</code>就好，看个人喜好吧</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Hugo + Stack 主题美化指南 🎨&lt;/h1&gt;
&lt;p&gt;&lt;img src=&quot;https://file.meimolihan.eu.org/img/hugo-stack-01.webp&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;本文详细介绍了 Hugo</summary>
      
    
    
    
    <category term="默认分类" scheme="https://www.meimolihan.eu.org/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/"/>
    
    
    <category term="hugo" scheme="https://www.meimolihan.eu.org/tags/hugo/"/>
    
  </entry>
  
  <entry>
    <title>Halo to Hugo 文章迁移工具 📦</title>
    <link href="https://www.meimolihan.eu.org/posts/541ef58e.html"/>
    <id>https://www.meimolihan.eu.org/posts/541ef58e.html</id>
    <published>2025-09-17T08:12:49.000Z</published>
    <updated>2025-09-17T08:12:49.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Halo to Hugo 文章迁移工具 📦</h1><p><img src="https://file.meimolihan.eu.org/img/halo-to-hugo-01.webp" alt=""></p><blockquote><p>一款专为博客迁移设计的工具，可将 Halo 文章的 Front Matter 格式转换为 Hugo 兼容格式，让您的博客迁移过程更加顺畅高效！🚀</p><p>原作者地址:<a href="https://github.com/ayuayue/hexo2hugo">https://github.com/ayuayue/hexo2hugo</a></p></blockquote><hr><h2 id="✨-功能特点">✨ 功能特点</h2><ul><li>🔄 <strong>格式转换</strong>：自动将 Halo 的 Front Matter 转换为 Hugo 兼容格式</li><li>📅 <strong>日期处理</strong>：智能转换日期格式并添加时区信息</li><li>🏷️ <strong>标签分类</strong>：完美处理 <code>tags</code> 和 <code>categories</code> 字段</li><li>🛡️ <strong>安全第一</strong>：创建独立输出目录，不修改原始文件</li><li>📝 <strong>内容保留</strong>：保持文章正文内容完全不变</li><li>⚙️ <strong>灵活扩展</strong>：支持自定义添加其他 Front Matter 字段</li></ul><hr><h2 id="📋-使用指南">📋 使用指南</h2><h3 id="快速开始">快速开始</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 克隆项目</span></span><br><span class="line">git <span class="built_in">clone</span> git@github.com:meimolihan/halo_to_hugo.git</span><br><span class="line"><span class="built_in">cd</span> halo_to_hugo</span><br></pre></td></tr></table></figure><h3 id="详细步骤">详细步骤</h3><ol><li><p><strong>准备测试环境</strong> 📂</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建测试目录并复制一些文章</span></span><br><span class="line"><span class="built_in">mkdir</span> <span class="built_in">test</span></span><br><span class="line"><span class="built_in">cp</span> ~/your-halo-blog/content/posts/*.md <span class="built_in">test</span>/</span><br></pre></td></tr></table></figure></li><li><p><strong>执行转换</strong> ⚡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 运行转换工具</span></span><br><span class="line">go run main.go <span class="built_in">test</span></span><br></pre></td></tr></table></figure></li><li><p><strong>验证结果</strong> ✅</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看转换后的文件</span></span><br><span class="line"><span class="built_in">ls</span> -la newPost$(<span class="built_in">date</span> +%s)/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查单个文件内容</span></span><br><span class="line"><span class="built_in">head</span> -n 20 newPost1701319905/your-post.md</span><br></pre></td></tr></table></figure></li><li><p><strong>应用到正式环境</strong> 🚀</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将转换后的文章移动到Hugo目录</span></span><br><span class="line"><span class="built_in">mv</span> newPost1701319905/* ~/your-hugo-site/content/posts/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 针对正式目录执行</span></span><br><span class="line">go run main.go ~/your-hugo-site/content/posts/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行Hugo测试生成</span></span><br><span class="line"><span class="built_in">cd</span> ~/your-hugo-site</span><br><span class="line">hugo server -D</span><br></pre></td></tr></table></figure></li></ol><hr><h2 id="🔧-技术细节">🔧 技术细节</h2><h3 id="支持的-Front-Matter-转换">支持的 Front Matter 转换</h3><table><thead><tr><th>Halo 字段</th><th>Hugo 字段</th><th>转换说明</th></tr></thead><tbody><tr><td><code>title</code></td><td><code>title</code></td><td>添加引号包裹</td></tr><tr><td><code>date</code></td><td><code>date</code></td><td>转换为 ISO8601 格式并添加时区</td></tr><tr><td><code>excerpt</code></td><td><code>description</code></td><td>直接映射</td></tr><tr><td><code>cover</code></td><td><code>image</code></td><td>直接映射</td></tr><tr><td><code>tags</code></td><td><code>tags</code></td><td>支持字符串和列表两种格式</td></tr><tr><td><code>categories</code></td><td><code>categories</code></td><td>支持字符串和列表两种格式</td></tr><tr><td><code>permalink</code></td><td><code>slug</code></td><td>提取最后部分作为slug</td></tr></tbody></table><h3 id="转换示例">转换示例</h3><p><strong>转换前 (Halo格式)</strong>:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Halo</span> <span class="string">to</span> <span class="string">Hugo</span> <span class="string">迁移工具</span></span><br><span class="line"><span class="attr">id:</span> <span class="string">770a1b63-4737-4e87-a0d8-b8b38a3f7b6a</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2025-08-26 16:39:39</span></span><br><span class="line"><span class="attr">auther:</span> <span class="string">admin</span></span><br><span class="line"><span class="attr">cover:</span> <span class="string">https://example.com/image.webp</span></span><br><span class="line"><span class="attr">excerpt:</span> <span class="string">Halo</span> <span class="string">to</span> <span class="string">Hugo</span> <span class="string">迁移工具：无缝转换文章</span> <span class="string">Front</span> <span class="string">Matter</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">/archives/5uaPaEJk</span></span><br><span class="line"><span class="attr">categories:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">Halo</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">Hugo</span></span><br><span class="line"><span class="attr">tags:</span> </span><br><span class="line"> <span class="bullet">-</span> <span class="string">blog</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p><strong>转换后 (Hugo格式)</strong>:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">&quot;Halo to Hugo 迁移工具&quot;</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2025-08-26T16:39:39+08:00</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&quot;Halo to Hugo 迁移工具：无缝转换文章 Front Matter&quot;</span></span><br><span class="line"><span class="attr">draft:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">weight:</span> <span class="number">0</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">&quot;https://example.com/image.webp&quot;</span></span><br><span class="line"><span class="attr">categories:</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="string">Halo</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Hugo</span></span><br><span class="line"><span class="attr">tags:</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="string">blog</span></span><br><span class="line"><span class="attr">slug:</span> <span class="string">&quot;5uaPaEJk&quot;</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><hr><h2 id="⚠️-注意事项">⚠️ 注意事项</h2><ol><li><strong>备份重要数据</strong> 💾：始终在操作前备份原始文件</li><li><strong>测试验证</strong> 🔍：先在测试目录验证转换结果，再应用到正式环境</li><li><strong>自定义字段</strong> 🛠️：如需转换其他 Front Matter 字段，可自行修改源码添加</li><li><strong>格式兼容</strong> 📋：确保您的 Halo 文章使用标准 YAML Front Matter 格式</li></ol><h2 id="🐛-常见问题">🐛 常见问题</h2><p><strong>Q: 转换后文章内容出现乱码怎么办？</strong><br>A: 请检查原始文件的编码格式，确保为 UTF-8</p><p><strong>Q: 某些特殊字段没有转换怎么办？</strong><br>A: 您可以自行修改源码，在转换函数中添加需要的字段处理逻辑</p><p><strong>Q: 转换后的日期时区不正确怎么办？</strong><br>A: 修改源码中的 <code>location, _ := time.LoadLocation(&quot;Asia/Shanghai&quot;)</code> 为您所在的时区</p><h2 id="📝-开发指南">📝 开发指南</h2><p>如果您想自定义或扩展此工具：</p><ol><li>主要转换逻辑位于 <code>convertFrontMatter</code> 函数中</li><li>日期处理逻辑在 <code>convertDate</code> 函数中</li><li>标签和分类处理在 <code>convertToStringSlice</code> 函数中</li></ol><p>欢迎提交 Pull Request 和 Issue！🤝</p><hr><p>希望这个工具能让您的博客迁移过程更加顺利！如有任何问题或建议，欢迎在项目中提出 Issue。🎉</p>]]></content>
    
    
    <summary type="html">一款专为博客迁移设计的工具，可将 Halo 文章的 Front Matter 格式转换为 Hugo 兼容格式，让您的博客迁移过程更加顺畅高效！🚀</summary>
    
    
    
    <category term="Linux" scheme="https://www.meimolihan.eu.org/categories/Linux/"/>
    
    
    <category term="hugo" scheme="https://www.meimolihan.eu.org/tags/hugo/"/>
    
    <category term="halo" scheme="https://www.meimolihan.eu.org/tags/halo/"/>
    
  </entry>
  
  <entry>
    <title>Linux 文件压缩与解压脚本 &amp; 交互式 📦</title>
    <link href="https://www.meimolihan.eu.org/posts/512fc1f8.html"/>
    <id>https://www.meimolihan.eu.org/posts/512fc1f8.html</id>
    <published>2025-09-15T05:16:56.000Z</published>
    <updated>2025-09-15T05:16:56.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Linux 文件压缩与解压脚本 &amp; 交互式 📦</h1><p><img src="https://file.meimolihan.eu.org/img/zip-gz-01.webp" alt=""></p><blockquote><p>本文档提供一系列用于文件压缩与解压的 Bash 脚本，支持 ZIP 和 TAR.GZ 格式，可自动化处理当前目录下的文件与子目录。所有脚本均通过远程链接一键执行，方便快捷！</p></blockquote><hr><h2 id="📚-导航目录">📚 导航目录</h2><ul><li><a href="#zip-format">📦 ZIP 格式处理</a><ul><li><a href="#backup-zip">压缩为ZIP文件</a></li><li><a href="#unzip">解压ZIP文件</a></li></ul></li><li><a href="#tar-gz-format">📦 TAR.GZ 格式处理</a><ul><li><a href="#backup-gz">压缩为TAR.GZ文件</a></li><li><a href="#untar-gz">解压TAR.GZ文件</a></li></ul></li><li><a href="#notes">💡 使用注意事项</a></li><li><a href="#customization">🔧 自定义与扩展</a></li></ul><hr><p><a id="zip-format"></a></p><h2 id="📦-ZIP-格式处理">📦 ZIP 格式处理</h2><p>本节介绍与 ZIP 格式相关的压缩与解压操作。</p><p><a id="backup-zip"></a></p><h3 id="📦-压缩为ZIP文件">📦 压缩为ZIP文件</h3><p>此功能用于遍历当前目录下的所有子目录，并将每个子目录单独压缩为一个同名的 <code>.zip</code> 文件。适合用于批量备份或整理项目目录。</p><p><strong>✨ 特点：</strong></p><ul><li>🔄 自动化遍历：无需手动指定路径，自动处理所有子目录。</li><li>🗂️ 保留结构：压缩后的 ZIP 文件完整保留原始目录结构。</li><li>🌐 远程脚本：直接通过 curl 下载并执行，无需本地保存脚本。</li></ul><p><strong>📝 使用命令：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -sL script.meimolihan.eu.org/sh/zip/backup_zip.sh)</span><br></pre></td></tr></table></figure><ul><li>或使用国内镜像（若访问 GitHub 受限）：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -sL gitee.com/meimolihan/script/raw/master/sh/zip/backup_zip.sh)</span><br></pre></td></tr></table></figure><p><img src="https://file.meimolihan.eu.org/screenshot/backup-zip-001.webp" alt="backup-zip压缩示例"></p><p><a id="unzip"></a></p><h3 id="🔓-解压ZIP文件">🔓 解压ZIP文件</h3><p>此功能用于遍历当前目录下的所有 <code>.zip</code> 文件，并将每个 ZIP 文件解压到当前目录下。适用于批量恢复备份或提取多个压缩包。</p><p><strong>✨ 特点：</strong></p><ul><li>🔄 批量处理：自动识别所有 ZIP 文件，无需逐个解压。</li><li>📂 解压到当前目录：所有文件提取到当前文件夹，保持路径清晰。</li><li>⚡ 一键执行：简化重复性操作，提高效率。</li></ul><p><strong>📝 使用命令：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -sL script.meimolihan.eu.org/sh/zip/unzip.sh)</span><br></pre></td></tr></table></figure><ul><li>或使用国内镜像：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -sL gitee.com/meimolihan/script/raw/master/sh/zip/unzip.sh)</span><br></pre></td></tr></table></figure><hr><p><a id="tar-gz-format"></a></p><h2 id="📦-TAR-GZ-格式处理">📦 TAR.GZ 格式处理</h2><p>本节介绍与 TAR.GZ 格式相关的压缩与解压操作。</p><p><a id="backup-gz"></a></p><h3 id="📦-压缩为TAR-GZ文件">📦 压缩为TAR.GZ文件</h3><p>此功能用于遍历当前目录下的所有子目录，并将每个子目录压缩为一个同名的 <code>.tar.gz</code> 文件。TAR.GZ 格式在 Linux 环境中广泛使用，具有较好的压缩效率和兼容性。</p><p><strong>✨ 特点：</strong></p><ul><li>🐧 Linux 友好：TAR.GZ 是 Linux 系统常见的压缩格式。</li><li>📦 高压缩比：相比 ZIP，TAR.GZ 通常能提供更高的压缩率。</li><li>🔗 远程执行：直接通过网络脚本执行，无需本地安装。</li></ul><p><strong>📝 使用命令：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -sL script.meimolihan.eu.org/sh/gz/backup_gz.sh)</span><br></pre></td></tr></table></figure><ul><li>或使用国内镜像：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -sL gitee.com/meimolihan/script/raw/master/sh/gz/backup_gz.sh)</span><br></pre></td></tr></table></figure><p><img src="https://file.meimolihan.eu.org/screenshot/backup-gz-001.webp" alt="backup-gz压缩示例"></p><p><a id="untar-gz"></a></p><h3 id="🔓-解压TAR-GZ文件">🔓 解压TAR.GZ文件</h3><p>此功能用于遍历当前目录下的所有 <code>.tar.gz</code> 文件，并将每个文件解压到当前目录下。适用于从 TAR.GZ 备份中恢复数据或提取压缩内容。</p><p><strong>✨ 特点：</strong></p><ul><li>🔍 自动识别：自动查找所有 TAR.GZ 文件并进行处理。</li><li>🗃️ 保留权限：解压时保留原始文件权限和属性（适用于 Linux 系统）。</li><li>🚀 快速执行：一条命令即可完成所有解压操作。</li></ul><p><strong>📝 使用命令：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -sL script.meimolihan.eu.org/sh/gz/untar.sh)</span><br></pre></td></tr></table></figure><ul><li>或使用国内镜像：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -sL gitee.com/meimolihan/script/raw/master/sh/gz/untar.sh)</span><br></pre></td></tr></table></figure><hr><p><a id="notes"></a></p><h2 id="💡-使用注意事项">💡 使用注意事项</h2><ol><li><strong>🌐 网络依赖</strong>：这些脚本需要通过 curl 下载，请确保您的系统已连接互联网，并且能够访问 <code>script.meimolihan.eu.org</code> 或 <code>gitee.com</code>。</li><li><strong>🔐 安全提醒</strong>：执行远程脚本前，请确保您信任脚本来源。建议先检查脚本内容（可通过 curl 下载后查看），再执行。</li><li><strong>📁 目录结构</strong>：压缩脚本会遍历当前目录下的所有子目录，每个子目录生成一个压缩文件。请确保当前目录下没有无关子目录，以免产生多余文件。</li><li><strong>⚙️ 系统兼容</strong>：这些脚本主要在 Linux 或 macOS 环境中测试通过，Windows 用户可能需要使用 WSL 或类似环境。</li><li><strong>⚠️ 覆盖风险</strong>：解压时，如果当前目录已存在同名文件或文件夹，可能会被覆盖，请提前做好备份。</li></ol><hr><p><a id="customization"></a></p><h2 id="🔧-自定义与扩展">🔧 自定义与扩展</h2><p>如果您需要修改脚本以满足特定需求（如排除某些目录、添加压缩密码等），可以先将脚本下载到本地，然后进行编辑：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载脚本到本地</span></span><br><span class="line">curl -sL script.meimolihan.eu.org/sh/zip/backup-zip.sh &gt; my-backup-script.sh</span><br><span class="line"><span class="comment"># 编辑脚本</span></span><br><span class="line">nano my-backup-script.sh</span><br><span class="line"><span class="comment"># 授予执行权限</span></span><br><span class="line"><span class="built_in">chmod</span> +x my-backup-script.sh</span><br><span class="line"><span class="comment"># 运行本地脚本</span></span><br><span class="line">./my-backup-script.sh</span><br></pre></td></tr></table></figure><p><strong>🎯 常见自定义场景：</strong></p><ul><li>添加压缩密码（ZIP 格式支持）。</li><li>排除特定目录或文件（如 node_modules、.git 等）。</li><li>修改压缩级别（ZIP 和 TAR.GZ 均支持）。</li><li>将压缩文件上传到远程服务器或云存储。</li></ul><hr><p>希望这些脚本能帮助您更高效地管理文件！如有问题或建议，欢迎反馈。🚀</p>]]></content>
    
    
    <summary type="html">本文档提供一系列用于文件压缩与解压的 Bash 脚本，支持 ZIP 和 TAR.GZ 格式，可自动化处理当前目录下的文件与子目录。所有脚本均通过远程链接一键执行，方便快捷！</summary>
    
    
    
    <category term="Linux" scheme="https://www.meimolihan.eu.org/categories/Linux/"/>
    
    
    <category term="我的" scheme="https://www.meimolihan.eu.org/tags/%E6%88%91%E7%9A%84/"/>
    
    <category term="同步&amp;备份" scheme="https://www.meimolihan.eu.org/tags/%E5%90%8C%E6%AD%A5-%E5%A4%87%E4%BB%BD/"/>
    
    <category term="脚本" scheme="https://www.meimolihan.eu.org/tags/%E8%84%9A%E6%9C%AC/"/>
    
  </entry>
  
  <entry>
    <title>Linux 完整目录备份与解压自动化脚本📂</title>
    <link href="https://www.meimolihan.eu.org/posts/53235b92.html"/>
    <id>https://www.meimolihan.eu.org/posts/53235b92.html</id>
    <published>2025-09-14T20:09:55.000Z</published>
    <updated>2025-09-14T20:09:55.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Linux 完整目录备份与解压自动化脚本 📂</h1><p><img src="https://file.meimolihan.eu.org/img/linux-rar-01.webp" alt=""></p><blockquote><p>本文详细介绍通用自动备份脚本的功能、使用方法及恢复指南，帮助您轻松管理重要数据的安全。</p></blockquote><hr><h2 id="📋-导航目录">📋 导航目录</h2><ul><li><a href="#script-overview">📦 脚本概述</a></li><li><a href="#features">✨ 一、备份脚本功能与特点</a></li><li><a href="#extract-features">📦 二、解压命令功能与特点</a></li><li><a href="#usage">🔧 三、使用方法</a><ul><li><a href="#remote-usage">🌐 1. 远程执行方式（压缩与解压）</a><ul><li><a href="#remote-backup">📦 远程压缩操作</a></li><li><a href="#remote-extract">📤 本地解压操作</a></li></ul></li><li><a href="#local-usage">💻 2. 本地执行方式（压缩与解压）</a><ul><li><a href="#local-backup">📦 本地压缩操作</a></li><li><a href="#local-extract">📤 本地解压操作</a></li></ul></li></ul></li><li><a href="#test-backup-extract">🔍 四、测试压缩与解压</a></li><li><a href="#backup-compression">📁 五、备份原理与压缩机制</a></li><li><a href="#cron-setup">⏰ 六、定时任务设置</a></li><li><a href="#notes">💡 七、注意事项</a></li></ul><hr><p><a id="script-overview"></a></p><h2 id="📦-脚本概述">📦 脚本概述</h2><p>通用自动备份脚本是一个高效的数据保护工具，能够自动化完成目录的压缩备份、版本管理和旧备份清理工作。通过简单的命令即可实现一键备份，确保您的数据安全无忧。</p><hr><p><a id="features"></a></p><h2 id="一、-✨-备份脚本功能与特点">一、 ✨ 备份脚本功能与特点</h2><ul><li>✅ <strong>完全免交互</strong>：适合自动化任务和定时执行</li><li>✅ <strong>智能保留策略</strong>：自动保留指定数量的最新备份文件</li><li>✅ <strong>时间戳标识</strong>：每个备份文件包含精确到秒的创建时间</li><li>✅ <strong>完整性检查</strong>：自动验证源目录和备份目录的可用性</li><li>✅ <strong>详细日志输出</strong>：实时显示备份进度和结果</li><li>✅ <strong>空间管理</strong>：自动清理旧备份，避免磁盘空间不足</li></ul><hr><p><a id="extract-features"></a></p><h2 id="二、📦-解压命令功能与特点">二、📦 解压命令功能与特点</h2><ul><li>✅ <strong>灵活解压</strong>：支持解压到当前目录、指定目录，满足不同场景需求</li><li>✅ <strong>内容预览</strong>：可在解压前查看归档文件内容，避免覆盖重要文件</li><li>✅ <strong>选择性解压</strong>：支持从大型备份中提取单个或特定目录的文件</li><li>✅ <strong>权限保持</strong>：完整保留文件原始权限、所有权及时间戳属性</li><li>✅ <strong>进度可视化</strong>：使用<code>-v</code>参数可显示解压过程的详细文件列表</li><li>✅ <strong>通用性强</strong>：标准tar/gzip格式，兼容所有Linux/Unix系统及常见解压软件</li></ul><hr><p><a id="usage"></a></p><h2 id="三、🔧-使用方法">三、🔧 使用方法</h2><p><a id="remote-usage"></a></p><h3 id="1-远程执行方式（压缩与解压）">1. 远程执行方式（压缩与解压）</h3><ul><li><strong>基本命令格式 <code>bash ~/universal_backup.sh &lt;源目录&gt; &lt;备份目录&gt; [保留数量]</code></strong></li><li><strong>备份目录下仅保留  <code>源目录名_时间戳.tar.gz</code> 格式压缩包，每包即源目录的完整备份。</strong></li></ul><p><a id="remote-backup"></a></p><h4 id="📦-远程压缩操作">📦 远程压缩操作</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用主域名执行</span></span><br><span class="line">bash &lt;(curl -sL script.meimolihan.eu.org/sh/backup/universal_backup.sh) /源目录 /备份目录 保留数量</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或使用Gitee镜像执行（国内用户推荐）</span></span><br><span class="line">bash &lt;(curl -sL gitee.com/meimolihan/script/raw/master/sh/backup/universal_backup.sh) /源目录 /备份目录 保留数量</span><br></pre></td></tr></table></figure><p><img src="https://file.meimolihan.eu.org/screenshot/universal_backup-001.webp" alt=""></p><p><a id="remote-extract"></a></p><h4 id="📤-本地解压操作">📤 本地解压操作</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解压到当前目录</span></span><br><span class="line">tar -xzvf /备份目录/备份文件.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压到指定目录</span></span><br><span class="line">tar -xzvf /备份目录/备份文件.tar.gz -C /目标目录/</span><br></pre></td></tr></table></figure><ul><li><strong>实际解压示例</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解压到当前目录（会在当前目录创建原目录结构）</span></span><br><span class="line">tar -xzvf /backups/html_20231201_143022.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压到指定目录</span></span><br><span class="line">tar -xzvf /backups/html_20231201_143022.tar.gz -C /var/www/new_html/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只查看归档内容而不解压</span></span><br><span class="line">tar -tzvf /backups/html_20231201_143022.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压特定文件</span></span><br><span class="line">tar -xzvf /backups/html_20231201_143022.tar.gz path/to/specific/file</span><br></pre></td></tr></table></figure><ul><li><strong>解压参数详解</strong><ul><li><code>-x</code>：从归档中解压文件</li><li><code>-z</code>：使用gzip解压缩</li><li><code>-v</code>：显示详细处理过程</li><li><code>-f</code>：指定归档文件名</li><li><code>-C</code>：指定解压目标目录</li></ul></li></ul><hr><p><a id="local-usage"></a></p><h3 id="💻-2-本地执行方式（压缩与解压）">💻 2. 本地执行方式（压缩与解压）</h3><p><a id="local-backup"></a></p><h4 id="📦-本地压缩操作">📦 本地压缩操作</h4><ul><li><strong>基本命令格式 <code>bash ~/universal_backup.sh &lt;源目录&gt; &lt;备份目录&gt; [保留数量]</code></strong></li><li><strong>备份目录下仅保留  <code>源目录名_时间戳.tar.gz</code> 格式压缩包，每包即源目录的完整备份。</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载备份脚本</span></span><br><span class="line"><span class="built_in">cd</span> /mnt &amp;&amp; \</span><br><span class="line">wget -c https://gitee.com/meimolihan/script/raw/master/sh/backup/universal_backup.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 赋予执行权限</span></span><br><span class="line"><span class="built_in">chmod</span> +x universal_backup.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解决可能存在的换行符问题（如果需要）</span></span><br><span class="line"><span class="built_in">sudo</span> apt install dos2unix</span><br><span class="line">dos2unix universal_backup.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 基本用法（保留3个备份）</span></span><br><span class="line">/mnt/universal_backup.sh  /源目录 /备份目录</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定保留备份数量</span></span><br><span class="line">/mnt/universal_backup.sh /源目录 /备份目录 保留数量</span><br><span class="line"></span><br><span class="line"><span class="comment"># 实际示例</span></span><br><span class="line">/mnt/universal_backup.sh /mnt/test1 /mnt/test2</span><br><span class="line">/mnt/universal_backup.sh /mnt/test1 /mnt/test2 7</span><br></pre></td></tr></table></figure><p><a id="local-extract"></a></p><h4 id="📤-本地解压操作-2">📤 本地解压操作</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解压到当前目录</span></span><br><span class="line">tar -xzvf /备份目录/备份文件.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压到指定目录</span></span><br><span class="line">tar -xzvf /备份目录/备份文件.tar.gz -C /目标目录/</span><br></pre></td></tr></table></figure><ul><li><strong>实际解压示例</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解压到当前目录（会在当前目录创建原目录结构）</span></span><br><span class="line">tar -xzvf /backups/html_20231201_143022.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压到指定目录</span></span><br><span class="line">tar -xzvf /backups/html_20231201_143022.tar.gz -C /var/www/new_html/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只查看归档内容而不解压</span></span><br><span class="line">tar -tzvf /backups/html_20231201_143022.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压特定文件</span></span><br><span class="line">tar -xzvf /backups/html_20231201_143022.tar.gz path/to/specific/file</span><br></pre></td></tr></table></figure><ul><li><strong>解压参数详解</strong><ul><li><code>-x</code>：从归档中解压文件</li><li><code>-z</code>：使用gzip解压缩</li><li><code>-v</code>：显示详细处理过程</li><li><code>-f</code>：指定归档文件名</li><li><code>-C</code>：指定解压目标目录</li></ul></li></ul><hr><p><a id="test-backup-extract"></a></p><h2 id="四、🔍-测试压缩与解压">四、🔍 测试压缩与解压</h2><p>以下是一个完整的测试流程，展示如何使用这两个脚本进行压缩和解压操作：</p><h3 id="🧪-1-创建测试文件">🧪 1. 创建测试文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /mnt/&#123;test1,test2,test3&#125; &amp;&amp; \</span><br><span class="line"><span class="built_in">mkdir</span> -p /mnt/test1/&#123;aaa,bbb,ccc&#125; &amp;&amp; \</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;测试文件内容&quot;</span> &gt; /mnt/test1/aaa/test1.txt &amp;&amp; \</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;另一个测试文件&quot;</span> &gt; /mnt/test1/bbb/test2.txt &amp;&amp; \</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;第三个测试文件&quot;</span> &gt; /mnt/test1/ccc/test3.txt &amp;&amp; \</span><br><span class="line">tree /mnt/test1 /mnt/test2 /mnt/test3</span><br></pre></td></tr></table></figure><ul><li><strong>初始测试目录结构</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@debian13 / <span class="comment"># tree /mnt/test1 /mnt/test2 /mnt/test3</span></span><br><span class="line">/mnt/test1</span><br><span class="line">├── aaa</span><br><span class="line">│   └── test1.txt</span><br><span class="line">├── bbb</span><br><span class="line">│   └── test2.txt</span><br><span class="line">└── ccc</span><br><span class="line">    └── test3.txt</span><br><span class="line">/mnt/test2</span><br><span class="line">/mnt/test3</span><br></pre></td></tr></table></figure><h3 id="🧪-2-测试-压缩">🧪 2. 测试 <code>压缩</code></h3><ul><li>这里指定了 <code>保留数量 5</code>，默认是<code>保留数量 3</code>。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -sL gitee.com/meimolihan/script/raw/master/sh/backup/universal_backup.sh) /mnt/test1 /mnt/test2 5 &amp;&amp; tree /mnt/test1 /mnt/test2 /mnt/test3</span><br></pre></td></tr></table></figure><ul><li><strong>完成 <code>压缩</code> 后的目录结构</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">root@debian13 / <span class="comment"># tree /mnt/test1 /mnt/test2 /mnt/test3</span></span><br><span class="line">/mnt/test1</span><br><span class="line">├── aaa</span><br><span class="line">│   └── test1.txt</span><br><span class="line">├── bbb</span><br><span class="line">│   └── test2.txt</span><br><span class="line">└── ccc</span><br><span class="line">    └── test3.txt</span><br><span class="line">/mnt/test2</span><br><span class="line">└── test1_20250916_193521.tar.gz</span><br><span class="line">/mnt/test3</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="🧪-3-测试-解压">🧪 3. 测试 <code>解压</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xzvf /mnt/test2/test1_*.tar.gz -C /mnt/test3/ &amp;&amp; tree /mnt/test1 /mnt/test2 /mnt/test3</span><br></pre></td></tr></table></figure><ul><li><strong>完成 <code>解压</code> 后的目录结构</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">root@debian13 ~ <span class="comment"># tree /mnt/test1 /mnt/test2 /mnt/test3</span></span><br><span class="line">/mnt/test1</span><br><span class="line">├── aaa</span><br><span class="line">│   └── test1.txt</span><br><span class="line">├── bbb</span><br><span class="line">│   └── test2.txt</span><br><span class="line">└── ccc</span><br><span class="line">    └── test3.txt</span><br><span class="line">/mnt/test2</span><br><span class="line">└── test1_20250916_193521.tar.gz</span><br><span class="line">/mnt/test3</span><br><span class="line">└── test1</span><br><span class="line">    ├── aaa</span><br><span class="line">    │   └── test1.txt</span><br><span class="line">    ├── bbb</span><br><span class="line">    │   └── test2.txt</span><br><span class="line">    └── ccc</span><br><span class="line">        └── test3.txt</span><br></pre></td></tr></table></figure><h4 id="🧪-4-删除测试文件">🧪 4. 删除测试文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf /mnt/test1 /mnt/test2 /mnt/test3 &amp;&amp; \</span><br><span class="line"><span class="built_in">ls</span> /mnt</span><br></pre></td></tr></table></figure><p>这个测试流程展示了：</p><ol><li>创建测试目录结构和文件</li><li>使用备份脚本将目录压缩为一个tar.gz文件</li><li>使用解压脚本将这些压缩包解压到目标目录</li><li>验证解压结果是否正确</li></ol><p>通过这个完整的测试流程，您可以确保脚本正常工作，并且理解整个压缩和解压的过程。🧪</p><hr><p><a id="backup-compression"></a></p><h2 id="五、📁-备份原理与压缩机制">五、📁 备份原理与压缩机制</h2><h3 id="压缩技术">压缩技术</h3><p>脚本使用标准的 <code>tar</code> 和 <code>gzip</code> 工具进行压缩，具有以下特点：</p><ul><li><strong>高压缩比</strong>：gzip压缩算法在保证速度的同时提供良好的压缩率</li><li><strong>广泛兼容</strong>：tar.gz格式在所有Linux/Unix系统上均可直接处理</li><li><strong>保留权限</strong>：完整保留文件权限、所有权和时间戳信息</li></ul><h3 id="备份流程">备份流程</h3><ol><li><strong>参数验证</strong>：检查源目录是否存在，备份目录是否可写</li><li><strong>压缩创建</strong>：使用 <code>tar -czf</code> 命令创建gzip压缩的归档文件</li><li><strong>文件命名</strong>：采用&quot;目录名_年月日_时分秒.tar.gz&quot;格式</li><li><strong>清理策略</strong>：按时间排序备份文件，保留最新的N个文件</li><li><strong>结果报告</strong>：显示备份大小和当前保留的备份列表</li></ol><hr><p><a id="cron-setup"></a></p><h2 id="六、⏰-定时任务设置">六、⏰ 定时任务设置</h2><h3 id="设置定时自动备份">设置定时自动备份</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编辑当前用户的crontab</span></span><br><span class="line">crontab -e</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加以下任务示例：</span></span><br><span class="line"><span class="comment"># 每天凌晨2点执行备份，保留7个备份</span></span><br><span class="line">0 2 * * * /path/to/universal_backup.sh /var/www/html /backups 7</span><br><span class="line"></span><br><span class="line"><span class="comment"># 每周日凌晨1点执行备份，保留4个备份</span></span><br><span class="line">0 1 * * 0 /path/to/universal_backup.sh /home/user/documents /mnt/backup 4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 每6小时执行一次备份</span></span><br><span class="line">0 */6 * * * /path/to/universal_backup.sh /important/data /backups 10</span><br></pre></td></tr></table></figure><h3 id="日志记录配置">日志记录配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将输出同时记录到日志文件</span></span><br><span class="line">0 2 * * * /path/to/universal_backup.sh /var/www/html /backups 7 &gt;&gt; /var/log/backup.log 2&gt;&amp;1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只记录错误信息</span></span><br><span class="line">0 2 * * * /path/to/universal_backup.sh /var/www/html /backups 7 &gt; /dev/null 2&gt;&gt; /var/log/backup-error.log</span><br></pre></td></tr></table></figure><hr><p><a id="notes"></a></p><h2 id="七、💡-注意事项">七、💡 注意事项</h2><ol><li><strong>权限要求</strong>：运行脚本的用户需要对源目录有读取权限，对备份目录有写入权限</li><li><strong>磁盘空间</strong>：确保备份目录有足够的空间存储备份文件</li><li><strong>路径规范</strong>：建议使用绝对路径，避免相对路径可能带来的问题</li><li><strong>特殊字符</strong>：目录名中避免使用特殊字符，以免影响脚本执行</li><li><strong>文件系统</strong>：对于大量小文件，压缩过程可能较慢，建议在系统负载低时执行</li><li><strong>网络备份</strong>：如需备份到远程位置，可先本地备份再使用rsync同步</li></ol><h3 id="性能优化建议">性能优化建议</h3><ul><li>对于大型目录，考虑使用更高效的压缩算法（如pigz）</li><li>使用<code>ionice</code>和<code>nice</code>调整备份任务的IO和CPU优先级</li><li>对于数据库应用，建议先停止服务或使用专用备份工具</li></ul><h3 id="恢复测试建议">恢复测试建议</h3><p>定期测试备份文件的恢复过程，确保：</p><ul><li>备份文件完整无损</li><li>恢复后的文件权限正确</li><li>重要数据没有遗漏</li></ul><hr><blockquote><p>🚀 定期备份是数据安全的重要保障，建议您设置定时任务自动执行此脚本，为您的重要数据提供持续的保护。定期测试恢复流程，确保在需要时能够快速有效地恢复数据。</p></blockquote>]]></content>
    
    
    <summary type="html">本文详细介绍通用自动备份脚本的功能、使用方法及恢复指南，帮助您轻松管理重要数据的安全。</summary>
    
    
    
    <category term="Linux" scheme="https://www.meimolihan.eu.org/categories/Linux/"/>
    
    
    <category term="同步&amp;备份" scheme="https://www.meimolihan.eu.org/tags/%E5%90%8C%E6%AD%A5-%E5%A4%87%E4%BB%BD/"/>
    
    <category term="脚本" scheme="https://www.meimolihan.eu.org/tags/%E8%84%9A%E6%9C%AC/"/>
    
  </entry>
  
  <entry>
    <title>Linux 子目录分离备份与解压自动化脚本 📂</title>
    <link href="https://www.meimolihan.eu.org/posts/155e792c.html"/>
    <id>https://www.meimolihan.eu.org/posts/155e792c.html</id>
    <published>2025-09-14T20:08:51.000Z</published>
    <updated>2025-09-14T20:08:51.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Linux 子目录分离备份与解压自动化脚本 📂</h1><p><img src="https://file.meimolihan.eu.org/img/linux-rar-01.webp" alt=""></p><blockquote><p>本文介绍两个实用的自动化脚本：<code>directory_backup.sh</code> 和 <code>directory_extract.sh</code>，它们分别用于目录备份和解压操作。这些脚本采用免交互设计，非常适合集成到自动化运维流程或定时任务中，能够显著提高文件管理效率。✨</p></blockquote><hr><p><a id="navigation"></a></p><h2 id="📋-导航目录">📋 导航目录</h2><ul><li><a href="#script-intro">📚 脚本简介</a></li><li><a href="#backup-features">⚙️ 一、备份脚本功能与特点</a></li><li><a href="#extract-features">📦 二、解压脚本功能与特点</a></li><li><a href="#usage">🚀 三、使用方法</a><ul><li><a href="#remote-usage">🌐 1. 远程执行方式（压缩与解压）</a><ul><li><a href="#remote-backup">📦 远程压缩操作</a></li><li><a href="#remote-extract">📤 远程解压操作</a></li></ul></li><li><a href="#local-usage">💻 2. 本地执行方式（压缩与解压）</a><ul><li><a href="#local-backup">📦 本地压缩操作</a></li><li><a href="#local-extract">📤 本地解压操作</a></li></ul></li></ul></li><li><a href="#test-backup-extract">🔍 四、测试压缩与解压</a></li><li><a href="#script-summary">🔧 五、脚本功能概括</a></li><li><a href="#cron-setup">⏰ 六、定时任务设置</a></li><li><a href="#scenarios-tips">💡 七、使用场景与建议</a></li></ul><hr><p><a id="script-intro"></a></p><h2 id="📚-脚本简介">📚 脚本简介</h2><p>本文介绍两个实用的自动化脚本：<code>directory_backup.sh</code> 和 <code>directory_extract.sh</code>，它们分别用于目录备份和解压操作。这些脚本采用免交互设计，非常适合集成到自动化运维流程或定时任务中，能够显著提高文件管理效率。✨</p><p>无论是系统管理员需要定期备份重要数据，还是开发人员需要快速部署环境，这两个脚本都能提供简单而强大的解决方案。它们支持多种压缩格式，具有详细的执行日志和错误报告，让用户随时了解操作状态。</p><hr><p><a id="backup-features"></a></p><h2 id="一、⚙️-备份脚本功能与特点">一、⚙️ 备份脚本功能与特点</h2><p><strong><code>directory_backup.sh</code> 是一个专业的目录备份工具，具有以下突出特点：</strong></p><ul><li><strong>🎯 自动化备份</strong>：一键指定备份目录下的所有非隐藏子目录，无需人工干预</li><li><strong>📁 智能压缩</strong>：每个子目录单独压缩为 <code>.tar.gz</code> 文件，保持结构清晰</li><li><strong>🔄 自动覆盖</strong>：免交互设计自动覆盖已存在的备份文件，适合自动化任务</li><li><strong>⏰ 日期标记</strong>：备份文件名格式为 <code>目录名-YYYY-MM-DD-HH-MM-SS.tar.gz</code>，便于版本管理</li><li><strong>👁️ 透明操作</strong>：提供详细的执行日志，实时显示备份进度和结果</li><li><strong>🚫 智能过滤</strong>：自动跳过隐藏目录（以<code>.</code>开头的目录），避免不必要的备份</li></ul><p>该脚本特别适合需要定期备份数据的场景，如网站数据备份、配置文件备份或项目版本存档等。🔒</p><hr><p><a id="extract-features"></a></p><h2 id="二、📦-解压脚本功能与特点">二、📦 解压脚本功能与特点</h2><p><strong><code>directory_extract.sh</code> 是一个多功能解压工具，具有以下核心功能：</strong></p><ul><li><strong>🔓 多格式支持</strong>：全面支持 <code>.tar.gz</code>, <code>.tgz</code>, <code>.tar</code>, <code>.zip</code>, <code>.gz</code> 等多种压缩格式</li><li><strong>📂 批量处理</strong>：自动遍历当前目录下的所有压缩包，一次性完成解压操作</li><li><strong>🏗️ 自动创建</strong>：如果目标目录不存在，会自动创建所需目录结构</li><li><strong>📊 详细报告</strong>：显示每个文件的解压状态和最终统计结果，一目了然</li><li><strong>🛡️ 错误处理</strong>：具备完善的错误处理机制，单个文件失败不影响其他操作</li><li><strong>🔍 智能识别</strong>：正确处理复合扩展名（如 <code>.tar.gz</code>），避免重复解压问题</li></ul><p>无论是从备份恢复数据，还是处理下载的压缩包集合，这个脚本都能大大简化工作流程。📤</p><hr><p><a id="usage"></a></p><h2 id="三、🚀-使用方法">三、🚀 使用方法</h2><p><a id="remote-usage"></a></p><h3 id="1-🌐-远程执行方式（压缩与解压）">1. 🌐 远程执行方式（压缩与解压）</h3><p>最简单的方法是直接通过远程URL执行脚本，无需下载：</p><p><a id="remote-backup"></a></p><h4 id="📦-远程压缩操作">📦 远程压缩操作</h4><ul><li><strong>基本命令格式 <code>bash ~/directory_backup.sh &lt;源目录&gt; &lt;备份目录&gt; [保留数量]</code></strong></li><li><strong>备份目录下仅保留按 <code>子目录名_时间戳.tar.gz</code> 命名的压缩包，每个对应<code>源目录</code>下的一轮 <code>子目录</code> 备份。</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -sL script.meimolihan.eu.org/sh/backup/directory_backup.sh) /mnt/test1 /mnt/test2/ 5</span><br></pre></td></tr></table></figure><ul><li><strong>或使用Gitee镜像：</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -sL gitee.com/meimolihan/script/raw/master/sh/backup/directory_backup.sh) /mnt/test1 /mnt/test2/ 5</span><br></pre></td></tr></table></figure><p><img src="https://file.meimolihan.eu.org/screenshot/directory_backup-001.webp" alt=""></p><p><a id="remote-extract"></a></p><h4 id="📤-远程解压操作">📤 远程解压操作</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换到需要解压文件目录并执行解压到指定目录</span></span><br><span class="line"><span class="built_in">cd</span> /mnt/test2 &amp;&amp; \</span><br><span class="line">bash &lt;(curl -sL script.meimolihan.eu.org/sh/backup/directory_extract.sh) /mnt/test3/ &amp;&amp; \</span><br><span class="line">tree /mnt/test3</span><br></pre></td></tr></table></figure><ul><li><strong>或使用Gitee镜像：</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换到需要解压文件目录并执行解压到指定目录</span></span><br><span class="line"><span class="built_in">cd</span> /mnt/test2 &amp;&amp; \</span><br><span class="line">bash &lt;(curl -sL gitee.com/meimolihan/script/raw/master/sh/backup/directory_extract.sh) /mnt/test3/ &amp;&amp; \</span><br><span class="line">tree /mnt/test3</span><br></pre></td></tr></table></figure><hr><p><a id="local-usage"></a></p><h3 id="2-💻-本地执行方式（压缩与解压）">2. 💻 本地执行方式（压缩与解压）</h3><p>如果需要频繁使用，可以下载脚本到本地：</p><p><a id="local-backup"></a></p><h4 id="📦-本地压缩操作">📦 本地压缩操作</h4><ul><li><strong>基本命令格式 <code>bash ~/directory_backup.sh &lt;源目录&gt; &lt;备份目录&gt; [保留数量]</code></strong></li><li><strong>备份目录下仅保留按 <code>子目录名_时间戳.tar.gz</code> 命名的压缩包，每个对应<code>源目录</code>下的一轮 <code>子目录</code> 备份。</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载备份脚本</span></span><br><span class="line">wget -c https://gitee.com/meimolihan/script/raw/master/sh/backup/directory_backup.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 赋予执行权限</span></span><br><span class="line"><span class="built_in">chmod</span> +x directory_backup.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解决可能存在的换行符问题（如果需要）</span></span><br><span class="line"><span class="built_in">sudo</span> apt install dos2unix</span><br><span class="line">dos2unix directory_backup.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换到需要备份的目录并执行备份到指定目录</span></span><br><span class="line">bash directory_backup.sh /mnt/test1 /mnt/test2 5 &amp;&amp; \</span><br><span class="line"><span class="built_in">ls</span> /mnt/test2</span><br></pre></td></tr></table></figure><p><a id="local-extract"></a></p><h4 id="📤-本地解压操作">📤 本地解压操作</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载解压脚本</span></span><br><span class="line">wget -c https://gitee.com/meimolihan/script/raw/master/sh/backup/directory_extract.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 赋予执行权限</span></span><br><span class="line"><span class="built_in">chmod</span> +x directory_extract.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解决可能存在的换行符问题（如果需要）</span></span><br><span class="line"><span class="built_in">sudo</span> apt install dos2unix</span><br><span class="line">dos2unix directory_extract.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行脚本</span></span><br><span class="line"><span class="comment"># 切换到需要解压文件目录并执行解压到指定目录</span></span><br><span class="line"><span class="built_in">cd</span> /mnt/test2 &amp;&amp; \</span><br><span class="line">/mnt/directory_extract.sh /mnt/test3 &amp;&amp; \</span><br><span class="line">tree /mnt/test3</span><br></pre></td></tr></table></figure><p>解压脚本的使用方法类似，只需替换相应的脚本名称和URL即可。</p><hr><p><a id="test-backup-extract"></a></p><h2 id="四、🔍-测试压缩与解压">四、🔍 测试压缩与解压</h2><ul><li>以下是一个完整的测试流程，展示如何使用这两个脚本进行压缩和解压操作：</li></ul><h3 id="🧪-1-创建测试文件">🧪 1. 创建测试文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /mnt/&#123;test1,test2,test3&#125; &amp;&amp; \</span><br><span class="line"><span class="built_in">mkdir</span> -p /mnt/test1/&#123;aaa,bbb,ccc&#125; &amp;&amp; \</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;测试文件内容&quot;</span> &gt; /mnt/test1/aaa/test1.txt &amp;&amp; \</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;另一个测试文件&quot;</span> &gt; /mnt/test1/bbb/test2.txt &amp;&amp; \</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;第三个测试文件&quot;</span> &gt; /mnt/test1/ccc/test3.txt &amp;&amp; \</span><br><span class="line">tree /mnt/test1 /mnt/test2 /mnt/test3</span><br></pre></td></tr></table></figure><ul><li><strong>初始测试目录结构</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@debian13 / <span class="comment"># tree /mnt/test1 /mnt/test2 /mnt/test3</span></span><br><span class="line">/mnt/test1</span><br><span class="line">├── aaa</span><br><span class="line">│   └── test1.txt</span><br><span class="line">├── bbb</span><br><span class="line">│   └── test2.txt</span><br><span class="line">└── ccc</span><br><span class="line">    └── test3.txt</span><br><span class="line">/mnt/test2</span><br><span class="line">/mnt/test3</span><br></pre></td></tr></table></figure><h3 id="🧪-2-测试-压缩">🧪 2. 测试 <code>压缩</code></h3><ul><li>这里指定了 <code>保留数量 5</code>，默认是<code>保留数量 3</code>。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -sL gitee.com/meimolihan/script/raw/master/sh/backup/directory_backup.sh) /mnt/test1 /mnt/test2 5 &amp;&amp; tree /mnt/test1 /mnt/test2 /mnt/test3</span><br></pre></td></tr></table></figure><ul><li><strong>完成 <code>压缩</code> 后的目录结构</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">root@debian13 / <span class="comment"># tree /mnt/test1 /mnt/test2 /mnt/test3</span></span><br><span class="line">/mnt/test1</span><br><span class="line">├── aaa</span><br><span class="line">│   └── test1.txt</span><br><span class="line">├── bbb</span><br><span class="line">│   └── test2.txt</span><br><span class="line">└── ccc</span><br><span class="line">    └── test3.txt</span><br><span class="line">/mnt/test2</span><br><span class="line">├── aaa_20250916_192217.tar.gz</span><br><span class="line">├── bbb_20250916_192217.tar.gz</span><br><span class="line">└── ccc_20250916_192217.tar.gz</span><br><span class="line">/mnt/test3</span><br></pre></td></tr></table></figure><h3 id="🧪-3-测试解压">🧪 3. 测试<code>解压</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /mnt/test2 &amp;&amp; \</span><br><span class="line">bash &lt;(curl -sL gitee.com/meimolihan/script/raw/master/sh/backup/directory_extract.sh) /mnt/test3/ &amp;&amp; \</span><br><span class="line">tree /mnt/test1 /mnt/test2 /mnt/test3</span><br></pre></td></tr></table></figure><ul><li><strong>完成 <code>解压</code> 后的目录结构</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">root@debian13 ~ <span class="comment"># tree /mnt/test1 /mnt/test2 /mnt/test3</span></span><br><span class="line">/mnt/test1</span><br><span class="line">├── aaa</span><br><span class="line">│   └── test1.txt</span><br><span class="line">├── bbb</span><br><span class="line">│   └── test2.txt</span><br><span class="line">└── ccc</span><br><span class="line">    └── test3.txt</span><br><span class="line">/mnt/test2</span><br><span class="line">├── aaa_20250916_191032.tar.gz</span><br><span class="line">├── bbb_20250916_191032.tar.gz</span><br><span class="line">└── ccc_20250916_191032.tar.gz</span><br><span class="line">/mnt/test3</span><br><span class="line">├── aaa</span><br><span class="line">│   └── test1.txt</span><br><span class="line">├── bbb</span><br><span class="line">│   └── test2.txt</span><br><span class="line">└── ccc</span><br><span class="line">    └── test3.txt</span><br></pre></td></tr></table></figure><h3 id="🧪-4-删除测试文件">🧪 4. 删除测试文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> .. &amp;&amp; \</span><br><span class="line"><span class="built_in">rm</span> -rf /mnt/test1 /mnt/test2 /mnt/test3 &amp;&amp; \</span><br><span class="line"><span class="built_in">ls</span> /mnt</span><br></pre></td></tr></table></figure><p>这个测试流程展示了：</p><ol><li>创建测试目录结构和文件</li><li>使用备份脚本将目录压缩为多个tar.gz文件</li><li>使用解压脚本将这些压缩包解压到目标目录</li><li>验证解压结果是否正确</li></ol><p>通过这个完整的测试流程，您可以确保脚本正常工作，并且理解整个压缩和解压的过程。🧪</p><hr><p><a id="script-summary"></a></p><h2 id="五、🔧-脚本功能概括">五、🔧 脚本功能概括</h2><h3 id="directory-backup-sh">directory_backup.sh</h3><ul><li><strong>核心功能</strong>：自动化备份当前工作目录下的所有非隐藏子目录</li><li><strong>备份格式</strong>：每个子目录压缩为单独的 <code>目录名-YYYY-MM-DD.tar.gz</code> 文件</li><li><strong>适用场景</strong>：定期自动化备份、系统定时任务、脚本集成和批处理操作</li></ul><h3 id="directory-extract-sh">directory_extract.sh</h3><ul><li><strong>核心功能</strong>：自动解压当前目录下的所有压缩包到指定目录</li><li><strong>支持格式</strong>：<code>.tar.gz</code>, <code>.tgz</code>, <code>.tar</code>, <code>.zip</code>, <code>.gz</code></li><li><strong>适用场景</strong>：从备份恢复数据、批量处理下载的压缩包、环境部署</li></ul><hr><p><a id="cron-setup"></a></p><h2 id="六、⏰-定时任务设置">六、⏰ 定时任务设置</h2><h3 id="设置定时自动备份">设置定时自动备份</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编辑当前用户的crontab</span></span><br><span class="line">crontab -e</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加以下任务示例：</span></span><br><span class="line"><span class="comment"># 每天凌晨2点执行备份，保留7个备份</span></span><br><span class="line">0 2 * * * bash &lt;(curl -sL gitee.com/meimolihan/script/raw/master/sh/backup/directory_backup.sh) /mnt/test2/ /mnt/test2/ 7</span><br><span class="line"></span><br><span class="line"><span class="comment"># 每周日凌晨1点执行备份，保留4个备份</span></span><br><span class="line">0 1 * * 0 /path/to/universal_backup.sh /home/user/documents /mnt/backup 4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 每6小时执行一次备份</span></span><br><span class="line">0 */6 * * * /path/to/universal_backup.sh /important/data /backups 10</span><br></pre></td></tr></table></figure><h3 id="日志记录配置">日志记录配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将输出同时记录到日志文件</span></span><br><span class="line">0 2 * * * /path/to/universal_backup.sh /var/www/html /backups 7 &gt;&gt; /var/log/backup.log 2&gt;&amp;1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只记录错误信息</span></span><br><span class="line">0 2 * * * /path/to/universal_backup.sh /var/www/html /backups 7 &gt; /dev/null 2&gt;&gt; /var/log/backup-error.log</span><br></pre></td></tr></table></figure><hr><p><a id="scenarios-tips"></a></p><h2 id="七、💡-使用场景与建议">七、💡 使用场景与建议</h2><h3 id="常见使用场景">常见使用场景</h3><ol><li><strong>🔄 定期数据备份</strong>：结合cron定时任务，定期备份重要数据</li><li><strong>🚚 项目部署</strong>：快速解压多个组件包到指定目录</li><li><strong>📦 数据迁移</strong>：将数据打包后迁移到新服务器或新位置</li><li><strong>🛡️ 版本归档</strong>：定期创建项目或数据的版本快照</li></ol><h3 id="实用建议">实用建议</h3><ol><li><strong>🔐 权限管理</strong>：确保运行脚本的用户有足够的读写权限</li><li><strong>💾 空间检查</strong>：在执行备份前检查目标磁盘空间是否充足</li><li><strong>📝 日志监控</strong>：关注脚本输出，及时发现和处理错误</li><li><strong>🔄 测试验证</strong>：首次使用前在小范围测试，验证脚本行为符合预期</li><li><strong>⏰ 定时任务</strong>：使用cron等工具设置定期自动执行备份任务</li></ol><h3 id="高级技巧">高级技巧</h3><ul><li>结合其他工具（如rsync）实现增量备份</li><li>使用脚本返回值（exit code）在自动化流程中判断执行结果</li><li>通过重定向输出保存执行日志：<code>./script.sh /backup/dir &gt; backup.log 2&gt;&amp;1</code></li></ul><p>这两个脚本虽然简单，但功能强大，能够满足大多数日常备份和解压需求。通过合理使用，可以显著提高工作效率并减少人为错误。🎯</p><hr><p><em>如有问题或建议，欢迎反馈！希望这些脚本能为您的工作带来便利。</em> 😊</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Linux 子目录分离备份与解压自动化脚本 📂&lt;/h1&gt;
&lt;p&gt;&lt;img src=&quot;https://file.meimolihan.eu.org/img/linux-rar-01.webp&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;本文介绍两个实用的自动</summary>
      
    
    
    
    <category term="Linux" scheme="https://www.meimolihan.eu.org/categories/Linux/"/>
    
    
    <category term="同步&amp;备份" scheme="https://www.meimolihan.eu.org/tags/%E5%90%8C%E6%AD%A5-%E5%A4%87%E4%BB%BD/"/>
    
    <category term="脚本" scheme="https://www.meimolihan.eu.org/tags/%E8%84%9A%E6%9C%AC/"/>
    
  </entry>
  
  <entry>
    <title>Docker 部署 Halo 博客系统-PostgreSQL ✨</title>
    <link href="https://www.meimolihan.eu.org/posts/92c231df.html"/>
    <id>https://www.meimolihan.eu.org/posts/92c231df.html</id>
    <published>2025-09-14T14:47:15.000Z</published>
    <updated>2025-09-14T14:47:15.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Docker 部署 Halo 博客系统-PostgreSQL ✨</h1><p><img src="https://file.meimolihan.eu.org/img/halo-01.webp" alt="Halo Banner"></p><p><video src="http://file.meimolihan.eu.org/mp4/halo-2.0.mp4" controls="controls" width="650" height="400"></video></p><hr><h2 id="📋-目录导航">📋 目录导航</h2><ul><li><a href="#project-intro">🎯 项目简介</a></li><li><a href="#features">🛠️ 核心特性</a></li><li><a href="#deploy">🐳 一、Docker 部署 Halo 博客</a><ul><li><a href="#deploy-setup">1. 创建目录并编写 <code>docker-compose.yml</code> 文件 📁</a></li><li><a href="#deploy-start">2. 拉取镜像并启动容器 🚀</a></li><li><a href="#postgresql-version">3. PostgreSQL 版本管理与验证 🔍</a></li></ul></li><li><a href="#usage">🚀 二、使用 Halo 博客</a><ul><li><a href="#usage-setup">1. 首次访问设置 🎯</a></li><li><a href="#usage-features">2. 功能特性 ✨</a></li></ul></li><li><a href="#nginx">🌐 三、Nginx 反向代理配置</a><ul><li><a href="#nginx-config">1. 创建 Nginx 配置文件 🔧</a></li><li><a href="#nginx-reload">2. 测试并重载 Nginx 🔄</a></li></ul></li><li><a href="#maintenance">🔧 四、容器维护命令</a><ul><li><a href="#docker-compose">1. Docker Compose 命令 🐳</a></li><li><a href="#docker">2. Docker 容器命令 📦</a></li><li><a href="#docker-images">3. Docker 镜像管理 📀</a></li></ul></li><li><a href="#conclusion">🌟 启航创作，连接世界</a></li></ul><hr><p><a id="project-intro"></a></p><h2 id="🎯-项目简介">🎯 项目简介</h2><ul><li><strong>🌐 <code>Halo</code> 官网地址：<a href="https://www.halo.run/">https://www.halo.run/</a></strong></li><li><strong>🐱 <code>GitHub</code> 项目地址：<a href="https://github.com/halo-dev">https://github.com/halo-dev</a></strong></li><li><strong>🐋 <code>Docker</code> 镜像地址：<a href="https://hub.docker.com/r/halohub/halo">https://hub.docker.com/r/halohub/halo</a></strong></li></ul><p><strong><a href="https://www.halo.run/">Halo</a></strong> 是一款现代化的开源博客/CMS 系统，基于 Java 和 Spring Boot 构建。它提供了丰富的主题和插件生态系统，让用户可以轻松创建和管理自己的网站。</p><hr><p><a id="features"></a></p><h2 id="🛠️-核心特性">🛠️ 核心特性</h2><table><thead><tr><th>特性类别</th><th>功能描述</th><th>优势</th></tr></thead><tbody><tr><td><strong>🎨 主题系统</strong></td><td>丰富的主题选择</td><td>支持自定义设计，满足个性化需求</td></tr><tr><td><strong>🔌 插件生态</strong></td><td>功能扩展灵活</td><td>社区插件丰富，满足各种需求</td></tr><tr><td><strong>📝 编辑器</strong></td><td>富文本和Markdown支持</td><td>强大的内容编辑体验</td></tr><tr><td><strong>👥 用户管理</strong></td><td>多用户权限控制</td><td>支持团队协作和权限管理</td></tr><tr><td><strong>📊 数据统计</strong></td><td>访问统计和分析</td><td>提供详细的数据分析报告</td></tr><tr><td><strong>🔍 SEO 优化</strong></td><td>内置SEO功能</td><td>提升搜索引擎排名和可见度</td></tr><tr><td><strong>🌐 响应式设计</strong></td><td>多端适配</td><td>在手机、平板和电脑上均有良好体验</td></tr><tr><td><strong>🐳 Docker 部署</strong></td><td>容器化部署</td><td>简单便捷，易于维护和升级</td></tr></tbody></table><hr><p><a id="deploy"></a></p><h2 id="🐳-一、Docker-部署-Halo-博客">🐳 一、Docker 部署 Halo 博客</h2><p><a id="deploy-setup"></a></p><h3 id="1-创建目录并编写-docker-compose-yml-文件-📁">1. 创建目录并编写 <code>docker-compose.yml</code> 文件 📁</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /mnt/mydisk/home/halo &amp;&amp; <span class="built_in">cd</span> <span class="variable">$_</span> &amp;&amp; \</span><br><span class="line"><span class="built_in">cat</span> &gt; docker-compose.yml &lt;&lt;<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">services:</span><br><span class="line">  halo:</span><br><span class="line">    image: registry.fit2cloud.com/halo/halo:2</span><br><span class="line">    container_name: halo</span><br><span class="line">    restart: on-failure:3</span><br><span class="line">    depends_on:</span><br><span class="line">      halodb:</span><br><span class="line">        condition: service_healthy</span><br><span class="line">    networks:</span><br><span class="line">      halo_network:</span><br><span class="line">    volumes:</span><br><span class="line">      - ./halo2:/root/.halo2</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="string">&quot;8090:8090&quot;</span></span><br><span class="line">    healthcheck:</span><br><span class="line">      <span class="built_in">test</span>: [<span class="string">&quot;CMD&quot;</span>, <span class="string">&quot;curl&quot;</span>, <span class="string">&quot;-f&quot;</span>, <span class="string">&quot;http://localhost:8090/actuator/health/readiness&quot;</span>]</span><br><span class="line">      interval: 30s</span><br><span class="line">      <span class="built_in">timeout</span>: 5s</span><br><span class="line">      retries: 5</span><br><span class="line">      start_period: 30s</span><br><span class="line">    environment:</span><br><span class="line">      <span class="comment"># JVM 参数，默认为 -Xmx256m -Xms256m，可以根据实际情况做调整，置空表示不添加 JVM 参数</span></span><br><span class="line">      - JVM_OPTS=-Xmx256m -Xms256m</span><br><span class="line">    <span class="built_in">command</span>:</span><br><span class="line">      - --spring.r2dbc.url=r2dbc:pool:postgresql://halodb/halo</span><br><span class="line">      - --spring.r2dbc.username=halo</span><br><span class="line">      <span class="comment"># PostgreSQL 的密码，请保证与下方 POSTGRES_PASSWORD 的变量值一致。</span></span><br><span class="line">      - --spring.r2dbc.password=openpostgresql</span><br><span class="line">      - --spring.sql.init.platform=postgresql</span><br><span class="line">      <span class="comment"># 外部访问地址，请根据实际需要修改</span></span><br><span class="line">      - --halo.external-url=http://localhost:8090/</span><br><span class="line">  halodb:</span><br><span class="line">    image: postgres:17.6</span><br><span class="line">    container_name: halodb</span><br><span class="line">    restart: on-failure:3</span><br><span class="line">    networks:</span><br><span class="line">      halo_network:</span><br><span class="line">    volumes:</span><br><span class="line">      - ./db:/var/lib/postgresql/data</span><br><span class="line">    healthcheck:</span><br><span class="line">      <span class="built_in">test</span>: [ <span class="string">&quot;CMD&quot;</span>, <span class="string">&quot;pg_isready&quot;</span> ]</span><br><span class="line">      interval: 10s</span><br><span class="line">      <span class="built_in">timeout</span>: 5s</span><br><span class="line">      retries: 5</span><br><span class="line">    environment:</span><br><span class="line">      - POSTGRES_PASSWORD=openpostgresql</span><br><span class="line">      - POSTGRES_USER=halo</span><br><span class="line">      - POSTGRES_DB=halo</span><br><span class="line">      - PGUSER=halo</span><br><span class="line"></span><br><span class="line">networks:</span><br><span class="line">  halo_network:</span><br><span class="line">    name: halo_network</span><br><span class="line">    driver: bridge</span><br><span class="line"></span><br><span class="line"><span class="comment"># Halo博客_后台地址：http://10.10.10.245:8090/console</span></span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p><a id="deploy-start"></a></p><h3 id="2-拉取镜像并启动容器-🚀">2. 拉取镜像并启动容器 🚀</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><p><a id="postgresql-version"></a></p><h3 id="3-PostgreSQL-版本管理与验证-🔍">3. PostgreSQL 版本管理与验证 🔍</h3><ul><li>如需使用其他版本的 <code>PostgreSQL</code> 镜像，可以使用以下命令查询可用版本标签：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -sS <span class="string">&quot;https://registry.hub.docker.com/v2/repositories/library/postgres/tags/?page_size=100&quot;</span> \</span><br><span class="line">| jq -r <span class="string">&#x27;.results[].name&#x27;</span> | grep -E <span class="string">&#x27;^[0-9]+(\.[0-9]+)?$&#x27;</span> | <span class="built_in">sort</span> -V</span><br></pre></td></tr></table></figure><ul><li>部署完成后，可以使用以下命令验证 <code>PostgreSQL</code> 版本：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it halodb pg_config --version</span><br></pre></td></tr></table></figure><hr><p><a id="usage"></a></p><h2 id="🚀-二、使用-Halo-博客">🚀 二、使用 Halo 博客</h2><p><a id="usage-setup"></a></p><h3 id="1-首次访问设置-🎯">1. 首次访问设置 🎯</h3><ol><li>打开浏览器访问: <a href="http://xn--IP-0p3cl7jf7fo83a16x:8090/console">http://你的服务器IP:8090/console</a></li><li>按照页面提示完成初始设置：<ul><li>创建管理员账户</li><li>设置博客基本信息</li><li>选择初始主题</li></ul></li></ol><p><a id="usage-features"></a></p><h3 id="2-功能特性-✨">2. 功能特性 ✨</h3><ul><li>🎨 <strong>主题系统</strong>: 丰富的主题选择，支持自定义</li><li>🔌 <strong>插件生态</strong>: 扩展功能，满足各种需求</li><li>📝 <strong>编辑器</strong>: 强大的富文本和Markdown编辑器</li><li>👥 <strong>用户管理</strong>: 多用户支持，权限控制</li><li>📊 <strong>数据统计</strong>: 访问统计和内容分析</li><li>🔍 <strong>SEO 优化</strong>: 内置SEO功能，提升搜索引擎排名</li></ul><hr><p><a id="nginx"></a></p><h2 id="🌐-三、Nginx-反向代理配置">🌐 三、Nginx 反向代理配置</h2><blockquote><p><strong>访问地址示例：<a href="https://halo.example.com:666">https://halo.example.com:666</a></strong></p></blockquote><p><a id="nginx-config"></a></p><h3 id="1-创建-Nginx-配置文件-🔧">1. 创建 Nginx 配置文件 🔧</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /etc/nginx/conf.d &amp;&amp; \</span><br><span class="line"><span class="built_in">cat</span> &gt; /etc/nginx/conf.d/halo.conf &lt;&lt;<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">server &#123;</span><br><span class="line">    listen 666 ssl;</span><br><span class="line">    listen [::]:666 ssl;</span><br><span class="line">    server_name halo.example.com;   <span class="comment"># 替换为你的域名</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># SSL 证书</span></span><br><span class="line">    ssl_certificate /etc/nginx/keyfile/cert.pem;</span><br><span class="line">    ssl_certificate_key /etc/nginx/keyfile/key.pem;</span><br><span class="line">    ssl_protocols TLSv1.2 TLSv1.3;</span><br><span class="line">    ssl_prefer_server_ciphers off;</span><br><span class="line">    ssl_ciphers ECDHE+AESGCM:ECDHE+CHACHA20:!aNULL:!MD5;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 安全头部</span></span><br><span class="line">    add_header X-Frame-Options DENY;</span><br><span class="line">    add_header X-Content-Type-Options nosniff;</span><br><span class="line">    add_header X-XSS-Protection <span class="string">&quot;1; mode=block&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 文件大小限制</span></span><br><span class="line">    client_max_body_size 100M;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass http://127.0.0.1:8090;</span><br><span class="line">        proxy_set_header Host <span class="variable">$host</span>;</span><br><span class="line">        proxy_set_header X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        proxy_set_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">        proxy_set_header X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line">        proxy_http_version 1.1;</span><br><span class="line">        proxy_buffering off;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># WebSocket 支持</span></span><br><span class="line">        proxy_set_header Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">        proxy_set_header Connection <span class="string">&quot;upgrade&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 错误页</span></span><br><span class="line">    error_page 404 500 502 503 504 /50x.html;</span><br><span class="line">    location = /50x.html &#123;</span><br><span class="line">        root /usr/share/nginx/html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p><a id="nginx-reload"></a></p><h3 id="2-测试并重载-Nginx-🔄">2. 测试并重载 Nginx 🔄</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nginx -t &amp;&amp; <span class="built_in">sudo</span> systemctl reload nginx</span><br></pre></td></tr></table></figure><hr><p><a id="maintenance"></a></p><h2 id="🔧-四、容器维护命令">🔧 四、容器维护命令</h2><p><a id="docker-compose"></a></p><h3 id="1-Docker-Compose-命令-🐳">1. Docker Compose 命令 🐳</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入项目目录</span></span><br><span class="line"><span class="built_in">cd</span> /mnt/mydisk/home/halo</span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止并删除容器</span></span><br><span class="line">docker-compose down</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拉取最新镜像</span></span><br><span class="line">docker-compose pull</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动容器</span></span><br><span class="line">docker-compose up -d</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看服务状态</span></span><br><span class="line">docker-compose ps</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看服务日志</span></span><br><span class="line">docker-compose logs</span><br><span class="line"></span><br><span class="line"><span class="comment"># 跟踪服务日志</span></span><br><span class="line">docker-compose logs -f</span><br><span class="line"></span><br><span class="line"><span class="comment"># 完整升级流程</span></span><br><span class="line">docker-compose down &amp;&amp; \</span><br><span class="line">docker-compose pull &amp;&amp; \</span><br><span class="line">docker-compose up -d &amp;&amp; \</span><br><span class="line">docker image prune -f</span><br></pre></td></tr></table></figure><p><a id="docker"></a></p><h3 id="2-Docker-容器命令-📦">2. Docker 容器命令 📦</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看运行中容器</span></span><br><span class="line">docker ps</span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止/启动/重启容器</span></span><br><span class="line">docker stop halo halodb</span><br><span class="line">docker start halo halodb  </span><br><span class="line">docker restart halo halodb</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除容器</span></span><br><span class="line">docker <span class="built_in">rm</span> halo halodb</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入容器Shell</span></span><br><span class="line">docker <span class="built_in">exec</span> -it halo sh</span><br><span class="line">docker <span class="built_in">exec</span> -it halo bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看容器日志</span></span><br><span class="line">docker logs halo</span><br><span class="line">docker logs halodb</span><br><span class="line">docker logs -f halo</span><br><span class="line">docker logs --<span class="built_in">tail</span> 50 halodb</span><br><span class="line"></span><br><span class="line"><span class="comment"># 监控资源使用</span></span><br><span class="line">docker stats halo halodb</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看容器详情</span></span><br><span class="line">docker inspect halo</span><br></pre></td></tr></table></figure><p><a id="docker-images"></a></p><h3 id="3-Docker-镜像管理-📀">3. Docker 镜像管理 📀</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br><span class="line">docker rmi halohub/halo:2.20.12 mysql:8.3.0</span><br><span class="line">docker image prune -f</span><br><span class="line">docker image prune -a -f</span><br></pre></td></tr></table></figure><hr><p><a id="conclusion"></a></p><h2 id="🌟-启航创作，连接世界">🌟 启航创作，连接世界</h2><p>通过本文档，你已经成功使用 Docker 部署了 Halo 博客系统，并借助 Nginx 反向代理实现了安全便捷的远程访问。现在，你可以：</p><p>✍️ <strong>自由表达</strong> 书写所想、记录生活、分享知识，打造属于你自己的内容天地<br>🎨 <strong>个性定制</strong> 借助丰富的主题与插件，构建独一无二的博客风格与功能<br>🌍 <strong>广泛传播</strong> 通过多端适配与SEO优化，让你的内容被更多人发现与认可<br>🤝 <strong>互动交流</strong> 开放评论与订阅功能，与读者建立更深度的连接与对话</p><p>博客不仅是记录的工具，更是思想的载体和连接的桥梁。愿 Halo 成为你畅所欲言、展示自我的最佳伙伴，陪伴你在每一个创作的时刻和分享的瞬间。</p><p>从现在开始，发布你的第一篇博客，向世界发出你的声音吧！🚀</p><hr><p>📌 <strong>持续关注</strong>：建议订阅 <a href="https://www.halo.run/">Halo 官方更新</a>，及时获取新功能与主题插件。<br>🐛 <strong>反馈与支持</strong>：使用中如有问题或建议，可前往 <a href="https://github.com/halo-dev/halo/issues">GitHub Issues</a> 提出。</p><p>祝你写作愉快，博客有成！🎉</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Docker 部署 Halo 博客系统-PostgreSQL ✨&lt;/h1&gt;
&lt;p&gt;&lt;img src=&quot;https://file.meimolihan.eu.org/img/halo-01.webp&quot; alt=&quot;Halo Banner&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;video src</summary>
      
    
    
    
    <category term="Docker" scheme="https://www.meimolihan.eu.org/categories/Docker/"/>
    
    
    <category term="compose" scheme="https://www.meimolihan.eu.org/tags/compose/"/>
    
    <category term="halo" scheme="https://www.meimolihan.eu.org/tags/halo/"/>
    
  </entry>
  
  <entry>
    <title>Halo 博客升级 MySQL 数据库指南 🚀</title>
    <link href="https://www.meimolihan.eu.org/posts/8743bdf0.html"/>
    <id>https://www.meimolihan.eu.org/posts/8743bdf0.html</id>
    <published>2025-09-14T10:09:45.000Z</published>
    <updated>2025-09-14T10:09:45.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Halo 博客升级 MySQL 数据库指南 🚀</h1><p><img src="https://file.meimolihan.eu.org/img/mysql-01.webp" alt=""></p><p>📌 <strong>导读</strong>：本文详细记录将 Halo 博客的 MySQL 数据库从 8.3.0 版本安全升级至 9.4.0 的完整操作流程。包含版本路线规划、数据备份、升级参数配置、健康检查及收尾操作，适用于生产环境下的平滑升级。</p><hr><h2 id="📋-导航目录">📋 导航目录</h2><ul><li><a href="#upgrade-background">✨ 升级背景与注意事项</a></li><li><a href="#version-path">🔍 版本升级路线</a></li><li><a href="#check-tags">📦 准备工作：查询可用版本标签</a></li><li><a href="#full-backup">💾 关键第一步：整库逻辑备份（必做！）</a></li><li><a href="#cross-upgrade">⚙️ 跨主版本升级（8.4.2 → 9.0.1）</a><ul><li><a href="#change-image-tag">📝 修改 Docker 镜像标签</a></li><li><a href="#add-upgrade-param">⚒️ 添加临时升级参数</a></li></ul></li><li><a href="#execute-upgrade">🚀 执行升级操作</a></li><li><a href="#health-check">✅ 升级状态确认</a></li><li><a href="#cleanup">🔧 收尾工作</a></li><li><a href="#qa-summary">💡 常见问题与总结</a></li></ul><hr><p><a id="upgrade-background"></a></p><h2 id="✨-升级背景与注意事项">✨ 升级背景与注意事项</h2><p>MySQL 8.x 至 9.x 属于跨主版本升级，涉及<strong>系统表元数据格式变更</strong>且升级过程不可逆。🔴 <strong>重要提示</strong>：生产环境升级前务必完成全量逻辑备份，避免数据丢失风险。</p><blockquote><p>📝 <strong>升级特点</strong>：</p><ul><li>✨ <strong>性能提升</strong>：MySQL 9.x 优化了查询处理器，复杂查询性能提升显著；</li><li>🔒 <strong>增强安全</strong>：新增角色继承、密码验证策略强化等安全特性；</li><li>📊 <strong>JSON功能扩展</strong>：JSON数据类型支持更多函数和路径表达式；</li><li>💾 <strong>兼容性保障</strong>：9.0 版本兼容 8.4 的数据文件格式；</li><li>⚠️ <strong>升级单向性</strong>：升级后会更新系统表结构以支持新特性，且不可回退；</li><li>🔧 <strong>参数要求</strong>：仅首次启动需添加 <code>--upgrade=FORCE</code> 参数，后续重启无需此操作。</li></ul></blockquote><hr><p><a id="version-path"></a></p><h2 id="🔍-版本升级路线">🔍 版本升级路线</h2><p>本次升级采用渐进式路径，确保兼容性稳定：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">8.3.0 → 8.4.0 → 8.4.2 → 9.0.1 → 9.4.0</span><br></pre></td></tr></table></figure><blockquote><p>💡 <strong>提示</strong>：建议逐步升级，避免跨多个主版本直接升级，以减少意外错误。每个中间版本都解决了特定的兼容性问题，确保数据迁移的平稳性。</p></blockquote><hr><p><a id="check-tags"></a></p><h2 id="📦-准备工作：查询可用版本标签">📦 准备工作：查询可用版本标签</h2><p>使用以下命令列出所有官方 MySQL 镜像标签（8.x 和 9.x 系列），并按版本号排序：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询官方仓库所有 tag（返回 JSON，用 jq 过滤更爽）</span></span><br><span class="line">docker run --<span class="built_in">rm</span> quay.io/skopeo/stable list-tags docker://mysql \</span><br><span class="line">  | jq -r <span class="string">&#x27;.Tags[]&#x27;</span> \</span><br><span class="line">  | grep -E <span class="string">&#x27;^[8-9]\.&#x27;</span> \</span><br><span class="line">  | <span class="built_in">sort</span> -V</span><br></pre></td></tr></table></figure><p>🔍 <strong>功能说明</strong>：此步骤确保你获取到官方支持的所有版本标签，避免使用非稳定版或已废弃版本。建议优先选择标记为&quot;latest&quot;或&quot;stable&quot;的版本分支。</p><hr><p><a id="full-backup"></a></p><h2 id="💾-关键第一步：整库逻辑备份（必做！）">💾 关键第一步：整库逻辑备份（必做！）</h2><p>⚠️ <strong>警告</strong>：跳过备份可能导致数据无法回退！务必执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it halodb mysqldump --all-databases --single-transaction -uroot -p<span class="string">&#x27;o#DwN&amp;JSa56&#x27;</span> &gt; all_$(<span class="built_in">date</span> +%F_%H-%M).sql</span><br></pre></td></tr></table></figure><p>📌 <strong>参数说明</strong>：</p><ul><li><code>--single-transaction</code>：确保备份期间数据一致性，使用事务隔离机制；</li><li><code>-uroot -p'你的密码'</code>：按实际数据库密码修改，建议使用配置文件避免密码暴露；</li><li>备份文件命名包含时间戳，便于版本管理；</li><li>🔒 <strong>安全建议</strong>：备份完成后将备份文件传输到远程存储或不同物理设备。</li></ul><p>💡 <strong>扩展功能</strong>：考虑使用自动化备份脚本，定期执行并保留多个备份版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">BACKUP_DIR=<span class="string">&quot;/path/to/backup&quot;</span></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$BACKUP_DIR</span></span><br><span class="line">docker <span class="built_in">exec</span> halodb mysqldump --all-databases --single-transaction -uroot -p<span class="string">&#x27;password&#x27;</span> | gzip &gt; <span class="variable">$BACKUP_DIR</span>/all_$(<span class="built_in">date</span> +%F_%H-%M).sql.gz</span><br><span class="line"><span class="comment"># 保留最近7天备份</span></span><br><span class="line">find <span class="variable">$BACKUP_DIR</span> -name <span class="string">&quot;*.sql.gz&quot;</span> -mtime +7 -delete</span><br></pre></td></tr></table></figure><hr><p><a id="cross-upgrade"></a></p><h2 id="⚙️-跨主版本升级（8-4-2-→-9-0-1）">⚙️ 跨主版本升级（8.4.2 → 9.0.1）</h2><p><a id="change-image-tag"></a></p><h3 id="📝-修改-Docker-镜像标签">📝 修改 Docker 镜像标签</h3><p>编辑 <code>docker-compose.yml</code>，将 MySQL 镜像标签改为目标版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano docker-compose.yml</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改前</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">mysql:8.4.2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改后</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">mysql:9.0.1</span></span><br></pre></td></tr></table></figure><p>📝 <strong>注意</strong>：确保使用的镜像标签存在且为官方稳定版本，避免使用latest标签可能导致的不兼容问题。</p><p><a id="add-upgrade-param"></a></p><h3 id="⚒️-添加临时升级参数">⚒️ 添加临时升级参数</h3><p>在 <code>command</code> 部分<strong>临时添加</strong> <code>--upgrade=FORCE</code> 参数：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">command:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">--upgrade=FORCE</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">--character-set-server=utf8mb4</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">--collation-server=utf8mb4_general_ci</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">--explicit_defaults_for_timestamp=true</span></span><br></pre></td></tr></table></figure><p>🔧 <strong>参数详解</strong>：</p><ul><li><code>--upgrade=FORCE</code>：强制升级系统表结构，必需参数；</li><li><code>--character-set-server=utf8mb4</code>：确保字符集与Halo博客兼容；</li><li><code>--collation-server=utf8mb4_general_ci</code>：设置正确的排序规则；</li><li><code>--explicit_defaults_for_timestamp=true</code>：解决TIMESTAMP字段的兼容性问题。</li></ul><hr><p><a id="execute-upgrade"></a></p><h2 id="🚀-执行升级操作">🚀 执行升级操作</h2><ol><li><p><strong>拉取新版本镜像</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose pull halodb</span><br></pre></td></tr></table></figure></li><li><p><strong>启动升级</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose up -d halodb</span><br></pre></td></tr></table></figure></li><li><p><strong>观察升级日志</strong>（耗时约 1-3 分钟）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">timeout</span> 180 docker compose logs -f halodb</span><br></pre></td></tr></table></figure><p>✅ <strong>成功标志</strong>：出现 <code>[Server] /usr/sbin/mysqld: ready for connections. Version: '9.0.1'</code> 且状态转为 healthy。</p></li></ol><p>📊 <strong>升级过程监控</strong>：升级期间MySQL会执行以下操作：</p><ul><li>检查现有数据文件的兼容性</li><li>升级系统表（mysql.*）到新格式</li><li>更新性能 schema 和 information_schema</li><li>验证所有数据库对象的完整性</li></ul><hr><p><a id="health-check"></a></p><h2 id="✅-升级状态确认">✅ 升级状态确认</h2><ol><li><p><strong>检查容器状态</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose ps halodb</span><br></pre></td></tr></table></figure></li><li><p><strong>手动健康检查</strong>（如果状态未更新）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> halodb mysqladmin ping -h127.0.0.1 -uroot -p<span class="string">&#x27;o#DwN&amp;JSa56&#x27;</span> --silent</span><br><span class="line"><span class="built_in">echo</span> $?   <span class="comment"># 返回 0 表示数据库正常运行</span></span><br></pre></td></tr></table></figure></li><li><p><strong>验证版本号</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it halodb mysql -uroot -p<span class="string">&#x27;o#DwN&amp;JSa56&#x27;</span> -e <span class="string">&quot;SELECT @@version;&quot;</span></span><br></pre></td></tr></table></figure><p>📌 输出应为：<code>9.0.1</code></p></li><li><p><strong>检查数据库完整性</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it halodb mysqlcheck -uroot -p<span class="string">&#x27;o#DwN&amp;JSa56&#x27;</span> --all-databases</span><br></pre></td></tr></table></figure></li></ol><hr><p><a id="cleanup"></a></p><h2 id="🔧-收尾工作">🔧 收尾工作</h2><p>升级完成后<strong>务必删除</strong>临时参数 <code>--upgrade=FORCE</code>，避免下次重启再次执行升级流程：</p><ol><li><p>编辑 <code>docker-compose.yml</code>，删除 <code>--upgrade=FORCE</code> 行；</p></li><li><p>重新部署：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose up -d</span><br></pre></td></tr></table></figure></li><li><p><strong>验证常规启动</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose logs halodb | grep -i <span class="string">&quot;upgrade&quot;</span></span><br></pre></td></tr></table></figure><p>🚫 不应出现任何与upgrade相关的日志信息。</p></li></ol><hr><p><a id="qa-summary"></a></p><h2 id="💡-常见问题与总结">💡 常见问题与总结</h2><p>❓ <strong>Q1：升级失败如何回退？</strong><br>A：使用备份文件还原至旧版本 MySQL 容器，执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> all_2023-11-10_12-00.sql | docker <span class="built_in">exec</span> -i halodb mysql -uroot -p<span class="string">&#x27;密码&#x27;</span></span><br></pre></td></tr></table></figure><p>❓ <strong>Q2：升级后 Halo 博客无法连接数据库？</strong><br>A：检查数据库字符集配置是否与 Halo 要求一致（通常为 <code>utf8mb4</code>），并验证网络连接。同时检查MySQL用户权限是否正常。</p><p>❓ <strong>Q3：升级过程中断怎么办？</strong><br>A：MySQL 9.x 具备升级事务完整性，中断后会自动回滚。检查日志确定中断原因，解决问题后重新启动升级流程。</p><p>❓ <strong>Q4：升级后性能下降怎么办？</strong><br>A：运行 <code>mysql_upgrade</code> 命令优化表结构，并重新生成统计信息：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> halodb mysql_upgrade -uroot -p<span class="string">&#x27;密码&#x27;</span></span><br></pre></td></tr></table></figure><p>🎯 <strong>总结</strong>：</p><ul><li>📋 跨主版本升级需谨慎操作，备份优先；</li><li>⚙️ 通过 <code>--upgrade=FORCE</code> 参数触发元数据升级；</li><li>🔧 收尾时移除临时参数，避免重复升级；</li><li>🧪 建议在测试环境演练后再升级生产环境；</li><li>📊 升级后监控系统性能，确保稳定运行。</li></ul><hr><blockquote><p>🔗 相关资源：<a href="https://dev.mysql.com/doc/refman/9.0/en/upgrading.html">MySQL 官方升级文档</a><br>💬 问题反馈：如遇到本文未覆盖的问题，请查看MySQL官方日志或社区支持</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Halo 博客升级 MySQL 数据库指南 🚀&lt;/h1&gt;
&lt;p&gt;&lt;img src=&quot;https://file.meimolihan.eu.org/img/mysql-01.webp&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;📌 &lt;strong&gt;导读&lt;/strong&gt;：本文详细记</summary>
      
    
    
    
    <category term="Docker" scheme="https://www.meimolihan.eu.org/categories/Docker/"/>
    
    
    <category term="halo" scheme="https://www.meimolihan.eu.org/tags/halo/"/>
    
  </entry>
  
  <entry>
    <title>Debian13 服务器文件备份与恢复指南 📂</title>
    <link href="https://www.meimolihan.eu.org/posts/29d171aa.html"/>
    <id>https://www.meimolihan.eu.org/posts/29d171aa.html</id>
    <published>2025-09-14T04:13:15.000Z</published>
    <updated>2025-09-14T04:13:15.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Debian13 服务器文件备份与恢复指南 📂</h1><p><img src="https://file.meimolihan.eu.org/img/debian-backup-01.webp" alt=""></p><p>本文提供 Debian13 服务器文件备份与恢复的完整解决方案，涵盖多种同步方法与详细操作指南，助您构建可靠的数据保护策略。</p><hr><h2 id="导航目录-📚">导航目录 📚</h2><ul><li><a href="#backup-importance">📦 备份的重要性与策略</a></li><li><a href="#local-rsync-backup">🔧 本地 rsync 同步备份</a><ul><li><a href="#sync-nginx-main">📌 同步 nginx 主目录</a></li><li><a href="#sync-html-dir">📌 同步 html 目录</a></li><li><a href="#sync-file-dir">📌 同步文件服务目录</a></li></ul></li><li><a href="#scp-remote-backup">🚀 scp 远程同步备份</a><ul><li><a href="#scp-nginx-main">📌 同步 nginx 主目录</a></li><li><a href="#scp-html-dir">📌 同步 html 目录</a></li><li><a href="#scp-file-dir">📌 同步文件服务目录</a></li></ul></li><li><a href="#rsync-remote-backup">⚡ rsync 远程同步备份</a><ul><li><a href="#rsync-nginx-main">📌 同步 nginx 主目录</a></li><li><a href="#rsync-html-dir">📌 同步 html 目录</a></li><li><a href="#rsync-file-dir">📌 同步文件服务目录</a></li></ul></li><li><a href="#restore-operations">🔄 恢复操作指南</a><ul><li><a href="#restore-from-local">📌 从本地备份恢复</a></li><li><a href="#restore-from-remote">📌 从远程备份恢复</a></li></ul></li><li><a href="#method-comparison">📊 三种方法对比分析</a></li><li><a href="#backup-best-practices">💡 备份最佳实践</a></li></ul><hr><p><a id="backup-importance"></a></p><h2 id="📦-备份的重要性与策略">📦 备份的重要性与策略</h2><p>数据是服务器中最宝贵的资产，合理的备份策略可以防止以下风险：</p><ul><li>🔴 <strong>硬件故障</strong>：磁盘损坏、服务器宕机</li><li>🔴 <strong>人为错误</strong>：误删除、错误配置</li><li>🔴 <strong>安全事件</strong>：勒索软件、黑客攻击</li><li>🔴 <strong>自然灾害</strong>：火灾、洪水等不可抗力</li></ul><p><strong>备份 3-2-1 原则</strong>：至少保留 3 个数据副本，使用 2 种不同介质，其中 1 份为异地备份。</p><hr><p><a id="local-rsync-backup"></a></p><h2 id="🔧-本地-rsync-同步备份">🔧 本地 rsync 同步备份</h2><p>rsync 是 Linux 下强大的文件同步工具，支持增量备份和属性保留。</p><p><a id="sync-nginx-main"></a></p><h3 id="📌-同步-nginx-主目录">📌 同步 nginx 主目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 测试同步（干跑模式）</span></span><br><span class="line">rsync -avhzL --progress --delete-delay --dry-run \</span><br><span class="line">    /etc/nginx/ \</span><br><span class="line">    <span class="string">&quot;/mnt/smb_fnos/阿里云盘/教程文件/Debian13/backup/nginx-标准版/nginx/&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 实际同步</span></span><br><span class="line">rsync -avhz --progress --delete-delay --mkpath \</span><br><span class="line">    /etc/nginx/ \</span><br><span class="line">    /mnt/smb_fnos/阿里云盘/教程文件/Debian13/backup/nginx-标准版/nginx/</span><br></pre></td></tr></table></figure><p><a id="sync-html-dir"></a></p><h3 id="📌-同步-html-目录">📌 同步 html 目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rsync -avzh --progress --delete-delay --mkpath \</span><br><span class="line">    /var/www/html/ \</span><br><span class="line">    /mnt/smb_fnos/阿里云盘/教程文件/Debian13/backup/nginx-标准版/html/</span><br></pre></td></tr></table></figure><p><a id="sync-file-dir"></a></p><h3 id="📌-同步文件服务目录">📌 同步文件服务目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rsync -avzh --progress --delete-delay --mkpath \</span><br><span class="line">    /mnt/file/ \</span><br><span class="line">    /mnt/smb_fnos/阿里云盘/教程文件/Debian13/backup/file/</span><br></pre></td></tr></table></figure><p><strong>✨ 参数说明</strong>：</p><ul><li><code>-a</code>：归档模式，保留文件属性</li><li><code>-v</code>：详细输出</li><li><code>-h</code>：人类可读格式</li><li><code>-z</code>：压缩传输</li><li><code>--progress</code>：显示传输进度</li><li><code>--delete-delay</code>：同步后删除目标端多余文件</li><li><code>--mkpath</code>：自动创建目标路径</li></ul><p><strong>✅ 效果： 完美同步所有隐藏文件。</strong><br>✨ 原因： -a (archive) 参数包含了 -r (recursive)，它会递归复制源目录 /etc/nginx/ 下的所有内容和子目录，包括隐藏文件。这是 rsync 的默认行为，也是最可靠的方式。</p><hr><p><a id="scp-remote-backup"></a></p><h2 id="🚀-scp-远程同步备份">🚀 scp 远程同步备份</h2><p>scp 基于 SSH 协议，适合简单的文件传输任务。</p><p><a id="scp-nginx-main"></a></p><h3 id="📌-同步-nginx-主目录-2">📌 同步 nginx 主目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scp -P 22 -r \</span><br><span class="line">    /etc/nginx/. \</span><br><span class="line">    root@10.10.10.251:/vol2/1000/阿里云盘/教程文件/Debian13/backup/nginx-标准版/nginx/</span><br></pre></td></tr></table></figure><p><a id="scp-html-dir"></a></p><h3 id="📌-同步-html-目录-2">📌 同步 html 目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scp -P 22 -r \</span><br><span class="line">    /var/www/html/. \</span><br><span class="line">    root@10.10.10.251:/vol2/1000/阿里云盘/教程文件/Debian13/backup/nginx-标准版/html/</span><br></pre></td></tr></table></figure><p><a id="scp-file-dir"></a></p><h3 id="📌-同步文件服务目录-2">📌 同步文件服务目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scp -P 22 -r \</span><br><span class="line">    /mnt/file/ \</span><br><span class="line">    root@10.10.10.251:/vol2/1000/阿里云盘/教程文件/Debian13/backup/file/</span><br></pre></td></tr></table></figure><p><strong>✨ 参数说明</strong>：</p><ul><li><code>-P 22</code>：指定 SSH 端口（默认22可省略）</li><li><code>-r</code>：递归复制整个目录</li><li><code>.</code> 与 <code>/</code> 的区别：使用 <code>/etc/nginx/.</code> 可包含隐藏文件</li></ul><p><strong>✅ 效果： 可以同步隐藏文件。</strong></p><ul><li>✨ 原因： 关键在于您源路径的写法 /etc/nginx/.。末尾的 /. 明确告诉 SCP 命令“复制这个目录里面的所有内容”，而不仅仅是目录本身。这个语法包含了所有文件和文件夹，包括隐藏的。</li><li>⚠️ 注意： 如果您将命令写成 /etc/nginx 或 /etc/nginx/（没有最后的 .），SCP 将无法同步隐藏文件。您的写法是正确的。</li></ul><hr><p><a id="rsync-remote-backup"></a></p><h2 id="⚡-rsync-远程同步备份">⚡ rsync 远程同步备份</h2><p>rsync 远程模式结合了本地同步的高效和远程操作的便利性。</p><p><a id="rsync-nginx-main"></a></p><h3 id="📌-同步-nginx-主目录-3">📌 同步 nginx 主目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rsync -avzP \</span><br><span class="line">    /etc/nginx/ \</span><br><span class="line">    root@10.10.10.251:/vol2/1000/阿里云盘/教程文件/Debian13/backup/nginx-标准版/nginx/</span><br></pre></td></tr></table></figure><p><a id="rsync-html-dir"></a></p><h3 id="📌-同步-html-目录-3">📌 同步 html 目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rsync -avzP \</span><br><span class="line">    /var/www/html/ \</span><br><span class="line">    root@10.10.10.251:/vol2/1000/阿里云盘/教程文件/Debian13/backup/nginx-标准版/html/</span><br></pre></td></tr></table></figure><p><a id="rsync-file-dir"></a></p><h3 id="📌-同步文件服务目录-3">📌 同步文件服务目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rsync -avzP \</span><br><span class="line">    /mnt/file/ \</span><br><span class="line">    root@10.10.10.251:/vol2/1000/阿里云盘/教程文件/Debian13/backup/file/</span><br></pre></td></tr></table></figure><p><strong>✨ 参数说明</strong>：</p><ul><li><code>-P</code>：等同于 <code>--partial --progress</code>（保留部分文件并显示进度）</li><li><code>-z</code>：压缩传输，节省带宽</li></ul><p><strong>✅ 效果： 完美同步所有隐藏文件。</strong></p><ul><li>✨ 原因： 和本地 rsync 一样，-a 参数保证了它会递归处理源目录下的所有内容，包括隐藏文件。这是同步隐藏文件到远程服务器的最佳方式。</li></ul><hr><p><a id="restore-operations"></a></p><h2 id="🔄-恢复操作指南">🔄 恢复操作指南</h2><p><a id="restore-from-local"></a></p><h3 id="📌-从本地备份恢复">📌 从本地备份恢复</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 恢复 nginx 配置</span></span><br><span class="line">rsync -avzh --progress --mkpath \</span><br><span class="line">    /mnt/smb_fnos/阿里云盘/教程文件/Debian13/backup/nginx-标准版/nginx/ \</span><br><span class="line">    /etc/nginx/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复网站文件</span></span><br><span class="line">rsync -avzh --progress --mkpath \</span><br><span class="line">    /mnt/smb_fnos/阿里云盘/教程文件/Debian13/backup/nginx-标准版/html/ \</span><br><span class="line">    /var/www/html/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复文件服务</span></span><br><span class="line">rsync -avzh --progress --mkpath \</span><br><span class="line">    /mnt/smb_fnos/阿里云盘/教程文件/Debian13/backup/file/ \</span><br><span class="line">    /mnt/file/</span><br></pre></td></tr></table></figure><p><a id="restore-from-remote"></a></p><h3 id="📌-从远程备份恢复">📌 从远程备份恢复</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用 rsync 从远程恢复 nginx 配置</span></span><br><span class="line">rsync -avzP \</span><br><span class="line">    root@10.10.10.251:/vol2/1000/阿里云盘/教程文件/Debian13/backup/nginx-标准版/nginx/ \</span><br><span class="line">    /etc/nginx/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 scp 从远程恢复网站文件</span></span><br><span class="line">scp -P 22 -r \</span><br><span class="line">    root@10.10.10.251:/vol2/1000/阿里云盘/教程文件/Debian13/backup/nginx-标准版/html/. \</span><br><span class="line">    /var/www/html/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 rsync 从远程恢复文件服务</span></span><br><span class="line">rsync -avzP \</span><br><span class="line">    root@10.10.10.251:/vol2/1000/阿里云盘/教程文件/Debian13/backup/file/ \</span><br><span class="line">    /mnt/file/</span><br></pre></td></tr></table></figure><blockquote><p><strong>⚠️ 重要提示</strong>：恢复操作会覆盖目标目录中的现有文件，执行前请务必：</p><ol><li>确认备份数据的完整性和正确性</li><li>对当前状态做一次快照备份</li><li>在测试环境验证恢复流程</li></ol></blockquote><hr><p><a id="method-comparison"></a></p><h2 id="📊-三种方法对比分析">📊 三种方法对比分析</h2><table><thead><tr><th style="text-align:left">特性维度</th><th style="text-align:left">🔧 本地 rsync 同步</th><th style="text-align:left">🚀 scp 远程同步</th><th style="text-align:left">⚡ rsync 远程同步</th></tr></thead><tbody><tr><td style="text-align:left"><strong>速度性能</strong></td><td style="text-align:left">⭐⭐⭐⭐⭐<br>极快（无网络延迟）</td><td style="text-align:left">⭐⭐☆☆☆<br>较慢（全量传输）</td><td style="text-align:left">⭐⭐⭐⭐☆<br>很快（增量同步）</td></tr><tr><td style="text-align:left"><strong>带宽效率</strong></td><td style="text-align:left">不占用网络带宽</td><td style="text-align:left">效率低（全量传输）</td><td style="text-align:left">效率高（只传差异部分）</td></tr><tr><td style="text-align:left"><strong>属性保留</strong></td><td style="text-align:left">完美保留所有属性</td><td style="text-align:left">默认不保留所有属性</td><td style="text-align:left">完美保留所有属性</td></tr><tr><td style="text-align:left"><strong>可靠性</strong></td><td style="text-align:left">高</td><td style="text-align:left">高（基于SSH）</td><td style="text-align:left">高（支持断点续传）</td></tr><tr><td style="text-align:left"><strong>易用性</strong></td><td style="text-align:left">中等（需挂载远程目录）</td><td style="text-align:left">非常简单（直接使用）</td><td style="text-align:left">中等（命令稍复杂）</td></tr><tr><td style="text-align:left"><strong>适用场景</strong></td><td style="text-align:left">已挂载NAS的日常备份</td><td style="text-align:left">临时少量文件传输</td><td style="text-align:left">常规远程异地备份</td></tr></tbody></table><p><strong>选择建议</strong>：</p><ul><li>🏠 <strong>本地 rsync</strong>：适合已将远程存储挂载到本地的日常自动化备份</li><li>🚀 <strong>scp</strong>：适合临时传输少量文件，简单快捷</li><li>⚡ <strong>远程 rsync</strong>：适合设置定期远程备份任务，效率最高</li></ul><hr><p><a id="backup-best-practices"></a></p><h2 id="💡-备份最佳实践">💡 备份最佳实践</h2><h3 id="1-自动化备份策略">1. 自动化备份策略</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 每日凌晨2点自动备份nginx配置</span></span><br><span class="line">0 2 * * * /usr/bin/rsync -avz --delete /etc/nginx/ /mnt/backup/nginx/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 每周日凌晨1点全量备份</span></span><br><span class="line">0 1 * * 0 /root/scripts/full-backup.sh</span><br></pre></td></tr></table></figure><h3 id="2-多版本备份策略">2. 多版本备份策略</h3><p>保留多个时间点的备份版本：</p><ul><li>保留最近7天的每日备份</li><li>保留最近4周的每周备份</li><li>保留最近3个月的月度备份</li></ul><h3 id="3-备份验证策略">3. 备份验证策略</h3><p>定期检查备份的有效性：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查备份完整性</span></span><br><span class="line">rsync -n -avhi --delete /mnt/backup/nginx/ /etc/nginx/ | <span class="built_in">head</span> -20</span><br><span class="line"></span><br><span class="line"><span class="comment"># 随机恢复测试</span></span><br><span class="line"><span class="built_in">mkdir</span> /tmp/backup-test &amp;&amp; rsync -av /mnt/backup/html/ /tmp/backup-test/</span><br></pre></td></tr></table></figure><h3 id="4-安全加固措施">4. 安全加固措施</h3><ul><li>🔐 对敏感数据加密备份</li><li>👮 严格控制备份目录权限</li><li>📝 详细记录备份日志</li><li>🚨 设置备份失败告警机制</li></ul><h3 id="5-监控与告警">5. 监控与告警</h3><p>设置监控项：</p><ul><li>备份任务执行状态</li><li>备份文件大小变化</li><li>备份存储空间使用率</li><li>最后一次成功备份时间</li></ul><hr><blockquote><p><strong>💎 核心建议</strong>：没有完美的备份方案，只有适合的备份策略。最重要的是定期测试恢复流程，确保在需要时能够快速可靠地恢复数据。</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Debian13 服务器文件备份与恢复指南 📂&lt;/h1&gt;
&lt;p&gt;&lt;img src=&quot;https://file.meimolihan.eu.org/img/debian-backup-01.webp&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;本文提供 Debian13 服务器文件备</summary>
      
    
    
    
    <category term="Linux" scheme="https://www.meimolihan.eu.org/categories/Linux/"/>
    
    
    <category term="debian" scheme="https://www.meimolihan.eu.org/tags/debian/"/>
    
  </entry>
  
  <entry>
    <title>Nginx 配置备份与恢复指南 🔐</title>
    <link href="https://www.meimolihan.eu.org/posts/d51d958e.html"/>
    <id>https://www.meimolihan.eu.org/posts/d51d958e.html</id>
    <published>2025-09-14T02:31:37.000Z</published>
    <updated>2025-09-14T02:31:37.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Nginx 配置备份与恢复指南 🔐</h1><p><img src="https://file.meimolihan.eu.org/img/nginx-01.webp" alt=""></p><blockquote><p>为确保您的 Nginx 服务器稳定运行，定期备份和掌握恢复方法至关重要。本文全面介绍了多种 Nginx 备份与恢复策略，从简单的压缩备份到高效的同步方案，助您构建完整的数据保护体系。</p></blockquote><hr><h2 id="📚-文章导航目录">📚 文章导航目录</h2><ul><li><a href="#preface-why-backup-nginx">💡 前言：为何需要备份 Nginx？</a></li><li><a href="#method-one-backup-with-zip">📦 方法一：使用 ZIP 压缩备份</a><ul><li><a href="#features-and-functions-zip">✨ 特点与功能</a></li><li><a href="#commands-zip">🔧 操作命令</a></li></ul></li><li><a href="#method-two-backup-with-targz">🗂️ 方法二：使用 TAR.GZ 压缩备份</a><ul><li><a href="#features-and-functions-tar">✨ 特点与功能</a></li><li><a href="#commands-tar">🔧 操作命令</a></li></ul></li><li><a href="#method-three-backup-with-rsync">🔄 方法三：使用 Rsync 同步备份</a><ul><li><a href="#features-and-functions-rsync">✨ 特点与功能</a></li><li><a href="#commands-rsync">🔧 操作命令</a></li></ul></li><li><a href="#backup-summary-and-comparison">📊 备份方法总结与对比</a></li><li><a href="#pre-restore-preparation">🛡️ 恢复前的准备工作</a></li><li><a href="#restore-from-backups">📤 从各种备份恢复</a><ul><li><a href="#restore-from-zip">从 ZIP 备份恢复</a><ul><li><a href="#zip-restore-commands">操作命令</a></li></ul></li><li><a href="#restore-from-targz">从 TAR.GZ 备份恢复</a><ul><li><a href="#targz-restore-commands">操作命令</a></li><li><a href="#targz-restore-scenarios">不同压缩方式的恢复场景</a></li></ul></li><li><a href="#restore-from-rsync">从 Rsync 备份恢复</a><ul><li><a href="#rsync-restore-commands">操作命令</a></li><li><a href="#rsync-restore-warning">重要警告</a></li></ul></li></ul></li><li><a href="#post-restore-actions">✅ 恢复后的必要操作</a></li><li><a href="#notes-and-faq">🚨 注意事项与常见问题</a></li><li><a href="#complete-process-summary">🎯 完整备份与恢复流程总结</a></li></ul><hr><p><a id="preface-why-backup-nginx"></a></p><h2 id="💡-前言：为何需要备份-Nginx？">💡 前言：为何需要备份 Nginx？</h2><p>Nginx 的配置是其核心，包含了网站域名、反向代理规则、负载均衡设置、SSL 证书路径等关键信息。一旦因为误操作、服务器磁盘故障或软件冲突导致配置丢失或损坏，可能会造成服务长时间中断。定期备份可以帮助您：</p><ul><li><strong>快速恢复</strong> ⚡：在出现问题时，迅速还原至最新可用的状态。</li><li><strong>版本追溯</strong> 🔍：保留历史版本，便于对比更改或回滚到特定版本。</li><li><strong>迁移便利</strong> 🚚：在新服务器上快速部署相同的 Nginx 环境。</li></ul><p>🔔 <strong>备份核心目标</strong>：通常需要备份 <code>/etc/nginx/</code> 目录（包含主配置文件 <code>nginx.conf</code> 和 <code>sites-available/</code> 等）以及 <code>/var/www/html/</code> 或您的自定义网站根目录。</p><p><a id="method-one-backup-with-zip"></a></p><h2 id="📦-方法一：使用-ZIP-压缩备份">📦 方法一：使用 ZIP 压缩备份</h2><p>ZIP 是一种跨平台、通用的压缩格式，在 Windows 和 Linux 系统上都能轻松打开和处理，非常适合需要在不同环境间传输的备份。</p><p><a id="features-and-functions-zip"></a></p><h3 id="✨-特点与功能">✨ 特点与功能</h3><ul><li><strong>通用性强</strong> 🌍：几乎所有操作系统都内置或易于安装解压支持。</li><li><strong>兼容性好</strong> 🤝：便于分享给其他团队成员，无需担心环境问题。</li><li><strong>可设置密码</strong> 🔒：支持使用密码加密压缩包，保护敏感配置（如 SSL 证书密钥）。</li><li><strong>灵活性高</strong> 🧩：可以自由选择是否递归压缩、排除特定文件等。</li></ul><p><a id="commands-zip"></a></p><h3 id="🔧-操作命令">🔧 操作命令</h3><p><a id="recursive-compression-common-practice"></a></p><h4 id="1-递归压缩（常见做法）">1. 递归压缩（常见做法）</h4><p>此命令会备份 <code>/etc/nginx</code> 目录下的所有文件和子目录。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 压缩并带上日期</span></span><br><span class="line">zip -r /mnt/backup/nginx-backup-$(<span class="built_in">date</span> +%Y%m%d).zip /etc/nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解释：</span></span><br><span class="line"><span class="comment"># -r 参数：递归处理，压缩目录下的所有子目录和文件。</span></span><br><span class="line"><span class="comment"># $(date +%Y%m%d): shell 命令，生成当前日期（例如：20230915），用于文件名。</span></span><br></pre></td></tr></table></figure><p><a id="non-recursive-compression-top-level-only"></a></p><h4 id="2-非递归压缩（仅顶级目录）">2. 非递归压缩（仅顶级目录）</h4><p>根据您的需求，如果只想备份 <code>/etc/nginx</code> 第一层的文件和目录（但不压缩它们里面的内容），可以使用 <code>find</code> 命令。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 非递归压缩：仅备份 /etc/nginx 下的直接文件和文件夹（其内容不压缩）</span></span><br><span class="line">find /etc/nginx -maxdepth 1 -mindepth 1 -<span class="built_in">exec</span> zip /mnt/backup/nginx-backup-$(<span class="built_in">date</span> +%Y%m%d).zip &#123;&#125; +</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解释：</span></span><br><span class="line"><span class="comment"># find ... -exec ... + : 找到指定的文件列表并将其传递给 zip 命令。</span></span><br><span class="line"><span class="comment"># -maxdepth 1: 只查找第一层。</span></span><br><span class="line"><span class="comment"># -mindepth 1: 排除路径本身（即排除 `/etc/nginx/.`）。</span></span><br></pre></td></tr></table></figure><p><a id="method-two-backup-with-targz"></a></p><h2 id="🗂️-方法二：使用-TAR-GZ-压缩备份">🗂️ 方法二：使用 TAR.GZ 压缩备份</h2><p>TAR.GZ (<code>.tar.gz</code>) 是 Linux 系统中最常见、效率最高的压缩格式之一。它通常能提供比 ZIP 更好的压缩率，且完美保留 Linux 文件权限和所有权信息。</p><p><a id="features-and-functions-tar"></a></p><h3 id="✨-特点与功能-2">✨ 特点与功能</h3><ul><li><strong>高压缩率</strong> 📦：通常能生成比 ZIP 更小的文件，节省存储空间。</li><li><strong>保留元数据</strong> 📋：完美保留文件权限、所有者和时间戳，对于还原至关重要。</li><li><strong>Linux 原生支持</strong> 🐧：是 Linux 系统备份和分发的标准格式。</li><li><strong>流式处理</strong> 🔄：适合在管道中与其他命令（如 <code>ssh</code>, <code>gpg</code>) 结合使用。</li></ul><p><a id="commands-tar"></a></p><h3 id="🔧-操作命令-2">🔧 操作命令</h3><p><a id="regular-compression-full-path"></a></p><h4 id="1-常规压缩（保留完整路径）">1. 常规压缩（保留完整路径）</h4><p>此方法会保留完整的绝对路径结构。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 常规压缩</span></span><br><span class="line">tar -czf /mnt/backup/nginx-backup-$(<span class="built_in">date</span> +%Y%m%d).tar.gz /etc/nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解释：</span></span><br><span class="line"><span class="comment"># -c: 创建新的归档文件。</span></span><br><span class="line"><span class="comment"># -z: 使用 gzip 压缩。</span></span><br><span class="line"><span class="comment"># -f: 指定归档文件名。</span></span><br></pre></td></tr></table></figure><p><a id="precise-compression-control-structure"></a></p><h4 id="2-精准压缩（控制解压结构）">2. 精准压缩（控制解压结构）</h4><p>使用 <code>-C</code> 参数改变当前目录，可以控制解压后的目录结构。<strong>这是非常推荐的技巧</strong>，可以让解压后的目录名称统一为 <code>nginx</code>，而不是包含完整路径 <code>etc/nginx</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 精准压缩：解压后直接得到 `nginx` 文件夹</span></span><br><span class="line">tar -czf /mnt/backup/nginx-backup-$(<span class="built_in">date</span> +%Y%m%d).tar.gz -C /etc nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解释：</span></span><br><span class="line"><span class="comment"># -C /etc: 先切换到 /etc 目录。</span></span><br><span class="line"><span class="comment"># nginx: 然后压缩该目录下的 nginx 文件夹。</span></span><br><span class="line"><span class="comment"># 这样操作后，解压 tar.gz 文件会直接产生一个名为 `nginx` 的目录，而不是 `etc/nginx/`。</span></span><br></pre></td></tr></table></figure><p><a id="method-three-backup-with-rsync"></a></p><h2 id="🔄-方法三：使用-Rsync-同步备份">🔄 方法三：使用 Rsync 同步备份</h2><p>Rsync 是一个强大的增量备份和同步工具。它并不压缩文件，而是通过比较源和目标之间的差异，仅传输改变的部分，因此速度极快，非常适合频繁备份或大型网站文件的同步。</p><p><a id="features-and-functions-rsync"></a></p><h3 id="✨-特点与功能-3">✨ 特点与功能</h3><ul><li><strong>增量备份</strong> 📈：仅同步发生变化的文件，效率极高，节省带宽和时间。</li><li><strong>保持一致性</strong> 🔒：可以完美保留所有的文件属性（权限、时间戳、符号链接等）。</li><li><strong>灵活性高</strong> 🎛️：可以轻松实现本地同步和远程同步。</li><li><strong>可脚本化</strong> 🤖：非常适合放入 <code>cron</code> 计划任务中，实现定时自动备份。</li></ul><p><a id="commands-rsync"></a></p><h3 id="🔧-操作命令-3">🔧 操作命令</h3><p><a id="local-sync-fast-incremental"></a></p><h4 id="1-本地同步（快速增量）">1. 本地同步（快速增量）</h4><p>将 Nginx 配置同步到本地另一个磁盘或分区。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 本地同步</span></span><br><span class="line">rsync -av --delete /etc/nginx/ /mnt/backup/nginx-config/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解释：</span></span><br><span class="line"><span class="comment"># -a: 归档模式，保持所有文件属性，并递归同步。</span></span><br><span class="line"><span class="comment"># -v: 详细模式，输出同步过程信息。</span></span><br><span class="line"><span class="comment"># --delete: 删除目标目录中源目录没有的文件，确保两边完全一致（使用前请谨慎！）。</span></span><br><span class="line"><span class="comment"># 注意：源目录路径后的尾随斜杠 `/` 很重要，它表示同步目录内的内容，而不是目录本身。</span></span><br></pre></td></tr></table></figure><p><a id="remote-sync-off-site-disaster-recovery"></a></p><h4 id="2-远程同步（异机容灾）">2. 远程同步（异机容灾）</h4><p>将本地 Nginx 配置同步到远程服务器，实现异机容灾。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 远程同步</span></span><br><span class="line">rsync -avz -e ssh /etc/nginx/ user@remote_server_ip:/path/to/backup/nginx-config/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解释：</span></span><br><span class="line"><span class="comment"># -z: 在传输过程中进行压缩，提高速度。</span></span><br><span class="line"><span class="comment"># -e ssh: 使用 SSH 协议进行安全传输。</span></span><br><span class="line"><span class="comment"># user@remote_server_ip: 远程服务器的用户名和 IP 地址。</span></span><br></pre></td></tr></table></figure><p><a id="backup-summary-and-comparison"></a></p><h2 id="📊-备份方法总结与对比">📊 备份方法总结与对比</h2><table><thead><tr><th style="text-align:left">方法</th><th style="text-align:left">格式</th><th style="text-align:left">优点</th><th style="text-align:left">缺点</th><th style="text-align:left">适用场景</th></tr></thead><tbody><tr><td style="text-align:left"><strong>ZIP 压缩</strong></td><td style="text-align:left"><code>.zip</code></td><td style="text-align:left">通用性强，跨平台，可加密</td><td style="text-align:left">Linux 下压缩率通常不如 tar.gz，保留元数据稍逊</td><td style="text-align:left">需要与 Windows 系统共享备份文件</td></tr><tr><td style="text-align:left"><strong>TAR.GZ 压缩</strong></td><td style="text-align:left"><code>.tar.gz</code></td><td style="text-align:left"><strong>高压缩率</strong>，<strong>完美保留 Linux 属性</strong>，标准格式</td><td style="text-align:left">Windows 需安装软件才能解压</td><td style="text-align:left"><strong>Linux 系统下的标准完整备份</strong>，长期归档</td></tr><tr><td style="text-align:left"><strong>Rsync 同步</strong></td><td style="text-align:left">原始文件</td><td style="text-align:left"><strong>增量同步，速度极快</strong>，可本地/远程，可脚本化</td><td style="text-align:left">不压缩，占用更多空间</td><td style="text-align:left"><strong>频繁的快速备份</strong>，<strong>异地容灾</strong>，<strong>网站文件同步</strong></td></tr></tbody></table><p><a id="pre-restore-preparation"></a></p><h2 id="🛡️-恢复前的准备工作">🛡️ 恢复前的准备工作</h2><p>在开始任何恢复操作之前，请务必完成以下步骤，这是数据安全的黄金法则：</p><ol><li><p><strong>【强烈建议】备份当前状态</strong> 💾：即使当前的 Nginx 配置是损坏的，也先将其打包备份，防止恢复过程中出现意外，导致完全无法回退。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 备份当前的 nginx 配置</span></span><br><span class="line"><span class="built_in">sudo</span> tar -czf /tmp/nginx-broken-backup-$(<span class="built_in">date</span> +%Y%m%d).tar.gz /etc/nginx</span><br></pre></td></tr></table></figure></li><li><p><strong>验证备份文件</strong> 🔍：检查您的备份文件是否完整、可用。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 列出 ZIP 压缩包内容</span></span><br><span class="line">unzip -l /mnt/backup/nginx-backup-20230915.zip</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列出 TAR.GZ 压缩包内容</span></span><br><span class="line">tar -tzf /mnt/backup/nginx-backup-20230915.tar.gz</span><br></pre></td></tr></table></figure></li><li><p><strong>选择恢复目标</strong> 🎯：确定您是要<strong>完全覆盖</strong>现有配置，还是只<strong>恢复部分文件</strong>（如某个 server block 配置）。</p></li></ol><p><a id="restore-from-backups"></a></p><h2 id="📤-从各种备份恢复">📤 从各种备份恢复</h2><p>本章节详细介绍了如何从之前创建的三种不同类型的备份中进行恢复。请根据您采用的备份方法，选择对应的恢复指南。</p><p><a id="restore-from-zip"></a></p><h3 id="1-从-ZIP-备份恢复">1. 从 ZIP 备份恢复</h3><p>使用 <code>unzip</code> 命令来解压恢复。</p><p><a id="zip-restore-commands"></a></p><h4 id="🔧-操作命令-4">🔧 操作命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 安全做法：解压到当前目录查看内容（会得到包含完整路径的 etc/nginx/ 目录结构）</span></span><br><span class="line">unzip /mnt/backup/nginx-backup-20230915.zip</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 直接覆盖恢复到系统原始路径 (使用 -o 参数覆盖现有文件，-d / 指定解压到根目录)</span></span><br><span class="line"><span class="built_in">sudo</span> unzip -o /mnt/backup/nginx-backup-20230915.zip -d /</span><br></pre></td></tr></table></figure><p><a id="restore-from-targz"></a></p><h3 id="2-从-TAR-GZ-备份恢复">2. 从 TAR.GZ 备份恢复</h3><p>使用 <code>tar</code> 命令来解压恢复，这是 Linux 系统中最常用且可靠的方式。</p><p><a id="targz-restore-commands"></a></p><h4 id="🔧-操作命令-5">🔧 操作命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 场景一：恢复&quot;常规压缩&quot;的备份（压缩时使用了 `tar -czf backup.tar.gz /etc/nginx`，压缩包内保留了完整路径 /etc/nginx/...）</span></span><br><span class="line"><span class="comment"># -C / 参数指定解压到根目录，压缩包里的 etc/nginx 就会覆盖系统中的 /etc/nginx</span></span><br><span class="line"><span class="built_in">sudo</span> tar -xzf /mnt/backup/nginx-backup-20230915.tar.gz -C /</span><br><span class="line"></span><br><span class="line"><span class="comment"># 场景二：恢复&quot;精准压缩&quot;的备份（压缩时使用了 `tar -czf backup.tar.gz -C /etc nginx`，压缩包内直接是 nginx/... 目录）</span></span><br><span class="line"><span class="comment"># -C /etc 参数指定解压到 /etc 目录，压缩包里的 nginx 文件夹就会覆盖 /etc/nginx</span></span><br><span class="line"><span class="built_in">sudo</span> tar -xzf /mnt/backup/nginx-backup-20230915.tar.gz -C /etc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 场景三：最安全、最推荐的做法！解压到临时目录检查后再手动复制</span></span><br><span class="line"><span class="comment"># 1. 创建临时目录</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p /tmp/nginx-restore</span><br><span class="line"><span class="comment"># 2. 解压到临时目录</span></span><br><span class="line"><span class="built_in">sudo</span> tar -xzf /mnt/backup/nginx-backup-20230915.tar.gz -C /tmp/nginx-restore</span><br><span class="line"><span class="comment"># 3. 查看解压后的结构，确认是否正确</span></span><br><span class="line"><span class="built_in">ls</span> -la /tmp/nginx-restore/</span><br><span class="line"><span class="comment"># 4. 使用 rsync 同步到目标位置（这样可以再次确认文件变更）</span></span><br><span class="line"><span class="built_in">sudo</span> rsync -av /tmp/nginx-restore/nginx/ /etc/nginx/</span><br><span class="line"><span class="comment"># 如果解压后是 etc/nginx 结构，则使用：</span></span><br><span class="line"><span class="comment"># sudo rsync -av /tmp/nginx-restore/etc/nginx/ /etc/nginx/</span></span><br></pre></td></tr></table></figure><p><a id="targz-restore-scenarios"></a></p><h4 id="📋-不同压缩方式的恢复场景">📋 不同压缩方式的恢复场景</h4><ul><li><strong>完整路径备份</strong>：使用 <code>tar -czf backup.tar.gz /etc/nginx</code> 创建，恢复时使用 <code>sudo tar -xzf backup.tar.gz -C /</code></li><li><strong>精准路径备份</strong>：使用 <code>tar -czf backup.tar.gz -C /etc nginx</code> 创建，恢复时使用 <code>sudo tar -xzf backup.tar.gz -C /etc</code></li></ul><p><a id="restore-from-rsync"></a></p><h3 id="3-从-Rsync-备份恢复">3. 从 Rsync 备份恢复</h3><p>从 Rsync 备份恢复的本质，就是<strong>将同步过程反向操作</strong>。您的备份目录现在是&quot;源&quot;，系统的 <code>/etc/nginx</code> 目录是&quot;目标&quot;。</p><p><a id="rsync-restore-commands"></a></p><h4 id="🔧-操作命令-6">🔧 操作命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 从本地备份目录恢复</span></span><br><span class="line"><span class="built_in">sudo</span> rsync -av /mnt/backup/nginx-config/ /etc/nginx/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从远程备份服务器恢复</span></span><br><span class="line"><span class="built_in">sudo</span> rsync -avz -e ssh user@remote_server_ip:/path/to/backup/nginx-config/ /etc/nginx/</span><br></pre></td></tr></table></figure><p><a id="rsync-restore-warning"></a></p><h4 id="⚠️-重要警告">⚠️ 重要警告</h4><p>如果当初备份时使用了 <code>--delete</code> 参数，恢复时<strong>请极其谨慎地使用它</strong>。在恢复命令中加上 <code>--delete</code> 会<strong>删除目标目录（即您的当前配置）中所有源目录（即您的备份）里不存在的文件</strong>。这可能导致数据丢失。<br><strong>建议流程</strong>：先不加 <code>--delete</code> 同步，检查无误后，再手动清理多余文件。</p><p><a id="post-restore-actions"></a></p><h2 id="✅-恢复后的必要操作">✅ 恢复后的必要操作</h2><p>恢复文件只是第一步，接下来的验证和激活同样重要。</p><ol><li><p><strong>测试 Nginx 配置语法</strong> ✅：<strong>这是必须的一步！</strong> 它可以检查恢复的配置文件是否有语法错误，避免重启失败导致服务中断。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nginx -t</span><br></pre></td></tr></table></figure><p>如果输出 <code>syntax is ok</code> 和 <code>test is successful</code>，说明配置语法正确。</p></li><li><p><strong>重载 Nginx</strong> 🔄：在语法测试通过后，让 Nginx 重新加载配置即可，<strong>无需完全重启</strong>，服务不会中断。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl reload nginx</span><br><span class="line"><span class="comment"># 或者使用 nginx 命令</span></span><br><span class="line"><span class="built_in">sudo</span> nginx -s reload</span><br></pre></td></tr></table></figure></li><li><p><strong>验证服务状态</strong> 📊：检查 Nginx 是否正常运行。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl status nginx</span><br></pre></td></tr></table></figure></li><li><p><strong>测试网站访问</strong> 🌐：最终通过浏览器或 <code>curl</code> 命令访问你的网站，确认服务已按预期恢复。</p></li></ol><p><a id="notes-and-faq"></a></p><h2 id="🚨-注意事项与常见问题">🚨 注意事项与常见问题</h2><ul><li><strong>权限问题</strong> 🔐：使用 <code>sudo</code> 进行恢复操作，确保你有足够的权限写入 <code>/etc/nginx</code> 等系统目录。解压后检查重要文件（如 SSL 证书私钥）的权限是否过于开放（如 <code>600</code> 或 <code>400</code>）。</li><li><strong>&quot;精准压缩&quot;备份的恢复</strong> 🎯：这是最容易出错的点。务必先 <code>tar -tzf</code> 查看压缩包内结构，再决定 <code>-C</code> 参数的使用。</li><li><strong>Rsync 的 <code>--delete</code> 参数</strong> ⚠️：恢复时请<strong>谨慎使用</strong> <code>--delete</code>。最好先不加该参数同步，然后再手动清理差异文件。</li><li><strong>文件覆盖</strong> 📁：恢复操作会覆盖目标路径下的同名文件，且通常无法撤销。这就是为什么第一步强调要<strong>备份当前状态</strong>。</li><li><strong>环境差异</strong> 🔄：如果是在新的服务器上恢复，请注意可能与旧环境存在差异（如依赖的模块、版本、系统路径等）。</li></ul><p><a id="complete-process-summary"></a></p><h2 id="🎯-完整备份与恢复流程总结">🎯 完整备份与恢复流程总结</h2><p><strong>备份策略建议</strong>：</p><ul><li><strong>组合使用</strong> 🤝：使用 <code>rsync</code> 进行每日的增量同步到远程服务器，同时每周使用 <code>tar -czf</code> 进行一次完整压缩备份并异地存储。</li><li><strong>自动化</strong> 🤖：将备份命令写入脚本，并通过 <code>cron</code> 计划任务实现定时自动备份。</li><li><strong>验证备份</strong> 🔍：定期检查备份文件是否完好无损，并尝试在测试环境中还原，确保备份的有效性。</li></ul><p><strong>恢复流程</strong>：准备 → 验证备份 → 执行恢复 → 测试配置 (<code>nginx -t</code>) → 重载服务 (<code>reload</code>) → 业务验证</p><p>遵循这个完整流程，可以最大限度地保证 Nginx 配置备份与恢复操作的安全性和可靠性，确保您的 Web 服务持续稳定运行。🚀</p><hr><blockquote><p>💡 提示：定期演练恢复过程至关重要，确保在真正需要时您能够熟练、快速地进行操作。</p></blockquote>]]></content>
    
    
    <summary type="html">为确保您的 Nginx 服务器稳定运行，定期备份和掌握恢复方法至关重要。本文全面介绍了多种 Nginx 备份与恢复策略，从简单的压缩备份到高效的同步方案，助您构建完整的数据保护体系。</summary>
    
    
    
    <category term="Linux" scheme="https://www.meimolihan.eu.org/categories/Linux/"/>
    
    
    <category term="nginx" scheme="https://www.meimolihan.eu.org/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>Nginx 标准版安装与卸载指南 📝</title>
    <link href="https://www.meimolihan.eu.org/posts/777c419b.html"/>
    <id>https://www.meimolihan.eu.org/posts/777c419b.html</id>
    <published>2025-09-14T01:29:02.000Z</published>
    <updated>2025-09-14T01:29:02.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Nginx 标准版安装与卸载指南 📝</h1><p><img src="https://file.meimolihan.eu.org/img/nginx-01.webp" alt=""></p><blockquote><p>在 Debian 13 上安装、配置、升级、卸载和备份 Nginx 的完整流程。</p></blockquote><hr><p>📚 <strong>导航目录</strong><br><a href="#pre-installation">🚀 安装前准备</a><br><a href="#add-nginx-repo">📦 添加 Nginx 官方仓库</a><br><a href="#set-repo-priority">⚙️ 设置仓库优先级</a><br><a href="#install-verify-nginx">🔧 安装与验证 Nginx</a><br><a href="#gpg-key-issue">❓ 关于 GPG 密钥问题</a><br><a href="#post-installation">📂 安装后的基本操作</a><br><a href="#upgrade-nginx">🔄 升级 Nginx</a><br><a href="#uninstall-nginx">🗑️ 卸载 Nginx</a><br><a href="#backup-nginx">💾 备份 Nginx 配置</a></p><hr><p><a id="pre-installation"></a></p><h2 id="🚀-安装前准备">🚀 安装前准备</h2><p>在开始安装之前，建议先更新系统软件包以确保环境最新：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update &amp;&amp; <span class="built_in">sudo</span> apt upgrade -y</span><br></pre></td></tr></table></figure><p>确保已安装所需依赖：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install curl gnupg2 ca-certificates lsb-release debian-archive-keyring -y</span><br></pre></td></tr></table></figure><p><a id="add-nginx-repo"></a></p><h2 id="📦-添加-Nginx-官方-APT-仓库">📦 添加 Nginx 官方 APT 仓库</h2><p>使用以下命令添加 Nginx 官方主线版仓库（获取最新版本）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] http://nginx.org/packages/mainline/debian/ <span class="subst">$(lsb_release -cs)</span> nginx&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> /etc/apt/sources.list.d/nginx.list</span><br></pre></td></tr></table></figure><p>✨ <em>Nginx 官方仓库提供了最新稳定版本，确保您能获得最新功能和安全更新。</em></p><p><a id="set-repo-priority"></a></p><h2 id="⚙️-设置仓库优先级">⚙️ 设置仓库优先级</h2><p>为确保系统优先使用 Nginx 官方仓库（而不是系统自带的较旧版本），设置优先级配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;Package: *\nPin: origin nginx.org\nPin: release o=nginx\nPin-Priority: 900\n&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> /etc/apt/preferences.d/99nginx</span><br></pre></td></tr></table></figure><p>🔧 <em>优先级设置可防止系统自动更新时覆盖为旧版本，保持版本一致性。</em></p><p><a id="install-verify-nginx"></a></p><h2 id="🔧-安装与验证-Nginx">🔧 安装与验证 Nginx</h2><p>更新软件包列表并安装 Nginx：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update &amp;&amp; \</span><br><span class="line"><span class="built_in">sudo</span> apt install nginx -y</span><br></pre></td></tr></table></figure><p>验证安装是否成功：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -v</span><br></pre></td></tr></table></figure><p>📌 如果一切顺利，将显示 Nginx 1.29.x 版本号。</p><p><a id="gpg-key-issue"></a></p><h2 id="❓-关于-GPG-密钥验证问题">❓ 关于 GPG 密钥验证问题</h2><p>安装过程中可能遇到的 GPG 错误 (<code>/root/.gnupg: directory does not exist!</code>) 是因为系统缺少 GPG 默认密钥存储目录。这不会影响安装，因为：</p><ul><li>密钥已成功下载到 <code>/usr/share/keyrings/nginx-archive-keyring.gpg</code></li><li>使用 <code>signed-by</code> 参数明确指定了密钥位置</li></ul><p>如需修复 GPG 目录问题，可执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p ~/.gnupg</span><br><span class="line"><span class="built_in">chmod</span> 700 ~/.gnupg</span><br></pre></td></tr></table></figure><p>⚠️ <em>这不是必须操作，不影响 Nginx 正常安装和使用。</em></p><p><a id="post-installation"></a></p><h2 id="📂-安装后的基本操作">📂 安装后的基本操作</h2><p>安装完成后，可执行以下操作：</p><p><strong>启动 Nginx 服务：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl start nginx</span><br></pre></td></tr></table></figure><p><strong>设置开机自启：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> nginx</span><br></pre></td></tr></table></figure><p><strong>检查服务状态：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl status nginx</span><br></pre></td></tr></table></figure><p><strong>测试配置文件语法：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nginx -t</span><br></pre></td></tr></table></figure><p><strong>重新加载配置（不中断服务）：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl reload nginx</span><br></pre></td></tr></table></figure><p>🛡️ <em>Nginx 以其高性能、高并发能力和低内存占用著称，非常适合作为 Web 服务器、反向代理服务器或负载均衡器。</em></p><p><a id="upgrade-nginx"></a></p><h2 id="🔄-升级-Nginx">🔄 升级 Nginx</h2><p>如果您是按照之前指南通过官方仓库安装的 Nginx，这是最简单的升级方法：</p><p><strong>1. 更新软件包列表</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br></pre></td></tr></table></figure><p><strong>2. 查看可升级版本</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-cache policy nginx</span><br></pre></td></tr></table></figure><p><strong>3. 执行升级</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt upgrade nginx</span><br></pre></td></tr></table></figure><p><strong>4. 或者全面升级系统（包含 Nginx）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt full-upgrade</span><br></pre></td></tr></table></figure><p><strong>5. 验证升级结果</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -v</span><br></pre></td></tr></table></figure><p><strong>6. 重新加载配置（应用变更）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl reload nginx</span><br></pre></td></tr></table></figure><p>📌 <em>升级前建议备份配置，并检查官方发布说明了解重大变更。</em></p><p><a id="uninstall-nginx"></a></p><h2 id="🗑️-卸载-Nginx">🗑️ 卸载 Nginx</h2><p>如需完全卸载 Nginx 及其配置文件，请执行以下步骤：</p><p><strong>停止 Nginx 服务：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl stop nginx</span><br></pre></td></tr></table></figure><p><strong>禁用开机自启：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">disable</span> nginx</span><br></pre></td></tr></table></figure><p><strong>卸载 Nginx 软件包：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt remove --purge nginx nginx-common nginx-core -y</span><br></pre></td></tr></table></figure><p><strong>删除仓库配置：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -f /etc/apt/sources.list.d/nginx.list</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -f /etc/apt/preferences.d/99nginx</span><br></pre></td></tr></table></figure><p><strong>更新软件包列表：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br></pre></td></tr></table></figure><p>📌 <em><code>--purge</code> 参数会同时删除配置文件，确保完全卸载。如需保留配置，可省略此参数。</em></p><p><a id="backup-nginx"></a></p><h2 id="💾-备份-Nginx-配置">💾 备份 Nginx 配置</h2><p>定期备份 Nginx 配置是良好的运维习惯：</p><p><strong>备份配置文件：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> tar -czvf nginx-backup-$(<span class="built_in">date</span> +%Y%m%d).tar.gz /etc/nginx</span><br></pre></td></tr></table></figure><p><strong>备份网站数据：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> tar -czvf nginx-html-backup-$(<span class="built_in">date</span> +%Y%m%d).tar.gz /var/www/html</span><br></pre></td></tr></table></figure><p><strong>仅备份 Nginx 配置（推荐）：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> -r /etc/nginx /etc/nginx-backup-$(<span class="built_in">date</span> +%Y%m%d)</span><br></pre></td></tr></table></figure><p>🔐 <em>建议将备份文件存储到安全位置，如外部存储或云存储服务。</em></p><hr><p>💡 <strong>提示</strong>：现在您已经掌握了在 Debian 13 上安装、配置、升级、卸载和备份 Nginx 的完整流程。如有任何问题，欢迎随时提问！</p>]]></content>
    
    
    <summary type="html">在 Debian 13 上安装、配置、升级、卸载和备份 Nginx 的完整流程。</summary>
    
    
    
    <category term="Linux" scheme="https://www.meimolihan.eu.org/categories/Linux/"/>
    
    
    <category term="nginx" scheme="https://www.meimolihan.eu.org/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>FnOS 虚拟内存 Swap 全面解析 🐧</title>
    <link href="https://www.meimolihan.eu.org/posts/2609adf5.html"/>
    <id>https://www.meimolihan.eu.org/posts/2609adf5.html</id>
    <published>2025-09-13T14:57:01.000Z</published>
    <updated>2025-09-13T14:57:01.000Z</updated>
    
    <content type="html"><![CDATA[<h1>FnOS 虚拟内存 Swap 全面解析 🐧</h1><p><img src="https://file.meimolihan.eu.org/img/pve-swap-01.webp" alt=""></p><blockquote><p>深入理解 FnOS 中 Swap 虚拟内存的工作原理、配置方法和优化策略，帮助您构建更稳定高效的计算环境！🚀</p></blockquote><hr><h2 id="📖-导航目录">📖 导航目录</h2><ul><li><a href="#what-is-swap">✨ 什么是 Swap 虚拟内存？</a></li><li><a href="#delete-swap">🛠️ 一、删除 Swap 虚拟内存</a></li><li><a href="#create-swap">🛠️ 二、创建 Swap 虚拟内存</a><ul><li><a href="#document-swap">🛠️ 文件为 Swap 虚拟内存</a></li><li><a href="#partition-swap">🛠️ 分区为 Swap 虚拟内存</a></li></ul></li><li><a href="#persistent-config">⚙️ 三、配置永久生效</a></li><li><a href="#swappiness">🎯 四、Swap 策略优化</a></li><li><a href="#pros-cons">⚖️ 五、启用 Swap 的优缺点</a></li><li><a href="#performance-optimization">🚀 六、优化 Swap 性能的策略</a></li><li><a href="#size-planning">📊 七、Swap 大小规划建议</a></li><li><a href="#advanced-techniques">🔧 八、高级配置技巧</a></li><li><a href="#troubleshooting">🚨 九、故障排除与注意事项</a></li><li><a href="#monitoring-maintenance">📈 十、监控与维护</a></li></ul><hr><p><a id="what-is-swap"></a></p><h2 id="✨-什么是-Swap-虚拟内存？">✨ 什么是 Swap 虚拟内存？</h2><p>Swap 虚拟内存是 Linux 系统的一种内存管理机制，当物理内存（RAM）不足时，系统会将一部分不常用的内存数据暂时存储到硬盘上的特定区域（Swap 空间），从而释放物理内存供更紧急的任务使用。</p><h3 id="🔍-工作原理">🔍 工作原理</h3><ul><li><strong>内存扩展</strong>：将硬盘空间虚拟为内存使用</li><li><strong>数据交换</strong>：将不活跃的内存页移动到 Swap 空间</li><li><strong>应急保护</strong>：防止内存耗尽导致系统崩溃或进程被终止</li><li><strong>内存压缩</strong>：现代 Linux 内核还使用 zswap 进行内存压缩，减少对磁盘的依赖</li></ul><h3 id="📊-内存层次结构对比">📊 内存层次结构对比</h3><table><thead><tr><th>存储类型</th><th>访问速度</th><th>容量</th><th>成本</th><th>用途</th></tr></thead><tbody><tr><td>CPU 缓存</td><td>1-10ns</td><td>KB-MB</td><td>极高</td><td>处理器直接访问</td></tr><tr><td>内存 (RAM)</td><td>10-100ns</td><td>GB</td><td>高</td><td>活动数据和程序</td></tr><tr><td>Swap 空间</td><td>1-10ms</td><td>GB</td><td>低</td><td>不活动内存页</td></tr><tr><td>硬盘存储</td><td>5-20ms</td><td>TB</td><td>极低</td><td>长期数据存储</td></tr></tbody></table><hr><p><a id="delete-swap"></a></p><h2 id="🛠️-一、删除-Swap-虚拟内存">🛠️ 一、删除 Swap 虚拟内存</h2><h3 id="1-临时禁用所有-Swap">1. 临时禁用所有 Swap</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swapoff -a</span><br></pre></td></tr></table></figure><h3 id="2-永久移除-etc-fstab-中的交换条目">2. 永久移除 /etc/fstab 中的交换条目</h3><p>编辑 /etc/fstab 文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/fstab</span><br></pre></td></tr></table></figure><p>找到并删除或注释掉（在行首添加 #）Swap 相关行：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/swapfile none swap sw 0 0</span><br></pre></td></tr></table></figure><p>保存并退出编辑器。</p><h3 id="3-删除交换文件">3. 删除交换文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -f /swapfile</span><br></pre></td></tr></table></figure><h3 id="4-删除交换分区（如有）">4. 删除交换分区（如有）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前交换分区</span></span><br><span class="line">swapon --show</span><br><span class="line"></span><br><span class="line"><span class="comment"># 禁用特定交换分区</span></span><br><span class="line">swapoff /dev/sdXN</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从 fstab 中移除对应条目</span></span><br></pre></td></tr></table></figure><h3 id="5-验证更改">5. 验证更改</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">free -h</span><br><span class="line">swapon --show</span><br></pre></td></tr></table></figure><p>这两个命令应该显示没有任何交换空间被激活。</p><p><a id="create-swap"></a></p><h2 id="二、创建-Swap-虚拟内存（适用于-FnOS）">二、创建 Swap 虚拟内存（适用于 FnOS）</h2><p><a id="document-swap"></a></p><h3 id="方法一、文件为-Swap-虚拟内存">方法一、文件为 Swap 虚拟内存</h3><h4 id="1-创建-Swap-文件">1. 创建 Swap 文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建 8GB 的 Swap 文件（根据系统需求调整大小）</span></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=/swapfile bs=1G count=8 status=progress</span><br></pre></td></tr></table></figure><p><code>status=progress</code> 参数显示创建进度</p><h4 id="2-设置安全权限">2. 设置安全权限</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 0600 /swapfile</span><br></pre></td></tr></table></figure><p>确保只有 root 用户可以访问，提高安全性</p><h4 id="3-格式化-Swap-文件">3. 格式化 Swap 文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkswap /swapfile</span><br></pre></td></tr></table></figure><p>将文件标记为 Swap 空间</p><h4 id="4-启用-Swap">4. 启用 Swap</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swapon /swapfile</span><br></pre></td></tr></table></figure><p>立即激活 Swap 文件</p><h4 id="5-验证-Swap-状态">5. 验证 Swap 状态</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">free -h</span><br><span class="line">swapon --show</span><br></pre></td></tr></table></figure><p>查看内存和 Swap 使用情况</p><p><a id="partition-swap"></a></p><h3 id="方法二、分区为-Swap-虚拟内存">方法二、分区为 Swap 虚拟内存</h3><h4 id="1-创建-Swap-分区">1. 创建 Swap 分区</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用 fdisk 或 parted 创建新分区</span></span><br><span class="line">fdisk /dev/sdX</span><br><span class="line"><span class="comment"># 在 fdisk 中: n → p → 分区号 → 起始扇区 → 结束扇区 → t → 82 (Linux swap) → w</span></span><br></pre></td></tr></table></figure><h4 id="2-格式化-Swap-分区">2. 格式化 Swap 分区</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkswap /dev/sdXN</span><br></pre></td></tr></table></figure><h4 id="3-启用-Swap-分区">3. 启用 Swap 分区</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swapon /dev/sdXN</span><br></pre></td></tr></table></figure><h4 id="4-验证-Swap-状态">4. 验证 Swap 状态</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">free -h</span><br><span class="line"><span class="built_in">cat</span> /proc/swaps</span><br></pre></td></tr></table></figure><hr><p><a id="persistent-config"></a></p><h2 id="⚙️-三、配置永久生效">⚙️ 三、配置永久生效</h2><h3 id="1-备份-fstab-文件">1. 备份 fstab 文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /etc/fstab /etc/fstab.bak</span><br></pre></td></tr></table></figure><h3 id="2-添加自动挂载配置">2. 添加自动挂载配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对于 Swap 文件</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;/swapfile none swap sw 0 0&#x27;</span> &gt;&gt; /etc/fstab</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对于 Swap 分区（推荐使用 UUID）</span></span><br><span class="line">UUID=$(blkid -s UUID -o value /dev/sdXN)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;UUID=<span class="variable">$UUID</span> none swap sw 0 0&quot;</span> &gt;&gt; /etc/fstab</span><br></pre></td></tr></table></figure><h3 id="3-测试配置是否正确">3. 测试配置是否正确</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 禁用所有 Swap</span></span><br><span class="line">swapoff -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新启用所有 Swap（根据 fstab）</span></span><br><span class="line">swapon -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证结果</span></span><br><span class="line">free -h</span><br><span class="line">swapon --show</span><br></pre></td></tr></table></figure><h3 id="4-检查系统启动时-Swap-加载">4. 检查系统启动时 Swap 加载</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看系统启动日志</span></span><br><span class="line">dmesg | grep -i swap</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查 systemd 服务状态</span></span><br><span class="line">systemctl status swap.target</span><br></pre></td></tr></table></figure><hr><p><a id="swappiness"></a></p><h2 id="🎯-四、Swap-策略优化（Swappiness）">🎯 四、Swap 策略优化（Swappiness）</h2><h3 id="1-理解-Swappiness">1. 理解 Swappiness</h3><p>Swappiness 是 Linux 内核参数，控制系统使用 Swap 的倾向程度：</p><ul><li><strong>值范围</strong>：0-100</li><li><strong>默认值</strong>：60（大多数发行版）</li><li><strong>低值 (0-30)</strong>：尽量避免使用 Swap</li><li><strong>高值 (70-100)</strong>：积极使用 Swap</li></ul><h3 id="2-查看当前-Swappiness-值">2. 查看当前 Swappiness 值</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /proc/sys/vm/swappiness</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">sysctl vm.swappiness</span><br></pre></td></tr></table></figure><h3 id="3-临时调整-Swappiness">3. 临时调整 Swappiness</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法 1</span></span><br><span class="line">sysctl vm.swappiness=20</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法 2</span></span><br><span class="line"><span class="built_in">echo</span> 20 &gt; /proc/sys/vm/swappiness</span><br></pre></td></tr></table></figure><p>临时调整重启后失效，适合测试不同值的效果</p><h3 id="4-永久调整-Swappiness">4. 永久调整 Swappiness</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建专用配置文件</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;vm.swappiness=20&#x27;</span> &gt; /etc/sysctl.d/99-swap.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 立即生效</span></span><br><span class="line">sysctl -p /etc/sysctl.d/99-swap.conf</span><br></pre></td></tr></table></figure><h3 id="5-Swappiness-推荐值">5. Swappiness 推荐值</h3><table><thead><tr><th>场景</th><th>推荐值</th><th>说明</th></tr></thead><tbody><tr><td>桌面系统</td><td>10-30</td><td>减少卡顿，提升响应速度</td></tr><tr><td>服务器</td><td>10-20</td><td>优先使用物理内存</td></tr><tr><td>数据库服务器</td><td>1-10</td><td>极尽量避免使用 Swap</td></tr><tr><td>内存严重不足</td><td>60-80</td><td>积极使用 Swap 避免崩溃</td></tr><tr><td>FnOS 系统</td><td>15-25</td><td>平衡系统性能和稳定性</td></tr></tbody></table><h3 id="6-相关参数调整">6. 相关参数调整</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 调整虚拟内存管理参数</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;vm.vfs_cache_pressure=50&#x27;</span> &gt;&gt; /etc/sysctl.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;vm.dirty_ratio=10&#x27;</span> &gt;&gt; /etc/sysctl.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;vm.dirty_background_ratio=5&#x27;</span> &gt;&gt; /etc/sysctl.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 应用配置</span></span><br><span class="line">sysctl -p</span><br></pre></td></tr></table></figure><hr><p><a id="pros-cons"></a></p><h2 id="⚖️-五、启用-Swap-的优缺点">⚖️ 五、启用 Swap 的优缺点</h2><h3 id="✅-优点">✅ 优点</h3><ol><li><strong>内存扩展</strong>：缓解物理内存压力</li><li><strong>系统稳定</strong>：防止内存耗尽导致系统崩溃</li><li><strong>进程保护</strong>：避免重要进程被 OOM Killer 终止</li><li><strong>成本效益</strong>：用廉价硬盘空间扩展昂贵的内存</li><li><strong>休眠支持</strong>：系统休眠需要 Swap 空间保存内存状态</li></ol><h3 id="❌-缺点">❌ 缺点</h3><ol><li><strong>性能下降</strong>：硬盘速度远低于内存</li><li><strong>硬盘磨损</strong>：频繁交换操作可能缩短 SSD 寿命</li><li><strong>响应延迟</strong>：内存不足时系统响应变慢</li><li><strong>管理复杂度</strong>：需要合理配置和监控</li></ol><h3 id="📊-性能影响分析">📊 性能影响分析</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 测试磁盘 I/O 性能（影响 Swap 性能的关键因素）</span></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=/tmp/test bs=8k count=1000000</span><br><span class="line"></span><br><span class="line"><span class="comment"># 监控 Swap I/O</span></span><br><span class="line">iostat -xm 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看内存和 Swap 使用趋势</span></span><br><span class="line">vmstat 1</span><br></pre></td></tr></table></figure><hr><p><a id="performance-optimization"></a></p><h2 id="🚀-六、优化-Swap-性能的策略">🚀 六、优化 Swap 性能的策略</h2><h3 id="1-使用高性能存储">1. 使用高性能存储</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 优先使用 SSD 创建 Swap</span></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=/swapfile bs=1G count=8 status=progress</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置正确权限和属性</span></span><br><span class="line"><span class="built_in">chmod</span> 0600 /swapfile</span><br><span class="line">mkswap /swapfile</span><br><span class="line">swapon /swapfile</span><br></pre></td></tr></table></figure><h3 id="2-监控-Swap-使用情况">2. 监控 Swap 使用情况</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 实时监控</span></span><br><span class="line">watch -n 1 <span class="string">&#x27;free -h; echo &quot;Swappiness: $(cat /proc/sys/vm/swappiness)&quot;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看详细 Swap 信息</span></span><br><span class="line"><span class="built_in">cat</span> /proc/swaps</span><br><span class="line"></span><br><span class="line"><span class="comment"># 监控 Swap I/O 活动</span></span><br><span class="line">iostat -xm 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看哪些进程使用 Swap</span></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> /proc/*/status; <span class="keyword">do</span></span><br><span class="line">    awk <span class="string">&#x27;/VmSwap|Name/&#123;printf $2 &quot; &quot; $3&#125;END&#123; print &quot;&quot;&#125;&#x27;</span> <span class="variable">$file</span></span><br><span class="line"><span class="keyword">done</span> 2&gt;/dev/null | <span class="built_in">sort</span> -k 2 -n -r | <span class="built_in">head</span> -10</span><br></pre></td></tr></table></figure><hr><p><a id="size-planning"></a></p><h2 id="📊-七、Swap-大小规划建议">📊 七、Swap 大小规划建议</h2><table><thead><tr><th>物理内存大小</th><th>推荐 Swap 大小</th><th>说明</th></tr></thead><tbody><tr><td>≤ 2GB</td><td>2× 内存</td><td>传统建议，确保系统稳定性</td></tr><tr><td>2-8GB</td><td>=内存</td><td>平衡性能和稳定性</td></tr><tr><td>8-64GB</td><td>4-16GB</td><td>服务器环境推荐值</td></tr><tr><td>≥ 64GB</td><td>4-8GB</td><td>大内存系统，主要用于应急</td></tr><tr><td>休眠需求</td><td>内存大小 + 10%</td><td>系统休眠需要足够空间保存内存状态</td></tr></tbody></table><h3 id="💡-FnOS-特定建议">💡 FnOS 特定建议</h3><p>对于 FnOS 系统，建议配置：</p><ul><li><strong>最小</strong>: 2GB Swap</li><li><strong>推荐</strong>: 4-8GB Swap</li><li><strong>最大</strong>: 不超过 16GB（除非有特殊需求）</li></ul><h3 id="🔢-计算公式">🔢 计算公式</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 根据内存计算推荐 Swap 大小</span></span><br><span class="line">MEMORY_GB=$(free -g | awk <span class="string">&#x27;/Mem:/ &#123;print $2&#125;&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$MEMORY_GB</span> -le 2 ]; <span class="keyword">then</span></span><br><span class="line">    SWAP_GB=$((MEMORY_GB * <span class="number">2</span>))</span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$MEMORY_GB</span> -le 8 ]; <span class="keyword">then</span></span><br><span class="line">    SWAP_GB=<span class="variable">$MEMORY_GB</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$MEMORY_GB</span> -le 64 ]; <span class="keyword">then</span></span><br><span class="line">    SWAP_GB=16</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    SWAP_GB=8</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;推荐 Swap 大小: <span class="variable">$&#123;SWAP_GB&#125;</span>GB&quot;</span></span><br></pre></td></tr></table></figure><hr><p><a id="advanced-techniques"></a></p><h2 id="🔧-八、高级配置技巧">🔧 八、高级配置技巧</h2><h3 id="1-使用-ZRAM（内存压缩）">1. 使用 ZRAM（内存压缩）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装 zram-tools</span></span><br><span class="line">apt install zram-tools</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置 ZRAM（编辑 /etc/default/zramswap）</span></span><br><span class="line">PERCENTAGE=50</span><br><span class="line">PRIORITY=100</span><br><span class="line">ALGORITHM=lz4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启服务</span></span><br><span class="line">systemctl restart zramswap</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看状态</span></span><br><span class="line">zramctl</span><br></pre></td></tr></table></figure><h3 id="2-调整缓存压力">2. 调整缓存压力</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 减少缓存压力，降低 Swap 使用</span></span><br><span class="line"><span class="built_in">echo</span> 50 &gt; /proc/sys/vm/vfs_cache_pressure</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;vm.vfs_cache_pressure=50&#x27;</span> &gt;&gt; /etc/sysctl.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调整脏页写回策略</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;vm.dirty_ratio=10&#x27;</span> &gt;&gt; /etc/sysctl.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;vm.dirty_background_ratio=5&#x27;</span> &gt;&gt; /etc/sysctl.conf</span><br></pre></td></tr></table></figure><h3 id="3-应急内存管理">3. 应急内存管理</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 手动释放缓存</span></span><br><span class="line"><span class="built_in">echo</span> 3 &gt; /proc/sys/vm/drop_caches</span><br><span class="line"></span><br><span class="line"><span class="comment"># 仅释放页缓存</span></span><br><span class="line"><span class="built_in">echo</span> 1 &gt; /proc/sys/vm/drop_caches</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看内存使用详情</span></span><br><span class="line"><span class="built_in">cat</span> /proc/meminfo</span><br></pre></td></tr></table></figure><hr><p><a id="troubleshooting"></a></p><h2 id="🚨-九、故障排除与注意事项">🚨 九、故障排除与注意事项</h2><h3 id="1-Swap-创建失败">1. Swap 创建失败</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查磁盘空间</span></span><br><span class="line"><span class="built_in">df</span> -h</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查文件系统类型</span></span><br><span class="line"><span class="built_in">df</span> -T</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查文件权限</span></span><br><span class="line"><span class="built_in">ls</span> -la /swapfile</span><br></pre></td></tr></table></figure><h3 id="2-Swap-无法启用">2. Swap 无法启用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查文件系统挂载选项</span></span><br><span class="line">mount | grep <span class="string">&quot; / &quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新格式化</span></span><br><span class="line">mkswap -f /swapfile</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查内核日志</span></span><br><span class="line">dmesg | grep -i swap</span><br></pre></td></tr></table></figure><h3 id="3-性能问题诊断">3. 性能问题诊断</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看 Swap 使用情况</span></span><br><span class="line">vmstat 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查哪些进程使用 Swap</span></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> /proc/*/status; <span class="keyword">do</span></span><br><span class="line">    awk <span class="string">&#x27;/VmSwap|Name/&#123;printf $2 &quot; &quot; $3&#125;END&#123; print &quot;&quot;&#125;&#x27;</span> <span class="variable">$file</span></span><br><span class="line"><span class="keyword">done</span> 2&gt;/dev/null | <span class="built_in">sort</span> -k 2 -n -r | <span class="built_in">head</span> -10</span><br><span class="line"></span><br><span class="line"><span class="comment"># 监控磁盘 I/O</span></span><br><span class="line">iotop -o</span><br></pre></td></tr></table></figure><h3 id="4-安全注意事项">4. 安全注意事项</h3><ul><li><strong>确保 Swap 文件权限正确</strong>（0600）</li><li><strong>避免将 Swap 文件放在加密分区</strong>（性能极差）</li><li><strong>定期监控 Swap 使用情况</strong>，避免过度依赖</li><li><strong>在敏感环境中考虑加密 Swap 内容</strong></li></ul><hr><p><a id="monitoring-maintenance"></a></p><h2 id="📈-十、监控与维护">📈 十、监控与维护</h2><h3 id="1-创建监控脚本">1. 创建监控脚本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># swap_monitor.sh - 监控 Swap 使用情况</span></span><br><span class="line"></span><br><span class="line">THRESHOLD=80 <span class="comment"># 警告阈值百分比</span></span><br><span class="line">LOG_FILE=<span class="string">&quot;/var/log/swap_monitor.log&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取 Swap 使用率</span></span><br><span class="line">swap_total=$(free | awk <span class="string">&#x27;/Swap/ &#123;print $2&#125;&#x27;</span>)</span><br><span class="line">swap_used=$(free | awk <span class="string">&#x27;/Swap/ &#123;print $3&#125;&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$swap_total</span> -gt 0 ]; <span class="keyword">then</span></span><br><span class="line">    swap_usage=$((swap_used * <span class="number">100</span> / swap_total))</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    swap_usage=0</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="subst">$(date)</span>: Swap 使用率: <span class="variable">$swap_usage</span>%&quot;</span> &gt;&gt; <span class="variable">$LOG_FILE</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$swap_usage</span> -ge <span class="variable">$THRESHOLD</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="subst">$(date)</span>: 警告: Swap 使用率超过 <span class="variable">$THRESHOLD</span>%!&quot;</span> &gt;&gt; <span class="variable">$LOG_FILE</span></span><br><span class="line">    <span class="comment"># 触发应急措施</span></span><br><span class="line">    <span class="built_in">echo</span> 1 &gt; /proc/sys/vm/drop_caches</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><h3 id="2-设置定期监控">2. 设置定期监控</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加定时任务</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;*/5 * * * * root /usr/local/bin/swap_monitor.sh&quot;</span> &gt; /etc/cron.d/swap_monitor</span><br></pre></td></tr></table></figure><h3 id="3-定期维护">3. 定期维护</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查 Swap 文件系统完整性</span></span><br><span class="line">swapon --show | grep file | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | <span class="keyword">while</span> <span class="built_in">read</span> swapfile; <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> ! swapon -s | grep -q <span class="string">&quot;<span class="variable">$swapfile</span>&quot;</span>; <span class="keyword">then</span></span><br><span class="line">        mkswap -f <span class="string">&quot;<span class="variable">$swapfile</span>&quot;</span></span><br><span class="line">        swapon <span class="string">&quot;<span class="variable">$swapfile</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><hr><h2 id="🎯-总结">🎯 总结</h2><p>Swap 是 Linux 系统重要的内存管理机制，合理配置可以提升系统稳定性。对于 FnOS 系统，建议：</p><ol><li><strong>根据内存大小配置适量 Swap</strong>（通常 4-8GB）</li><li><strong>设置适当的 swappiness 值</strong>（15-25）</li><li><strong>使用高性能存储</strong>创建 Swap</li><li><strong>配置监控和警报</strong>，及时发现内存问题</li><li><strong>定期维护</strong> Swap 空间，确保系统健康运行</li></ol><p>通过本指南，您应该能够更好地理解和优化 FnOS 中的 Swap 配置，构建更稳定高效的计算环境！</p><blockquote><p>💡 <strong>提示</strong>：在进行任何系统配置更改前，请确保有完整的数据备份。</p></blockquote><p>希望本指南帮助您更好地管理 FnOS 系统的内存资源！</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;FnOS 虚拟内存 Swap 全面解析 🐧&lt;/h1&gt;
&lt;p&gt;&lt;img src=&quot;https://file.meimolihan.eu.org/img/pve-swap-01.webp&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;深入理解 FnOS 中 Sw</summary>
      
    
    
    
    <category term="Proxmox VE" scheme="https://www.meimolihan.eu.org/categories/Proxmox-VE/"/>
    
    
    <category term="fnos" scheme="https://www.meimolihan.eu.org/tags/fnos/"/>
    
  </entry>
  
  <entry>
    <title>Hexo + Butterfly 主题美化指南  🎨</title>
    <link href="https://www.meimolihan.eu.org/posts/a5e7878b.html"/>
    <id>https://www.meimolihan.eu.org/posts/a5e7878b.html</id>
    <published>2025-09-13T09:16:40.000Z</published>
    <updated>2025-09-13T09:16:40.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Hexo + Butterfly 主题美化指南 🎨</h1><p><img src="https://file.meimolihan.eu.org/img/hexo-01.webp" alt=""></p><blockquote><p><strong>✨ 特别说明</strong><br>欢迎访问本站！本博客基于 <strong><a href="https://hexo.io/zh-cn/">Hexo</a></strong> 静态框架 + <strong><a href="https://butterfly.js.org/">Butterfly</a></strong> 主题构建，兼具简洁美观与强大功能。<br>📌 本站内容仅供学习交流，不承担因版本差异导致的问题。已适配版本：</p><ul><li>Hexo <code>7.3.0</code></li><li>Butterfly <code>5.3.5</code></li></ul></blockquote><hr><h2 id="📑-导航目录">📑 导航目录</h2><ul><li><a href="#footer-gradient">🎯 一、页脚渐变色效果</a></li><li><a href="#go-bottom-button">⬇️ 二、直达底部按钮</a></li><li><a href="#animation-effects">✨ 三、动画特效增强</a></li><li><a href="#title-icons">🔖 四、标题图标美化</a></li><li><a href="#aplayer-setup">🎵 五、全局吸底播放器</a></li><li><a href="#wave-effect">🌊 六、文章顶部波浪效果</a></li><li><a href="#title-center">📝 七、文章标题居中</a></li><li><a href="#category-magnets">🧲 八、首页分类磁贴</a></li><li><a href="#dark-mode-animation">🌙 九、夜间模式动画</a></li><li><a href="#colorful-icons">🎨 十、导航栏多彩图标</a></li><li><a href="#neon-effects">💫 十一、黑夜霓虹灯效果</a></li><li><a href="#global-rounded">🔲 十二、全局圆角设计</a></li><li><a href="#page-beautification">🎭 十三、页面美化优化</a></li><li><a href="#cdn-optimization">🚀 十四、CDN加速配置</a></li><li><a href="#hanging-cat">😺 十五、挂绳小猫咪特效</a></li><li><a href="#disable-f12">🛡️ 十六、禁用F12保护</a></li><li><a href="#sharingan-loader">👁️ 十七、写轮眼加载动画</a></li><li><a href="#footer-badge-timer">⏰ 十八、页脚徽标和计时器</a></li><li><a href="#single-image-bg">🖼️ 十九、一图流背景设计</a></li><li><a href="#font-customization">🔤 二十、引用字体美化</a></li><li><a href="#scrollbar-style">🎚️ 二十一、滚动条样式美化</a></li><li><a href="#avatar-breathing-light">💡 二十二、头像呼吸灯效果</a></li><li><a href="#background-switcher">🖼️ 二十三、博客背景切换</a></li><li><a href="#visitor-welcome">👋 二十四、访客定位欢迎信息</a></li><li><a href="#footer-animal">🐾 二十五、脚页添加小动物</a></li><li><a href="#poem-widget">📜 二十六、今日诗词侧边栏</a></li><li><a href="#poem-widget">📋 二十七、复制弹窗提醒</a></li><li><a href="#butterfly-envelope">📖 二十八 、留言板 Violet 风格</a></li><li><a href="#butterfly-swiper">📖 二十九 、文章置顶轮播图</a></li></ul><hr><p><a id="footer-gradient"></a></p><h2 id="🎯-一、页脚渐变色效果">🎯 一、页脚渐变色效果</h2><h3 id="✨-功能特点">✨ 功能特点</h3><ul><li>为博客页脚添加动态渐变色彩效果，色彩平滑过渡，提升视觉体验。支持多色渐变循环动画，让页脚区域变得生动有趣。</li></ul><h3 id="🔧-实现步骤">🔧 实现步骤</h3><ul><li><strong>1. 🧩 创建CSS文件：</strong><ul><li>创建  <code>Hexo根目录/source/css/页脚渐变.css</code>  文件，将下面代码复制粘贴到该文件中。</li></ul></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 渐变色滚动动画 */</span></span><br><span class="line"><span class="keyword">@-webkit-keyframes</span> Gradient &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@-moz-keyframes</span> Gradient &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> Gradient &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#footer</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(-<span class="number">45deg</span>, <span class="number">#2e3740</span>, <span class="number">#3b4a5e</span>, <span class="number">#665c78</span>, <span class="number">#7d5a52</span>, <span class="number">#4a4a4a</span>, <span class="number">#1e293b</span>);</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">600%</span> <span class="number">600%</span>; <span class="comment">/* 增加背景尺寸以适应更多的颜色 */</span></span><br><span class="line">    -webkit-<span class="attribute">animation</span>: Gradient <span class="number">15s</span> ease infinite; <span class="comment">/* 调整动画时长以更好地展示所有颜色 */</span></span><br><span class="line">    -moz-<span class="attribute">animation</span>: Gradient <span class="number">15s</span> ease infinite;</span><br><span class="line">    <span class="attribute">animation</span>: Gradient <span class="number">15s</span> ease infinite;</span><br><span class="line">    -o-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -ms-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -webkit-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -moz-<span class="attribute">user-select</span>: none;</span><br><span class="line">    <span class="attribute">user-select</span>: none;</span><br><span class="line">    <span class="attribute">border-top-left-radius</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">border-top-right-radius</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>2. ➕ 引入CSS文件：</strong><ul><li>在 <code>_config.butterfly.yml</code> 文件中找到 <code>inject</code> 部分，如果该部分不存在，添加以下内容</li></ul></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span> <span class="comment"># 引入自定义css</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/页脚渐变.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><p><strong>3.  🚀 清理并重启项目：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><p><img src="https://file.meimolihan.eu.org/screenshot/code-unfold.jpg" alt=""></p><hr><p><a id="go-bottom-button"></a></p><h2 id="⬇️-二、直达底部按钮">⬇️ 二、直达底部按钮</h2><h3 id="✨-功能特点-2">✨ 功能特点</h3><ul><li>添加一键滚动至页面底部的便捷按钮，提升用户体验，特别适合长文章页面。</li></ul><h3 id="🔧-实现方法">🔧 实现方法</h3><ul><li>在<code>Hexo根目录\themes\butterfly\layout\includes\rightside.pug</code>最后添加以下内容</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 直达底部按钮</span><br><span class="line">button#go-down(type=&quot;button&quot; title=&quot;直达底部&quot; onclick=&quot;btf.scrollToDest(document.body.scrollHeight, 500)&quot;)</span><br><span class="line">  i.fas.fa-arrow-down</span><br></pre></td></tr></table></figure><hr><p><a id="animation-effects"></a></p><h2 id="✨-三、动画特效增强">✨ 三、动画特效增强</h2><h3 id="✨-功能特点-3">✨ 功能特点</h3><ul><li>使用 <code>WOW.js</code> 为页面元素添加丰富的入场动画效果，让页面加载和滚动时呈现流畅的动画体验。</li></ul><h3 id="🔧-安装配置">🔧 安装配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-wowjs --save</span><br></pre></td></tr></table></figure><ul><li>在站点配置文件<code>_config.yml</code> 或者主题配置文件<code>_config.butterfly.yml </code>中添加：</li><li><strong>动画预览网站：<a href="https://animate.style/">https://animate.style/</a></strong></li></ul><h3 id="⚙️-配置示例">⚙️ 配置示例</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Hexo + Butterfly 增加动画特效</span></span><br><span class="line"><span class="attr">wowjs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#控制动画开关。true是打开，false是关闭</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">10</span> <span class="comment">#过滤器优先级</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">true</span> <span class="comment">#移动端是否启用，默认移动端禁用</span></span><br><span class="line">  <span class="attr">animateitem:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">recent-post-item</span> <span class="comment"># - class: recent-post-item #必填项，需要添加动画的元素的class</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span> <span class="comment">#   style: animate__zoomInLeft #必填项，需要添加的动画</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">900ms</span> <span class="comment">#选填项，动画持续时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">800ms</span> <span class="comment">#选填项，动画开始的延迟时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">      <span class="attr">offset:</span> <span class="number">100</span> <span class="comment">#选填项，开始动画的距离（相对浏览器底部）</span></span><br><span class="line">      <span class="attr">iteration:</span> <span class="number">1</span> <span class="comment">#选填项，动画重复的次数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 以下是一些常用的动画效果，可以根据自己的需求进行调整</span></span><br><span class="line"><span class="comment">#     文章TOC动画</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">card-widget</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line"><span class="comment">#      首页导航栏</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">menus_item</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__slideInRight</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line"><span class="comment">#      导航栏-站点标题</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">nav-site-title</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line"><span class="comment">#      导航栏-搜索按钮</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">site-page</span> <span class="string">social-icon</span> <span class="string">search</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line"><span class="comment">#      导航栏-明暗模式</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">sun_moon</span> <span class="string">faa-parent</span> <span class="string">animated-hover</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line"><span class="comment">#      首页文章标题</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">post-title</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">meta-firstline</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">meta-secondline</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line"><span class="comment">#      标签页</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">tag-cloud-list</span> <span class="string">text-center</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line"><span class="comment">#      分类页</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">category-lists</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line"><span class="comment">#      首页侧边栏分类</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">card-category-list-item</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__backInRight</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line"><span class="comment">#      侧边栏-网站信息</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">webinfo-item</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__backInRight</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#      归档页</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">article-sort-item</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__fadeInRightBig</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line"><span class="comment">#      友链页</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">flink-list</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line"><span class="comment">#      关于页</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">container</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line"><span class="comment">#      aplayer 播放器</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">aplayer-body</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__slideInRight</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line">      <span class="attr">iteration:</span> <span class="number">3</span></span><br><span class="line"><span class="comment">#      代码框</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">highlight</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">900ms</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">800ms</span></span><br><span class="line"><span class="comment">#      标签外挂</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">folding-tag</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">900ms</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">800ms</span></span><br><span class="line"><span class="comment">#      分页</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">pagination</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">900ms</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">800ms</span></span><br><span class="line"><span class="comment">#      脚页建站时间</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">copyright</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">900ms</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">800ms</span></span><br><span class="line"><span class="comment">#      评论 1</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">comment-head</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">900ms</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">800ms</span></span><br><span class="line"><span class="comment">#      评论 2</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">comment-wrap</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">900ms</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">800ms</span></span><br><span class="line"><span class="comment">#      文章页书签</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">tag_share</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">900ms</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">800ms</span></span><br><span class="line"><span class="comment">#      下一篇文章</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">pagination-post</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">900ms</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">800ms</span></span><br><span class="line"><span class="comment">#      相关文章文字</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">headline</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">900ms</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">800ms</span></span><br><span class="line"><span class="comment">#      相关文章卡片</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">relatedPosts-list</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">900ms</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">800ms</span></span><br><span class="line"><span class="comment">#      文章内容</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">container</span> <span class="string">post-content</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line"><span class="comment">#      文章内容下面分割线</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">custom-hr</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">900ms</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">800ms</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">boardsign</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">900ms</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">800ms</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#      侧边栏-公告</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">announcement_content</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__backInRight</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line"><span class="comment">#      侧边栏-标签云内容</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">card-tag-cloud</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__backInRight</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line"><span class="comment">#      侧边栏-最近文章</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">aside-list-item</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__backInRight</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line"><span class="comment">#      侧边栏-头像</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">site-data</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__backInRight</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">author-info-name</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__backInRight</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#      首页文章封面</span></span><br><span class="line"><span class="comment">#    - class: post-bg</span></span><br><span class="line"><span class="comment">#      style: animate__fadeInRightBig</span></span><br><span class="line"><span class="comment">#      duration: 3s</span></span><br><span class="line"><span class="comment">#      delay: 2s</span></span><br><span class="line"><span class="comment">#    - class: recent-post-info</span></span><br><span class="line"><span class="comment">#      style: animate__fadeInRightBig</span></span><br><span class="line"><span class="comment">#      duration: 3s</span></span><br><span class="line"><span class="comment">#      delay: 2s</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#      文章TOC目录内容</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">toc-item</span> <span class="string">toc-level-2</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__backInRight</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">item-headline</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__backInRight</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">toc-link</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__backInRight</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">animate_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css</span></span><br><span class="line">  <span class="attr">wow_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js</span></span><br><span class="line">  <span class="attr">wow_init_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">#  animate_css: https://cdn.jsdelivr.net/gh/meimolihan/cdn@v1.0.0/hexo-butterfly-wowjs/animate.min.css</span></span><br><span class="line"><span class="comment">#  wow_js: https://cdn.jsdelivr.net/gh/meimolihan/cdn@v1.0.0/hexo-butterfly-wowjs/wow.min.js</span></span><br><span class="line"><span class="comment">#  wow_init_js: https://cdn.jsdelivr.net/gh/meimolihan/cdn@v1.0.0/hexo-butterfly-wowjs/wow_init.js</span></span><br></pre></td></tr></table></figure><p><strong>🚀 清理并重启项目：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><hr><p><a id="title-icons"></a></p><h2 id="🔖-四、标题图标美化">🔖 四、标题图标美化</h2><h3 id="✨-功能特点-4">✨ 功能特点</h3><p>为文章标题添加旋转风车图标，增强视觉吸引力，支持悬停特效和响应式设计。</p><h3 id="🎨-特色功能">🎨 特色功能</h3><ul><li>🌀 动态旋转风车图标</li><li>🎯 多级标题不同颜色</li><li>📱 移动端适配优化</li><li>✨ 悬停放大效果</li></ul><h3 id="🎨-修改主题配置">🎨 修改主题配置</h3><ul><li>文件<code>_config.butterfly.yml</code>文件的<code>beautify</code>配置项</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">beautify:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  field: post <span class="comment"># site/post</span></span><br><span class="line">  <span class="comment"># title-prefix-icon: &#x27;\f0c1&#x27; 原内容</span></span><br><span class="line">  title-prefix-icon: <span class="string">&#x27;\f863&#x27;</span></span><br><span class="line">  title-prefix-icon-color: <span class="string">&quot;#F47466&quot;</span></span><br></pre></td></tr></table></figure><ul><li>创建  <code>Hexo根目录/source/css/custom-icon.css</code> 文件，将代码复制粘贴到该文件中。</li><li><strong>【<a href="https://fa.uutool.cn/unicode/5.15.2/">fontawesome 的 icon 图标代号</a>】</strong></li></ul><p><strong>🧩 创建CSS文件：</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 导入字体库 */</span></span><br><span class="line"><span class="keyword">@import</span> url(<span class="string">&#x27;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 风‮基车‬础样式 */</span></span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h1</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h2</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h3</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h4</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h5</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h6</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;\f863&quot;</span>;                    <span class="comment">/* 风车图标 */</span></span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&#x27;Font Awesome 5 Free&#x27;</span>;  <span class="comment">/* 字体库 */</span></span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">900</span>;                    <span class="comment">/* 图标粗细 */</span></span><br><span class="line">  <span class="attribute">display</span>: inline-block;               <span class="comment">/* 确保动画生效 */</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1.2em</span>;                        <span class="comment">/* 图‮容标‬器宽度 */</span></span><br><span class="line">  <span class="attribute">text-align</span>: center;                  <span class="comment">/* 图标居中 */</span></span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease;           <span class="comment">/* 过渡动画 */</span></span><br><span class="line">  -webkit-<span class="attribute">animation</span>: ccc <span class="number">4s</span> linear infinite;</span><br><span class="line">  <span class="attribute">animation</span>: ccc <span class="number">4s</span> linear infinite;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/* 新‮定增‬位属性 */</span></span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 标‮基题‬础样式 */</span></span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h1</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h2</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h3</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h4</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h5</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h6</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;  <span class="comment">/* 定位基准 */</span></span><br><span class="line">  <span class="attribute">display</span>: block;      <span class="comment">/* 改为块级元素 */</span></span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">1.8rem</span> <span class="meta">!important</span>;  <span class="comment">/* 左侧留出‮标图‬空间 */</span></span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">15px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transition</span>: transform <span class="number">0.3s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 各层级‮车风‬颜色与定‮微位‬调 */</span></span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h1</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ef50a8</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.3rem</span>;</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">0.1rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h2</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fb7061</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.1rem</span>;</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">0.1rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h3</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffbf00</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.95rem</span>;</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">0.1rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h4</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#a9e000</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.8rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h5</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#57c850</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.7rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h6</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#5ec1e0</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.66rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 旋转动画 */</span></span><br><span class="line"><span class="keyword">@keyframes</span> ccc &#123;</span><br><span class="line">  <span class="number">0%</span> &#123; <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">50%</span>) <span class="built_in">rotate</span>(<span class="number">0deg</span>); &#125;</span><br><span class="line">  <span class="number">100%</span> &#123; <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">50%</span>) <span class="built_in">rotate</span>(-<span class="number">360deg</span>); &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 标题悬停效果 */</span></span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h1</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h2</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h3</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h4</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h5</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h6</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#2196f3</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.05</span>);</span><br><span class="line">  <span class="attribute">transition</span>: color <span class="number">0.3s</span> ease, transform <span class="number">0.3s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 风车‮停悬‬特效 */</span></span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h1</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h2</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h3</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h4</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h5</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h6</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">brightness</span>(<span class="number">1.2</span>);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">50%</span>) <span class="built_in">scale</span>(<span class="number">1.1</span>) <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#2196f3</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease;</span><br><span class="line">  -webkit-<span class="attribute">animation</span>: ccc <span class="number">2s</span> linear infinite;</span><br><span class="line">  <span class="attribute">animation</span>: ccc <span class="number">2s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 移动端适配 */</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h1</span>,</span><br><span class="line">  <span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h2</span>,</span><br><span class="line">  <span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h3</span>,</span><br><span class="line">  <span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h4</span>,</span><br><span class="line">  <span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h5</span>,</span><br><span class="line">  <span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h6</span> &#123;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">1.5rem</span> <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h1</span><span class="selector-pseudo">::before</span> &#123; <span class="attribute">font-size</span>: <span class="number">1.1rem</span> &#125;</span><br><span class="line">  <span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h2</span><span class="selector-pseudo">::before</span> &#123; <span class="attribute">font-size</span>: <span class="number">1.0rem</span> &#125;</span><br><span class="line">  <span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h3</span><span class="selector-pseudo">::before</span> &#123; <span class="attribute">font-size</span>: <span class="number">0.9rem</span> &#125;</span><br><span class="line">  <span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h4</span><span class="selector-pseudo">::before</span> &#123; <span class="attribute">font-size</span>: <span class="number">0.75rem</span> &#125;</span><br><span class="line">  <span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h5</span><span class="selector-pseudo">::before</span> &#123; <span class="attribute">font-size</span>: <span class="number">0.65rem</span> &#125;</span><br><span class="line">  <span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h6</span><span class="selector-pseudo">::before</span> &#123; <span class="attribute">font-size</span>: <span class="number">0.6rem</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>➕ 引入CSS文件：</strong></p><ul><li>在 <code>_config.butterfly.yml</code> 文件中找到 <code>inject</code> 部分，添加以下内容：</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span> <span class="comment"># 注入自定义css</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom-icon.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><p><strong>🚀 清理并重启项目：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><hr><p><a id="aplayer-setup"></a></p><h2 id="🎵-五、全局吸底播放器">🎵 五、全局吸底播放器</h2><h3 id="✨-功能特点-5">✨ 功能特点</h3><p>添加全局音乐播放器，支持歌单管理、歌词显示、美观的播放控制界面。</p><h3 id="🔧-安装插件">🔧 安装插件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-tag-aplayer</span><br></pre></td></tr></table></figure><h3 id="⚙️-config-yml-配置示例">⚙️  <code>_config.yml</code> 配置示例</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">aplayer:</span></span><br><span class="line">  <span class="attr">meting:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">asset_inject:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h3 id="⚙️-config-butterfly-yml-配置示例">⚙️  <code>_config.butterfly.yml</code> 配置示例</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">aplayerInject:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="🎵-aplayer-的-html-配置文件">🎵 aplayer 的 html 配置文件</h3><ul><li>在<code>Hexo根目录\themes\butterfly\layout\includes\head.pug</code>后追加内容</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// 添加音频播放器代码</span><br><span class="line">link(rel=&#x27;stylesheet&#x27;, href=&#x27;https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css&#x27;)</span><br><span class="line">script(src=&#x27;https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js&#x27;)</span><br><span class="line">#aplayer</span><br><span class="line">script.</span><br><span class="line">    const home = &#x27;https://xxx.yyyy.com/&#x27;;</span><br><span class="line">    const songs = [</span><br><span class="line">        &#x27;野狼disco-宝石Gem&#x27;, </span><br><span class="line">        &#x27;除了生死都是擦伤-侯泽润&#x27;, </span><br><span class="line">    ];</span><br><span class="line">    let audios = [];</span><br><span class="line">    // 遍历歌曲列表</span><br><span class="line">    songs.forEach((item) =&gt; &#123;</span><br><span class="line">        const songInfo = item.split(&#x27;-&#x27;);</span><br><span class="line">        audios.push(&#123;</span><br><span class="line">            name: songInfo[0],</span><br><span class="line">            artist: songInfo[1],</span><br><span class="line">            url: home + item + &#x27;/song.mp3&#x27;,</span><br><span class="line">            cover: home + item + &#x27;/cover.jpg&#x27;,</span><br><span class="line">            lrc: home + item + &#x27;/lyric.lrc&#x27;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const ap = new APlayer(&#123;</span><br><span class="line">        container: document.getElementById(&#x27;aplayer&#x27;),</span><br><span class="line">        fixed: true,</span><br><span class="line">        lrcType: 3,</span><br><span class="line">        audio: audios</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><ul><li>说明</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">完整歌曲链接：https:<span class="regexp">//</span>xxx.yyyy.com<span class="regexp">/野狼disco-宝石Gem/</span>lyric.lrc</span><br><span class="line"></span><br><span class="line">── https:<span class="regexp">//</span>xxx.yyyy.com/</span><br><span class="line">   ├──  野狼disco-宝石Gem  <span class="comment"># 歌曲文件夹（根据`-`前后来匹配歌手名和歌曲名）</span></span><br><span class="line">        ├── song.mp3  <span class="comment"># 歌曲</span></span><br><span class="line">        ├── cover.jpg  <span class="comment"># 封面</span></span><br><span class="line">        └── lyric.lrc  <span class="comment">#歌词</span></span><br></pre></td></tr></table></figure><h3 id="🎵-aplyer-音乐播放器美化">🎵 aplyer 音乐播放器美化</h3><ul><li>添加代码到 <code>aplayer.css</code> 文件</li><li>创建  <code>Hexo根目录/source/css/aplayer.css</code> 文件，将代码复制粘贴到该文件中。</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*aplayer日间模式调整*/</span></span><br><span class="line"><span class="comment">/*背景色*/</span></span><br><span class="line"><span class="selector-class">.aplayer</span>&#123;</span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.60</span>)<span class="meta">!important</span>;</span><br><span class="line"><span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">2px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.07</span>),<span class="number">0</span> <span class="number">1px</span> <span class="number">5px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">1</span>);</span><br><span class="line"><span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-fixed</span> <span class="selector-class">.aplayer-lrc</span><span class="selector-pseudo">:after</span>,<span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-fixed</span> <span class="selector-class">.aplayer-lrc</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line"><span class="attribute">display</span>: none</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.aplayer</span><span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-fixed</span> <span class="selector-class">.aplayer-body</span>&#123;</span><br><span class="line"><span class="attribute">background</span>:<span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.60</span>)<span class="meta">!important</span>;</span><br><span class="line"><span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">2px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">07</span>),<span class="number">0</span> <span class="number">1px</span> <span class="number">5px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">1</span>);</span><br><span class="line"><span class="attribute">position</span>: fixed;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*毛玻璃效果*/</span></span><br><span class="line"><span class="selector-class">.aplayer-list</span>&#123;</span><br><span class="line"><span class="attribute">backdrop-filter</span>: <span class="built_in">blur</span>(<span class="number">3px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.aplayer-info</span>&#123;</span><br><span class="line"><span class="attribute">backdrop-filter</span>: <span class="built_in">blur</span>(<span class="number">3px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*滚动条*/</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">ol</span>::-webkit-scrollbar &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">5px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">ol</span>::-webkit-scrollbar-thumb &#123;</span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line"><span class="attribute">background-color</span>: <span class="number">#b0e1ff</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">ol</span>::-webkit-scrollbar-thumb:hover &#123;</span><br><span class="line"><span class="attribute">background-color</span>: <span class="number">#b0e1ff</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*圆角*/</span></span><br><span class="line"><span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-fixed</span> <span class="selector-class">.aplayer-list</span>&#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">6px</span> <span class="number">6px</span> <span class="number">0</span> <span class="number">0</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-fixed</span> <span class="selector-class">.aplayer-miniswitcher</span>&#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">0</span> <span class="number">6px</span> <span class="number">6px</span> <span class="number">0</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-fixed</span><span class="selector-class">.aplayer-narrow</span> <span class="selector-class">.aplayer-body</span>&#123;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.28s</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">6px</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*选中与播放中歌曲激活颜色*/</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">ol</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#b0e1ff</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">ol</span> <span class="selector-tag">li</span><span class="selector-class">.aplayer-list-light</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#ffdffa</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*aplayer黑暗模式*/</span></span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span></span><br><span class="line"><span class="selector-class">.aplayer</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">0.60</span>)<span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>);</span><br><span class="line"><span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">2px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">07</span>),<span class="number">0</span> <span class="number">1px</span> <span class="number">5px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span></span><br><span class="line"><span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-fixed</span> <span class="selector-class">.aplayer-body</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">0.60</span>)<span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>);</span><br><span class="line"><span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">2px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">07</span>),<span class="number">0</span> <span class="number">1px</span> <span class="number">5px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-controller</span> <span class="selector-class">.aplayer-time</span> <span class="selector-class">.aplayer-icon</span> <span class="selector-tag">path</span>&#123;</span><br><span class="line"><span class="attribute">fill</span>: <span class="number">#d4d4d4</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">ol</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#407290</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">ol</span> <span class="selector-tag">li</span><span class="selector-class">.aplayer-list-light</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#9c8098</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-controller</span> <span class="selector-class">.aplayer-time</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#d4d4d4</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">ol</span> <span class="selector-tag">li</span> <span class="selector-class">.aplayer-list-index</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#d4d4d4</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">ol</span> <span class="selector-tag">li</span> <span class="selector-class">.aplayer-list-author</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#d4d4d4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* aplayer 播放器，自动缩进隐藏 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-fixed</span><span class="selector-class">.aplayer-narrow</span> <span class="selector-class">.aplayer-body</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">66px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="comment">/* 默认‮况情‬下缩进左侧66px，只留一点箭‮部头‬分 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-fixed</span><span class="selector-class">.aplayer-narrow</span> <span class="selector-class">.aplayer-body</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="comment">/* 鼠标悬停‮左是‬侧缩进归零，完全显示按钮 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>➕ 引入样式文件：</strong></p><ul><li>在 <code>_config.butterfly.yml</code> 文件中找到 <code>inject</code> 部分，添加以下内容：</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span> <span class="comment">#注入自定义css</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom-aplayer.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><p><strong>默认隐藏歌词</strong></p><ul><li>添加代码到 <code>隐藏歌词.js</code> 文件</li><li>创建 <code>Hexo根目录/source/js/隐藏歌词.js</code> 文件，将代码复制粘贴到该文件中。</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// APlayer 默认关闭歌词</span><br><span class="line">// 创建一个 MutationObserver 实例，用于监听 DOM 的变化</span><br><span class="line"><span class="selector-tag">var</span> observer = new MutationObserver(function (mutations) &#123;</span><br><span class="line">  // 查找页面中 class 为 &quot;aplayer-<span class="attribute">icon</span>-lrc&quot; 的元素</span><br><span class="line">  <span class="selector-tag">var</span> lrcButton = document<span class="selector-class">.querySelector</span>(&quot;<span class="selector-class">.aplayer-icon-lrc</span>&quot;);</span><br><span class="line">  // 如果找到了 lrcButton</span><br><span class="line">  if (lrcButton) &#123;</span><br><span class="line">    // 延迟<span class="number">1</span>毫秒执行点击操作</span><br><span class="line">    setTimeout(function () &#123;</span><br><span class="line">      lrcButton<span class="selector-class">.click</span>();</span><br><span class="line">    &#125;, <span class="number">1</span>);</span><br><span class="line">    // 断开 MutationObserver 实例，停止监听 DOM 的变化</span><br><span class="line">    observer<span class="selector-class">.disconnect</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 开始观察 <span class="selector-tag">body</span> 下的所有子节点及其属性变化</span><br><span class="line">observer<span class="selector-class">.observe</span>(document<span class="selector-class">.body</span>, &#123; childList: true, subtree: true &#125;);</span><br></pre></td></tr></table></figure><p><strong>➕ 引入 <code>隐藏歌词.js</code> 文件</strong></p><ul><li>在 <code>_config.butterfly.yml</code> 文件中找到 <code>inject</code> 部分，如果该部分不存在，添加以下内容：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  bottom:</span><br><span class="line">    - &lt;script defer data-pjax src=<span class="string">&quot;/js/隐藏歌词.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><strong>🚀 清理并重启项目：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><hr><p><a id="wave-effect"></a></p><h2 id="🌊-六、文章顶部波浪效果">🌊 六、文章顶部波浪效果</h2><h3 id="✨-功能特点-6">✨ 功能特点</h3><p>在文章顶部添加动态波浪效果，增强视觉层次感，提升页面动态美感。</p><h3 id="🔧-实现步骤-2">🔧 实现步骤</h3><p><strong>1. ✍️ 修改模板文件：</strong></p><ul><li><strong>修改 <code>Hexo根目录/themes/butterfly/layout/includes/header/index.pug</code> 大概第 <code>33</code> 行左右</strong></li></ul><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">    if globalPageType <span class="comment">=== &#x27;post&#x27;</span></span><br><span class="line">      include ./post-info.pug</span><br><span class="line"><span class="addition">+ // butterfly文章顶部添加波浪效果，开始</span></span><br><span class="line"><span class="addition">+      section.main-hero-waves-area.waves-area</span></span><br><span class="line"><span class="addition">+        svg.waves-svg(xmlns=&#x27;http://www.w3.org/2000/svg&#x27;, xlink=&#x27;http://www.w3.org/1999/xlink&#x27;, viewBox=&#x27;0 24 150 28&#x27;, preserveAspectRatio=&#x27;none&#x27;, shape-rendering=&#x27;auto&#x27;)</span></span><br><span class="line"><span class="addition">+          defs</span></span><br><span class="line"><span class="addition">+            path#gentle-wave(d=&#x27;M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z&#x27;)</span></span><br><span class="line"><span class="addition">+          g.parallax</span></span><br><span class="line"><span class="addition">+            use(href=&#x27;#gentle-wave&#x27;, x=&#x27;48&#x27;, y=&#x27;0&#x27;)</span></span><br><span class="line"><span class="addition">+            use(href=&#x27;#gentle-wave&#x27;, x=&#x27;48&#x27;, y=&#x27;3&#x27;)</span></span><br><span class="line"><span class="addition">+            use(href=&#x27;#gentle-wave&#x27;, x=&#x27;48&#x27;, y=&#x27;5&#x27;)</span></span><br><span class="line"><span class="addition">+            use(href=&#x27;#gentle-wave&#x27;, x=&#x27;48&#x27;, y=&#x27;7&#x27;)</span></span><br><span class="line"><span class="addition">+// butterfly文章顶部添加波浪效果，结束</span></span><br><span class="line">    else if globalPageType <span class="comment">=== &#x27;home&#x27;</span></span><br><span class="line">      #site-info</span><br><span class="line">        h1#site-title=config.title</span><br></pre></td></tr></table></figure><p><strong>为了方便复制，提供一份需要修改的部分：</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// butterfly文章顶部添加波浪效果，开始</span><br><span class="line">      <span class="selector-tag">section</span><span class="selector-class">.main-hero-waves-area</span><span class="selector-class">.waves-area</span></span><br><span class="line">        <span class="selector-tag">svg</span><span class="selector-class">.waves-svg</span>(xmlns=&#x27;http://www.w3.org/<span class="number">2000</span>/svg<span class="string">&#x27;, xlink=&#x27;</span>http://www.w3.org/<span class="number">1999</span>/xlink<span class="string">&#x27;, viewBox=&#x27;</span><span class="number">0</span> <span class="number">24</span> <span class="number">150</span> <span class="number">28</span><span class="string">&#x27;, preserveAspectRatio=&#x27;</span>none<span class="string">&#x27;, shape-rendering=&#x27;</span>auto<span class="string">&#x27;)</span></span><br><span class="line"><span class="string">          defs</span></span><br><span class="line"><span class="string">            path#gentle-wave(d=&#x27;</span>M -<span class="number">160</span> <span class="number">44</span> c <span class="number">30</span> <span class="number">0</span> <span class="number">58</span> -<span class="number">18</span> <span class="number">88</span> -<span class="number">18</span> s <span class="number">58</span> <span class="number">18</span> <span class="number">88</span> <span class="number">18</span> s <span class="number">58</span> -<span class="number">18</span> <span class="number">88</span> -<span class="number">18</span> s <span class="number">58</span> <span class="number">18</span> <span class="number">88</span> <span class="number">18</span> v <span class="number">44</span> h -<span class="number">352</span> Z<span class="string">&#x27;)</span></span><br><span class="line"><span class="string">          g.parallax</span></span><br><span class="line"><span class="string">            use(href=&#x27;</span>#gentle-wave<span class="string">&#x27;, x=&#x27;</span><span class="number">48</span><span class="string">&#x27;, y=&#x27;</span><span class="number">0</span><span class="string">&#x27;)</span></span><br><span class="line"><span class="string">            use(href=&#x27;</span>#gentle-wave<span class="string">&#x27;, x=&#x27;</span><span class="number">48</span><span class="string">&#x27;, y=&#x27;</span><span class="number">3</span><span class="string">&#x27;)</span></span><br><span class="line"><span class="string">            use(href=&#x27;</span>#gentle-wave<span class="string">&#x27;, x=&#x27;</span><span class="number">48</span><span class="string">&#x27;, y=&#x27;</span><span class="number">5</span><span class="string">&#x27;)</span></span><br><span class="line"><span class="string">            use(href=&#x27;</span>#gentle-wave<span class="string">&#x27;, x=&#x27;</span><span class="number">48</span><span class="string">&#x27;, y=&#x27;</span><span class="number">7</span><span class="string">&#x27;)</span></span><br><span class="line"><span class="string">// butterfly文章顶部添加波浪效果，结束</span></span><br></pre></td></tr></table></figure><p><strong>2. ➕ 创建波浪CSS：</strong></p><p><strong>创建 <code>Hexo根目录/source/css/bolang.css</code> 文件，将代码复制粘贴到该文件中</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 波浪css */</span></span><br><span class="line"><span class="selector-class">.main-hero-waves-area</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">11px</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">5</span>;</span><br><span class="line">  <span class="comment">/* 设置初始状态，避免闪烁 */</span></span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>); </span><br><span class="line">  <span class="attribute">will-change</span>: transform;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.waves-area</span> <span class="selector-class">.waves-svg</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">5rem</span>;</span><br><span class="line">  <span class="comment">/* 设置初始状态，避免闪烁 */</span></span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>); </span><br><span class="line">  <span class="attribute">will-change</span>: transform;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Animation */</span></span><br><span class="line"><span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: move-forever <span class="number">25s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.55</span>, <span class="number">0.5</span>, <span class="number">0.45</span>, <span class="number">0.5</span>) infinite;</span><br><span class="line">  <span class="comment">/* 设置初始状态，避免闪烁 */</span></span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(-<span class="number">90px</span>, <span class="number">0</span>, <span class="number">0</span>); </span><br><span class="line">  <span class="attribute">will-change</span>: transform;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">2s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">7s</span>;</span><br><span class="line">  <span class="attribute">fill</span>: <span class="number">#f7f9febd</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">3s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">10s</span>;</span><br><span class="line">  <span class="attribute">fill</span>: <span class="number">#f7f9fe82</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">4s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">13s</span>;</span><br><span class="line">  <span class="attribute">fill</span>: <span class="number">#f7f9fe36</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">4</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">5s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">20s</span>;</span><br><span class="line">  <span class="attribute">fill</span>: <span class="number">#f7f9fe</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 黑色模式背景 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">2s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">7s</span>;</span><br><span class="line">  <span class="attribute">fill</span>: <span class="number">#18171dc8</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">3s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">10s</span>;</span><br><span class="line">  <span class="attribute">fill</span>: <span class="number">#18171d80</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">4s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">13s</span>;</span><br><span class="line">  <span class="attribute">fill</span>: <span class="number">#18171d3e</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">4</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">5s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">20s</span>;</span><br><span class="line">  <span class="attribute">fill</span>: <span class="number">#18171d</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> move-forever &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(-<span class="number">90px</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">85px</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Shrinking for mobile*/</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.waves-area</span> <span class="selector-class">.waves-svg</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>3. ➕ 引入CSS文件：</strong></p><ul><li>在 <code>_config.butterfly.yml</code> 文件中找到 <code>inject</code> 部分，添加以下内容：</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span> <span class="comment">#注入自定义css</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/bolang.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><p><strong>🚀 清理并重启项目：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><hr><p><a id="title-center"></a></p><h2 id="📝-七、文章标题居中">📝 七、文章标题居中</h2><h3 id="✨-功能特点-7">✨ 功能特点</h3><p>将文章标题及其相关信息居中显示，提升页面排版美观度。</p><h3 id="🔧-实现方法-2">🔧 实现方法</h3><ul><li>博客根目录<code>\themes\butterfly\source\css_layout\head.styl</code></li><li>该代码块在第100行左右</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#post-info</span></span><br><span class="line">  <span class="attribute">position</span>: absolute</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">100px</span>  //文章信息距离文章块的高度.改为<span class="number">100px</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">8%</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">  <span class="attribute">text-align</span>: center</span><br></pre></td></tr></table></figure><hr><p><a id="category-magnets"></a></p><h2 id="🧲-八、首页分类磁贴">🧲 八、首页分类磁贴</h2><h3 id="✨-功能特点-8">✨ 功能特点</h3><p>使用磁贴式布局展示分类标签，支持自定义图标和悬停效果，增强首页视觉吸引力。</p><h3 id="🔧-安装插件-2">🔧 安装插件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-magnet --save</span><br></pre></td></tr></table></figure><ul><li><strong>卸载插件</strong><ul><li>注意，一定要加 <code>--save</code>，不然本地预览的时候可能不会显示！！！</li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-magnet --save --package-lock-only</span><br></pre></td></tr></table></figure><h3 id="⚙️-配置示例-2">⚙️ 配置示例</h3><ul><li>在网站配置文件<code>_config.yml</code>新增以下项 (注意<code>不是主题配置文件</code>)，这里的分类名字必须和你文章的分类名字一一对应：</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">magnet:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">enable_page:</span> <span class="string">/</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">categories</span></span><br><span class="line">  <span class="attr">devide:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">display:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">教程</span></span><br><span class="line">      <span class="attr">display_name:</span> <span class="string">小冰の魔改教程</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">📚</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">游戏评测</span></span><br><span class="line">      <span class="attr">display_name:</span> <span class="string">小冰の游戏评测</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">🎮</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">生活趣闻</span></span><br><span class="line">      <span class="attr">display_name:</span> <span class="string">小冰の生活趣闻</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">🐱‍👓</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">vue</span></span><br><span class="line">      <span class="attr">display_name:</span> <span class="string">小冰の编程学习</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">👩‍💻</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">学习</span></span><br><span class="line">      <span class="attr">display_name:</span> <span class="string">小冰の读书笔记</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">📒</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">随想</span></span><br><span class="line">      <span class="attr">display_name:</span> <span class="string">小冰の胡思乱想</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">💡</span></span><br><span class="line">  <span class="attr">color_setting:</span></span><br><span class="line">    <span class="attr">text_color:</span> <span class="string">black</span></span><br><span class="line">    <span class="attr">text_hover_color:</span> <span class="string">white</span></span><br><span class="line">    <span class="attr">background_color:</span> <span class="string">&quot;#f2f2f2&quot;</span></span><br><span class="line">    <span class="attr">background_hover_color:</span> <span class="string">&quot;#b30070&quot;</span></span><br><span class="line">  <span class="attr">layout:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">id</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">recent-posts</span></span><br><span class="line">    <span class="attr">index:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">temple_html:</span> <span class="string">&#x27;&lt;div class=&quot;recent-post-item&quot; style=&quot;width:100%;height: auto&quot;&gt;&lt;div id=&quot;catalog_magnet&quot;&gt;$&#123;temple_html_item&#125;&lt;/div&gt;&lt;/div&gt;&#x27;</span></span><br><span class="line">  <span class="attr">plus_style:</span> <span class="string">&quot;&quot;</span></span><br></pre></td></tr></table></figure><p><strong>配置项说明</strong></p><ul><li>配置项的含义：</li><li>enable<ul><li>参数：true/false</li><li>含义：是否开启插件</li></ul></li><li>enable_page<ul><li>参数：/</li><li>含义：路由地址，如 / 代表主页。/me/ 代表自我介绍页等等</li></ul></li><li>priority<ul><li>参数：1</li><li>含义：插件的叠放顺序，数字越大，叠放约靠前。</li></ul></li><li>type<ul><li>参数：categories/tags</li><li>含义：选择筛选分类还是标签</li></ul></li><li>devide<ul><li>参数：2</li><li>含义：表示分隔的列数，2 表示分为两列展示</li></ul></li><li>display<ul><li>参数：</li></ul></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">教程</span> <span class="comment"># 这里是tags或者categories的名称  </span></span><br><span class="line"> <span class="attr">display_name:</span> <span class="string">小冰の魔改教程</span> <span class="comment"># 这里是替换的名称  </span></span><br><span class="line"> <span class="attr">icon:</span> <span class="string">📚</span> <span class="comment"># 这里是展示的图标</span></span><br></pre></td></tr></table></figure><ul><li>含义：配置项，可自行设置，按照设置的顺序展示</li><li>color_setting<ul><li>参数：</li></ul></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">text_color:</span> <span class="string">black</span> <span class="comment"># 文字默认颜色  </span></span><br><span class="line"><span class="attr">text_hover_color:</span> <span class="string">white</span> <span class="comment"># 文字鼠标悬浮颜色  </span></span><br><span class="line"><span class="attr">background_color:</span> <span class="string">&quot;#f2f2f2&quot;</span> <span class="comment"># 文字背景默认颜色  </span></span><br><span class="line"><span class="attr">background_hover_color:</span> <span class="string">&quot;#b30070&quot;</span> <span class="comment"># 文字背景悬浮颜色</span></span><br></pre></td></tr></table></figure><ul><li>含义：颜色配置项，可自行设置</li><li>layout</li><li>参数：type; （class&amp;id）</li><li>参数：name;</li><li>参数：index；（数字）</li><li>含义：如果说 magnet 是一幅画，那么这个 layout 就是指定了哪面墙来挂画  而在 HTML 的是世界里有两种墙分别 type 为 id 和 class。  其中在定义 class 的时候会出现多个 class 的情况，这时就需要使用 index，确定是哪一个。  最后墙的名字即是 name;</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">name</span>=<span class="string">&quot;我是墙&quot;</span> <span class="attr">id</span>=<span class="string">&quot;recent-posts&quot;</span>&gt;</span>  </span><br><span class="line"> <span class="comment">&lt;!-- id=&gt;type  recent-posts=&gt;name    --&gt;</span>  </span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">name</span>=<span class="string">&quot;我是画框&quot;</span>&gt;</span>  </span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">name</span>=<span class="string">&quot;我是纸&quot;</span>&gt;</span>  </span><br><span class="line"> <span class="comment">&lt;!--这里通过js挂载magnet，也就是画画--&gt;</span>  </span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>参数：html 模板字段<br>含义：包含挂载容器</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;recent-post-item&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:100%;height: auto&quot;</span>&gt;</span> <span class="comment">&lt;!--文章容器--&gt;</span>  </span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;catalog_magnet&quot;</span>&gt;</span>  <span class="comment">&lt;!--挂载容器--&gt;</span>  </span><br><span class="line"> $&#123;temple_html_item&#125;  </span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>plus_style</li><li>参数：“”  含义：提供可自定义的 style，如加入黑夜模式。</li></ul><p><strong>🚀 清理并重启项目：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><p><strong>修复黑夜模式</strong></p><p>我们可以看到黑夜模式看起来特别的别扭，因此还要做一下黑夜模式的颜色适配，在<code>custom.css</code>文件中添加以下代码适配黑夜模式(具体颜色可以自己调节)：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 小冰分类分类磁铁黑夜模式适配 */</span>  </span><br><span class="line"><span class="comment">/* 一般状态 */</span>  </span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.magnet_link_context</span> &#123;  </span><br><span class="line"> <span class="attribute">background</span>: <span class="number">#1e1e1e</span>;  </span><br><span class="line"> <span class="attribute">color</span>: antiquewhite;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="comment">/* 鼠标悬浮状态 */</span>  </span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.magnet_link_context</span><span class="selector-pseudo">:hover</span> &#123;  </span><br><span class="line"> <span class="attribute">background</span>: <span class="number">#3ecdf1</span>;  </span><br><span class="line"> <span class="attribute">color</span>: <span class="number">#f2f2f2</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><a id="dark-mode-animation"></a></p><h2 id="🌙-九、夜间模式动画">🌙 九、夜间模式动画</h2><h3 id="✨-功能特点-9">✨ 功能特点</h3><p>为明暗模式切换添加平滑过渡动画，提升用户体验，增强界面交互感。</p><h3 id="🔧-实现步骤-3">🔧 实现步骤</h3><p><strong>1. ➕ 创建 svg 文件</strong></p><ul><li>新建<code>博客根目录\themes\butterfly\layout\includes\custom\sun_moon.pug</code>,这部分其实实质上就是一个svg文件，通过js操作它的旋转显隐，淡入淡出实现动画效果。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">svg(aria-hidden=&#x27;true&#x27;, style=&#x27;position:absolute; overflow:hidden; width:0; height:0&#x27;)</span><br><span class="line">  symbol#icon-sun(viewBox=&#x27;0 0 1024 1024&#x27;)</span><br><span class="line">    path(d=&#x27;M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z&#x27;, fill=&#x27;#FFD878&#x27;, p-id=&#x27;8420&#x27;)</span><br><span class="line">    path(d=&#x27;M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z&#x27;, fill=&#x27;#FFE4A9&#x27;, p-id=&#x27;8421&#x27;)</span><br><span class="line">    path(d=&#x27;M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z&#x27;, fill=&#x27;#4D5152&#x27;, p-id=&#x27;8422&#x27;)</span><br><span class="line">    path(d=&#x27;M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z&#x27;, fill=&#x27;#4D5152&#x27;, p-id=&#x27;8423&#x27;)</span><br><span class="line">  symbol#icon-moon(viewBox=&#x27;0 0 1024 1024&#x27;)</span><br><span class="line">    path(d=&#x27;M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z&#x27;, fill=&#x27;#FFB531&#x27;, p-id=&#x27;11345&#x27;)</span><br><span class="line">    path(d=&#x27;M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z&#x27;, fill=&#x27;#030835&#x27;, p-id=&#x27;11346&#x27;)</span><br></pre></td></tr></table></figure><p><strong>2. ➕ 创建 <code>styl</code>动画文件</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">.<span class="property">Cuteen_DarkSky</span>,</span><br><span class="line">.<span class="property">Cuteen_DarkSky</span>:before</span><br><span class="line">  content <span class="string">&#x27;&#x27;</span></span><br><span class="line">  position fixed</span><br><span class="line">  left <span class="number">0</span></span><br><span class="line">  right <span class="number">0</span></span><br><span class="line">  top <span class="number">0</span></span><br><span class="line">  bottom <span class="number">0</span></span><br><span class="line">  z-index <span class="number">88888888</span></span><br><span class="line"></span><br><span class="line">.<span class="property">Cuteen_DarkSky</span></span><br><span class="line">  background linear-<span class="title function_">gradient</span>(to top, #f8cd71 <span class="number">0</span>, #5bfde9 <span class="number">80</span>%)</span><br><span class="line">  &amp;:before</span><br><span class="line">    transition 2s ease all</span><br><span class="line">    opacity <span class="number">0</span></span><br><span class="line">    background linear-<span class="title function_">gradient</span>(to top, #30cfd0 <span class="number">0</span>, #<span class="number">330867</span> <span class="number">100</span>%)</span><br><span class="line"></span><br><span class="line">.<span class="property">DarkMode</span></span><br><span class="line">  .<span class="property">Cuteen_DarkSky</span></span><br><span class="line">    &amp;:before</span><br><span class="line">      opacity <span class="number">1</span></span><br><span class="line"></span><br><span class="line">.<span class="property">Cuteen_DarkPlanet</span></span><br><span class="line">  z-index <span class="number">99999999</span></span><br><span class="line">  position fixed</span><br><span class="line">  left -<span class="number">50</span>%</span><br><span class="line">  top -<span class="number">50</span>%</span><br><span class="line">  width <span class="number">200</span>%</span><br><span class="line">  height <span class="number">200</span>%</span><br><span class="line">  -webkit-animation <span class="title class_">CuteenPlanetMove</span> 2s cubic-<span class="title function_">bezier</span>(<span class="number">0.7</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">  animation <span class="title class_">CuteenPlanetMove</span> 2s cubic-<span class="title function_">bezier</span>(<span class="number">0.7</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">  transform-origin center bottom</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@-webkit-keyframes <span class="title class_">CuteenPlanetMove</span> &#123;</span><br><span class="line">  <span class="number">0</span>% &#123;</span><br><span class="line">    <span class="attr">transform</span>: <span class="title function_">rotate</span>(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  to &#123;</span><br><span class="line">    <span class="attr">transform</span>: <span class="title function_">rotate</span>(360deg);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">@keyframes <span class="title class_">CuteenPlanetMove</span> &#123;</span><br><span class="line">  <span class="number">0</span>% &#123;</span><br><span class="line">    <span class="attr">transform</span>: <span class="title function_">rotate</span>(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  to &#123;</span><br><span class="line">    <span class="attr">transform</span>: <span class="title function_">rotate</span>(360deg);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">Cuteen_DarkPlanet</span></span><br><span class="line">  #sun</span><br><span class="line">    position absolute</span><br><span class="line">    border-radius <span class="number">100</span>%</span><br><span class="line">    left <span class="number">44</span>%</span><br><span class="line">    top <span class="number">30</span>%</span><br><span class="line">    height 6rem</span><br><span class="line">    width 6rem</span><br><span class="line">    background #ffee94</span><br><span class="line">    box-shadow <span class="number">0</span> <span class="number">0</span> 40px #ffee94</span><br><span class="line">    <span class="comment">// opacity 0</span></span><br><span class="line"></span><br><span class="line">  #moon</span><br><span class="line">    position absolute</span><br><span class="line">    border-radius <span class="number">100</span>%</span><br><span class="line">    left <span class="number">44</span>%</span><br><span class="line">    top <span class="number">30</span>%</span><br><span class="line">    position absolute</span><br><span class="line">    border-radius <span class="number">100</span>%</span><br><span class="line">    height 6rem</span><br><span class="line">    width 6rem</span><br><span class="line">    box-shadow -<span class="number">1.</span>8em <span class="number">1.</span>8em <span class="number">0</span> <span class="number">0.</span>2em #fff</span><br><span class="line">    <span class="comment">// opacity 1</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// &amp;:after</span></span><br><span class="line">  <span class="comment">//   position absolute</span></span><br><span class="line">  <span class="comment">//   left 42%</span></span><br><span class="line">  <span class="comment">//   top 30%</span></span><br><span class="line">  <span class="comment">//   width 6rem</span></span><br><span class="line">  <span class="comment">//   height 6rem</span></span><br><span class="line">  <span class="comment">//   border-radius 50%</span></span><br><span class="line">  <span class="comment">//   content &#x27;&#x27;</span></span><br><span class="line">  <span class="comment">//   background #ffef9e</span></span><br><span class="line">  <span class="comment">//   box-shadow 0 0 30px #ffef9e</span></span><br><span class="line"></span><br><span class="line">.<span class="property">search</span></span><br><span class="line">  span</span><br><span class="line">    display none</span><br><span class="line"></span><br><span class="line">.<span class="property">menus_item</span></span><br><span class="line">  a</span><br><span class="line">    text-decoration none!important</span><br><span class="line">    </span><br><span class="line"><span class="comment">//按钮相关，对侧栏按钮做过魔改的可以调整这里的数值</span></span><br><span class="line">.<span class="property">icon</span>-V</span><br><span class="line">  padding 5px</span><br></pre></td></tr></table></figure><p><strong>3. ➕创建JS文件</strong></p><ul><li>新建<code>博客根目录\themes\butterfly\source\js\sun_moon.js</code>,去除了冗余代码，去jquery</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义 saveToLocal 对象</span></span><br><span class="line"><span class="keyword">const</span> saveToLocal = &#123;</span><br><span class="line">    <span class="attr">set</span>: <span class="keyword">function</span> (<span class="params">key, value, expiration</span>) &#123;</span><br><span class="line">        <span class="comment">// 存储数据时将数据转换为 JSON 字符串</span></span><br><span class="line">        <span class="keyword">const</span> data = &#123; <span class="attr">value</span>: value, <span class="attr">expiration</span>: expiration &#125;;</span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(key, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data));</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">get</span>: <span class="keyword">function</span> (<span class="params">key</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> storedData = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(key);</span><br><span class="line">        <span class="keyword">if</span> (storedData) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">const</span> parsedData = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(storedData);</span><br><span class="line">                <span class="comment">// 检查数据是否过期</span></span><br><span class="line">                <span class="keyword">if</span> (parsedData.<span class="property">expiration</span> &amp;&amp; <span class="title class_">Date</span>.<span class="title function_">now</span>() &gt; parsedData.<span class="property">expiration</span>) &#123;</span><br><span class="line">                    <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(key);</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> parsedData.<span class="property">value</span>;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;解析 JSON 数据时出错:&#x27;</span>, error);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">switchNightMode</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">insertAdjacentHTML</span>(<span class="string">&#x27;beforeend&#x27;</span>, <span class="string">&#x27;&lt;div class=&quot;Cuteen_DarkSky&quot;&gt;&lt;div class=&quot;Cuteen_DarkPlanet&quot;&gt;&lt;div id=&quot;sun&quot;&gt;&lt;/div&gt;&lt;div id=&quot;moon&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&#x27;</span>);</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;body&#x27;</span>).<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;DarkMode&#x27;</span>)) &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;body&#x27;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;DarkMode&#x27;</span>);</span><br><span class="line">            <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;isDark&#x27;</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;modeicon&#x27;</span>).<span class="title function_">setAttribute</span>(<span class="string">&#x27;xlink:href&#x27;</span>, <span class="string">&#x27;#icon-moon&#x27;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;body&#x27;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;DarkMode&#x27;</span>);</span><br><span class="line">            <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;isDark&#x27;</span>, <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;modeicon&#x27;</span>).<span class="title function_">setAttribute</span>(<span class="string">&#x27;xlink:href&#x27;</span>, <span class="string">&#x27;#icon-sun&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;Cuteen_DarkSky&#x27;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">transition</span> = <span class="string">&#x27;opacity 3s&#x27;</span>;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;Cuteen_DarkSky&#x27;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;Cuteen_DarkSky&#x27;</span>)[<span class="number">0</span>].<span class="title function_">remove</span>();</span><br><span class="line">            &#125;, <span class="number">1000</span>);</span><br><span class="line">        &#125;, <span class="number">2000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">const</span> nowMode = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-theme&#x27;</span>) === <span class="string">&#x27;dark&#x27;</span> ? <span class="string">&#x27;dark&#x27;</span> : <span class="string">&#x27;light&#x27;</span>;</span><br><span class="line">    <span class="keyword">if</span> (nowMode === <span class="string">&#x27;light&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// 先设置太阳月亮透明度</span></span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;sun&quot;</span>).<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&quot;1&quot;</span>;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;moon&quot;</span>).<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&quot;0&quot;</span>;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;sun&quot;</span>).<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&quot;0&quot;</span>;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;moon&quot;</span>).<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&quot;1&quot;</span>;</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="title function_">activateDarkMode</span>();</span><br><span class="line">        saveToLocal.<span class="title function_">set</span>(<span class="string">&#x27;theme&#x27;</span>, <span class="string">&#x27;dark&#x27;</span>, <span class="number">2</span>);</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;modeicon&#x27;</span>).<span class="title function_">setAttribute</span>(<span class="string">&#x27;xlink:href&#x27;</span>, <span class="string">&#x27;#icon-sun&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 先设置太阳月亮透明度</span></span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;sun&quot;</span>).<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&quot;0&quot;</span>;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;moon&quot;</span>).<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&quot;1&quot;</span>;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;sun&quot;</span>).<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&quot;1&quot;</span>;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;moon&quot;</span>).<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&quot;0&quot;</span>;</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="title function_">activateLightMode</span>();</span><br><span class="line">        saveToLocal.<span class="title function_">set</span>(<span class="string">&#x27;theme&#x27;</span>, <span class="string">&#x27;light&#x27;</span>, <span class="number">2</span>);</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;body&#x27;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;DarkMode&#x27;</span>);</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;modeicon&#x27;</span>).<span class="title function_">setAttribute</span>(<span class="string">&#x27;xlink:href&#x27;</span>, <span class="string">&#x27;#icon-moon&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// handle some cases</span></span><br><span class="line">    <span class="keyword">typeof</span> utterancesTheme === <span class="string">&#x27;function&#x27;</span> &amp;&amp; <span class="title function_">utterancesTheme</span>();</span><br><span class="line">    <span class="keyword">typeof</span> <span class="variable constant_">FB</span> === <span class="string">&#x27;object&#x27;</span> &amp;&amp; <span class="variable language_">window</span>.<span class="title function_">loadFBComment</span>();</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">DISQUS</span> &amp;&amp; <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;disqus_thread&#x27;</span>).<span class="property">children</span>.<span class="property">length</span> &amp;&amp; <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">window</span>.<span class="title function_">disqusReset</span>(), <span class="number">200</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加 activateLightMode 函数定义</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">activateLightMode</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 这里可以添加切换到白天模式的具体代码</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-theme&#x27;</span>, <span class="string">&#x27;light&#x27;</span>);</span><br><span class="line">    <span class="comment">// 可以添加其他白天模式的样式修改代码</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加 activateDarkMode 函数定义</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">activateDarkMode</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 这里可以添加切换到夜间模式的具体代码</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-theme&#x27;</span>, <span class="string">&#x27;dark&#x27;</span>);</span><br><span class="line">    <span class="comment">// 可以添加其他夜间模式的样式修改代码</span></span><br></pre></td></tr></table></figure><p><strong>4. ➕ 引入动画文件：</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">defer</span> <span class="string">data-pjax</span> <span class="string">src=&quot;/js/sun_moon.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><p><strong>5. ✍️ 修改相关文件</strong></p><ul><li>修改<code>博客根目录\themes\butterfly\layout\includes\head.pug</code>,在文件末位加上一行</li></ul><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> //- global config  </span><br><span class="line"> !=partial(&#x27;includes/head/config&#x27;, &#123;&#125;, &#123;cache: true&#125;)  </span><br><span class="line">  </span><br><span class="line"> include ./head/config_site.pug  </span><br><span class="line"> include ./head/noscript.pug  </span><br><span class="line">  </span><br><span class="line"> !=fragment_cache(&#x27;injectHeadJs&#x27;, function()&#123;return inject_head_js()&#125;)  </span><br><span class="line">  </span><br><span class="line"> !=fragment_cache(&#x27;injectHead&#x27;, function()&#123;return injectHtml(theme.inject.head)&#125;)  </span><br><span class="line"><span class="addition">+ include ./custom/sun_moon.pug</span></span><br></pre></td></tr></table></figure><p><strong>修改<code>博客根目录\themes\butterfly\layout\includes\rightside.pug</code>,把原本的昼夜切换按钮替换掉</strong></p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> when &#x27;translate&#x27;  </span><br><span class="line"> if translate.enable  </span><br><span class="line"> button#translateLink(type=&quot;button&quot; title=_p(&#x27;rightside.translate_title&#x27;))= translate.default  </span><br><span class="line"> when &#x27;darkmode&#x27;  </span><br><span class="line"> if darkmode.enable &amp;&amp; darkmode.button  </span><br><span class="line"><span class="deletion">-     button#darkmode(type=&quot;button&quot; title=_p(&#x27;rightside.night_mode_title&#x27;))  </span></span><br><span class="line"><span class="deletion">-       i.fas.fa-adjust  </span></span><br><span class="line"><span class="addition">+     a.icon-V.hidden(onclick=&#x27;switchNightMode()&#x27;,  title=_p(&#x27;rightside.night_mode_title&#x27;))  </span></span><br><span class="line"><span class="addition">+       svg(width=&#x27;25&#x27;, height=&#x27;25&#x27;, viewBox=&#x27;0 0 1024 1024&#x27;)  </span></span><br><span class="line"><span class="addition">+         use#modeicon(xlink:href=&#x27;#icon-moon&#x27;)</span></span><br></pre></td></tr></table></figure><p><strong>6. 🚀 清理并重启项目：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><hr><p><a id="colorful-icons"></a></p><h2 id="🎨-十、导航栏多彩图标">🎨 十、导航栏多彩图标</h2><h3 id="✨-功能特点-10">✨ 功能特点</h3><p>使用阿里巴巴矢量图标库为导航栏添加多彩图标，支持动态效果和自定义样式。</p><h3 id="🔧-实现步骤-4">🔧 实现步骤</h3><h4 id="1-➕-引入iconfont图标">1. ➕ 引入iconfont图标</h4><p>见：<a href="https://akilar.top/posts/d2ebecef/">Iconfont Inject</a></p><p><strong>新建图标项目</strong></p><ol><li><p>访问<a href="https://www.iconfont.cn/">阿里巴巴矢量图标库</a>,注册登录。</p></li><li><p>搜索自己心仪的图标，然后选择<strong>添加入库</strong>，加到购物车。</p></li><li><p>选择完毕后点击右上角的购物车图标，打开侧栏，选择添加到项目，如果没有项目就新建一个。</p><p><img src="https://s1.vika.cn/space/2022/10/29/91ec7f6432274b42b50698ef554a2b91" alt="p4"></p></li><li><p>可以通过上方顶栏菜单-&gt;资源管理-&gt;我的项目，找到之前添加的图标项目。(现在的iconfont可以在图标库的项目设置里直接打开彩色设置，然后采用fontclass的引用方式即可使用多彩图标。但是<strong>单一项目彩色图标上限是40个图标</strong>，酌情采用。)</p><p><img src="https://s1.vika.cn/space/2022/10/29/ed3f516f1162418faec46808103d3840" alt="image-20221029212836645"></p><p><img src="https://s1.vika.cn/space/2022/10/29/a1984c415cb7442ba088e7a489cb2d8a" alt="image-20221029212857202"></p></li></ol><p><strong>引入图标</strong></p><p>线上引入方案，我使用的是官方文档中最便捷的<code>font-class</code>方案。这一方案偶尔会出现图标加载不出的情况。但是便于随时对图标库进行升级，换一下在线链接即可，适合新手使用。最新版本的iconfont支持直接在项目设置中开启彩色图标，从而实现直接用class添加多彩色图标。（推荐直接用这个即可）</p><ol><li>在<code>[BlogRoot]\themes\butterfly\source\css\custom.css</code>中填写如下内容，引入Unicode和Font-class的线上资源：</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&quot;//at.alicdn.com/t/font_2264842_b004iy0kk2b.css&quot;</span>;</span><br></pre></td></tr></table></figure><p>更推荐在在主题配置文件<code>inject</code>配置项进行全局引入：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;//at.alicdn.com/t/font_2264842_b004iy0kk2b.css&quot;</span> <span class="string">media=&quot;defer&quot;</span> <span class="string">onload=&quot;this.media=&#x27;all&#x27;&quot;&gt;</span></span><br><span class="line">  <span class="attr">bottom:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">async</span> <span class="string">src=&quot;//at.alicdn.com/t/font_2264842_b004iy0kk2b.js&quot;&gt;&lt;/script&gt;</span> </span><br></pre></td></tr></table></figure><p>同时可以在自定义<code>CSS</code>中添加如下样式来控制图标默认大小和颜色等属性（<strong>若已经在项目设置中勾选了彩色选项，则无需再定义图标颜色</strong>），写法与字体样式类似，这恐怕也是它被称为<code>iconfont</code>（图标字体）的原因:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.iconfont</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&quot;iconfont&quot;</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="comment">/* 这里可以自定义图标大小 */</span></span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">3em</span>;</span><br><span class="line">  <span class="attribute">font-style</span>: normal;</span><br><span class="line">  -webkit-<span class="attribute">font-smoothing</span>: antialiased;</span><br><span class="line">  -moz-osx-<span class="attribute">font-smoothing</span>: grayscale;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以通过自己的阿里图标库的font-class方案查询复制相应的<code>icon-xxxx</code>。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-rat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-ox&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-tiger&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-rabbit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-dragon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-snake&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-horse&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-goat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-monkey&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-rooster&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-dog&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-boar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-🎨-菜单栏多色动态图标">2. 🎨 菜单栏多色动态图标</h4><p>详见：<a href="https://akilar.top/posts/23fdf850/">糖果屋微调合集</a></p><p>相比于静态的图标，个人更喜欢动态的，因此一步到位！</p><p>前置教程：<a href="https://akilar.top/posts/d2ebecef/">Hexo引入阿里矢量图标库-iconfont inject</a>和<a href="https://akilar.top/posts/615e2dec/#%E5%8A%A8%E6%80%81%E6%A0%87%E7%AD%BE-anima">基于Butterfly的外挂标签引入-Tag Plugins Plus</a>中关于<code>动态标签anima</code>的内容。请确保您已经完成了前置教程，并实现了在文章中使用<code>symbol</code>写法来引入<code>iconfont</code>图标。同时引入了<code>fontawesome_animation</code>的前置依赖。<br>主要检查您的<code>inject</code>配置项中是否有这两个依赖</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="comment">#动画标签anima的依赖</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;https://cdn.jsdelivr.net/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css&quot;</span>  <span class="string">media=&quot;defer&quot;</span> <span class="string">onload=&quot;this.media=&#x27;all&#x27;&quot;&gt;</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line">    <span class="comment"># 阿里矢量图标,这串是我的图标库，你的链接会有所不同。</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">async</span> <span class="string">src=&quot;//at.alicdn.com/t/font_2032782_ev6ytrh30f.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><p>替换<code>[BlogRoot]\themes\butterfly\layout\includes\header\menu_item.pug</code>为以下代码，本方案默认使用观感最佳的悬停父元素触发子元素动画效果，默认动画为<code>faa-tada</code>。注意：可以把之前的代码注释掉，再在后面加上如下代码，以便于回滚，此代码在<code>butterfly 4.3.1</code> 上可以运行并保留hide字段隐藏子菜单的功能，其他版本自行测试。代码的本质并不复杂，就是扫描配置文件对应的配置项，然后根据<code>||</code>的分割标志筛选出对应的图标名称、对应链接等，从而渲染出html页面。</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> theme.menu</span><br><span class="line">  .menus_items</span><br><span class="line">    each value, label <span class="keyword">in</span> theme.menu</span><br><span class="line">      <span class="keyword">if</span> typeof value !== <span class="string">&#x27;object&#x27;</span></span><br><span class="line">        .menus_item</span><br><span class="line">          - const valueArray = value.split(<span class="string">&#x27;||&#x27;</span>)</span><br><span class="line">          a.site-page.faa-parent.animated-hover(<span class="attribute">href</span>=url_for(trim(value.split(&#x27;||&#x27;)[0])))</span><br><span class="line">            <span class="keyword">if</span> valueArray[1]</span><br><span class="line">              i.fa-fw(<span class="attribute">class</span>=trim(valueArray[1]))</span><br><span class="line">              - var icon_value = trim(value.split(<span class="string">&#x27;||&#x27;</span>)[1])</span><br><span class="line">              - var anima_value = value.split(<span class="string">&#x27;||&#x27;</span>)[2] ? trim(value.split(<span class="string">&#x27;||&#x27;</span>)[2]) : <span class="string">&#x27;faa-tada&#x27;</span></span><br><span class="line">              <span class="keyword">if</span> icon_value.substring(0,2)==<span class="string">&quot;fa&quot;</span>      </span><br><span class="line">                i.fa-fw(<span class="attribute">class</span>=icon_value + <span class="string">&#x27; &#x27;</span> + anima_value)</span><br><span class="line">              <span class="keyword">else</span> <span class="keyword">if</span> icon_value.substring(0,4)==<span class="string">&quot;icon&quot;</span>          </span><br><span class="line">                svg.icon(<span class="attribute">aria-hidden</span>=<span class="string">&quot;true&quot;</span> <span class="attribute">class</span>=anima_value)</span><br><span class="line">                  use(xlink:<span class="attribute">href</span>=`#`+ icon_value)</span><br><span class="line">            <span class="attribute">span</span>=<span class="string">&#x27; &#x27;</span>+label</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        .menus_item</span><br><span class="line">          - const labelArray = label.split(<span class="string">&#x27;||&#x27;</span>)</span><br><span class="line">          - const hideClass = labelArray[3] &amp;&amp; trim(labelArray[3]) === <span class="string">&#x27;hide&#x27;</span> ? <span class="string">&#x27;hide&#x27;</span> : <span class="string">&#x27;&#x27;</span></span><br><span class="line">          a.site-page.group.faa-parent.animated-hover(<span class="attribute">class</span>=`$&#123;hideClass&#125;` <span class="attribute">href</span>=<span class="string">&#x27;javascript:void(0);&#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> labelArray[1]</span><br><span class="line">              - var icon_label = trim(label.split(<span class="string">&#x27;||&#x27;</span>)[1])</span><br><span class="line">              - var anima_label = label.split(<span class="string">&#x27;||&#x27;</span>)[2] ? trim(label.split(<span class="string">&#x27;||&#x27;</span>)[2]) : <span class="string">&#x27;faa-tada&#x27;</span></span><br><span class="line">              <span class="keyword">if</span> icon_label.substring(0,2)==<span class="string">&quot;fa&quot;</span>      </span><br><span class="line">                i.fa-fw(<span class="attribute">class</span>=icon_label + <span class="string">&#x27; &#x27;</span> + anima_label)</span><br><span class="line">              <span class="keyword">else</span> <span class="keyword">if</span> icon_label.substring(0,4)==<span class="string">&quot;icon&quot;</span>    </span><br><span class="line">                svg.icon(<span class="attribute">aria-hidden</span>=<span class="string">&quot;true&quot;</span> <span class="attribute">class</span>=anima_label)</span><br><span class="line">                  use(xlink:<span class="attribute">href</span>=`#`+ icon_label)</span><br><span class="line">            <span class="attribute">span</span>=<span class="string">&#x27; &#x27;</span>+ trim(labelArray[0])</span><br><span class="line">            i.fas.fa-chevron-down</span><br><span class="line">          ul.menus_item_child</span><br><span class="line">            each val,lab <span class="keyword">in</span> value </span><br><span class="line">              - const valArray = val.split(<span class="string">&#x27;||&#x27;</span>)</span><br><span class="line">              li</span><br><span class="line">                a.site-page.child.faa-parent.animated-hover(<span class="attribute">href</span>=url_for(trim(val.split(&#x27;||&#x27;)[0])))</span><br><span class="line">                  <span class="keyword">if</span> valArray[1]</span><br><span class="line">                    - var icon_val = trim(val.split(<span class="string">&#x27;||&#x27;</span>)[1])</span><br><span class="line">                    - var anima_val = val.split(<span class="string">&#x27;||&#x27;</span>)[2] ? trim(val.split(<span class="string">&#x27;||&#x27;</span>)[2]) : <span class="string">&#x27;faa-tada&#x27;</span></span><br><span class="line">                    <span class="keyword">if</span> icon_val.substring(0,2)==<span class="string">&quot;fa&quot;</span>      </span><br><span class="line">                      i.fa-fw(<span class="attribute">class</span>=icon_val + <span class="string">&#x27; &#x27;</span> + anima_val)</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span> icon_val.substring(0,4)==<span class="string">&quot;icon&quot;</span></span><br><span class="line">                      svg.icon(<span class="attribute">aria-hidden</span>=<span class="string">&quot;true&quot;</span> <span class="attribute">class</span>=anima_val)</span><br><span class="line">                        use(xlink:<span class="attribute">href</span>=`#`+ icon_val)                    </span><br><span class="line">                  <span class="attribute">span</span>=<span class="string">&#x27; &#x27;</span>+ lab</span><br></pre></td></tr></table></figure><p>以下是填写示例，在<code>[BlogRoot]\_config.butterfly.yml</code>中修改。<code>icon-xxx</code>字样的为<code>iconfont</code>的<code>symbol</code>引入方案的<code>id</code>值，可以在你的<code>iconfont</code>图标库内查询，其中hide属性也是可以用的。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">首页:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">icon-home</span> <span class="string">||</span> <span class="string">faa-tada</span></span><br><span class="line">  <span class="string">文章</span> <span class="string">||</span> <span class="string">icon--article</span> <span class="string">||</span> <span class="string">faa-tada</span> <span class="string">||</span> <span class="attr">hide:</span></span><br><span class="line">    <span class="string">归档:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">icon-guidang1</span> <span class="string">||</span> <span class="string">faa-tada</span></span><br><span class="line">    <span class="string">标签:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">icon-sekuaibiaoqian</span> <span class="string">||</span> <span class="string">faa-tada</span></span><br><span class="line">    <span class="string">分类:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">icon-fenlei</span> <span class="string">||</span> <span class="string">faa-tada</span></span><br><span class="line">    <span class="string">随便逛逛:</span> <span class="string">javascript:randomPost();</span> <span class="string">||</span> <span class="string">icon-zuji1</span> <span class="string">||</span> <span class="string">faa-tada</span></span><br></pre></td></tr></table></figure><p>要注意的是，这里的动态图标是<code>svg.icon</code>的标签，因此上面调节<code>.iconfont</code>的css并不使用，我们需要在自定义样式文件<code>custom.css</code>里加上一些样式来限制图标的大小和颜色等，具体大小自行调节。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">svg</span><span class="selector-class">.icon</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1.28em</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">1.28em</span>;</span><br><span class="line">  <span class="attribute">vertical-align</span>: -<span class="number">0.15em</span>;</span><br><span class="line">  <span class="attribute">fill</span>: currentColor;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-➕-添加按钮">3. ➕ 添加按钮</h4><p><strong>修改<code>&quot;博客根目录\themes\butterfly\layout\includes\header\nav.pug&quot;</code></strong></p><p><strong>1. 修改搜索按钮图标：</strong></p><ul><li>图标<code>icon-a-044_sousuo</code>修改为自己的，<code>width: 2.2em; height: 2.2em;</code>修改大小</li><li>把以下语句删除或注释掉即可，搜索两个字就不会显示出来(这种语句统一写法是直接删除<code>+</code>就可以，不用补空格)。</li></ul><p><strong>2. 引入明暗模式切换图标：</strong></p><ul><li>太阳图标：``icon-sun<code>，月亮图标：</code>icon-moon<code>。我的默认是黑暗模式，选择太阳图标 </code>use#modeicon(xlink:href=‘#icon-shezhi’)`</li></ul><p><strong>3. 修改菜单按钮图标：</strong></p><ul><li>图标<code>icon-shezhi</code>修改为自己的，<code>width: 1.6em; height: 1.6em;</code>修改大小</li></ul><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">  #menus</span><br><span class="line">    if theme.search.use</span><br><span class="line">      #search-button</span><br><span class="line">        span.site-page.social-icon.search</span><br><span class="line"><span class="deletion">-          - i.fas.fa-search.fa-fw //- 原主题，搜索按钮图标</span></span><br><span class="line"><span class="deletion">-          span= &#x27; &#x27; + _p(&#x27;search.title&#x27;) //- 去除搜索字样</span></span><br><span class="line"><span class="addition">+          a.site-page.social-icon.search.faa-parent.animated-hover(title=&quot;搜索&quot;)</span></span><br><span class="line"><span class="addition">+            svg.faa-tada.icon(aria-hidden=&quot;true&quot;, style=&quot;height:2.9em;width:2.9em&quot;)</span></span><br><span class="line"><span class="addition">+              use(xlink:href=&#x27;#icon-a-044_sousuo&#x27;)</span></span><br><span class="line">    if theme.menu</span><br><span class="line">      != partial(&#x27;includes/header/menu_item&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line"><span class="addition">+      a.sun_moon.faa-parent.animated-hover(onclick=&#x27;switchNightMode()&#x27;, title=&#x27;明暗模式&#x27;, id=&#x27;nightmode-button&#x27;)</span></span><br><span class="line"><span class="addition">+        svg.faa-tada(aria-hidden=&quot;true&quot;, style=&quot;width: 1.6em; height: 1.6em;&quot;)</span></span><br><span class="line"><span class="addition">+          use#modeicon(xlink:href=&#x27;#icon-sun&#x27;)</span></span><br><span class="line"></span><br><span class="line">      #toggle-menu</span><br><span class="line">        span.site-page</span><br><span class="line"><span class="deletion">-          - i.fas.fa-bars.fa-fw  //- 原主题，菜单按钮图标</span></span><br><span class="line"><span class="addition">+          a.site-page.faa-parent.animated-hover(title=&quot;菜单&quot;)</span></span><br><span class="line"><span class="addition">+            svg.faa-tada(aria-hidden=&quot;true&quot;, style=&quot;width: 1.6em; height: 1.6em;&quot;)</span></span><br><span class="line"><span class="addition">+              use#modeicon(xlink:href=&#x27;#icon-shezhi&#x27;)</span></span><br></pre></td></tr></table></figure><p><strong>完整的<code> #menus部分</code>代码</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#menus</span><br><span class="line">  if theme.search.use</span><br><span class="line">    #search-button</span><br><span class="line">      span.site-page.social-icon.search</span><br><span class="line">        //- i.fas.fa-search.fa-fw</span><br><span class="line">        //- span= &#x27; &#x27; + _p(&#x27;search.title&#x27;)</span><br><span class="line">        //- 更换搜索按钮图标</span><br><span class="line">        a.site-page.social-icon.search.faa-parent.animated-hover(title=&quot;搜索&quot;)</span><br><span class="line">          svg.faa-tada.icon(aria-hidden=&quot;true&quot;, style=&quot;height:2.9em;width:2.9em&quot;)</span><br><span class="line">            use(xlink:href=&#x27;#icon-a-044_sousuo&#x27;)</span><br><span class="line">  if theme.menu</span><br><span class="line">    != partial(&#x27;includes/header/menu_item&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">    //- 引入明暗模式切换按钮</span><br><span class="line">    a.sun_moon.faa-parent.animated-hover(onclick=&#x27;switchNightMode()&#x27;, title=&#x27;明暗模式&#x27;, id=&#x27;nightmode-button&#x27;)</span><br><span class="line">      svg.faa-tada(aria-hidden=&quot;true&quot;, style=&quot;width: 1.6em; height: 1.6em;&quot;)</span><br><span class="line">        use#modeicon(xlink:href=&#x27;#icon-sun&#x27;)</span><br><span class="line"></span><br><span class="line">    #toggle-menu</span><br><span class="line">      span.site-page</span><br><span class="line">        //- i.fas.fa-bars.fa-fw</span><br><span class="line">        //- 更换菜单按钮图标</span><br><span class="line">        a.site-page.faa-parent.animated-hover(title=&quot;菜单&quot;)</span><br><span class="line">          svg.faa-tada(aria-hidden=&quot;true&quot;, style=&quot;width: 1.6em; height: 1.6em;&quot;)</span><br><span class="line">            use#modeicon(xlink:href=&#x27;#icon-shezhi&#x27;)</span><br></pre></td></tr></table></figure><h4 id="4-🚀-清理并重启项目：">4. 🚀 清理并重启项目：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo cl; hexo s</span><br></pre></td></tr></table></figure><h2 id="导航栏引入图标">导航栏引入图标</h2><ul><li><strong>修改<code>&quot;博客根目录\themes\butterfly\layout\includes\header\nav.pug&quot;</code></strong></li></ul><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">nav#nav</span><br><span class="line">  span#blog-info</span><br><span class="line">    a.nav-site-title(href=url_for(&#x27;/&#x27;))</span><br><span class="line">      if theme.nav.logo</span><br><span class="line">        img.site-icon(src=url_for(theme.nav.logo) alt=&#x27;Logo&#x27;)</span><br><span class="line">      if theme.nav.display_title</span><br><span class="line">        span.site-name=config.title</span><br><span class="line">    if globalPageType <span class="comment">=== &#x27;post&#x27;</span></span><br><span class="line">      a.nav-page-title(href=url_for(&#x27;/&#x27;))</span><br><span class="line">        span.site-name=(page.title || config.title)</span><br><span class="line"></span><br><span class="line">  #menus</span><br><span class="line">    if theme.search.use</span><br><span class="line">      #search-button</span><br><span class="line">        span.site-page.social-icon.search</span><br><span class="line"><span class="deletion">-          //- i.fas.fa-search.fa-fw</span></span><br><span class="line"><span class="addition">+          //- 更换搜索按钮图标</span></span><br><span class="line"><span class="addition">+          a.site-page.social-icon.search.faa-parent.animated-hover(title=&quot;搜索&quot;)</span></span><br><span class="line"><span class="addition">+            svg.faa-tada.search(aria-hidden=&quot;true&quot;, style=&quot;height:2.9em;width:2.9em&quot;)</span></span><br><span class="line"><span class="addition">+              use(xlink:href=&#x27;#icon-a-044_sousuo&#x27;)</span></span><br><span class="line"><span class="deletion">-          //- span= &#x27; &#x27; + _p(&#x27;search.title&#x27;)</span></span><br><span class="line">    if theme.menu</span><br><span class="line">      != partial(&#x27;includes/header/menu_item&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line"><span class="addition">+      //- 引入切换壁纸按钮</span></span><br><span class="line"><span class="addition">+      a.site-page.faa-parent.animated-hover(onclick=&#x27;toggleWinbox()&#x27; title=&#x27;切换壁纸&#x27;)</span></span><br><span class="line"><span class="addition">+        svg.faa-tada.bizhi(aria-hidden=&quot;true&quot;, style=&quot;height:2em;width:2em&quot;)</span></span><br><span class="line"><span class="addition">+          use(xlink:href=&#x27;#icon-a-zhaopiantupianxiangce&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+      //- 引入明暗模式切换按钮</span></span><br><span class="line"><span class="addition">+      a.sun_moon.faa-parent.animated-hover(onclick=&#x27;switchNightMode()&#x27;, title=&#x27;明暗模式&#x27;, id=&#x27;nightmode-button&#x27;)</span></span><br><span class="line"><span class="addition">+        svg.faa-tada.mingan(aria-hidden=&quot;true&quot;, style=&quot;width: 1.6em; height: 1.6em;&quot;)</span></span><br><span class="line"><span class="addition">+          use#modeicon(xlink:href=&#x27;#icon-sun&#x27;)</span></span><br><span class="line"></span><br><span class="line">      #toggle-menu</span><br><span class="line">        span.site-page</span><br><span class="line"><span class="deletion">-          //- i.fas.fa-bars.fa-fw</span></span><br><span class="line"><span class="addition">+          //- 更换菜单按钮图标</span></span><br><span class="line"><span class="addition">+          a.site-page.faa-parent.animated-hover(title=&quot;菜单&quot;)</span></span><br><span class="line"><span class="addition">+            svg.faa-tada.chaidan(aria-hidden=&quot;true&quot;, style=&quot;width: 1.6em; height: 1.6em;&quot;)</span></span><br><span class="line"><span class="addition">+              use#modeicon(xlink:href=&#x27;#icon-shezhi&#x27;)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>1. 基本结构</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Puga.site-page.faa-parent.animated-hover(<span class="attribute">onclick</span>=<span class="string">&#x27;toggleWinbox()&#x27;</span> <span class="attribute">title</span>=<span class="string">&#x27;切换壁纸&#x27;</span>)</span><br><span class="line">  svg.faa-tada.bizhi(<span class="attribute">aria-hidden</span>=<span class="string">&quot;true&quot;</span>, <span class="attribute">style</span>=<span class="string">&quot;height:2em;width:2em&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li>这是一个 <code>&lt;a&gt;</code> 链接元素，包含一个嵌套的 <code>&lt;svg&gt;</code> 图标。</li><li>使用了 <strong>Pug 的嵌套语法</strong>，通过缩进表示层级关系。</li></ul><p><strong>2. 链接属性</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.site-page.faa-parent.animated-hover(onclick=&#x27;toggleWinbox()&#x27; title=&#x27;切换壁纸&#x27;)</span><br></pre></td></tr></table></figure><ul><li>类名：<ul><li><code>.site-page</code>：基础样式类（可能定义链接的外观）。</li><li><code>.faa-parent</code>：Font Awesome Animation 的父容器类（用于子元素动画）。</li><li><code>.animated-hover</code>：自定义悬停动画效果的类。</li></ul></li><li>事件：<ul><li><code>onclick='toggleWinbox()'</code>：点击时调用 JavaScript 函数 <code>toggleWinbox()</code>（可能是控制弹窗/壁纸切换的逻辑）。</li></ul></li><li>提示文本：<ul><li><code>title='切换壁纸'</code>：鼠标悬停时显示的工具提示（“切换壁纸”）。</li></ul></li></ul><p><strong>3. SVG 图标</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svg.faa-tada.bizhi(aria-hidden=&quot;true&quot;, style=&quot;height:2em;width:2em&quot;)</span><br></pre></td></tr></table></figure><ul><li><p>类名：</p><ul><li><code>.faa-tada</code>：Font Awesome Animation 的“抖动”动画效果。</li><li><code>.bizhi</code>：自定义类（可能用于样式覆盖，<code>bizhi</code> 是中文“壁纸”的拼音）。</li></ul></li><li><p>无障碍：</p><ul><li><code>aria-hidden=&quot;true&quot;</code>：对屏幕阅读器隐藏（因图标仅为装饰）。</li></ul></li><li><p>尺寸：</p><ul><li><code>style=&quot;height:2em;width:2em&quot;</code>：强制宽高为 <code>2em</code>（继承父元素字体大小）。</li></ul></li></ul><p><strong>4. 生成的实际 HTML</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HTML<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;site-page faa-parent animated-hover&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;toggleWinbox()&quot;</span> <span class="attr">title</span>=<span class="string">&quot;切换壁纸&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">svg</span> <span class="attr">class</span>=<span class="string">&quot;faa-tada bizhi&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height:2em;width:2em&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>5. 关键功能</strong></p><ol><li><strong>点击事件</strong>： 点击后会触发 <code>toggleWinbox()</code>（可能是切换壁纸弹窗或壁纸本身的函数）。</li><li>动画效果：<ul><li><code>faa-parent</code> + <code>faa-tada</code> 组合会让 SVG 图标持续抖动（类似 Font Awesome 的动画效果）。</li><li><code>animated-hover</code> 可能添加了悬停时的过渡效果（如颜色变化）。</li></ul></li><li><strong>国际化</strong>： <code>title=&quot;切换壁纸&quot;</code> 提示中文用户，但代码本身是语言无关的。</li></ol><p><strong>6. 可能的依赖库</strong></p><ul><li><strong>Font Awesome Animation</strong>：提供 <code>faa-*</code> 动画类。</li><li><strong>Winbox.js</strong>：如果 <code>toggleWinbox()</code> 是控制弹窗，可能用到此库。</li><li><strong>自定义 CSS</strong>：<code>.site-page</code>、<code>.bizhi</code> 等类需要额外样式文件支持。</li></ul><blockquote><p><strong>完整添加代码</strong></p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">nav#nav</span><br><span class="line">  span#blog-info</span><br><span class="line">    a.nav-site-title(href=url_for(&#x27;/&#x27;))</span><br><span class="line">      if theme.nav.logo</span><br><span class="line">        img.site-icon(src=url_for(theme.nav.logo) alt=&#x27;Logo&#x27;)</span><br><span class="line">      if theme.nav.display_title</span><br><span class="line">        span.site-name=config.title</span><br><span class="line">    if globalPageType === &#x27;post&#x27;</span><br><span class="line">      a.nav-page-title(href=url_for(&#x27;/&#x27;))</span><br><span class="line">        span.site-name=(page.title || config.title)</span><br><span class="line"></span><br><span class="line">  #menus</span><br><span class="line">    if theme.search.use</span><br><span class="line">      #search-button</span><br><span class="line">        span.site-page.social-icon.search</span><br><span class="line">          //- i.fas.fa-search.fa-fw</span><br><span class="line">          //- 更换搜索按钮图标</span><br><span class="line">          a.site-page.social-icon.search.faa-parent.animated-hover(title=&quot;搜索&quot;)</span><br><span class="line">            svg.faa-tada.search(aria-hidden=&quot;true&quot;, style=&quot;height:2.9em;width:2.9em&quot;)</span><br><span class="line">              use(xlink:href=&#x27;#icon-a-044_sousuo&#x27;)</span><br><span class="line">          //- span= &#x27; &#x27; + _p(&#x27;search.title&#x27;)</span><br><span class="line">    if theme.menu</span><br><span class="line">      != partial(&#x27;includes/header/menu_item&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">      //- 引入切换壁纸按钮</span><br><span class="line">      a.site-page.faa-parent.animated-hover(onclick=&#x27;toggleWinbox()&#x27; title=&#x27;切换壁纸&#x27;)</span><br><span class="line">        svg.faa-tada.bizhi(aria-hidden=&quot;true&quot;, style=&quot;height:2em;width:2em&quot;)</span><br><span class="line">          use(xlink:href=&#x27;#icon-a-zhaopiantupianxiangce&#x27;)</span><br><span class="line">      //- 引入明暗模式切换按钮</span><br><span class="line">      a.sun_moon.faa-parent.animated-hover(onclick=&#x27;switchNightMode()&#x27;, title=&#x27;明暗模式&#x27;, id=&#x27;nightmode-button&#x27;)</span><br><span class="line">        svg.faa-tada.mingan(aria-hidden=&quot;true&quot;, style=&quot;width: 1.6em; height: 1.6em;&quot;)</span><br><span class="line">          use#modeicon(xlink:href=&#x27;#icon-sun&#x27;)</span><br><span class="line"></span><br><span class="line">      #toggle-menu</span><br><span class="line">        span.site-page</span><br><span class="line">          //- i.fas.fa-bars.fa-fw</span><br><span class="line">          //- 更换菜单按钮图标</span><br><span class="line">          a.site-page.faa-parent.animated-hover(title=&quot;菜单&quot;)</span><br><span class="line">            svg.faa-tada.chaidan(aria-hidden=&quot;true&quot;, style=&quot;width: 1.6em; height: 1.6em;&quot;)</span><br><span class="line">              use#modeicon(xlink:href=&#x27;#icon-shezhi&#x27;)</span><br></pre></td></tr></table></figure><hr><p><a id="neon-effects"></a></p><h2 id="💫-十一、黑夜霓虹灯效果">💫 十一、黑夜霓虹灯效果</h2><h3 id="✨-功能特点-11">✨ 功能特点</h3><p>为网站标题和副标题添加霓虹灯效果，在黑暗模式下特别醒目，增强视觉冲击力。</p><h3 id="🔧-实现方法-3">🔧 实现方法</h3><h4 id="1-➕-创建霓虹灯效果CSS：">1. ➕ 创建霓虹灯效果CSS：</h4><ul><li>详见：<a href="https://www.fomal.cc/posts/eec9786.html">黑夜霓虹灯2.0（纯CSS实现）</a></li><li><strong>创建 <code>Hexo根目录/source/css/custom.css</code> 文件，将代码复制粘贴到该文件中</strong></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 日间模式生效 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#site-name</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#site-title</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: light_15px_dark <span class="number">10s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#site-subtitle</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: light_10px_dark <span class="number">10s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#post-info</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: light_15px_light <span class="number">10s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 夜间模式生效 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#site-name</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#site-title</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: light_15px_dark <span class="number">10s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#site-subtitle</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: light_10px_dark <span class="number">10s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#post-info</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: light_15px_light <span class="number">10s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 日间模式关键帧描述 */</span></span><br><span class="line"><span class="keyword">@keyframes</span> light_15px_light &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.95</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">25%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#11ee5e</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f14747</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.95</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">75%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1a247</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.95</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> light_10px_light &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.95</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">25%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#11ee5e</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f14747</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.95</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">75%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1a247</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.95</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> light_5px_light &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.95</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">25%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#11ee5e</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f14747</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.95</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">75%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1a247</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.95</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 夜间模式关键帧描述 */</span></span><br><span class="line"><span class="keyword">@keyframes</span> light_15px_dark &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.6</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">3deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">12.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#11ee5e</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">25%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f14747</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.6</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">3deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">37.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1a247</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1ee47</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.6</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">3deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">62.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#b347f1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">75%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#002afa</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.6</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">3deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">87.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#ed709b</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.6</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">3deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> light_10px_dark &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.6</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">3deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">12.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#11ee5e</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">25%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f14747</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.6</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">3deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">37.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1a247</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1ee47</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.6</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">3deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">62.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#b347f1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">75%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#002afa</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.6</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">3deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">87.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#ed709b</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.6</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">3deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> light_5px_dark &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.6</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">3deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">12.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#11ee5e</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">25%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f14747</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.6</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">3deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">37.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1a247</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1ee47</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.6</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">3deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">62.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#b347f1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">75%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#002afa</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.6</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">3deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">87.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#ed709b</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.6</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">3deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-➕-引入-custom-css-文件">2. ➕ 引入 <code>custom.css</code> 文件</h4><ul><li>在 <code>_config.butterfly.yml</code> 文件中找到 <code>inject</code> 部分，如果该部分不存在，添加以下内容：</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span> <span class="comment"># 注入自定义css</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-🚀-清理并重启项目：">3. 🚀 清理并重启项目：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><hr><p><a id="global-rounded"></a></p><h2 id="🔲-十二、全局圆角设计">🔲 十二、全局圆角设计</h2><h3 id="✨-功能特点-12">✨ 功能特点</h3><p>为页面元素统一添加圆角设计，营造柔和现代的视觉风格，提升整体美观度。</p><h3 id="🔧-实现方法-4">🔧 实现方法</h3><ul><li><strong>创建 <code>Hexo根目录/source/css/全局圆角.css</code> 文件，将代码复制粘贴到该文件中。</strong></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/******************** 全局圆角 ***********************/</span></span><br><span class="line"><span class="comment">/* 首页文章卡片圆角 */</span></span><br><span class="line"><span class="selector-id">#recent-posts</span> <span class="selector-class">.recent-post-item</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>; <span class="comment">/* 添加圆角效果，数值可按需调整 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 文章页目录卡片圆角 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 文章正文圆角 */</span></span><br><span class="line"><span class="selector-id">#post</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 文章图片圆角 */</span></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 相关文章卡片 */</span></span><br><span class="line"><span class="selector-id">#post</span> <span class="selector-class">.pagination-related</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--mobufan-border-style) <span class="meta">!important</span>; <span class="comment">/* 边框装饰线颜色 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 文章相关推荐卡片圆角 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*.relatedPosts &gt; .relatedPosts-list &gt; div &#123;*/</span></span><br><span class="line"><span class="comment">/*  border-radius: 20px;*/</span></span><br><span class="line"><span class="comment">/*&#125;*/</span></span><br><span class="line"><span class="comment">/*#aside-content #card-toc .toc-content .toc-link.active &#123;*/</span></span><br><span class="line"><span class="comment">/*  border-radius: 5px;*/</span></span><br><span class="line"><span class="comment">/*&#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 文章上下篇卡片圆角 */</span></span><br><span class="line"><span class="selector-id">#pagination</span> <span class="selector-class">.pagination-post</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--mobufan-border-style) <span class="meta">!important</span>; <span class="comment">/* 边框装饰线颜色 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 文字代码框圆角 */</span></span><br><span class="line"><span class="selector-id">#post</span> <span class="selector-class">.highlight</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*************（友链+归档+分类+便签）圆角 *****************/</span></span><br><span class="line"><span class="selector-id">#page</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 分类子页面圆角 */</span></span><br><span class="line"><span class="selector-id">#category</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 标签子页面圆角 */</span></span><br><span class="line"><span class="selector-id">#tag</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 归档子页面圆角 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#archive</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 导航栏子菜单圆角 */</span></span><br><span class="line"><span class="selector-class">.menus_item_child</span>, <span class="selector-class">.site-page</span><span class="selector-class">.child</span><span class="selector-class">.faa-parent</span><span class="selector-class">.animated-hover</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span> <span class="meta">!important</span>; <span class="comment">/* 确保悬停时圆角效果存在 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.menus_item_child</span>, <span class="selector-class">.site-page</span><span class="selector-class">.child</span><span class="selector-class">.faa-parent</span><span class="selector-class">.animated-hover</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span> <span class="meta">!important</span>; <span class="comment">/* 确保悬停时圆角效果存在 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 搜索框圆角 */</span></span><br><span class="line"><span class="selector-class">.search-dialog</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>; <span class="comment">/* 设置圆角边框 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 评论输入框圆角*/</span></span><br><span class="line"><span class="selector-id">#twikoo</span> <span class="selector-class">.tk-comments</span> <span class="selector-class">.tk-submit</span> <span class="selector-class">.tk-row</span> <span class="selector-class">.tk-col</span> <span class="selector-class">.tk-input</span><span class="selector-class">.el-textarea</span> <span class="selector-class">.el-textarea__inner</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">15px</span>; <span class="comment">/* 设置圆角边框 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 评论预览圆角 */</span></span><br><span class="line"><span class="selector-class">.el-button</span><span class="selector-class">.tk-preview</span><span class="selector-class">.el-button--default</span><span class="selector-class">.el-button--small</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>; <span class="comment">/* 设置圆角边框 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 评论发送圆角 */</span></span><br><span class="line"><span class="selector-class">.el-button</span><span class="selector-class">.tk-send</span><span class="selector-class">.el-button--primary</span><span class="selector-class">.el-button--small</span><span class="selector-class">.is-disabled</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>; <span class="comment">/* 设置圆角边框 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* md 表格 */</span></span><br><span class="line"><span class="selector-class">.table-container</span> <span class="selector-class">.table-wrap</span> <span class="selector-tag">table</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>; <span class="comment">/* 设置圆角边框 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 标签外挂 */</span></span><br><span class="line"><span class="selector-id">#post</span> <span class="selector-class">.container</span><span class="selector-class">.post-content</span> <span class="selector-class">.folding-tag</span>, <span class="selector-id">#post</span> <span class="selector-class">.container</span><span class="selector-class">.post-content</span> <span class="selector-class">.folding-tag</span> <span class="selector-class">.content</span>, <span class="selector-id">#post</span> <span class="selector-class">.container</span><span class="selector-class">.post-content</span> <span class="selector-class">.folding-tag</span> <span class="selector-class">.content</span>, <span class="selector-tag">summary</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span> <span class="meta">!important</span>; <span class="comment">/* 圆角 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><strong>➕ 引入CSS文件：</strong><ul><li>在 <code>_config.butterfly.yml</code> 文件中找到 <code>inject</code> 部分，添加以下内容：</li></ul></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span> <span class="comment"># 注入自定义css</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/全局圆角.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><p><strong>🚀 清理并重启项目：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><hr><p><a id="page-beautification"></a></p><h2 id="🎭-十三、页面美化优化">🎭 十三、页面美化优化</h2><h3 id="✨-功能特点-13">✨ 功能特点</h3><p>全面优化页面样式，包括背景透明度、边框装饰、磨砂效果等，打造精致界面。</p><h3 id="🔧-实现方法-5">🔧 实现方法</h3><ul><li><strong>创建页面美化CSS：</strong></li></ul><ul><li><code>--trans-light</code>：白天模式带透明度的背景色，如<code>rgba(255, 255, 255, 0.88)</code>底色是纯白色，其中0.88就透明度，在0-1之间调节，值越大越不透明；</li><li><code>--trans-dark</code>: 夜间模式带透明度的背景色，如<code>rgba(25, 25, 25, 0.88)</code>底色是柔和黑色，其中0.88就透明度，在0-1之间调节，值越大越不透明;</li><li><code>--border-style</code>: 边框样式，<code>1px solid rgb(169, 169, 169)</code>指宽度为1px的灰色实体边框;</li><li><code>--backdrop-filter</code>: 背景过滤器，如<code>blur(5px) saturate(150%)</code>表示饱和度为150%的、高斯模糊半径为5px的过滤器，这是亚克力效果的一种实现方法;</li><li>大家可以根据自己喜好进行调节，不用拘泥于我的样式！</li></ul><p><strong>创建 <code>Hexo根目录/source/css/页面美化.css</code> 文件，将代码复制粘贴到该文件中。</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/****************************** 定义全局颜色 ****************************/</span></span><br><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="attr">--mobufan-beijing</span>: <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">0.2</span>); <span class="comment">/* 日间模式，背景颜色 */</span></span><br><span class="line">  <span class="attr">--mobufan-fontcolor</span>: <span class="number">#ffffff</span>; <span class="comment">/* 日间模式，字体颜色*/</span></span><br><span class="line">  <span class="attr">--mobufan-border</span>: <span class="number">1px</span> solid <span class="number">#e0e0e0</span>; <span class="comment">/* 边框样式（白色实线） */</span></span><br><span class="line">  <span class="attr">--mobufan-shadow-border</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">12px</span> <span class="number">0</span> <span class="built_in">rgb</span>(<span class="number">47</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">0</span> <span class="number">1px</span> <span class="number">3px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>); <span class="comment">/* 边框阴影效果悬浮感的立体光影效果 */</span></span><br><span class="line">  <span class="attr">--mobufan-text-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.8</span>); <span class="comment">/* 日间模式，文字阴影效果 */</span></span><br><span class="line">  <span class="attr">--mobufan-border-style</span>: <span class="number">1.2px</span> solid <span class="built_in">rgb</span>(<span class="number">169</span>, <span class="number">169</span>, <span class="number">169</span>); <span class="comment">/* 边框装饰线颜色 */</span></span><br><span class="line">  <span class="attr">--mobufan-backdrop-filter</span>: <span class="built_in">blur</span>(<span class="number">6px</span>) <span class="built_in">saturate</span>(<span class="number">150%</span>); <span class="comment">/* 磨砂效果（模糊+饱和度） */</span></span><br><span class="line">  <span class="attr">--mobufan-color</span>: <span class="number">#ffb800</span>; <span class="comment">/* 悬停时文字颜色变为黄色 */</span></span><br><span class="line">  <span class="attr">--mobufan-white</span>: <span class="number">#ffffff</span>; <span class="comment">/* 白色字体 */</span></span><br><span class="line">  <span class="attr">--mobufan-hangneidaima</span>: <span class="number">#00fdf6</span>; <span class="comment">/* 文章行内代码文字颜色 */</span></span><br><span class="line">  <span class="attr">--mobufan-waigua</span>: <span class="number">#ffffff</span>; <span class="comment">/* 日间模式，字体颜色*/</span></span><br><span class="line">  <span class="attr">--mobufan-jianbian</span>: <span class="built_in">linear-gradient</span>(to right, <span class="number">#00075ef2</span>, <span class="number">#2c0364</span>, <span class="number">#003300</span>, <span class="number">#330000</span>); <span class="comment">/* 渐变颜色*/</span></span><br><span class="line">  <span class="comment">/*--mobufan-lighttext: #6c757d; !* 浅色文字（灰色） *!*/</span></span><br><span class="line">  <span class="comment">/*--mobufan-dark: rgba(25, 25, 25, 0.2); !* 夜间模式背景颜色 *!*/</span></span><br><span class="line">  <span class="comment">/*--mobufan-touming: rgba(25, 25, 25, 0); !* 透明背景颜色 *!*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/********* 明亮模式颜色配置 *********/</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> &#123;</span><br><span class="line">  <span class="attr">--mobufan-beijing</span>: <span class="built_in">rgba</span>(<span class="number">0</span> <span class="number">228</span> <span class="number">196</span> / <span class="number">72%</span>); <span class="comment">/* 日间模式，背景颜色 */</span></span><br><span class="line">  <span class="comment">/*--mobufan-beijing: linear-gradient(to right, #3a6a82, #5d7480, #1a5e80, #005a86); !* 日间模式，背景颜色 *!*/</span></span><br><span class="line">  <span class="attr">--mobufan-fontcolor</span>: <span class="number">#ffffff</span>; <span class="comment">/* 日间模式，字体颜色*/</span></span><br><span class="line">  <span class="attr">--mobufan-border</span>: <span class="number">1px</span> solid <span class="number">#e0e0e0</span>; <span class="comment">/* 边框样式（浅灰色实线） */</span></span><br><span class="line">  <span class="attr">--mobufan-shadow-border</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">12px</span> <span class="number">0</span> <span class="built_in">rgb</span>(<span class="number">174</span> <span class="number">1</span> <span class="number">105</span>), <span class="number">0</span> <span class="number">1px</span> <span class="number">3px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>); <span class="comment">/* 边框阴影效果悬浮感的立体光影效果 */</span></span><br><span class="line">  <span class="attr">--mobufan-text-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgb</span>(<span class="number">183</span> <span class="number">0</span> <span class="number">110</span>); <span class="comment">/* 日间模式，文字阴影效果 */</span></span><br><span class="line">  <span class="attr">--mobufan-border-style</span>: <span class="number">1.2px</span> solid <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">158</span>, <span class="number">0</span>); <span class="comment">/* 边框装饰线颜色 */</span></span><br><span class="line">  <span class="attr">--mobufan-backdrop-filter</span>: <span class="built_in">blur</span>(<span class="number">6px</span>) <span class="built_in">saturate</span>(<span class="number">150%</span>); <span class="comment">/* 磨砂效果（模糊+饱和度） */</span></span><br><span class="line">  <span class="attr">--mobufan-color</span>: <span class="number">#ffb800</span>; <span class="comment">/* 悬停时边框颜色变为黄色 */</span></span><br><span class="line">  <span class="attr">--mobufan-white</span>: <span class="number">#ffffff</span>; <span class="comment">/* 白色字体 */</span></span><br><span class="line">  <span class="attr">--mobufan-hangneidaima</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">0</span>, <span class="number">153</span>); <span class="comment">/* 文章行内代码文字颜色 */</span></span><br><span class="line">  <span class="attr">--mobufan-waigua</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.63</span>); <span class="comment">/* 日间模式，字体颜色*/</span></span><br><span class="line">  <span class="attr">--mobufan-jianbian</span>: <span class="built_in">linear-gradient</span>(to right, <span class="number">#ffb4b4</span>, <span class="number">#0082a9</span>, <span class="number">#007057</span>, <span class="number">#df5fff</span>); <span class="comment">/* 渐变颜色*/</span></span><br><span class="line">  <span class="comment">/*--mobufan-lighttext: #007dd0; !* 文章TOC字体颜色 *!*/</span></span><br><span class="line">  <span class="comment">/*--mobufan-dark: rgba(25, 25, 25, 0.2);*/</span></span><br><span class="line">  <span class="comment">/*--mobufan-touming: rgba(25, 25, 25, 0); !* 透明背景颜色 *!*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/********* 暗色模式颜色配置 *********/</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> &#123;</span><br><span class="line">  <span class="attr">--mobufan-beijing</span>: <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">0.8</span>); <span class="comment">/* 日间模式背景颜色 */</span></span><br><span class="line">  <span class="attr">--mobufan-fontcolor</span>: <span class="number">#212529</span>; <span class="comment">/* 日间模式，字体颜色*/</span></span><br><span class="line">  <span class="attr">--mobufan-border</span>: <span class="number">1px</span> solid <span class="number">#e0e0e0</span>; <span class="comment">/* 边框样式（浅灰色实线） */</span></span><br><span class="line">  <span class="attr">--mobufan-shadow-border</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">12px</span> <span class="number">0</span> <span class="built_in">rgb</span>(<span class="number">20</span> <span class="number">109</span> <span class="number">0</span> / <span class="number">90%</span>), <span class="number">0</span> <span class="number">1px</span> <span class="number">3px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>); <span class="comment">/* 边框阴影效果悬浮感的立体光影效果 */</span></span><br><span class="line">  <span class="attr">--mobufan-text-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgb</span>(<span class="number">40</span> <span class="number">221</span> <span class="number">0</span>); <span class="comment">/* 日间模式，文字阴影效果 */</span></span><br><span class="line">  <span class="attr">--mobufan-border-style</span>: <span class="number">1.2px</span> solid <span class="built_in">rgb</span>(<span class="number">169</span>, <span class="number">169</span>, <span class="number">169</span>); <span class="comment">/* 边框装饰线颜色 */</span></span><br><span class="line">  <span class="attr">--mobufan-backdrop-filter</span>: <span class="built_in">blur</span>(<span class="number">6px</span>) <span class="built_in">saturate</span>(<span class="number">150%</span>); <span class="comment">/* 磨砂效果（模糊+饱和度） */</span></span><br><span class="line">  <span class="attr">--mobufan-color</span>: <span class="number">#ffb800</span>; <span class="comment">/* 悬停时边框颜色变为黄色 */</span></span><br><span class="line">  <span class="attr">--mobufan-white</span>: <span class="number">#ffffff</span>; <span class="comment">/* 白色字体 */</span></span><br><span class="line">  <span class="attr">--mobufan-hangneidaima</span>: <span class="built_in">rgb</span>(<span class="number">47</span>, <span class="number">255</span>, <span class="number">0</span>); <span class="comment">/* 文章行内代码文字颜色 */</span></span><br><span class="line">  <span class="attr">--mobufan-waigua</span>: <span class="number">#ffffff</span>; <span class="comment">/* 日间模式，字体颜色*/</span></span><br><span class="line">  <span class="attr">--mobufan-jianbian</span>: <span class="built_in">linear-gradient</span>(to right, <span class="number">#00075ef2</span>, <span class="number">#2c0364</span>, <span class="number">#003300</span>, <span class="number">#330000</span>); <span class="comment">/* 渐变颜色*/</span></span><br><span class="line">  <span class="comment">/*--mobufan-lighttext: #007dd0; !* 文章TOC字体颜色 *!*/</span></span><br><span class="line">  <span class="comment">/*--mobufan-dark: rgba(25, 25, 25, 0.2);*/</span></span><br><span class="line">  <span class="comment">/*--mobufan-touming: rgba(25, 25, 25, 0); !* 透明背景颜色 *!*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/************************ 背景颜色+边框装饰线+磨砂效果 ************************/</span></span><br><span class="line"><span class="comment">/*#to_comment .fas.fa-comments, !* 右下角明暗模式，评论 *!*/</span></span><br><span class="line"><span class="comment">/*#rightside-config-hide .icon-V.hidden, !* 右下角明暗模式 *!*/</span></span><br><span class="line"><span class="selector-id">#post</span> <span class="selector-class">.container</span><span class="selector-class">.post-content</span> <span class="selector-class">.folding-tag</span>, <span class="comment">/* 标签外挂 */</span></span><br><span class="line"><span class="selector-id">#post</span> <span class="selector-class">.container</span><span class="selector-class">.post-content</span> <span class="selector-class">.folding-tag</span> <span class="selector-class">.content</span>,  <span class="comment">/* 标签外挂 */</span></span><br><span class="line"><span class="selector-id">#post</span> <span class="selector-class">.container</span><span class="selector-class">.post-content</span> <span class="selector-class">.folding-tag</span> <span class="selector-class">.content</span>, <span class="selector-tag">summary</span>, <span class="comment">/* 标签外挂 */</span></span><br><span class="line"><span class="selector-id">#rightside</span> &gt; <span class="selector-tag">div</span> &gt; <span class="selector-tag">button</span>, <span class="comment">/* 右下角明暗模式，评论 */</span></span><br><span class="line"><span class="selector-id">#rightside</span> &gt; <span class="selector-tag">div</span> &gt; <span class="selector-tag">a</span>, <span class="comment">/* 右下角明暗模式，评论 */</span></span><br><span class="line"><span class="selector-id">#pagination</span> <span class="selector-class">.page-number</span>, <span class="comment">/* 文章分页2 */</span></span><br><span class="line"><span class="selector-id">#pagination</span> <span class="selector-class">.extend</span><span class="selector-class">.next</span>, <span class="comment">/* 文章分页1 */</span></span><br><span class="line"><span class="selector-class">.search-dialog</span>, <span class="comment">/* 搜索框 */</span></span><br><span class="line"><span class="selector-id">#tag</span>, <span class="comment">/* 标签子页面卡片 */</span></span><br><span class="line"><span class="selector-id">#category</span>, <span class="comment">/* 分类子页面卡片 */</span></span><br><span class="line"><span class="selector-id">#recent-posts</span> <span class="selector-class">.recent-post-item</span>, <span class="comment">/* 首页文章卡片 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span>, <span class="comment">/* 首页侧栏卡片 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#post</span>, <span class="comment">/* 文章页卡片 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#archive</span>, <span class="comment">/* 归档页卡片 */</span></span><br><span class="line">  <span class="comment">/* 普通页卡片 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#page</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--mobufan-beijing) <span class="meta">!important</span>; <span class="comment">/* 背景颜色 */</span></span><br><span class="line">  <span class="attribute">backdrop-filter</span>: <span class="built_in">var</span>(--mobufan-backdrop-filter) <span class="meta">!important</span>; <span class="comment">/* 磨砂效果（模糊+饱和度） */</span></span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--mobufan-border-style) <span class="meta">!important</span>; <span class="comment">/* 边框装饰线颜色 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 鼠标悬停，网页所有元素背景透明 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**:hover &#123;*/</span></span><br><span class="line"><span class="comment">/*  background-color: transparent !important;*/</span></span><br><span class="line"><span class="comment">/*  transition: background-color 0.3s ease; !* 添加过渡效果 *!*/</span></span><br><span class="line"><span class="comment">/*&#125;*/</span></span><br><span class="line"><span class="comment">/** &#123;*/</span></span><br><span class="line"><span class="comment">/*  background-color: transparent !important;*/</span></span><br><span class="line"><span class="comment">/*  transition: background-color 0.3s ease; !* 添加过渡效果 *!*/</span></span><br><span class="line"><span class="comment">/*&#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/********************** 鼠标悬停，文字颜色 ***************************/</span></span><br><span class="line"><span class="selector-class">.aside-list-item</span> <span class="selector-class">.title</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 侧边栏-最近文章 */</span></span><br><span class="line"><span class="selector-class">.card-tag-cloud</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="comment">/* 侧边栏-标签云：.card-tag-cloud a */</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--mobufan-hangneidaima) <span class="meta">!important</span>; <span class="comment">/* 鼠标悬停，文字颜色*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*************************** 导航栏美化 ****************************/</span></span><br><span class="line"><span class="comment">/********** 一级菜单居中 **********/</span></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">width</span>: fit-content <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">12px</span> <span class="meta">!important</span>; <span class="comment">/* 向下移动 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/********* 子菜单横向展示 *********/</span></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.menus_item_child</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 这里的2是代表导航栏的第2个元素，即有子菜单的元素，可以按自己需求修改 */</span></span><br><span class="line"><span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) <span class="selector-class">.menus_item_child</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">125px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/********* 去除导航栏选项中底下的蓝条 *********/</span></span><br><span class="line"><span class="selector-id">#nav</span> *<span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: transparent<span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/********* 调整导航栏（图标大小和文字颜色）*********/</span></span><br><span class="line"><span class="selector-class">.site-page</span> <span class="selector-tag">svg</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1.8em</span>; <span class="comment">/* 调整（导航栏图标）的宽度 */</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">1.8em</span>; <span class="comment">/* 调整（导航栏图标）的高度 */</span></span><br><span class="line">  <span class="attribute">vertical-align</span>: middle; <span class="comment">/* 默认居中对齐 */</span></span><br><span class="line">  <span class="attribute">vertical-align</span>: -<span class="number">0.3em</span>; <span class="comment">/* 向上移动 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.site-page</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.38em</span>; <span class="comment">/* 调整（导航栏文字）大小 */</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--mobufan-white); <span class="comment">/* 调整（导航栏文字）颜色 */</span></span><br><span class="line">  <span class="attribute">vertical-align</span>: <span class="number">0.01em</span>; <span class="comment">/* 向上移动 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.site-name</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.8em</span>; <span class="comment">/* 调整（站点标题文字）大小 */</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--mobufan-white); <span class="comment">/* 调整（站点标题文字）颜色 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 导航栏文字加粗和间距调整*/</span></span><br><span class="line"><span class="selector-id">#menus</span> &gt; <span class="selector-tag">div</span><span class="selector-class">.menus_items</span> &gt; <span class="selector-tag">div</span> &gt; <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="comment">/* 调整文字大小 */</span></span><br><span class="line">  <span class="comment">/*font-size: 14px; !* 或其他值，如 16px、1.2rem 等 *!*/</span></span><br><span class="line">  <span class="attribute">letter-spacing</span>: .<span class="number">1rem</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">600</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> .<span class="number">1em</span> <span class="number">0</span> <span class="number">0.1em</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="comment">/* 重置过渡动画（如果需要） */</span></span><br><span class="line">  -webkit-<span class="attribute">transition</span>: color <span class="number">0s</span> <span class="meta">!important</span>;</span><br><span class="line">  -moz-<span class="attribute">transition</span>: color <span class="number">0s</span> <span class="meta">!important</span>;</span><br><span class="line">  -o-<span class="attribute">transition</span>: color <span class="number">0s</span> <span class="meta">!important</span>;</span><br><span class="line">  -ms-<span class="attribute">transition</span>: color <span class="number">0s</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">transition</span>: color <span class="number">0s</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/********* 导航栏菜单鼠标移入字体放大 *********/</span></span><br><span class="line"><span class="selector-class">.site-name</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">40px</span>; <span class="comment">/*导航栏（站点标题）文字图标*/</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--mobufan-beijing) <span class="meta">!important</span>; <span class="comment">/* 日间模式导航栏（主菜单）背景颜色 */</span></span><br><span class="line">  <span class="attribute">transition</span>: transform <span class="number">0.3s</span> ease; <span class="comment">/* 平滑过渡效果 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*.menus_item:hover &#123;*/</span></span><br><span class="line"><span class="comment">/*  font-size: 16px; !*导航栏（主菜单）文字图标*!*/</span></span><br><span class="line"><span class="comment">/*  background: var(--mobufan-beijing) !important; !* 日间模式导航栏（主菜单）背景颜色 *!*/</span></span><br><span class="line"><span class="comment">/*  transition: transform 0.3s ease; !* 平滑过渡效果 *!*/</span></span><br><span class="line"><span class="comment">/*&#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/********* 导航栏（主菜单）背景颜色 *********/</span></span><br><span class="line"><span class="selector-id">#page-header</span><span class="selector-class">.nav-fixed</span> <span class="selector-id">#nav</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--mobufan-beijing) <span class="meta">!important</span>; <span class="comment">/* 日间模式导航栏（主菜单）背景颜色 */</span></span><br><span class="line">  <span class="attribute">backdrop-filter</span>: <span class="built_in">var</span>(--mobufan-backdrop-filter) <span class="meta">!important</span>; <span class="comment">/* 磨砂效果（模糊+饱和度） */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/******************************* 导航栏（子菜单）背景颜色 ****************************/</span></span><br><span class="line"><span class="selector-class">.menus_item_child</span>,</span><br><span class="line"><span class="selector-class">.site-page</span><span class="selector-class">.child</span><span class="selector-class">.faa-parent</span><span class="selector-class">.animated-hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--mobufan-beijing) <span class="meta">!important</span>; <span class="comment">/* 设置元素的背景颜色 */</span></span><br><span class="line">  <span class="comment">/* backdrop-filter: var(--mobufan-backdrop-filter) !important; /* 磨砂效果（模糊+饱和度） */</span> */</span><br><span class="line">  <span class="attribute">transition</span>: background-color <span class="number">0.3s</span> ease <span class="meta">!important</span>; <span class="comment">/* 日间模式，添加（子菜单）过渡效果 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span> <span class="selector-class">.menus_item_child</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--mobufan-beijing) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">transition</span>: background-color <span class="number">0.3s</span> ease; <span class="comment">/* 添加过渡效果 */</span></span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--mobufan-border-style) <span class="meta">!important</span>; <span class="comment">/* 边框装饰线颜色 */</span></span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--mobufan-shadow-border) <span class="meta">!important</span>; <span class="comment">/* 添加阴影效果 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 为导航菜单中的子菜单项设置样式 */</span></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span> <span class="selector-class">.menus_item_child</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--mobufan-beijing) <span class="meta">!important</span>;</span><br><span class="line">  <span class="comment">/* 设置元素的圆角半径为 50px，实现圆形效果 */</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="comment">/* 为所有属性的变化添加过渡动画，持续时间为 0.3 秒 */</span></span><br><span class="line">  -webkit-<span class="attribute">transition</span>: all .<span class="number">3s</span>; <span class="comment">/* 兼容 Webkit 内核浏览器（如 Chrome、Safari） */</span></span><br><span class="line">  -moz-<span class="attribute">transition</span>: all .<span class="number">3s</span>;    <span class="comment">/* 兼容 Gecko 内核浏览器（如 Firefox） */</span></span><br><span class="line">  -o-<span class="attribute">transition</span>: all .<span class="number">3s</span>;      <span class="comment">/* 兼容 Opera 浏览器 */</span></span><br><span class="line">  -ms-<span class="attribute">transition</span>: all .<span class="number">3s</span>;     <span class="comment">/* 兼容 IE 浏览器 */</span></span><br><span class="line">  <span class="attribute">transition</span>: all .<span class="number">3s</span>;         <span class="comment">/* 标准语法，适用于现代浏览器 */</span></span><br><span class="line">  <span class="comment">/* 将元素以行内块级元素的方式显示，允许设置宽度和高度 */</span></span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="comment">/* 设置元素左右外边距为 2px，增加间距 */</span></span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">list-style</span>: none; <span class="comment">/* 移除导航菜单子项的默认列表样式 */</span></span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--mobufan-border-style) <span class="meta">!important</span>; <span class="comment">/* 边框装饰线颜色 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 清除导航栏元素最底层背景*/</span></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span> <span class="selector-class">.menus_item_child</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: transparent<span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 设置导航菜单子项的第一个子元素的上边框为圆角 */</span></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span> <span class="selector-class">.menus_item_child</span> <span class="selector-tag">li</span><span class="selector-pseudo">:first-child</span> &#123;</span><br><span class="line">  <span class="attribute">border-top-left-radius</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border-top-right-radius</span>: <span class="number">20px</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 设置导航菜单子项的最后一个子元素的下边框为圆角 */</span></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span> <span class="selector-class">.menus_item_child</span> <span class="selector-tag">li</span><span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line">  <span class="attribute">border-bottom-right-radius</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border-bottom-left-radius</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 设置导航菜单子项中的链接样式 */</span></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span> <span class="selector-class">.menus_item_child</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block; <span class="comment">/* 将链接设置为内联块元素，以便设置宽度和内边距 */</span></span><br><span class="line">  <span class="attribute">padding</span>: .<span class="number">5625rem</span> <span class="number">1rem</span>; <span class="comment">/* 设置内边距，确保链接内容与边框之间的间距 */</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>; <span class="comment">/* 链接占据整个父元素的宽度 */</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#4c4948</span>; <span class="comment">/* 设置链接的文本颜色为深灰色 */</span></span><br><span class="line">  <span class="attribute">text-shadow</span>: none <span class="meta">!important</span>; <span class="comment">/* 移除文本阴影效果 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 当鼠标悬停在导航菜单子项的链接上时，设置链接的样式 */</span></span><br><span class="line"><span class="comment">/*#nav .menus_items .menus_item .menus_item_child li a:hover &#123;*/</span></span><br><span class="line"><span class="comment">/*  !* color: #fff; !important; *! !* 被注释掉的代码：将文本颜色设置为白色 *!*/</span></span><br><span class="line"><span class="comment">/*  padding: .125rem 1.25rem; !* 调整内边距，链接使在悬停时看起来更紧凑 *!*/</span></span><br><span class="line"><span class="comment">/*  -webkit-transform: scale(1) !important; !* 保持元素的原始大小（Webkit浏览器） *!*/</span></span><br><span class="line"><span class="comment">/*  -moz-transform: scale(1) !important; !* 保持元素的原始大小（Firefox浏览器） *!*/</span></span><br><span class="line"><span class="comment">/*  -o-transform: scale(1) !important; !* 保持元素的原始大小（Opera浏览器） *!*/</span></span><br><span class="line"><span class="comment">/*  -ms-transform: scale(1) !important; !* 保持元素的原始大小（IE浏览器） *!*/</span></span><br><span class="line"><span class="comment">/*  transform: scale(1) !important; !* 保持元素的原始大小（标准语法） *!*/</span></span><br><span class="line"><span class="comment">/*  !* background: #425aef; !important; *! !* 被注释掉的代码：设置背景颜色为蓝色 *!*/</span></span><br><span class="line"><span class="comment">/*  !* -webkit-box-shadow: 0 8px 12px -3px rgba(66, 89, 239, 0.137); *! !* 被注释掉的代码：添加阴影效果（Webkit浏览器） *!*/</span></span><br><span class="line"><span class="comment">/*  !* box-shadow: 0 8px 12px -3px rgba(66, 89, 239, 0.137); *! !* 被注释掉的代码：添加阴影效果（标准语法） *!*/</span></span><br><span class="line"><span class="comment">/*&#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/********** 鼠标悬停背景颜色 **********/</span></span><br><span class="line"><span class="selector-class">.menus_item_child</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#menus_item</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.site-page</span><span class="selector-class">.child</span><span class="selector-class">.faa-parent</span><span class="selector-class">.animated-hover</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--mobufan-beijing) <span class="meta">!important</span>; <span class="comment">/* 设置元素的背景颜色 */</span></span><br><span class="line">  <span class="attribute">backdrop-filter</span>: <span class="built_in">var</span>(--mobufan-backdrop-filter) <span class="meta">!important</span>; <span class="comment">/* 磨砂效果（模糊+饱和度） */</span></span><br><span class="line">  <span class="attribute">transition</span>: background-color <span class="number">0.3s</span> ease <span class="meta">!important</span>; <span class="comment">/* 添加（子菜单）过渡效果 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/********** 手机端菜单栏背景 **********/</span></span><br><span class="line"><span class="comment">/* 手机端菜单栏最外层：div#sidebar-menus */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#sidebar-menus</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--mobufan-beijing) <span class="meta">!important</span>; <span class="comment">/* 夜间模式背景颜色 */</span></span><br><span class="line">  <span class="attribute">backdrop-filter</span>: <span class="built_in">var</span>(--mobufan-backdrop-filter); <span class="comment">/* 磨砂效果（模糊+饱和度） */</span></span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--mobufan-border-style); <span class="comment">/* 边框装饰线颜色 */</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">15px</span>; <span class="comment">/* 圆角 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 手机端菜单栏(首页+文章+社交+关于)背景*/</span></span><br><span class="line"><span class="selector-class">.menus_items</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--mobufan-beijing) <span class="meta">!important</span>; <span class="comment">/* 夜间模式背景颜色 */</span></span><br><span class="line">  <span class="attribute">backdrop-filter</span>: <span class="built_in">var</span>(--mobufan-backdrop-filter); <span class="comment">/* 磨砂效果（模糊+饱和度） */</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span> <span class="meta">!important</span>; <span class="comment">/* 圆角 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 手机端菜单栏（头像下面，文章+标签+分类）*/</span></span><br><span class="line"><span class="selector-class">.site-data</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>; <span class="comment">/* 图标大小 */</span></span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">40px</span>; <span class="comment">/* 图标上下调节 */</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--mobufan-white); <span class="comment">/* 调整（导航栏文字）颜色 */</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--mobufan-beijing) <span class="meta">!important</span>; <span class="comment">/* 背景颜色 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 手机端菜单栏 鼠标悬停透明背景*/</span></span><br><span class="line"><span class="selector-id">#sidebar-menus</span> <span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span> <span class="selector-tag">a</span><span class="selector-class">.site-page</span><span class="selector-class">.faa-parent</span><span class="selector-class">.animated-hover</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--mobufan-beijing) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/************************ 标签外挂背景颜色 ************************/</span></span><br><span class="line"><span class="selector-id">#post</span> <span class="selector-class">.container</span><span class="selector-class">.post-content</span> <span class="selector-class">.folding-tag</span>, <span class="selector-id">#post</span> <span class="selector-class">.container</span><span class="selector-class">.post-content</span> <span class="selector-class">.folding-tag</span> <span class="selector-class">.content</span>, <span class="selector-id">#post</span> <span class="selector-class">.container</span><span class="selector-class">.post-content</span> <span class="selector-class">.folding-tag</span> <span class="selector-class">.content</span>, <span class="selector-tag">summary</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--mobufan-beijing) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">transition</span>: background-color <span class="number">0.3s</span> ease; <span class="comment">/* 添加过渡效果 */</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--mobufan-waigua) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#post</span> <span class="selector-class">.container</span><span class="selector-class">.post-content</span> <span class="selector-class">.folding-tag</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--mobufan-shadow-border) <span class="meta">!important</span>; <span class="comment">/* 添加阴影效果 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/************************ 阅读模式 ************************/</span></span><br><span class="line"><span class="comment">/*[data-theme=&quot;light&quot;] .read-mode #aside-content .card-widget,*/</span></span><br><span class="line"><span class="comment">/*[data-theme=&quot;light&quot;] .read-mode div#post &#123;*/</span></span><br><span class="line"><span class="comment">/*  background: rgba(158, 204, 171, 0.5) !important;*/</span></span><br><span class="line"><span class="comment">/*&#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*!* 夜间模式下的阅读模式 *!*/</span></span><br><span class="line"><span class="comment">/*[data-theme=&quot;dark&quot;] .read-mode #aside-content .card-widget,*/</span></span><br><span class="line"><span class="comment">/*[data-theme=&quot;dark&quot;] .read-mode div#post &#123;*/</span></span><br><span class="line"><span class="comment">/*  background: rgba(25, 25, 25, 0.2) !important;*/</span></span><br><span class="line"><span class="comment">/*  color: #ffffff;*/</span></span><br><span class="line"><span class="comment">/*&#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*************************** 右下角按钮美化 ************************/</span></span><br><span class="line"><span class="selector-id">#to_comment</span> <span class="selector-class">.fas</span><span class="selector-class">.fa-comments</span>, <span class="comment">/* 右下角明暗模式，评论 */</span></span><br><span class="line"><span class="selector-id">#rightside</span> &gt; <span class="selector-tag">div</span> &gt; <span class="selector-tag">button</span>, <span class="comment">/* 右下角明暗模式，菜单 */</span></span><br><span class="line"><span class="selector-id">#rightside</span> &gt; <span class="selector-tag">div</span> &gt; <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">5px</span>; <span class="comment">/*间距*/</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">42px</span>; <span class="comment">/*左右边框大小*/</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">42px</span>; <span class="comment">/*上下边框大小*/</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">26px</span>; <span class="comment">/*圆角大小*/</span></span><br><span class="line">  <span class="comment">/*background-color: #ffffff; !*背景颜色*!*/</span></span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">19px</span>; <span class="comment">/*图标大小*/</span></span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">42px</span>; <span class="comment">/*图标上下调节*/</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--mobufan-hangneidaima); <span class="comment">/*图标颜色*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/************************ 首页标题美化 ************************/</span></span><br><span class="line"><span class="comment">/* 设置（首页标题）字体大小、颜色、行高等 */</span></span><br><span class="line"><span class="selector-id">#post-info</span> <span class="selector-class">.post-title</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--mobufan-white); <span class="comment">/* 首页标题（文字）颜色 */</span></span><br><span class="line">  <span class="attribute">font-weight</span>: normal;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">2.0em</span>; <span class="comment">/* 首页标题（文字）大小 */</span></span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.5</span>; <span class="comment">/* 首页标题（与副标题）间距大小 */</span></span><br><span class="line">  <span class="attribute">letter-spacing</span>: <span class="number">0px</span>; <span class="comment">/* 首页标题（字符）间距大小 */</span></span><br><span class="line">  <span class="attribute">word-spacing</span>: <span class="number">0px</span>; <span class="comment">/* 首页标题（单词）间距 */</span></span><br><span class="line">  <span class="comment">/* 以下属性配合实现多行文本溢出显示省略号 */</span></span><br><span class="line">  <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">  -webkit-<span class="attribute">box-orient</span>: vertical;</span><br><span class="line">  -webkit-<span class="selector-tag">line</span>-clamp: <span class="number">3</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#post-info</span> <span class="selector-class">.post-title</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--mobufan-white); <span class="comment">/* 首页标题（文字）颜色 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 设置（首页副标题）字体大小、颜色、行高等 */</span></span><br><span class="line"><span class="selector-id">#post-meta</span> <span class="selector-class">.meta-firstline</span>, <span class="selector-id">#post-meta</span> <span class="selector-class">.meta-secondline</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--mobufan-white); <span class="comment">/* 首页副标题（文字）颜色 */</span></span><br><span class="line">  <span class="attribute">font-weight</span>: normal;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.2em</span>; <span class="comment">/* 首页副标题（文字）大小 */</span></span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.5</span>; <span class="comment">/* 首页副标题（与标题）间距大小 */</span></span><br><span class="line">  <span class="attribute">letter-spacing</span>: <span class="number">0px</span>; <span class="comment">/* 首页副标题（字符）间距大小 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/******************** 文章toc目录美化 ********************/</span></span><br><span class="line"><span class="comment">/* 侧边栏内容区域中的目录卡片内容样式 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-id">#card-toc</span> <span class="selector-class">.toc-content</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">8px</span> <span class="number">0px</span>; <span class="comment">/* 设置内边距和外边距 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 目录卡片内容 目录样式 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-id">#card-toc</span> <span class="selector-class">.toc-content</span> <span class="selector-class">.toc-link</span> &#123;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.2</span>; <span class="comment">/* 设置行高 */</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">3px</span>; <span class="comment">/* 设置内边距 */</span></span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">0px</span> solid <span class="number">#88000000</span>; <span class="comment">/* 设置左边框 */</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">19px</span>; <span class="comment">/* 设置圆角边框 */</span></span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">15px</span>; <span class="comment">/* 设置字体大小 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/********* 非活性目录样式 *********/</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-id">#card-toc</span> <span class="selector-class">.toc-content</span> <span class="selector-class">.toc-link</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--mobufan-white); <span class="comment">/* 日间模式（目录卡片内容）文字颜色 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-id">#card-toc</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.toc-content</span> <span class="selector-class">.toc-link</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.active</span>) <span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">0px</span>); <span class="comment">/* 悬停时 移除模糊效果 */</span></span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>; <span class="comment">/* 悬停时 设置完全不透明 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-id">#card-toc</span> <span class="selector-class">.toc-content</span> <span class="selector-class">.toc-link</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.active</span>) <span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.6</span>; <span class="comment">/* 目录卡片内容设置(半透明) */</span></span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">0.9px</span>); <span class="comment">/* 目录卡片内容设置(轻微模糊)效果 */</span></span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.3s</span>; <span class="comment">/* 目录卡片内容设置(过渡效果) */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/********* 活性目录状态样式 *********/</span></span><br><span class="line"><span class="comment">/* 鼠标悬停样式 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-id">#card-toc</span> <span class="selector-class">.toc-content</span> <span class="selector-class">.toc-link</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.active</span>) <span class="selector-tag">span</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">2.2</span>; <span class="comment">/* 设置行高 */</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>; <span class="comment">/* 悬停时 圆角边框 */</span></span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--mobufan-beijing); <span class="comment">/* 悬停时 背景颜色 */</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--mobufan-hangneidaima) ; <span class="comment">/*  悬停时 文字颜色 */</span></span><br><span class="line">  <span class="attribute">font-weight</span>: bold; <span class="comment">/* 设置字体加粗 */</span></span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>; <span class="comment">/* 悬停时 字体大小 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 浏览到该目录时的样式*/</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-id">#card-toc</span> <span class="selector-class">.toc-content</span> <span class="selector-class">.toc-link</span><span class="selector-class">.active</span> &#123;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">2.8</span>; <span class="comment">/* 设置行高 */</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>; <span class="comment">/* 设置圆角边框 */</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--mobufan-hangneidaima) ; <span class="comment">/*  浏览到该目录时 文字颜色 */</span></span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--mobufan-beijing); <span class="comment">/* 浏览到该目录时 边框背景颜色 */</span></span><br><span class="line">  <span class="attribute">font-weight</span>: bold; <span class="comment">/* 设置字体加粗 */</span></span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">22px</span>; <span class="comment">/* 设置字体大小 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-id">#card-toc</span> <span class="selector-class">.toc-content</span> <span class="selector-class">.toc-item</span><span class="selector-class">.active</span> <span class="selector-class">.toc-link</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>; <span class="comment">/* 内容中活性目录，设置不透明度 */</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">15px</span>; <span class="comment">/* 内容中活性目录，设置圆角边框 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/******************************** 全局超链接颜色 *****************************/</span></span><br><span class="line"><span class="comment">/********* 全局超链接颜色 *********/</span></span><br><span class="line"><span class="selector-id">#article-container</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--mobufan-hangneidaima) ; <span class="comment">/* 默认颜色 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#article-container</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--mobufan-hangneidaima) ; <span class="comment">/* 悬停颜色 */</span></span><br><span class="line">  <span class="attribute">text-decoration</span>: underline ; <span class="comment">/* 强制添加下划线 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/******************** 首页文章标题美化 **********************/</span></span><br><span class="line"><span class="comment">/* 首页文章标题居中显示 */</span></span><br><span class="line"><span class="selector-class">.article-title</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center; <span class="comment">/* 首页文章标题居中显示 */</span></span><br><span class="line">  <span class="attribute">letter-spacing</span>: <span class="number">0px</span>; <span class="comment">/* 首页文章标题（字符）间距大小 */</span></span><br><span class="line">  <span class="attribute">word-spacing</span>: <span class="number">0px</span>; <span class="comment">/* 首页文章标题（单词）间距 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.article-title</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.2</span>);</span><br><span class="line">  <span class="attribute">transition</span>: transform <span class="number">0.3s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!********* 文章卡片尺寸调整 *********!*/</span></span><br><span class="line"><span class="comment">/*#recent-posts .recent-post-item &#123;*/</span></span><br><span class="line"><span class="comment">/*  width: 99%; !* 宽度为父容器的 80% *!*/</span></span><br><span class="line"><span class="comment">/*  height: 360vh; !* 高度为视口高度的 30% *!*/</span></span><br><span class="line"><span class="comment">/*  max-width: 1600px; !* 最大宽度限制 *!*/</span></span><br><span class="line"><span class="comment">/*  max-height: 300px; !* 最大高度限制 *!*/</span></span><br><span class="line"><span class="comment">/*&#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/********************** 鼠标悬停时元素美化 **********************/</span></span><br><span class="line"><span class="comment">/********** 鼠标悬停时边框装饰线（颜色） **********/</span></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-tag">img</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 文章图片圆角 */</span></span><br><span class="line"><span class="selector-tag">blockquote</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 引用标签美化 */</span></span><br><span class="line"><span class="selector-id">#rightside</span> &gt; <span class="selector-tag">div</span> &gt; <span class="selector-tag">button</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 右下角明暗模式，菜单 */</span></span><br><span class="line"><span class="selector-id">#to_comment</span> <span class="selector-class">.fas</span><span class="selector-class">.fa-comments</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 右下角明暗模式，评论 */</span></span><br><span class="line"><span class="selector-class">.icon-V</span><span class="selector-class">.hidden</span><span class="selector-pseudo">:hover</span>, <span class="comment">/*右下角快捷菜单*/</span></span><br><span class="line"><span class="selector-id">#go-down</span><span class="selector-pseudo">:hover</span>, <span class="comment">/*右下角快捷菜单*/</span></span><br><span class="line"><span class="selector-id">#go-up</span><span class="selector-pseudo">:hover</span>, <span class="comment">/*右下角快捷菜单*/</span></span><br><span class="line"><span class="selector-id">#hide-aside-btn</span><span class="selector-pseudo">:hover</span>, <span class="comment">/*右下角快捷菜单*/</span></span><br><span class="line"><span class="selector-id">#rightside-config</span><span class="selector-pseudo">:hover</span>, <span class="comment">/*右下角快捷菜单*/</span></span><br><span class="line"><span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-fixed</span> <span class="selector-class">.aplayer-body</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 音乐播放器 */</span></span><br><span class="line"><span class="selector-class">.tk-submit-action-icon</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 评论表情：.tk-submit-action-icon */</span></span><br><span class="line"><span class="selector-class">.el-button</span><span class="selector-class">.tk-send</span><span class="selector-class">.el-button--primary</span><span class="selector-class">.el-button--small</span><span class="selector-class">.is-disabled</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 评论发送 */</span></span><br><span class="line"><span class="selector-class">.el-button</span><span class="selector-class">.tk-preview</span><span class="selector-class">.el-button--default</span><span class="selector-class">.el-button--small</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 评论预览 */</span></span><br><span class="line"><span class="selector-id">#twikoo</span> <span class="selector-class">.tk-comments</span> <span class="selector-class">.tk-submit</span> <span class="selector-class">.tk-row</span> <span class="selector-class">.tk-col</span> <span class="selector-class">.tk-input</span><span class="selector-class">.el-textarea</span> <span class="selector-class">.el-textarea__inner</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 评论输入框：.tk-input.el-textarea */</span></span><br><span class="line"><span class="selector-class">.el-input</span><span class="selector-class">.el-input--small</span><span class="selector-class">.el-input-group</span><span class="selector-class">.el-input-group--prepend</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 评论邮箱+用户名 */</span></span><br><span class="line"><span class="selector-id">#pagination</span> <span class="selector-class">.page-number</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 文章分页2 */</span></span><br><span class="line"><span class="selector-id">#pagination</span> <span class="selector-class">.extend</span><span class="selector-class">.next</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 文章分页1 */</span></span><br><span class="line"><span class="selector-class">.pagination-related</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 相关推荐 */</span></span><br><span class="line"><span class="selector-id">#pagination</span> <span class="selector-class">.pagination-related</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 下一篇文章 */</span></span><br><span class="line"><span class="selector-class">.highlight</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 代码框 */</span></span><br><span class="line"><span class="selector-class">.search-dialog</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 搜索框1 */</span></span><br><span class="line"><span class="selector-class">.local-search-box--input</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 搜索框2 */</span></span><br><span class="line"><span class="selector-id">#tag</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 标签子页面卡片 */</span></span><br><span class="line"><span class="selector-id">#category</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 分类子页面卡片 */</span></span><br><span class="line"><span class="selector-id">#recent-posts</span> <span class="selector-class">.recent-post-item</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 首页文章卡片 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 首页侧栏卡片 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#post</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 文章页卡片 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#page</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 普通页卡片*/</span>  <span class="comment">/* 归档页卡片：div#archive */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#archive</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--mobufan-shadow-border) <span class="meta">!important</span>; <span class="comment">/* 添加阴影效果 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/********** 鼠标悬浮（字体阴影）效果 **********/</span></span><br><span class="line"><span class="comment">/* 首页文章标题：.article-title */</span></span><br><span class="line"><span class="selector-class">.menus_item</span><span class="selector-pseudo">:hover</span>, <span class="comment">/*导航栏（主菜单）文字图标*/</span></span><br><span class="line"><span class="selector-class">.site-name</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 导航栏菜单 */</span></span><br><span class="line"><span class="selector-class">.tag-cloud-list</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 便签卡片 */</span></span><br><span class="line"><span class="selector-class">.site-data</span> <span class="selector-class">.headline</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 侧边栏-头像卡片 */</span></span><br><span class="line"><span class="selector-class">.aside-list-item</span> <span class="selector-class">.title</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 侧边栏-最近文章 */</span></span><br><span class="line"><span class="selector-class">.card-category-list-name</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 侧边栏-分类 */</span></span><br><span class="line"><span class="selector-class">.card-tag-cloud</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 侧边栏-标签云 */</span></span><br><span class="line"><span class="selector-id">#article-container</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 全局超链接 */</span></span><br><span class="line"><span class="selector-class">.article-title</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">text-shadow</span>: <span class="built_in">var</span>(--mobufan-text-shadow) <span class="meta">!important</span>; <span class="comment">/* 直接定义阴影效果 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/********* 鼠标悬停时（元素放大）效果 *********/</span></span><br><span class="line"><span class="selector-id">#rightside</span> &gt; <span class="selector-tag">div</span> &gt; <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-id">#rightside</span> &gt; <span class="selector-tag">div</span> &gt; <span class="selector-tag">button</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 右下角明暗模式，菜单 */</span></span><br><span class="line"><span class="selector-id">#to_comment</span> <span class="selector-class">.fas</span><span class="selector-class">.fa-comments</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 右下角明暗模式，评论 */</span></span><br><span class="line"><span class="selector-id">#pagination</span> <span class="selector-class">.page-number</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 文章分页按钮1 */</span></span><br><span class="line"><span class="selector-id">#pagination</span> <span class="selector-class">.extend</span><span class="selector-class">.next</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 文章分页按钮2 */</span></span><br><span class="line"><span class="selector-class">.site-data</span> <span class="selector-class">.headline</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 侧边栏-头像卡片 */</span></span><br><span class="line"><span class="selector-class">.aside-list-item</span> <span class="selector-class">.title</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 侧边栏-最近文章 */</span></span><br><span class="line"><span class="selector-class">.card-tag-cloud</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 侧边栏-标签云 */</span></span><br><span class="line"><span class="selector-class">.card-category-list-name</span><span class="selector-pseudo">:hover</span>, <span class="comment">/* 侧边栏-分类 */</span></span><br><span class="line"><span class="selector-class">.icon-V</span><span class="selector-class">.hidden</span><span class="selector-pseudo">:hover</span>, <span class="comment">/*右下角快捷菜单*/</span></span><br><span class="line"><span class="selector-id">#go-down</span><span class="selector-pseudo">:hover</span>, <span class="comment">/*右下角快捷菜单*/</span></span><br><span class="line"><span class="selector-id">#go-up</span><span class="selector-pseudo">:hover</span>, <span class="comment">/*右下角快捷菜单*/</span></span><br><span class="line"><span class="selector-id">#hide-aside-btn</span><span class="selector-pseudo">:hover</span>, <span class="comment">/*右下角快捷菜单,下面的#rightside-config也是*/</span></span><br><span class="line"><span class="selector-id">#rightside-config</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.2</span>); <span class="comment">/* 鼠标悬停时放大效果 */</span></span><br><span class="line">  <span class="attribute">transition</span>: transform <span class="number">0.3s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*********************** 引用标签美化 **************************/</span></span><br><span class="line"><span class="selector-tag">blockquote</span> &#123;</span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">8px</span> solid <span class="built_in">var</span>(--mobufan-hangneidaima); <span class="comment">/* 左边框 */</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">16px</span>; <span class="comment">/* 内边距 */</span></span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">15px</span>; <span class="comment">/* 减小字体大小 */</span></span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">18px</span> <span class="number">0px</span>; <span class="comment">/* 外边距 */</span></span><br><span class="line">  <span class="comment">/*font-style: italic; !* 斜体字 *!*/</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">15px</span>; <span class="comment">/* 圆角 */</span></span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--mobufan-beijing); <span class="comment">/* 夜间模式背景颜色 */</span></span><br><span class="line">  <span class="attribute">backdrop-filter</span>: <span class="built_in">var</span>(--mobufan-backdrop-filter); <span class="comment">/* 磨砂效果（模糊+饱和度） */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">blockquote</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">1px</span> <span class="number">1</span>; <span class="comment">/* 减少上下外边距 */</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">0</span>; <span class="comment">/* 减少上下内边距 */</span></span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">2</span>; <span class="comment">/* 减小行高 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">blockquote</span> <span class="selector-tag">p</span><span class="selector-pseudo">:first-child</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">0</span>; <span class="comment">/* 第一个段落的顶部外边距为0 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">blockquote</span> <span class="selector-tag">p</span><span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0</span>; <span class="comment">/* 最后一个段落的底部外边距为0 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*********************** 修改分类卡片布局 **************************/</span></span><br><span class="line"><span class="selector-tag">li</span><span class="selector-class">.card-archive-list-item</span>,<span class="selector-tag">li</span><span class="selector-class">.card-category-list-item</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  -webkit-<span class="attribute">box-flex</span>: <span class="number">1</span>;</span><br><span class="line">  -moz-<span class="attribute">box-flex</span>: <span class="number">1</span>;</span><br><span class="line">  -o-<span class="attribute">box-flex</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">box-flex</span>: <span class="number">1</span>;</span><br><span class="line">  -webkit-<span class="attribute">flex</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">48%</span>;</span><br><span class="line">  -ms-<span class="attribute">flex</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">48%</span>;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">48%</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-archives</span> <span class="selector-tag">ul</span><span class="selector-class">.card-archive-list</span>&gt;<span class="selector-class">.card-archive-list-item</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>,<span class="selector-id">#aside-content</span> <span class="selector-class">.card-categories</span> <span class="selector-tag">ul</span><span class="selector-class">.card-category-list</span>&gt;<span class="selector-class">.card-category-list-item</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--mobufan-hangneidaima); <span class="comment">/* 鼠标悬停，文字颜色*/</span></span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--mobufan-beijing) <span class="meta">!important</span>; <span class="comment">/* 鼠标悬停，卡片背景颜色*/</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--mobufan-shadow-border) <span class="meta">!important</span>; <span class="comment">/* 添加阴影效果 */</span> <span class="comment">/* 鼠标悬停，边框轮廓颜色*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">1200px</span>) &#123;</span><br><span class="line">  <span class="selector-id">#aside-content</span> <span class="selector-class">.card-archives</span> <span class="selector-tag">ul</span><span class="selector-class">.card-archive-list</span>&gt;<span class="selector-class">.card-archive-list-item</span> <span class="selector-tag">a</span><span class="selector-pseudo">:active</span>,<span class="selector-id">#aside-content</span> <span class="selector-class">.card-categories</span> <span class="selector-tag">ul</span><span class="selector-class">.card-category-list</span>&gt;<span class="selector-class">.card-category-list-item</span> <span class="selector-tag">a</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">    -webkit-<span class="attribute">transform</span>:<span class="built_in">scale</span>(.<span class="number">97</span>);</span><br><span class="line">    -moz-<span class="attribute">transform</span>: <span class="built_in">scale</span>(.<span class="number">97</span>);</span><br><span class="line">    -o-<span class="attribute">transform</span>: <span class="built_in">scale</span>(.<span class="number">97</span>);</span><br><span class="line">    -ms-<span class="attribute">transform</span>: <span class="built_in">scale</span>(.<span class="number">97</span>);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(.<span class="number">97</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-archives</span> <span class="selector-tag">ul</span><span class="selector-class">.card-archive-list</span>&gt;<span class="selector-class">.card-archive-list-item</span> <span class="selector-tag">a</span>,<span class="selector-id">#aside-content</span> <span class="selector-class">.card-categories</span> <span class="selector-tag">ul</span><span class="selector-class">.card-category-list</span>&gt;<span class="selector-class">.card-category-list-item</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">4px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">  <span class="attribute">display</span>: -moz-box;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">  <span class="attribute">display</span>: -ms-flexbox;</span><br><span class="line">  <span class="attribute">display</span>: box;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  -webkit-<span class="attribute">box-orient</span>: vertical;</span><br><span class="line">  -moz-<span class="attribute">box-orient</span>: vertical;</span><br><span class="line">  -o-<span class="attribute">box-orient</span>: vertical;</span><br><span class="line">  -webkit-<span class="attribute">flex-direction</span>: column;</span><br><span class="line">  -ms-<span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  -ms-<span class="attribute">flex</span>-<span class="selector-tag">line</span>-pack: justify;</span><br><span class="line">  -webkit-<span class="attribute">align-content</span>: space-between;</span><br><span class="line">  <span class="attribute">align-content</span>: space-between;</span><br><span class="line">  <span class="attribute">border</span>:  <span class="number">1px</span> solid <span class="number">#e3e8f7</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-archives</span> <span class="selector-tag">ul</span><span class="selector-class">.card-archive-list</span>&gt;<span class="selector-class">.card-archive-list-item</span> <span class="selector-tag">a</span> <span class="selector-tag">span</span><span class="selector-pseudo">:first-child</span>,<span class="selector-id">#aside-content</span> <span class="selector-class">.card-categories</span> <span class="selector-tag">ul</span><span class="selector-class">.card-category-list</span>&gt;<span class="selector-class">.card-category-list-item</span> <span class="selector-tag">a</span> <span class="selector-tag">span</span><span class="selector-pseudo">:first-child</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: auto;</span><br><span class="line">  -webkit-<span class="attribute">box-flex</span>: inherit;</span><br><span class="line">  -moz-<span class="attribute">box-flex</span>: inherit;</span><br><span class="line">  -o-<span class="attribute">box-flex</span>: inherit;</span><br><span class="line">  <span class="attribute">box-flex</span>: inherit;</span><br><span class="line">  -webkit-<span class="attribute">flex</span>: inherit;</span><br><span class="line">  -ms-<span class="attribute">flex</span>: inherit;</span><br><span class="line">  <span class="attribute">flex</span>: inherit</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-archives</span> <span class="selector-tag">ul</span><span class="selector-class">.card-archive-list</span>,<span class="selector-id">#aside-content</span> <span class="selector-class">.card-categories</span> <span class="selector-tag">ul</span><span class="selector-class">.card-category-list</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">  <span class="attribute">display</span>: -moz-box;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">  <span class="attribute">display</span>: -ms-flexbox;</span><br><span class="line">  <span class="attribute">display</span>: box;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  -webkit-<span class="attribute">box-orient</span>: horizontal;</span><br><span class="line">  -moz-<span class="attribute">box-orient</span>: horizontal;</span><br><span class="line">  -o-<span class="attribute">box-orient</span>: horizontal;</span><br><span class="line">  -webkit-<span class="attribute">flex-direction</span>: row;</span><br><span class="line">  -ms-<span class="attribute">flex-direction</span>: row;</span><br><span class="line">  <span class="attribute">flex-direction</span>: row;</span><br><span class="line">  -webkit-<span class="attribute">box-pack</span>: justify;</span><br><span class="line">  -moz-<span class="attribute">box-pack</span>: justify;</span><br><span class="line">  -o-<span class="attribute">box-pack</span>: justify;</span><br><span class="line">  -ms-<span class="attribute">flex</span>-pack: justify;</span><br><span class="line">  -webkit-<span class="attribute">justify-content</span>: space-between;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">  -webkit-<span class="attribute">box-lines</span>: multiple;</span><br><span class="line">  -moz-<span class="attribute">box-lines</span>: multiple;</span><br><span class="line">  -o-<span class="attribute">box-lines</span>: multiple;</span><br><span class="line">  -webkit-<span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">  -ms-<span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/********** 搜索框美化 **********/</span></span><br><span class="line"><span class="selector-class">.local-search-box--input</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50px</span>; <span class="comment">/* 或者使用其他单位，例如 height: 2.5rem; */</span></span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>; <span class="comment">/* 文字大小 */</span></span><br><span class="line">  <span class="attribute">outline</span>: none; <span class="comment">/* 去掉聚焦时的默认边框 */</span></span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease; <span class="comment">/* 添加过渡效果，使变化更平滑 */</span></span><br><span class="line">&#125;</span><br><span class="line">hr &#123;</span><br><span class="line">  <span class="attribute">display</span>: none; <span class="comment">/* 隐藏搜索框下面的分割线 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/********** 明暗模式+搜索按钮（大小上下调节） **********/</span></span><br><span class="line"><span class="selector-class">.site-page</span><span class="selector-class">.social-icon</span><span class="selector-class">.search</span> <span class="selector-class">.faa-tada</span><span class="selector-class">.icon</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40px</span> <span class="meta">!important</span>;  <span class="comment">/* 高度和宽度 */</span> <span class="comment">/* 搜索按钮 */</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">40px</span> <span class="meta">!important</span>;   <span class="comment">/* 高度和宽度 */</span></span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">7px</span> <span class="meta">!important</span>;    <span class="comment">/* 向下移动10px */</span></span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">2px</span> <span class="meta">!important</span>;   <span class="comment">/* 向右移动10px */</span></span><br><span class="line">  <span class="comment">/* 或者 */</span></span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0px</span> <span class="meta">!important</span>; <span class="comment">/* 向上移动10px */</span></span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">8px</span> <span class="meta">!important</span>;  <span class="comment">/* 向左移动10px */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.sun_moon</span><span class="selector-class">.faa-parent</span><span class="selector-class">.animated-hover</span> <span class="selector-class">.faa-tada</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">32px</span> <span class="meta">!important</span>;  <span class="comment">/* 高度和宽度 */</span>  <span class="comment">/* 明暗模式按钮 */</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">32px</span> <span class="meta">!important</span>;   <span class="comment">/* 高度和宽度 */</span></span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">0px</span> <span class="meta">!important</span>;    <span class="comment">/* 向下移动10px */</span></span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">0px</span> <span class="meta">!important</span>;   <span class="comment">/* 向右移动10px */</span></span><br><span class="line">  <span class="comment">/* 或者 */</span></span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">1px</span> <span class="meta">!important</span>; <span class="comment">/* 向上移动10px */</span></span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">4px</span> <span class="meta">!important</span>;  <span class="comment">/* 向左移动10px */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#toggle-menu</span> <span class="selector-class">.site-page</span> <span class="selector-class">.site-page</span><span class="selector-class">.faa-parent</span><span class="selector-class">.animated-hover</span> <span class="selector-class">.faa-tada</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span> <span class="meta">!important</span>;  <span class="comment">/* 高度和宽度 */</span> <span class="comment">/* 手机端菜单按钮 */</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">30px</span> <span class="meta">!important</span>;   <span class="comment">/* 高度和宽度 */</span></span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">9px</span> <span class="meta">!important</span>;    <span class="comment">/* 向下移动10px */</span></span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">0px</span> <span class="meta">!important</span>;   <span class="comment">/* 向右移动10px */</span></span><br><span class="line">  <span class="comment">/* 或者 */</span></span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0px</span> <span class="meta">!important</span>; <span class="comment">/* 向上移动10px */</span></span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">0px</span> <span class="meta">!important</span>;  <span class="comment">/* 向左移动10px */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**************************** 页面美化 **********************************/</span></span><br></pre></td></tr></table></figure><ul><li><strong>📌 常驻导航栏</strong><ul><li>在 <code>_config.butterfly.yml</code> 文件中修改为：</li></ul></li></ul><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">nav:</span></span><br><span class="line">  <span class="params">fixed:</span> <span class="literal">true</span> <span class="comment"># 固定导航栏</span></span><br></pre></td></tr></table></figure><p><strong>🚀 清理并重启项目：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><hr><p><a id="cdn-optimization"></a></p><h2 id="🚀-十四、CDN加速配置">🚀 十四、CDN加速配置</h2><h3 id="✨-功能特点-14">✨ 功能特点</h3><p>通过CDN加速静态资源加载，提升网站访问速度，优化用户体验。</p><h3 id="🔧-配置方法">🔧 配置方法</h3><p>修改主题配置文件中的CDN设置：</p><ul><li>主题默认的CDN有：local、cdnjs、jsdelivr、unpkg等，但是速度偶读比较一般，要想提高部分标准静态资源的响应速度，走CDN是最好的办法，最好是在国内的CDN。</li></ul><p>参考教程：</p><ol><li><a href="https://blog.csdn.net/VariatioZbw/article/details/107822562">CSDN：Web前端常用CDN网站汇总</a></li><li><a href="https://blog.zhheo.com/p/790087d9.html">洪哥：Butterfly CDN链接更改指南，替换jsdelivr提升访问速度</a></li><li><a href="https://anzhiy.cn/posts/fe76.html">安知鱼：目前可用cdn整理</a></li></ol><p>修改教程，我分享一下我目前在用的方案：</p><p><strong>修改主题配置文件<code>_config.butterfly.yml</code>的<code>CDN</code>配置项：</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CDN</span></span><br><span class="line"><span class="comment"># Don&#x27;t modify the following settings unless you know how they work</span></span><br><span class="line"><span class="comment"># 非必要請不要修改</span></span><br><span class="line"><span class="attr">CDN:</span></span><br><span class="line">  <span class="comment"># The CDN provider of internal scripts (主題內部 js 的 cdn 配置)</span></span><br><span class="line">  <span class="comment"># option: local/jsdelivr/unpkg/cdnjs/custom</span></span><br><span class="line">  <span class="comment"># Dev version can only choose. ( dev版的主題只能設置為 local )</span></span><br><span class="line">  <span class="attr">internal_provider:</span> <span class="string">local</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># The CDN provider of third party scripts (第三方 js 的 cdn 配置)</span></span><br><span class="line">  <span class="comment"># option: local/jsdelivr/unpkg/cdnjs/custom</span></span><br><span class="line">  <span class="comment"># when set it to local, you need to install hexo-butterfly-extjs</span></span><br><span class="line">  <span class="attr">third_party_provider:</span> <span class="string">cdnjs</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Add version number to CDN, true or false</span></span><br><span class="line">  <span class="attr">version:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Custom format</span></span><br><span class="line">  <span class="comment"># For example: https://cdn.staticfile.org/$&#123;cdnjs_name&#125;/$&#123;version&#125;/$&#123;min_cdnjs_file&#125;</span></span><br><span class="line">  <span class="attr">custom_format:</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">option:</span></span><br><span class="line">    <span class="comment"># main_css:</span></span><br><span class="line">    <span class="comment"># main:</span></span><br><span class="line">    <span class="comment"># utils:</span></span><br><span class="line">    <span class="comment"># translate: https://cdn1.tianli0.top/npm/js-heo@1.0.6/translate/tw_cn.js</span></span><br><span class="line">    <span class="comment"># local_search:</span></span><br><span class="line">    <span class="comment"># algolia_js: </span></span><br><span class="line">    <span class="attr">algolia_search_v4:</span> <span class="string">https://cdn.staticfile.org/algoliasearch/4.14.3/algoliasearch-lite.umd.min.js</span></span><br><span class="line">    <span class="attr">instantsearch_v4:</span> <span class="string">https://cdn.staticfile.org/instantsearch.js/4.49.2/instantsearch.production.min.js</span></span><br><span class="line">    <span class="attr">pjax:</span> <span class="string">https://lib.baomitu.com/pjax/0.2.8/pjax.min.js</span></span><br><span class="line">    <span class="comment"># gitalk: https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.js</span></span><br><span class="line">    <span class="comment"># gitalk_css: https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.css</span></span><br><span class="line">    <span class="comment"># blueimp_md5:</span></span><br><span class="line">    <span class="comment"># valine: https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/valine/1.4.16/Valine.min.js</span></span><br><span class="line">    <span class="comment"># disqusjs: https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/disqusjs/1.3.0/disqus.js</span></span><br><span class="line">    <span class="comment"># disqusjs_css: https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/disqusjs/1.3.0/disqusjs.css</span></span><br><span class="line">    <span class="attr">twikoo:</span> <span class="string">https://cdn.staticfile.org/twikoo/1.6.8/twikoo.all.min.js</span></span><br><span class="line">    <span class="comment"># waline_js: https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/waline/1.5.4/Waline.min.js</span></span><br><span class="line">    <span class="comment"># waline_css:</span></span><br><span class="line">    <span class="attr">sharejs:</span> <span class="string">https://lib.baomitu.com/social-share.js/1.0.16/js/social-share.min.js</span></span><br><span class="line">    <span class="attr">sharejs_css:</span> <span class="string">https://lib.baomitu.com/social-share.js/1.0.16/css/share.min.css</span></span><br><span class="line">    <span class="comment"># mathjax: https://cdn.staticfile.org/mathjax/3.2.2/es5/mml-chtml.min.js</span></span><br><span class="line">    <span class="comment"># katex: https://lib.baomitu.com/KaTeX/latest/katex.min.css</span></span><br><span class="line">    <span class="comment"># katex_copytex:</span></span><br><span class="line">    <span class="comment"># mermaid:</span></span><br><span class="line">    <span class="comment"># canvas_ribbon:</span></span><br><span class="line">    <span class="comment"># canvas_fluttering_ribbon:</span></span><br><span class="line">    <span class="comment"># canvas_nest:</span></span><br><span class="line">    <span class="attr">lazyload:</span> <span class="string">https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vanilla-lazyload/17.3.1/lazyload.iife.min.js</span></span><br><span class="line">    <span class="attr">instantpage:</span> <span class="string">https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js</span></span><br><span class="line">    <span class="attr">typed:</span> <span class="string">https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/typed.js/2.0.12/typed.min.js</span></span><br><span class="line">    <span class="comment"># pangu:</span></span><br><span class="line">    <span class="attr">fancybox_css_v4:</span> <span class="string">https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.min.css</span></span><br><span class="line">    <span class="attr">fancybox_v4:</span> <span class="string">https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.umd.min.js</span></span><br><span class="line">    <span class="comment"># medium_zoom: https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/medium-zoom/1.0.6/medium-zoom.min.js</span></span><br><span class="line">    <span class="comment"># snackbar_css: https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/node-snackbar/0.1.16/snackbar.min.css</span></span><br><span class="line">    <span class="comment"># snackbar: https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/node-snackbar/0.1.16/snackbar.min.js</span></span><br><span class="line">    <span class="comment"># activate_power_mode:</span></span><br><span class="line">    <span class="comment"># fireworks:</span></span><br><span class="line">    <span class="comment"># click_heart:</span></span><br><span class="line">    <span class="comment"># ClickShowText:</span></span><br><span class="line">    <span class="attr">fontawesomeV6:</span> <span class="string">https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css</span></span><br><span class="line">    <span class="comment"># flickr_justified_gallery_js: https://cdn.staticfile.org/flickr-justified-gallery/2.1.2/fjGallery.min.js</span></span><br><span class="line">    <span class="comment"># flickr_justified_gallery_css: https://cdn.staticfile.org/flickr-justified-gallery/2.1.2/fjGallery.min.css</span></span><br><span class="line">    <span class="attr">aplayer_css:</span> <span class="string">https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.css</span></span><br><span class="line">    <span class="attr">aplayer_js:</span> <span class="string">https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.js</span></span><br><span class="line">    <span class="attr">meting_js:</span> <span class="string">https://cdn1.tianli0.top/npm/js-heo@1.0.12/metingjs/Meting.min.js</span></span><br><span class="line">    <span class="comment"># prismjs_js: https://cdn1.tianli0.top/npm/prismjs@1.1.0/prism.js</span></span><br><span class="line">    <span class="comment"># prismjs_lineNumber_js: https://cdn1.tianli0.top/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js</span></span><br><span class="line">    <span class="comment"># prismjs_autoloader: https://cdn1.tianli0.top/npm/prismjs/plugins/autoloader/prism-autoloader.min.js</span></span><br></pre></td></tr></table></figure><p>修改完成后可以 <code>f12</code>-&gt;<code>源代码</code>-&gt;<code>网页</code> 看看是否已经加载到对应的资源</p><hr><p><a id="hanging-cat"></a></p><h2 id="😺-十五、挂绳小猫咪特效">😺 十五、挂绳小猫咪特效</h2><h3 id="✨-功能特点-15">✨ 功能特点</h3><p>添加可爱的小猫咪挂绳特效，随页面滚动而动，增加网站趣味性。</p><h3 id="🔧-实现步骤-5">🔧 实现步骤</h3><h4 id="1-➕-添加HTML结构">1. ➕ 添加HTML结构</h4><ul><li>制作一个盛放内容的盒子，在<code>[BlogRoot]/node_modules/hexo-theme-butterfly/layout/includes/head.pug</code>(如果是<code>git clone</code> 安装在<code>[BlogRoot]/themes/butterfly/layout/includes/head.pug</code>)最后一行加入如下代码：</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//- 挂绳小猫咪</span><br><span class="line">#myscoll</span><br></pre></td></tr></table></figure><h4 id="2-➕-创建JavaScript逻辑">2. ➕ 创建JavaScript逻辑</h4><ol start="5"><li>其实随便放在哪里都行，只要能加载出来就行</li><li>在<code>[BlogRoot]/node_modules/hexo-theme-butterfly/source/js</code>文件夹下新建一个<code>cat.js</code>，将以下代码复制到文件中。</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientWidth</span> &gt; <span class="number">992</span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">getBasicInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">/* 窗口高度 */</span></span><br><span class="line">        <span class="keyword">var</span> <span class="title class_">ViewH</span> = $(<span class="variable language_">window</span>).<span class="title function_">height</span>();</span><br><span class="line">        <span class="comment">/* document高度 */</span></span><br><span class="line">        <span class="keyword">var</span> <span class="title class_">DocH</span> = $(<span class="string">&quot;body&quot;</span>)[<span class="number">0</span>].<span class="property">scrollHeight</span>;</span><br><span class="line">        <span class="comment">/* 滚动的高度 */</span></span><br><span class="line">        <span class="keyword">var</span> <span class="title class_">ScrollTop</span> = $(<span class="variable language_">window</span>).<span class="title function_">scrollTop</span>();</span><br><span class="line">        <span class="comment">/* 可滚动的高度 */</span></span><br><span class="line">        <span class="keyword">var</span> <span class="variable constant_">S_V</span> = <span class="title class_">DocH</span> - <span class="title class_">ViewH</span>;</span><br><span class="line">        <span class="keyword">var</span> <span class="title class_">Band</span>_H = <span class="title class_">ScrollTop</span> / (<span class="title class_">DocH</span> - <span class="title class_">ViewH</span>) * <span class="number">100</span>;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="title class_">ViewH</span>: <span class="title class_">ViewH</span>,</span><br><span class="line">            <span class="title class_">DocH</span>: <span class="title class_">DocH</span>,</span><br><span class="line">            <span class="title class_">ScrollTop</span>: <span class="title class_">ScrollTop</span>,</span><br><span class="line">            <span class="title class_">Band</span><span class="attr">_H</span>: <span class="title class_">Band</span>_H,</span><br><span class="line">            <span class="attr">S_V</span>: <span class="variable constant_">S_V</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">show</span>(<span class="params">basicInfo</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (basicInfo.<span class="property">ScrollTop</span> &gt; <span class="number">0.001</span>) &#123;</span><br><span class="line">            $(<span class="string">&quot;.neko&quot;</span>).<span class="title function_">css</span>(<span class="string">&#x27;display&#x27;</span>, <span class="string">&#x27;block&#x27;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $(<span class="string">&quot;.neko&quot;</span>).<span class="title function_">css</span>(<span class="string">&#x27;display&#x27;</span>, <span class="string">&#x27;none&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    (<span class="keyword">function</span> (<span class="params">$</span>) &#123;</span><br><span class="line">        $.fn.<span class="property">nekoScroll</span> = <span class="keyword">function</span> (<span class="params">option</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> defaultSetting = &#123;</span><br><span class="line">                <span class="attr">top</span>: <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">                <span class="attr">scroWidth</span>: <span class="number">6</span> + <span class="string">&#x27;px&#x27;</span>,</span><br><span class="line">                <span class="attr">z_index</span>: <span class="number">9999</span>,</span><br><span class="line">                <span class="attr">zoom</span>: <span class="number">0.9</span>,</span><br><span class="line">                <span class="attr">borderRadius</span>: <span class="number">5</span> + <span class="string">&#x27;px&#x27;</span>,</span><br><span class="line">                <span class="attr">right</span>: <span class="number">60</span> + <span class="string">&#x27;px&#x27;</span>,</span><br><span class="line">                <span class="comment">// 这里可以换为你喜欢的图片，例如我就换为了雪人，但是要抠图</span></span><br><span class="line">                <span class="attr">nekoImg</span>: <span class="string">&quot;https://bu.dusays.com/2022/07/20/62d812db74be9.png&quot;</span>,</span><br><span class="line">                <span class="attr">hoverMsg</span>: <span class="string">&quot;喵喵喵~&quot;</span>,</span><br><span class="line">                <span class="attr">color</span>: <span class="string">&quot;#6f42c1&quot;</span>,</span><br><span class="line">                <span class="attr">during</span>: <span class="number">500</span>,</span><br><span class="line">                <span class="attr">blog_body</span>: <span class="string">&quot;body&quot;</span>,</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">var</span> setting = $.<span class="title function_">extend</span>(defaultSetting, option);</span><br><span class="line">            <span class="keyword">var</span> getThis = <span class="variable language_">this</span>.<span class="title function_">prop</span>(<span class="string">&quot;className&quot;</span>) !== <span class="string">&quot;&quot;</span> ? <span class="string">&quot;.&quot;</span> + <span class="variable language_">this</span>.<span class="title function_">prop</span>(<span class="string">&quot;className&quot;</span>) : <span class="variable language_">this</span>.<span class="title function_">prop</span>(<span class="string">&quot;id&quot;</span>) !== <span class="string">&quot;&quot;</span> ? <span class="string">&quot;#&quot;</span> +</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">prop</span>(<span class="string">&quot;id&quot;</span>) : <span class="variable language_">this</span>.<span class="title function_">prop</span>(<span class="string">&quot;nodeName&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> ($(<span class="string">&quot;.neko&quot;</span>).<span class="property">length</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">after</span>(<span class="string">&quot;&lt;div class=\&quot;neko\&quot; id=&quot;</span> + setting.<span class="property">nekoname</span> + <span class="string">&quot; data-msg=\&quot;&quot;</span> + setting.<span class="property">hoverMsg</span> + <span class="string">&quot;\&quot;&gt;&lt;/div&gt;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">let</span> basicInfo = <span class="title function_">getBasicInfo</span>();</span><br><span class="line">            $(getThis)</span><br><span class="line">                .<span class="title function_">css</span>(&#123;</span><br><span class="line">                    <span class="string">&#x27;position&#x27;</span>: <span class="string">&#x27;fixed&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;width&#x27;</span>: setting.<span class="property">scroWidth</span>,</span><br><span class="line">                    <span class="string">&#x27;top&#x27;</span>: setting.<span class="property">top</span>,</span><br><span class="line">                    <span class="string">&#x27;height&#x27;</span>: basicInfo.<span class="property">Band_H</span> * setting.<span class="property">zoom</span> * basicInfo.<span class="property">ViewH</span> * <span class="number">0.01</span> + <span class="string">&#x27;px&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;z-index&#x27;</span>: setting.<span class="property">z_index</span>,</span><br><span class="line">                    <span class="string">&#x27;background-color&#x27;</span>: setting.<span class="property">bgcolor</span>,</span><br><span class="line">                    <span class="string">&quot;border-radius&quot;</span>: setting.<span class="property">borderRadius</span>,</span><br><span class="line">                    <span class="string">&#x27;right&#x27;</span>: setting.<span class="property">right</span>,</span><br><span class="line">                    <span class="string">&#x27;background-image&#x27;</span>: <span class="string">&#x27;url(&#x27;</span> + setting.<span class="property">scImg</span> + <span class="string">&#x27;)&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;background-image&#x27;</span>: <span class="string">&#x27;-webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.1) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.1) 50%, rgba(255, 255, 255, 0.1) 75%, transparent 75%, transparent)&#x27;</span>, <span class="string">&#x27;border-radius&#x27;</span>: <span class="string">&#x27;2em&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;background-size&#x27;</span>: <span class="string">&#x27;contain&#x27;</span></span><br><span class="line">                &#125;);</span><br><span class="line">            $(<span class="string">&quot;#&quot;</span> + setting.<span class="property">nekoname</span>)</span><br><span class="line">                .<span class="title function_">css</span>(&#123;</span><br><span class="line">                    <span class="string">&#x27;position&#x27;</span>: <span class="string">&#x27;fixed&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;top&#x27;</span>: basicInfo.<span class="property">Band_H</span> * setting.<span class="property">zoom</span> * basicInfo.<span class="property">ViewH</span> * <span class="number">0.01</span> - <span class="number">50</span> + <span class="string">&#x27;px&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;z-index&#x27;</span>: setting.<span class="property">z_index</span> * <span class="number">10</span>,</span><br><span class="line">                    <span class="string">&#x27;right&#x27;</span>: setting.<span class="property">right</span>,</span><br><span class="line">                    <span class="string">&#x27;background-image&#x27;</span>: <span class="string">&#x27;url(&#x27;</span> + setting.<span class="property">nekoImg</span> + <span class="string">&#x27;)&#x27;</span>,</span><br><span class="line">                &#125;);</span><br><span class="line">            <span class="title function_">show</span>(<span class="title function_">getBasicInfo</span>());</span><br><span class="line">            $(<span class="variable language_">window</span>)</span><br><span class="line">                .<span class="title function_">scroll</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="keyword">let</span> basicInfo = <span class="title function_">getBasicInfo</span>();</span><br><span class="line">                    <span class="title function_">show</span>(basicInfo);</span><br><span class="line">                    $(getThis)</span><br><span class="line">                        .<span class="title function_">css</span>(&#123;</span><br><span class="line">                            <span class="string">&#x27;position&#x27;</span>: <span class="string">&#x27;fixed&#x27;</span>,</span><br><span class="line">                            <span class="string">&#x27;width&#x27;</span>: setting.<span class="property">scroWidth</span>,</span><br><span class="line">                            <span class="string">&#x27;top&#x27;</span>: setting.<span class="property">top</span>,</span><br><span class="line">                            <span class="string">&#x27;height&#x27;</span>: basicInfo.<span class="property">Band_H</span> * setting.<span class="property">zoom</span> * basicInfo.<span class="property">ViewH</span> * <span class="number">0.01</span> + <span class="string">&#x27;px&#x27;</span>,</span><br><span class="line">                            <span class="string">&#x27;z-index&#x27;</span>: setting.<span class="property">z_index</span>,</span><br><span class="line">                            <span class="string">&#x27;background-color&#x27;</span>: setting.<span class="property">bgcolor</span>,</span><br><span class="line">                            <span class="string">&quot;border-radius&quot;</span>: setting.<span class="property">borderRadius</span>,</span><br><span class="line">                            <span class="string">&#x27;right&#x27;</span>: setting.<span class="property">right</span>,</span><br><span class="line">                            <span class="string">&#x27;background-image&#x27;</span>: <span class="string">&#x27;url(&#x27;</span> + setting.<span class="property">scImg</span> + <span class="string">&#x27;)&#x27;</span>,</span><br><span class="line">                            <span class="string">&#x27;background-image&#x27;</span>: <span class="string">&#x27;-webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.1) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.1) 50%, rgba(255, 255, 255, 0.1) 75%, transparent 75%, transparent)&#x27;</span>, <span class="string">&#x27;border-radius&#x27;</span>: <span class="string">&#x27;2em&#x27;</span>,</span><br><span class="line">                            <span class="string">&#x27;background-size&#x27;</span>: <span class="string">&#x27;contain&#x27;</span></span><br><span class="line">                        &#125;);</span><br><span class="line">                    $(<span class="string">&quot;#&quot;</span> + setting.<span class="property">nekoname</span>)</span><br><span class="line">                        .<span class="title function_">css</span>(&#123;</span><br><span class="line">                            <span class="string">&#x27;position&#x27;</span>: <span class="string">&#x27;fixed&#x27;</span>,</span><br><span class="line">                            <span class="string">&#x27;top&#x27;</span>: basicInfo.<span class="property">Band_H</span> * setting.<span class="property">zoom</span> * basicInfo.<span class="property">ViewH</span> * <span class="number">0.01</span> - <span class="number">50</span> + <span class="string">&#x27;px&#x27;</span>,</span><br><span class="line">                            <span class="string">&#x27;z-index&#x27;</span>: setting.<span class="property">z_index</span> * <span class="number">10</span>,</span><br><span class="line">                            <span class="string">&#x27;right&#x27;</span>: setting.<span class="property">right</span>,</span><br><span class="line">                            <span class="string">&#x27;background-image&#x27;</span>: <span class="string">&#x27;url(&#x27;</span> + setting.<span class="property">nekoImg</span> + <span class="string">&#x27;)&#x27;</span>,</span><br><span class="line">                        &#125;);</span><br><span class="line">                    <span class="keyword">if</span> (basicInfo.<span class="property">ScrollTop</span> == basicInfo.<span class="property">S_V</span>) &#123;</span><br><span class="line">                        $(<span class="string">&quot;#&quot;</span> + setting.<span class="property">nekoname</span>)</span><br><span class="line">                            .<span class="title function_">addClass</span>(<span class="string">&quot;showMsg&quot;</span>)</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        $(<span class="string">&quot;#&quot;</span> + setting.<span class="property">nekoname</span>)</span><br><span class="line">                            .<span class="title function_">removeClass</span>(<span class="string">&quot;showMsg&quot;</span>);</span><br><span class="line">                        $(<span class="string">&quot;#&quot;</span> + setting.<span class="property">nekoname</span>)</span><br><span class="line">                            .<span class="title function_">attr</span>(<span class="string">&quot;data-msg&quot;</span>, setting.<span class="property">hoverMsg</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">                btf.<span class="title function_">scrollToDest</span>(<span class="number">0</span>, <span class="number">500</span>)</span><br><span class="line">            &#125;);</span><br><span class="line">            $(<span class="string">&quot;#&quot;</span> + setting.<span class="property">nekoname</span>)</span><br><span class="line">                .<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                    btf.<span class="title function_">scrollToDest</span>(<span class="number">0</span>, <span class="number">500</span>)</span><br><span class="line">                &#125;);</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)(jQuery);</span><br><span class="line"></span><br><span class="line">    $(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//部分自定义</span></span><br><span class="line">        $(<span class="string">&quot;#myscoll&quot;</span>).<span class="title function_">nekoScroll</span>(&#123;</span><br><span class="line">            <span class="attr">bgcolor</span>: <span class="string">&#x27;rgb(0 0 0 / .5)&#x27;</span>, <span class="comment">//背景颜色，没有绳子背景图片时有效</span></span><br><span class="line">            <span class="attr">borderRadius</span>: <span class="string">&#x27;2em&#x27;</span>,</span><br><span class="line">            <span class="attr">zoom</span>: <span class="number">0.9</span></span><br><span class="line">        &#125;</span><br><span class="line">        );</span><br><span class="line">        <span class="comment">//自定义（去掉以下注释，并注释掉其他的查看效果）</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        $(&quot;#myscoll&quot;).nekoScroll(&#123;</span></span><br><span class="line"><span class="comment">            nekoname:&#x27;neko1&#x27;, //nekoname，相当于id</span></span><br><span class="line"><span class="comment">            nekoImg:&#x27;img/猫咪.png&#x27;, //neko的背景图片</span></span><br><span class="line"><span class="comment">            scImg:&quot;img/绳1.png&quot;, //绳子的背景图片</span></span><br><span class="line"><span class="comment">            bgcolor:&#x27;#1e90ff&#x27;, //背景颜色，没有绳子背景图片时有效</span></span><br><span class="line"><span class="comment">            zoom:0.9, //绳子长度的缩放值</span></span><br><span class="line"><span class="comment">            hoverMsg:&#x27;你好~喵&#x27;, //鼠标浮动到neko上方的对话框信息</span></span><br><span class="line"><span class="comment">            right:&#x27;100px&#x27;, //距离页面右边的距离</span></span><br><span class="line"><span class="comment">            fontFamily:&#x27;楷体&#x27;, //对话框字体</span></span><br><span class="line"><span class="comment">            fontSize:&#x27;14px&#x27;, //对话框字体的大小</span></span><br><span class="line"><span class="comment">            color:&#x27;#1e90ff&#x27;, //对话框字体颜色</span></span><br><span class="line"><span class="comment">            scroWidth:&#x27;8px&#x27;, //绳子的宽度</span></span><br><span class="line"><span class="comment">            z_index:100, //不用解释了吧</span></span><br><span class="line"><span class="comment">            during:1200, //从顶部到底部滑动的时长</span></span><br><span class="line"><span class="comment">        &#125;);</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-➕-添加样式设计">3. ➕ 添加样式设计</h4><ul><li>在<code>[BlogRoot]/node_modules/hexo-theme-butterfly/source/css</code>文件夹下新建一个<code>cat.css</code>，将以下代码复制到文件中。当然你也可以选择不新建 css 文件，复制代码到<code>custom.css</code>也行，总之有地方引入就行。</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-tag">body</span>::-webkit-scrollbar &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.neko</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">64px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">64px</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;https://bu.dusays.com/2022/07/20/62d812db74be9.png&quot;</span>);</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">32px</span>;</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="attribute">background-size</span>: contain;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">50%</span>);</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">font-family</span>: tzy;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">600</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#6f42c1</span>;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.neko</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;https://bu.dusays.com/2022/07/20/62d812d95e6f5.png&quot;</span>);</span><br><span class="line">    <span class="attribute">background-size</span>: contain;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">9999</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">115%</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.neko</span><span class="selector-class">.showMsg</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="built_in">attr</span>(data-msg);</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.neko</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="built_in">attr</span>(data-msg);</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.neko</span><span class="selector-class">.fontColor</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @description: 滚动条样式  跟猫二选一</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">992px</span>) &#123;</span><br><span class="line">    ::-webkit-scrollbar &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">8px</span> <span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">8px</span> <span class="meta">!important</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ::-webkit-scrollbar-track &#123;</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">2em</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ::-webkit-scrollbar-thumb &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">255</span> <span class="number">255</span> <span class="number">255</span> / .<span class="number">3</span>);</span><br><span class="line">        <span class="attribute">background-image</span>: <span class="built_in">-webkit-linear-gradient</span>(<span class="number">45deg</span>, <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.1</span>) <span class="number">25%</span>, transparent <span class="number">25%</span>, transparent <span class="number">50%</span>, <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.1</span>) <span class="number">50%</span>, <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.1</span>) <span class="number">75%</span>, transparent <span class="number">75%</span>, transparent);</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">2em</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ::-webkit-scrollbar-corner &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: transparent</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在主题配置文件<code>_config.butterfly.yml</code>中引入<code>cat.js</code>和<code>cat.css</code>，当然还有在bottom的最前面引入<code>jQuery</code>，因为<code>cat.js</code>的语法依赖<code>jQuery</code>。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/cat.css&quot;&gt;</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">defer</span> <span class="string">src=&quot;https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">defer</span> <span class="string">data-pjax</span> <span class="string">src=&quot;/js/cat.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><h4 id="4-🚀-清理并重启项目：-2">4. 🚀 清理并重启项目：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><hr><p><a id="disable-f12"></a></p><h2 id="🛡️-十六、禁用F12保护">🛡️ 十六、禁用F12保护</h2><h3 id="✨-功能特点-16">✨ 功能特点</h3><p>添加简单的保护措施，防止用户通过F12查看源码，增强内容安全性。</p><h3 id="🔧-实现方法-6">🔧 实现方法</h3><p><strong>添加保护代码到模板文件：</strong></p><ul><li>修改<code>[BlogRoot]/node_modules/hexo-theme-butterfly/layout/includes/layout.pug</code>，根据图中位置添加以下 pug 代码（跟 <code>head</code>、<code>body</code>同级）</li></ul><p><img src="https://file.meimolihan.eu.org/screenshot/f12.jpg" alt=""></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">script.</span><br><span class="line">  ((<span class="keyword">function</span>(<span class="params"></span>) &#123;<span class="keyword">var</span> callbacks = [],timeLimit = <span class="number">50</span>,open = <span class="literal">false</span>;<span class="built_in">setInterval</span>(loop, <span class="number">1</span>);<span class="keyword">return</span> &#123;<span class="attr">addListener</span>: <span class="keyword">function</span>(<span class="params">fn</span>) &#123;callbacks.<span class="title function_">push</span>(fn);&#125;,<span class="attr">cancleListenr</span>: <span class="keyword">function</span>(<span class="params">fn</span>) &#123;callbacks = callbacks.<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">v</span>) &#123;<span class="keyword">return</span> v !== fn;&#125;);&#125;&#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">loop</span>(<span class="params"></span>) &#123;<span class="keyword">var</span> startTime = <span class="keyword">new</span> <span class="title class_">Date</span>();<span class="keyword">debugger</span>;<span class="keyword">if</span> (<span class="keyword">new</span> <span class="title class_">Date</span>() - startTime &gt; timeLimit) &#123;<span class="keyword">if</span> (!open) &#123;callbacks.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">fn</span>) &#123;fn.<span class="title function_">call</span>(<span class="literal">null</span>);&#125;);&#125;open = <span class="literal">true</span>;<span class="variable language_">window</span>.<span class="title function_">stop</span>();<span class="title function_">alert</span>(<span class="string">&#x27;你真坏，请关闭控制台！&#x27;</span>);<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">innerHTML</span> = <span class="string">&quot;&quot;</span>;&#125; <span class="keyword">else</span> &#123;open = <span class="literal">false</span>;&#125;&#125;&#125;)()).<span class="title function_">addListener</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;<span class="variable language_">window</span>.<span class="property">location</span>.<span class="title function_">reload</span>();&#125;);</span><br><span class="line">script.</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">toDevtools</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> num = <span class="number">0</span>; </span><br><span class="line">    <span class="keyword">let</span> devtools = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">    devtools.<span class="property">toString</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      num++;</span><br><span class="line">      <span class="keyword">if</span> (num &gt; <span class="number">1</span>) &#123;</span><br><span class="line">          <span class="title function_">alert</span>(<span class="string">&#x27;你真坏，请关闭控制台！&#x27;</span>)</span><br><span class="line">          <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">&quot;about:blank&quot;</span></span><br><span class="line">          <span class="title function_">blast</span>();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&#x27;</span>, devtools);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">toDevtools</span>();</span><br></pre></td></tr></table></figure><ul><li>将以下代码复制到自定义的<code>f12.js</code>，随后在主题配置文件的<code>inject</code>-&gt;<code>bottom</code>中引入该js文件</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">onkeydown</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">123</span> == e.<span class="property">keyCode</span> || (e.<span class="property">ctrlKey</span> &amp;&amp; e.<span class="property">shiftKey</span> &amp;&amp; (<span class="number">74</span> === e.<span class="property">keyCode</span> || <span class="number">73</span> === e.<span class="property">keyCode</span> || <span class="number">67</span> === e.<span class="property">keyCode</span>)) || (e.<span class="property">ctrlKey</span> &amp;&amp; <span class="number">85</span> === e.<span class="property">keyCode</span>)) <span class="keyword">return</span> btf.<span class="title function_">snackbarShow</span>(<span class="string">&quot;你真坏，不能打开控制台喔!&quot;</span>), event.<span class="property">keyCode</span> = <span class="number">0</span>, event.<span class="property">returnValue</span> = !<span class="number">1</span>, !<span class="number">1</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>🚀 清理并重启项目：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><p>**注意：**如果自己调试阶段，可注释第一步和第二步中的代码，再进行编译，就可以打开控制台了。部署时放开注释，编译好再丢上去就OK了</p><hr><p><a id="sharingan-loader"></a></p><h2 id="👁️-十七、写轮眼加载动画">👁️ 十七、写轮眼加载动画</h2><h3 id="✨-功能特点-17">✨ 功能特点</h3><p>使用写轮眼动画作为页面加载指示器，替代默认加载动画，增加个性化元素。</p><h3 id="🔧-实现步骤-6">🔧 实现步骤</h3><h4 id="1-➕-创建加载动画组件">1. ➕ 创建加载动画组件</h4><ul><li>创建<code>博客根目录\themes\butterfly\layout\includes\custom\sharingan.pug</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br></pre></td><td class="code"><pre><span class="line">div.loading</span><br><span class="line">  div.bg</span><br><span class="line">  div.scale</span><br><span class="line">    div.sharingon</span><br><span class="line">      div.ring</span><br><span class="line">        div.to</span><br><span class="line">        div.to</span><br><span class="line">        div.to</span><br><span class="line">        div.circle</span><br><span class="line"></span><br><span class="line">style.</span><br><span class="line">  [data-scheme=&quot;light&quot;] &#123;</span><br><span class="line">    .loading &#123;</span><br><span class="line">      background-color: rgba(245, 245, 250, 0.8);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  [data-scheme=&quot;dark&quot;] &#123;</span><br><span class="line">    .loading &#123;</span><br><span class="line">      background-color: rgba(48, 48, 48, 0.8);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .loading &#123;</span><br><span class="line">    position: fixed;</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: center;  </span><br><span class="line">    align-items: center;</span><br><span class="line">    top: 0;</span><br><span class="line">    left: 0;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 100%;</span><br><span class="line">    z-index: 99;</span><br><span class="line">    zoom: 3.0;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .sharingon &#123;</span><br><span class="line">    position: relative;</span><br><span class="line">    width: 6em;</span><br><span class="line">    height: 6em;</span><br><span class="line">    background-color: red;</span><br><span class="line">    border: 6px solid black;</span><br><span class="line">    animation: rot 1s ease-in-out infinite;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .animated-stop &#123;</span><br><span class="line">    animation-play-state: paused;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .fadeout &#123;</span><br><span class="line">    animation: fadeOut 1.5s forwards;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .scaleAndFadeout &#123;</span><br><span class="line">    animation: scaleAndFadeOut 1.5s forwards</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .ring &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    content: &quot;&quot;;</span><br><span class="line">    left: 50%;</span><br><span class="line">    top: 50%;</span><br><span class="line">    width: 3.5em;</span><br><span class="line">    height: 3.5em;</span><br><span class="line">    border: 4px solid rgb(110, 13 ,13 ,0.5);</span><br><span class="line">    transform: translate(-50%,-50%);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .sharingon, .ring, .to,.circle &#123;</span><br><span class="line">    border-radius: 50%;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .to,.circle &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    content: &quot;&quot;;</span><br><span class="line">    width: 0.9em;</span><br><span class="line">    height: 0.9em;</span><br><span class="line">    background-color: black;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .to:nth-child(1) &#123;</span><br><span class="line">    top: -0.5em;</span><br><span class="line">    left: 50%;</span><br><span class="line">    transform: translate(-40%);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .to::before &#123;</span><br><span class="line">    content: &quot;&quot;;</span><br><span class="line">    position: absolute;</span><br><span class="line">    top: -0.5em;</span><br><span class="line">    right: -0.2em;</span><br><span class="line">    width: 1.1em;</span><br><span class="line">    height: 0.9em;</span><br><span class="line">    box-sizing: border-box;</span><br><span class="line">    border-left: 16px solid black;</span><br><span class="line">    border-radius: 100% 0 0;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .to:nth-child(2) &#123;</span><br><span class="line">    bottom: 0.5em;</span><br><span class="line">    left: -0.35em;</span><br><span class="line">    transform: rotate(-120deg);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .to:nth-child(3) &#123;</span><br><span class="line">    bottom: 0.5em;</span><br><span class="line">    right: -0.35em;</span><br><span class="line">    transform: rotate(120deg);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .circle &#123;</span><br><span class="line">    top: 50%;</span><br><span class="line">    left: 50%;</span><br><span class="line">    transform: translate(-50%,-50%);</span><br><span class="line">    box-shadow: 0 0 20px 1px;</span><br><span class="line">    width: 1em;</span><br><span class="line">    height: 1em;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @keyframes rot &#123;</span><br><span class="line">    0% &#123;</span><br><span class="line">      transform: rotate(0deg);</span><br><span class="line">    &#125;</span><br><span class="line">    100% &#123;</span><br><span class="line">      transform: rotate(360deg);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @keyframes scaleAndFadeOut &#123;</span><br><span class="line">    0% &#123;</span><br><span class="line">      transform: scale(1);</span><br><span class="line">      opacity: 1;</span><br><span class="line">    &#125;</span><br><span class="line">    50% &#123;</span><br><span class="line">      transform: scale(1.5);  </span><br><span class="line">      opacity: 1;</span><br><span class="line">    &#125;</span><br><span class="line">    100% &#123;</span><br><span class="line">      transform: scale(1.5);  </span><br><span class="line">      opacity: 0;  </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @keyframes fadeOut &#123;</span><br><span class="line">    0% &#123;</span><br><span class="line">      opacity: 1;</span><br><span class="line">    &#125;</span><br><span class="line">    100% &#123;</span><br><span class="line">      opacity: 0;  </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">script.</span><br><span class="line">  function initLoading() &#123;</span><br><span class="line">    const startTime = Date.now();</span><br><span class="line">    let loading = document.querySelector(&quot;.loading&quot;);</span><br><span class="line">    document.addEventListener(&#x27;DOMContentLoaded&#x27;, function() &#123;</span><br><span class="line">      const timeDelay = Date.now() - startTime;</span><br><span class="line">      </span><br><span class="line">      setTimeout(() =&gt; &#123;</span><br><span class="line">        fadeOut();</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">          loading.style.display = &quot;none&quot;;</span><br><span class="line">        &#125;, 1500)</span><br><span class="line">      &#125;, timeDelay &gt; 1050 ? 0 : 1050 - timeDelay)</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function fadeOut() &#123;</span><br><span class="line">    let sharingon = document.querySelector(&quot;.sharingon&quot;);</span><br><span class="line">    sharingon.classList.add(&quot;animated-stop&quot;);</span><br><span class="line">    </span><br><span class="line">    let scale = document.querySelector(&quot;.scale&quot;);</span><br><span class="line">    scale.classList.add(&quot;scaleAndFadeout&quot;);</span><br><span class="line">    </span><br><span class="line">    let loading = document.querySelector(&quot;.loading&quot;);</span><br><span class="line">    loading.classList.add(&quot;fadeout&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  initLoading();</span><br></pre></td></tr></table></figure><h4 id="2-➕-引用-sharingan-pug">2. ➕ 引用 <code>sharingan.pug</code></h4><ul><li>修改<code>博客根目录\themes\butterfly\layout\includes\head.pug</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">include ./custom/sharingan.pug</span><br></pre></td></tr></table></figure><h4 id="3-💫-配置加载动画替换">3. 💫 配置加载动画替换</h4><ul><li>修改<code>_config.butterfly.yml</code></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 加载动画</span></span><br><span class="line"><span class="attr">preloader:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span>  <span class="comment"># 关闭加载动画</span></span><br><span class="line">  <span class="attr">source:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="4-🚀-清理并重启项目：-3">4. 🚀 清理并重启项目：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><hr><p><a id="footer-badge-timer"></a></p><h2 id="⏰-十八、页脚徽标和计时器">⏰ 十八、页脚徽标和计时器</h2><h3 id="✨-功能特点-18">✨ 功能特点</h3><p>在页脚添加网站信息徽标和运行时间计时器，展示技术栈和网站运行状态。</p><h3 id="🔧-安装插件-3">🔧 安装插件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-footer-beautify --save</span><br></pre></td></tr></table></figure><h3 id="⚙️-配置示例-3">⚙️ 配置示例</h3><ul><li>在主题配置文件<code>_config.butterfly.yml</code>中添加配置项</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment"># footer_beautify</span></span><br><span class="line"><span class="comment"># 页脚计时器：[Native JS Timer](https://akilar.top/posts/b941af/)</span></span><br><span class="line"><span class="comment"># 页脚徽标：[Add Github Badge](https://akilar.top/posts/e87ad7f8/)</span></span><br><span class="line"><span class="attr">footer_beautify:</span></span><br><span class="line">  <span class="attr">enable:</span></span><br><span class="line">    <span class="attr">timer:</span> <span class="literal">true</span> <span class="comment"># 计时器开关</span></span><br><span class="line">    <span class="attr">bdage:</span> <span class="literal">true</span> <span class="comment"># 徽标开关</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">5</span> <span class="comment">#过滤器优先权</span></span><br><span class="line">  <span class="attr">enable_page:</span> <span class="string">all</span> <span class="comment"># 应用页面</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="comment"># - /posts/</span></span><br><span class="line">    <span class="comment"># - /about/</span></span><br><span class="line">  <span class="attr">layout:</span> <span class="comment"># 挂载容器类型</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">id</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">footer-wrap</span></span><br><span class="line">    <span class="attr">index:</span> <span class="number">0</span></span><br><span class="line">  <span class="comment"># 计时器部分配置项</span></span><br><span class="line">  <span class="attr">runtime_js:</span> <span class="string">/js/runtime.js</span></span><br><span class="line">  <span class="attr">runtime_css:</span> <span class="string">/css/runtime.css</span></span><br><span class="line">  <span class="comment"># 徽标部分配置项</span></span><br><span class="line">  <span class="attr">swiperpara:</span> <span class="number">0</span> <span class="comment">#若非0，则开启轮播功能，每行徽标个数</span></span><br><span class="line">  <span class="attr">bdageitem:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://hexo.io/</span> <span class="comment">#徽标指向网站链接</span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo</span> <span class="comment">#徽标API</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">博客框架为Hexo_v7.1.0</span> <span class="comment">#徽标提示语</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://butterfly.js.org/</span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">主题版本Butterfly_v5.3.5</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://www.jsdelivr.com/</span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&amp;logo=jsDelivr</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">本站使用JsDelivr为静态资源提供CDN加速</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://github.com/</span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">本站项目由Github托管</span></span><br></pre></td></tr></table></figure><p>创建 <code>博客根目录/source/js/runtime.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 页脚计时器 start */</span></span><br><span class="line"><span class="keyword">var</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createtime</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 当前时间</span></span><br><span class="line">    now.<span class="title function_">setTime</span>(now.<span class="title function_">getTime</span>() + <span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">var</span> start = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&quot;01/01/2025 00:00:00&quot;</span>); <span class="comment">// 旅行者1号开始计算的时间</span></span><br><span class="line">    <span class="keyword">var</span> dis = <span class="title class_">Math</span>.<span class="title function_">trunc</span>(<span class="number">23400000000</span> + ((now - start) / <span class="number">1000</span>) * <span class="number">17</span>); <span class="comment">// 距离=秒数*速度 记住转换毫秒</span></span><br><span class="line">    <span class="keyword">var</span> unit = (dis / <span class="number">149600000</span>).<span class="title function_">toFixed</span>(<span class="number">6</span>);  <span class="comment">// 天文单位</span></span><br><span class="line">    <span class="comment">// 网站诞生时间</span></span><br><span class="line">    <span class="keyword">var</span> grt = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&quot;08/09/2022 00:00:00&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> days = (now - grt) / <span class="number">1e3</span> / <span class="number">60</span> / <span class="number">60</span> / <span class="number">24</span>,</span><br><span class="line">        dnum = <span class="title class_">Math</span>.<span class="title function_">floor</span>(days),</span><br><span class="line">        hours = (now - grt) / <span class="number">1e3</span> / <span class="number">60</span> / <span class="number">60</span> - <span class="number">24</span> * dnum,</span><br><span class="line">        hnum = <span class="title class_">Math</span>.<span class="title function_">floor</span>(hours);</span><br><span class="line">    <span class="number">1</span> == <span class="title class_">String</span>(hnum).<span class="property">length</span> &amp;&amp; (hnum = <span class="string">&quot;0&quot;</span> + hnum);</span><br><span class="line">    <span class="keyword">var</span> minutes = (now - grt) / <span class="number">1e3</span> / <span class="number">60</span> - <span class="number">1440</span> * dnum - <span class="number">60</span> * hnum,</span><br><span class="line">        mnum = <span class="title class_">Math</span>.<span class="title function_">floor</span>(minutes);</span><br><span class="line">    <span class="number">1</span> == <span class="title class_">String</span>(mnum).<span class="property">length</span> &amp;&amp; (mnum = <span class="string">&quot;0&quot;</span> + mnum);</span><br><span class="line">    <span class="keyword">var</span> seconds = (now - grt) / <span class="number">1e3</span> - <span class="number">86400</span> * dnum - <span class="number">3600</span> * hnum - <span class="number">60</span> * mnum,</span><br><span class="line">        snum = <span class="title class_">Math</span>.<span class="title function_">round</span>(seconds);</span><br><span class="line">    <span class="number">1</span> == <span class="title class_">String</span>(snum).<span class="property">length</span> &amp;&amp; (snum = <span class="string">&quot;0&quot;</span> + snum);</span><br><span class="line">    <span class="keyword">let</span> currentTimeHtml = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    (currentTimeHtml =</span><br><span class="line">        hnum &lt; <span class="number">18</span> &amp;&amp; hnum &gt;= <span class="number">9</span></span><br><span class="line">            ? <span class="string">`&lt;img class=&#x27;boardsign&#x27; src=&#x27;https://cdn.meimolihan.eu.org/hexo/img/墨不凡-搬砖中.svg&#x27; title=&#x27;什么时候能够实现财富自由呀~&#x27;&gt;&lt;br&gt; &lt;div style=&quot;font-size:13px;font-weight:bold&quot;&gt;本站居然运行了 <span class="subst">$&#123;dnum&#125;</span> 天 <span class="subst">$&#123;hnum&#125;</span> 小时 <span class="subst">$&#123;mnum&#125;</span> 分 <span class="subst">$&#123;snum&#125;</span> 秒 &lt;i id=&quot;heartbeat&quot; class=&#x27;fas fa-heartbeat&#x27;&gt;&lt;/i&gt; &lt;br&gt; 旅行者 1 号当前距离地球 <span class="subst">$&#123;dis&#125;</span> 千米，约为 <span class="subst">$&#123;unit&#125;</span> 个天文单位 🚀&lt;/div&gt;`</span></span><br><span class="line">            : <span class="string">`&lt;img class=&#x27;boardsign&#x27; src=&#x27;https://cdn.meimolihan.eu.org/hexo/img/墨不凡-休闲中.svg&#x27; title=&#x27;下班了就该开开心心地玩耍~&#x27;&gt;&lt;br&gt; &lt;div style=&quot;font-size:13px;font-weight:bold&quot;&gt;本站居然运行了 <span class="subst">$&#123;dnum&#125;</span> 天 <span class="subst">$&#123;hnum&#125;</span> 小时 <span class="subst">$&#123;mnum&#125;</span> 分 <span class="subst">$&#123;snum&#125;</span> 秒 &lt;i id=&quot;heartbeat&quot; class=&#x27;fas fa-heartbeat&#x27;&gt;&lt;/i&gt; &lt;br&gt; 旅行者 1 号当前距离地球 <span class="subst">$&#123;dis&#125;</span> 千米，约为 <span class="subst">$&#123;unit&#125;</span> 个天文单位 🚀&lt;/div&gt;`</span>),</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;workboard&quot;</span>) &amp;&amp;</span><br><span class="line">    (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;workboard&quot;</span>).<span class="property">innerHTML</span> = currentTimeHtml);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 设置重复执行函数，周期1000ms</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">createtime</span>();</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*页脚计时器 end */</span></span><br></pre></td></tr></table></figure><p><strong>创建 <code>博客根目录/source/css/runtime.css</code></strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-id">#runtime</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">180px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">padding-inline</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.7</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#workboard</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#runtime</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#28b4c8</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">28</span>, <span class="number">69</span>, <span class="number">218</span>, <span class="number">0.71</span>);</span><br><span class="line">    <span class="attribute">animation</span>: flashlight <span class="number">1s</span> linear infinite alternate;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#ghbdages</span> <span class="selector-class">.github-badge</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@-moz-keyframes</span> flashlight &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">#1478d2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="number">#1478d2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@-webkit-keyframes</span> flashlight &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">#1478d2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="number">#1478d2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@-o-keyframes</span> flashlight &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">#1478d2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="number">#1478d2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> flashlight &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">#1478d2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="number">#1478d2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;    </span><br></pre></td></tr></table></figure><p><strong>🚀 清理并重启项目：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><hr><p><a id="single-image-bg"></a></p><h2 id="🖼️-十九、一图流背景设计">🖼️ 十九、一图流背景设计</h2><h3 id="✨-功能特点-19">✨ 功能特点</h3><p>使用单张图片作为全局背景，实现简约而不简单的视觉效果。</p><h3 id="🔧-实现方法-7">🔧 实现方法</h3><ul><li><strong>创建背景样式CSS：</strong><ul><li>创建 <code>Hexo根目录/source/css/custom.css</code> 文件，将代码复制粘贴到该文件中。</li></ul></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 页脚与头图透明 */</span>  </span><br><span class="line"><span class="selector-id">#footer</span> &#123;  </span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="selector-id">#page-header</span> &#123;  </span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">/* 白天模式遮罩透明 */</span>  </span><br><span class="line"><span class="selector-id">#footer</span><span class="selector-pseudo">::before</span> &#123;  </span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="selector-id">#page-header</span><span class="selector-pseudo">::before</span> &#123;  </span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">/* 夜间模式遮罩透明 */</span>  </span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#footer</span><span class="selector-pseudo">::before</span> &#123;  </span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#page-header</span><span class="selector-pseudo">::before</span> &#123;  </span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>在主题配置文件 <code>[BlogRoot]\_config.butterfly.yml</code> 文件中的inject配置项的head子项加入以下代码，代表引入刚刚创建的custom.css文件</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span>  </span><br><span class="line">  <span class="attr">head:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;</span> <span class="string">media=&quot;defer&quot;</span> <span class="string">onload=&quot;this.media=&#x27;all&#x27;&quot;&gt;</span></span><br></pre></td></tr></table></figure><ul><li>在主题配置文件 <code>[BlogRoot]\_config.butterfly.yml</code> 文件中的 <code>index_img</code> 和 <code>footer_bg</code> 配置项取消头图与页脚图的加载项避免冗余加载</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The banner image of home page  </span></span><br><span class="line"><span class="attr">index_img:</span>   </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Footer Background  </span></span><br><span class="line"><span class="attr">footer_bg:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><ul><li>在主题配置文件 <code>[BlogRoot]\_config.butterfly.yml</code> 文件中的background配置项设置背景图</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">background:</span> <span class="string">/img/pc-018.webp</span></span><br></pre></td></tr></table></figure><hr><p><a id="font-customization"></a></p><h2 id="🔤-二十、引用字体美化">🔤 二十、引用字体美化</h2><h3 id="✨-功能特点-20">✨ 功能特点</h3><p>使用自定义字体替换系统默认字体，提升排版美观度和品牌一致性。</p><h3 id="🔧-实现步骤-7">🔧 实现步骤</h3><h4 id="1-🔍-准备字体文件">1. 🔍 准备字体文件</h4><p><strong>字体天下：<a href="https://www.fonts.net.cn/font-32027849465.html">https://www.fonts.net.cn/font-32027849465.html</a></strong><br><strong>谷歌字体：<a href="http://www.googlefonts.net/chinese">http://www.googlefonts.net/chinese</a></strong><br><strong>TTF 到 WOFF2转换器：<a href="https://products.groupdocs.app/zh/conversion/ttf-to-woff2">https://products.groupdocs.app/zh/conversion/ttf-to-woff2</a></strong></p><ul><li>首先将文件放到CSS同级目录下：<code>Hexo根目录/source/css/GenJyuuGothic-Medium-2.ttf</code><ul><li>创建 <code>Hexo根目录/source/css/引用字体.css</code> 文件，将代码复制粘贴到该文件中。</li></ul></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 引用外链字体（任选其一） */</span></span><br><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: ZhuZiAYuanJWD;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">https://cdn.jsdelivr.net/gh/meimolihan/cdn@v1.0.0/fonts/ZhuZiAWan.woff2</span>);</span><br><span class="line">    <span class="attribute">font-display</span>: swap;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 引用本地字体（任选其一） */</span></span><br><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;ZhuZiAYuanJWD&#x27;</span>; <span class="comment">/*字体名称，名字可以随便起，但是注意要一致，建议英文*/</span></span><br><span class="line">    <span class="attribute">font-display</span>: swap;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;./GenJyuuGothic-Medium-2.ttf&#x27;</span>) <span class="built_in">format</span>(<span class="string">&quot;truetype&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span>, <span class="comment">/* 全局修改为此字体 */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.title</span>, <span class="comment">/* 标题链接-引用字体 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#menus</span>, <span class="comment">/* 菜单容器-引用字体 */</span></span><br><span class="line"><span class="selector-id">#blog-info</span>, <span class="comment">/* 站点标题-引用字体 */</span></span><br><span class="line"><span class="selector-id">#post-meta</span>, <span class="comment">/* 发表时间、更新时间等-引用字体 */</span></span><br><span class="line"><span class="selector-tag">h1</span><span class="selector-id">#site-title</span>, <span class="comment">/* 网站主标题-引用字体 */</span></span><br><span class="line"><span class="selector-tag">h1</span><span class="selector-class">.post-title</span>, <span class="comment">/* 文章标题-引用字体 */</span></span><br><span class="line"><span class="selector-id">#site-subtitle</span>, <span class="comment">/* 一言网一句话-引用字体 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span>, <span class="comment">/* 侧边栏内容-引用字体 */</span></span><br><span class="line"><span class="selector-class">.category-title</span>, <span class="comment">/* 分类标题-引用字体 */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.article-title</span>, <span class="comment">/* 文章链接标题-引用字体 */</span></span><br><span class="line"><span class="selector-class">.tag-cloud-title</span>, <span class="comment">/* 标签云标题-引用字体 */</span></span><br><span class="line"><span class="selector-class">.article-sort-title</span>, <span class="comment">/* 文章排序标题-引用字体 */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.blog-slider__title</span>, <span class="comment">/* 博客轮播标题-引用字体 */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.category-list-link</span>, <span class="comment">/* 分类列表链接-引用字体 */</span></span><br><span class="line"><span class="selector-tag">h1</span>,<span class="selector-tag">h2</span>,<span class="selector-tag">h3</span>,<span class="selector-tag">h4</span>,<span class="selector-tag">h5</span>,<span class="selector-tag">h6</span>, <span class="comment">/* 所有标题标签-引用字体 */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.categoryBar-list-link</span>, <span class="comment">/* 分类栏列表链接-引用字体 */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.article-sort-item-title</span>, <span class="comment">/* 文章排序项目标题-引用字体 */</span></span><br><span class="line"><span class="selector-tag">figure</span><span class="selector-class">.highlight</span> <span class="selector-tag">td</span><span class="selector-class">.code</span> pre, <span class="comment">/* 代码框-引用字体 */</span></span><br><span class="line"><span class="selector-tag">figure</span><span class="selector-class">.highlight</span> <span class="selector-tag">td</span><span class="selector-class">.code</span> pre <span class="selector-tag">code</span>, <span class="comment">/* 代码框中的代码-引用字体 */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-id">#site-name</span>, <span class="selector-tag">span</span><span class="selector-id">#subtitle</span>, <span class="selector-tag">a</span><span class="selector-class">.site-page</span>, <span class="comment">/* 站点名称、副标题和页面链接-引用字体 */</span></span><br><span class="line"><span class="selector-id">#post</span> <span class="selector-class">.container</span><span class="selector-class">.post-content</span> <span class="selector-class">.folding-tag</span> <span class="selector-class">.content</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">code</span> <span class="comment">/* 折叠标签中的代码-引用字体 */</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;ZhuZiAYuanJWD&#x27;</span>, sans-serif <span class="meta">!important</span>; <span class="comment">/* 设置字体为 ZhuZiAYuanJWD，如果没有则使用系统默认的无衬线字体 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>➕ 引入 <code>引用字体.css</code> 文件</strong></p><ul><li>在 _config.butterfly.yml 文件中找到 inject 部分，如果该部分不存在，添加以下内容：</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span> <span class="comment"># 注入自定义css</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/引用字体.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><p><strong>配置字体</strong><br>在 _config.butterfly.yml 文件中修改一下内容：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 全局字体设置</span></span><br><span class="line"><span class="comment"># 除非您知道它们的工作原理，否则不要修改以下设置</span></span><br><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="comment"># 默认字体大小（全局范围内的字体大小）</span></span><br><span class="line">  <span class="attr">global-font-size:</span> <span class="string">18px</span></span><br><span class="line">  <span class="comment"># 代码字体大小（用于代码块或代码相关的内容）</span></span><br><span class="line">  <span class="attr">code-font-size:</span> <span class="string">18px</span></span><br><span class="line">  <span class="comment"># 普通文本的字体家族（字体名称）</span></span><br><span class="line">  <span class="attr">font-family:</span> <span class="string">&#x27;ZhuZiAYuanJWD&#x27;</span></span><br><span class="line">  <span class="comment"># 代码字体家族（代码块或代码相关的内容的字体）</span></span><br><span class="line">  <span class="attr">code-font-family:</span> <span class="string">&#x27;ZhuZiAYuanJWD&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>🚀 清理并重启项目：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><hr><p><a id="scrollbar-style"></a></p><h2 id="🎚️-二十一、滚动条样式美化">🎚️ 二十一、滚动条样式美化</h2><h3 id="✨-功能特点-21">✨ 功能特点</h3><p>自定义浏览器滚动条样式，使其与网站设计风格保持一致，提升细节体验。</p><h3 id="🔧-实现方法-8">🔧 实现方法</h3><ul><li>创建 <code>Hexo根目录/source/css/滚动条样式.css</code> 文件，将代码复制粘贴到该文件中。</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/********************** 滚动条整体样式 ********************/</span></span><br><span class="line">::-webkit-scrollbar &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">8px</span>; <span class="comment">/* 滚动条宽度 */</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">8px</span>; <span class="comment">/* 滚动条高度 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 滚动条轨道样式 */</span></span><br><span class="line">::-webkit-scrollbar-track &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">73</span>, <span class="number">177</span>, <span class="number">245</span>, <span class="number">0.2</span>); <span class="comment">/* 轨道背景色，半透明 */</span></span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">2em</span>; <span class="comment">/* 轨道圆角 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 滚动条滑样式块 */</span></span><br><span class="line">::-webkit-scrollbar-thumb &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--theme-color, <span class="number">#49b1f5</span>); <span class="comment">/* 滑块背景色，使用主题变量，若未定义则使用默认值 #49b1f5 */</span></span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">-webkit-linear-gradient</span>(</span><br><span class="line">            <span class="number">45deg</span>,</span><br><span class="line">            <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3</span>) <span class="number">25%</span>, <span class="comment">/* 条纹效果，黑色半透明，增强对比度 */</span></span><br><span class="line">            transparent <span class="number">25%</span>, <span class="comment">/* 透明部分 */</span></span><br><span class="line">            transparent <span class="number">50%</span>, <span class="comment">/* 透明部分 */</span></span><br><span class="line">            <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3</span>) <span class="number">50%</span>, <span class="comment">/* 条纹效果，黑色半透明，增强对比度 */</span></span><br><span class="line">            <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3</span>) <span class="number">75%</span>, <span class="comment">/* 条纹效果，黑色半透明，增强对比度 */</span></span><br><span class="line">            transparent <span class="number">75%</span>, <span class="comment">/* 透明部分 */</span></span><br><span class="line">            transparent</span><br><span class="line">    ); <span class="comment">/* 滑块上的条纹效果 */</span></span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">2em</span>; <span class="comment">/* 滑块圆角 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 滚动条角落样式 */</span></span><br><span class="line">::-webkit-scrollbar-corner &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: transparent; <span class="comment">/* 角落背景色，透明 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 针对 Mozilla 浏览器的选中文本样式 */</span></span><br><span class="line">::-moz-selection &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>; <span class="comment">/* 选中文字颜色 */</span></span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--theme-color, <span class="number">#49b1f5</span>) <span class="meta">!important</span>; <span class="comment">/* 选中背景色，使用主题变量，若未定义则使用默认值 #49b1f5 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 代码框底部滚动条的特殊样式 */</span></span><br><span class="line"><span class="selector-id">#article-container</span> <span class="selector-tag">figure</span><span class="selector-class">.highlight</span> &gt; ::-webkit-scrollbar-thumb &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#49b1f5</span> <span class="meta">!important</span>; <span class="comment">/* 滑块背景色，深灰色 */</span></span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">-webkit-linear-gradient</span>(</span><br><span class="line">            <span class="number">45deg</span>,</span><br><span class="line">            <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>) <span class="number">25%</span>, <span class="comment">/* 条纹效果，黑色低透明度，增强对比度 */</span></span><br><span class="line">            transparent <span class="number">25%</span>, <span class="comment">/* 透明部分 */</span></span><br><span class="line">            transparent <span class="number">50%</span>, <span class="comment">/* 透明部分 */</span></span><br><span class="line">            <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>) <span class="number">50%</span>, <span class="comment">/* 条纹效果，黑色低透明度，增强对比度 */</span></span><br><span class="line">            <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>) <span class="number">75%</span>, <span class="comment">/* 条纹效果，黑色低透明度，增强对比度 */</span></span><br><span class="line">            transparent <span class="number">75%</span>, <span class="comment">/* 透明部分 */</span></span><br><span class="line">            transparent</span><br><span class="line">    ) <span class="meta">!important</span>; <span class="comment">/* 滑块上的条纹效果 */</span></span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">2em</span> <span class="meta">!important</span>; <span class="comment">/* 滑块圆角 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>➕ 引入 <code>滚动条样式.css</code> 文件</strong></p><p>在 _config.butterfly.yml 文件中找到 inject 部分，如果该部分不存在，添加以下内容：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span> <span class="comment"># 注入自定义css</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/滚动条样式.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><p><strong>🚀 清理并重启项目：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><hr><p><a id="avatar-breathing-light"></a></p><h2 id="💡-二十二、头像呼吸灯效果">💡 二十二、头像呼吸灯效果</h2><h3 id="✨-功能特点-22">✨ 功能特点</h3><p>为头像添加呼吸灯效果，明暗交替闪烁，吸引视觉注意力。</p><h3 id="🔧-实现方法-9">🔧 实现方法</h3><ul><li><strong>创建呼吸灯效果CSS：</strong><ul><li>创建 <code>Hexo根目录/source/css/头像呼吸灯.css</code> 文件，将代码复制粘贴到该文件中。</li></ul></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/****************** 头像呼吸灯优化版 ***********************/</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-class">.avatar-img</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: huxi_light <span class="number">3.5s</span> ease-in-out infinite;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.avatar-img</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: huxi_dark <span class="number">3.5s</span> ease-in-out infinite;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 明亮模式下的呼吸灯效果 */</span></span><br><span class="line"><span class="keyword">@keyframes</span> huxi_light &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>:</span><br><span class="line">                <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">252</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3</span>),</span><br><span class="line">                <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">252</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">25%</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>:</span><br><span class="line">                <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">252</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.7</span>),</span><br><span class="line">                <span class="number">0</span> <span class="number">0</span> <span class="number">20px</span> <span class="number">4px</span> <span class="built_in">rgba</span>(<span class="number">252</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>:</span><br><span class="line">                <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span> <span class="number">4px</span> <span class="built_in">rgba</span>(<span class="number">252</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.8</span>),</span><br><span class="line">                <span class="number">0</span> <span class="number">0</span> <span class="number">25px</span> <span class="number">8px</span> <span class="built_in">rgba</span>(<span class="number">252</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">75%</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>:</span><br><span class="line">                <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">252</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.7</span>),</span><br><span class="line">                <span class="number">0</span> <span class="number">0</span> <span class="number">20px</span> <span class="number">4px</span> <span class="built_in">rgba</span>(<span class="number">252</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>:</span><br><span class="line">                <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">252</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3</span>),</span><br><span class="line">                <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">252</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 黑暗模式下的呼吸灯效果 */</span></span><br><span class="line"><span class="keyword">@keyframes</span> huxi_dark &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>:</span><br><span class="line">                <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">130</span>, <span class="number">252</span>, <span class="number">0</span>, <span class="number">0.3</span>),</span><br><span class="line">                <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">130</span>, <span class="number">252</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">25%</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>:</span><br><span class="line">                <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">130</span>, <span class="number">252</span>, <span class="number">0</span>, <span class="number">0.7</span>),</span><br><span class="line">                <span class="number">0</span> <span class="number">0</span> <span class="number">20px</span> <span class="number">4px</span> <span class="built_in">rgba</span>(<span class="number">130</span>, <span class="number">252</span>, <span class="number">0</span>, <span class="number">0.3</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>:</span><br><span class="line">                <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span> <span class="number">4px</span> <span class="built_in">rgba</span>(<span class="number">130</span>, <span class="number">252</span>, <span class="number">0</span>, <span class="number">0.9</span>),</span><br><span class="line">                <span class="number">0</span> <span class="number">0</span> <span class="number">25px</span> <span class="number">8px</span> <span class="built_in">rgba</span>(<span class="number">130</span>, <span class="number">252</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">75%</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>:</span><br><span class="line">                <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">130</span>, <span class="number">252</span>, <span class="number">0</span>, <span class="number">0.7</span>),</span><br><span class="line">                <span class="number">0</span> <span class="number">0</span> <span class="number">20px</span> <span class="number">4px</span> <span class="built_in">rgba</span>(<span class="number">130</span>, <span class="number">252</span>, <span class="number">0</span>, <span class="number">0.3</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>:</span><br><span class="line">                <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">130</span>, <span class="number">252</span>, <span class="number">0</span>, <span class="number">0.3</span>),</span><br><span class="line">                <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">130</span>, <span class="number">252</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>➕ 引入 <code>头像呼吸灯.css</code> 文件</strong></p><p>在 _config.butterfly.yml 文件中找到 inject 部分，如果该部分不存在，添加以下内容：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span> <span class="comment"># 注入自定义css</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/头像呼吸灯.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><p><strong>🚀 清理并重启项目：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><hr><p><a id="background-switcher"></a></p><h2 id="🖼️-二十三、博客背景切换">🖼️ 二十三、博客背景切换</h2><h3 id="✨-功能特点-23">✨ 功能特点</h3><p>添加背景切换功能，允许用户自定义博客背景图片或颜色，增强个性化体验。</p><h3 id="🔧-实现步骤-8">🔧 实现步骤</h3><h4 id="1-➕创建切换按钮">1. ➕创建切换按钮</h4><blockquote><p>自行选择在哪里添加，只需要调用<code>toggleWinbox</code>函数就可以</p></blockquote><ol><li><strong>引入到右下角方法</strong></li></ol><p>修改<code>博客根目录\butterfly\layout\includes\rightside.pug</code><br>在众多when下面新增：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">when &#x27;comment&#x27;</span><br><span class="line">    if commentsJsLoad</span><br><span class="line">        a#to_comment(href=&quot;#post-comment&quot; title=_p(&quot;rightside.scroll_to_comment&quot;))</span><br><span class="line">        i.fas.fa-comments</span><br><span class="line"><span class="addition">+ when &#x27;bg&#x27;</span></span><br><span class="line"><span class="addition">+     button(type=&quot;button&quot; title=&#x27;切换背景&#x27; onclick=&quot;toggleWinbox()&quot;)</span></span><br><span class="line"><span class="addition">+         i.fas.fa-display</span></span><br></pre></td></tr></table></figure><p>然后修改：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#rightside</span><br><span class="line">  - const &#123; enable, hide, show &#125; = theme.rightside_item_order</span><br><span class="line">  - const hideArray = enable ? hide &amp;&amp; hide.split(&#x27;,&#x27;) : [&#x27;readmode&#x27;,&#x27;translate&#x27;,&#x27;darkmode&#x27;,&#x27;hideAside&#x27;]</span><br><span class="line"><span class="deletion">-  - const showArray = enable ? show &amp;&amp; show.split(&#x27;,&#x27;) : [&#x27;toc&#x27;,&#x27;chat&#x27;,&#x27;comment&#x27;]</span></span><br><span class="line"><span class="addition">+  - const showArray = enable ? show &amp;&amp; show.split(&#x27;,&#x27;) : [&#x27;toc&#x27;,&#x27;chat&#x27;,&#x27;comment&#x27;,&#x27;bg&#x27;]</span></span><br></pre></td></tr></table></figure><blockquote><p>以上是引入到 <code>右下角</code> 的方法</p></blockquote><ol start="2"><li><strong>引入到导航栏 <code>右上角</code> 方法</strong></li></ol><ul><li>图标<code>#icon-a-zhaopiantupianxiangce</code>修改为自己的</li></ul><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    if theme.menu</span><br><span class="line">      != partial(&#x27;includes/header/menu_item&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line"><span class="addition">+      a.site-page.faa-parent.animated-hover(onclick=&#x27;toggleWinbox()&#x27; title=&#x27;切换壁纸&#x27;)</span></span><br><span class="line"><span class="addition">+        svg.faa-tada.bizhi(aria-hidden=&quot;true&quot;, style=&quot;height:2em;width:2em&quot;)</span></span><br><span class="line"><span class="addition">+          use(xlink:href=&#x27;#icon-a-zhaopiantupianxiangce&#x27;)</span></span><br></pre></td></tr></table></figure><h4 id="2-➕-创建-博客根目录-source-js-xxx-js">2. ➕ 创建 <code>博客根目录/source/js/xxx.js</code></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 存数据</span></span><br><span class="line"><span class="comment">// name：命名 data：数据</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">saveData</span>(<span class="params">name, data</span>) &#123;</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(name, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="string">&#x27;time&#x27;</span>: <span class="title class_">Date</span>.<span class="title function_">now</span>(), <span class="string">&#x27;data&#x27;</span>: data &#125;))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 取数据</span></span><br><span class="line"><span class="comment">// name：命名 time：过期时长,单位分钟,如传入30,即加载数据时如果超出30分钟返回0,否则返回数据</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">loadData</span>(<span class="params">name, time</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> d = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(name));</span><br><span class="line">    <span class="comment">// 过期或有错误返回 0 否则返回数据</span></span><br><span class="line">    <span class="keyword">if</span> (d) &#123;</span><br><span class="line">        <span class="keyword">let</span> t = <span class="title class_">Date</span>.<span class="title function_">now</span>() - d.<span class="property">time</span></span><br><span class="line">        <span class="keyword">if</span> (t &lt; (time * <span class="number">60</span> * <span class="number">1000</span>) &amp;&amp; t &gt; -<span class="number">1</span>) <span class="keyword">return</span> d.<span class="property">data</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 上面两个函数如果你有其他需要存取数据的功能，也可以直接使用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取背景</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> data = <span class="title function_">loadData</span>(<span class="string">&#x27;blogbg&#x27;</span>, <span class="number">1440</span>)</span><br><span class="line">    <span class="keyword">if</span> (data) <span class="title function_">changeBg</span>(data, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">else</span> <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;blogbg&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123; <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;blogbg&#x27;</span>); &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 切换背景函数</span></span><br><span class="line"><span class="comment">// 此处的flag是为了每次读取时都重新存储一次,导致过期时间不稳定</span></span><br><span class="line"><span class="comment">// 如果flag为0则存储,即设置背景. 为1则不存储,即每次加载自动读取背景.</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeBg</span>(<span class="params">s, flag</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> bg = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;web_bg&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (s.<span class="title function_">charAt</span>(<span class="number">0</span>) == <span class="string">&#x27;#&#x27;</span>) &#123;</span><br><span class="line">        bg.<span class="property">style</span>.<span class="property">backgroundColor</span> = s</span><br><span class="line">        bg.<span class="property">style</span>.<span class="property">backgroundImage</span> = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> bg.<span class="property">style</span>.<span class="property">backgroundImage</span> = s</span><br><span class="line">    <span class="keyword">if</span> (!flag) &#123; <span class="title function_">saveData</span>(<span class="string">&#x27;blogbg&#x27;</span>, s) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下为2.0新增内容</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建窗口</span></span><br><span class="line"><span class="keyword">var</span> winbox = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createWinbox</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> div = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(div)</span><br><span class="line">    winbox = <span class="title class_">WinBox</span>(&#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;changeBgBox&#x27;</span>,</span><br><span class="line">        <span class="attr">index</span>: <span class="number">999</span>,</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&quot;切换背景&quot;</span>,</span><br><span class="line">        <span class="attr">x</span>: <span class="string">&quot;center&quot;</span>,</span><br><span class="line">        <span class="attr">y</span>: <span class="string">&quot;center&quot;</span>,</span><br><span class="line">        <span class="attr">minwidth</span>: <span class="string">&#x27;300px&#x27;</span>,</span><br><span class="line">        <span class="attr">height</span>: <span class="string">&quot;60%&quot;</span>,</span><br><span class="line">        <span class="attr">background</span>: <span class="string">&#x27;#49b1f5&#x27;</span>,</span><br><span class="line">        <span class="attr">onmaximize</span>: <span class="function">() =&gt;</span> &#123; div.<span class="property">innerHTML</span> = <span class="string">`&lt;style&gt;body::-webkit-scrollbar &#123;display: none;&#125;div#changeBgBox &#123;width: 100% !important;&#125;&lt;/style&gt;`</span> &#125;,</span><br><span class="line">        <span class="attr">onrestore</span>: <span class="function">() =&gt;</span> &#123; div.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span> &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="title function_">winResize</span>();</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, winResize)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 每一类我放了一个演示，直接往下复制粘贴 a标签 就可以，需要注意的是 函数里面的链接 冒号前面需要添加反斜杠\进行转义</span></span><br><span class="line">    winbox.<span class="property">body</span>.<span class="property">innerHTML</span> = <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div id=&quot;article-container&quot; style=&quot;padding:10px;&quot;&gt;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    &lt;p&gt;&lt;button onclick=&quot;localStorage.removeItem(&#x27;blogbg&#x27;);location.reload();&quot; style=&quot;background:#5fcdff;display:block;width:100%;padding: 15px 0;border-radius:6px;color:white;&quot;&gt;&lt;i class=&quot;fa-solid fa-arrows-rotate&quot;&gt;&lt;/i&gt; 点我恢复默认背景&lt;/button&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;h2 id=&quot;图片（手机）&quot;&gt;&lt;a href=&quot;#图片（手机）&quot; class=&quot;headerlink&quot; title=&quot;图片（手机）&quot;&gt;&lt;/a&gt;图片（手机）&lt;/h2&gt;</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;bgbox&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;a href=&quot;javascript:;&quot; rel=&quot;noopener external nofollow&quot; style=&quot;background-image:url(https://img.vm.laomishuo.com/image/2021/12/2021122715170589.jpeg)&quot; class=&quot;pimgbox&quot; onclick=&quot;changeBg(&#x27;url(https\://img.vm.laomishuo.com/image/2021/12/2021122715170589.jpeg)&#x27;)&quot;&gt;&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    &lt;h2 id=&quot;图片（电脑）&quot;&gt;&lt;a href=&quot;#图片（电脑）&quot; class=&quot;headerlink&quot; title=&quot;图片（电脑）&quot;&gt;&lt;/a&gt;图片（电脑）&lt;/h2&gt;</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;bgbox&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;a href=&quot;javascript:;&quot; rel=&quot;noopener external nofollow&quot; style=&quot;background-image:url(https://cn.bing.com/th?id=OHR.GBRTurtle_ZH-CN6069093254_1920x1080.jpg)&quot; class=&quot;imgbox&quot; onclick=&quot;changeBg(&#x27;url(https\://cn.bing.com/th?id=OHR.GBRTurtle_ZH-CN6069093254_1920x1080.jpg)&#x27;)&quot;&gt;&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    &lt;h2 id=&quot;渐变色&quot;&gt;&lt;a href=&quot;#渐变色&quot; class=&quot;headerlink&quot; title=&quot;渐变色&quot;&gt;&lt;/a&gt;渐变色&lt;/h2&gt;</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;bgbox&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;a href=&quot;javascript:;&quot; rel=&quot;noopener external nofollow&quot; class=&quot;box&quot; style=&quot;background: linear-gradient(to right, #eecda3, #ef629f)&quot; onclick=&quot;changeBg(&#x27;linear-gradient(to right, #eecda3, #ef629f)&#x27;)&quot;&gt;&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    &lt;h2 id=&quot;纯色&quot;&gt;&lt;a href=&quot;#纯色&quot; class=&quot;headerlink&quot; title=&quot;纯色&quot;&gt;&lt;/a&gt;纯色&lt;/h2&gt;</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;bgbox&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;a href=&quot;javascript:;&quot; rel=&quot;noopener external nofollow&quot; class=&quot;box&quot; style=&quot;background: #7D9D9C&quot; onclick=&quot;changeBg(&#x27;#7D9D9C&#x27;)&quot;&gt;&lt;/a&gt; </span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 适应窗口大小</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">winResize</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> box = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#changeBgBox&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (!box || box.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;min&#x27;</span>) || box.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;max&#x27;</span>)) <span class="keyword">return</span> <span class="comment">// 2023-02-10更新</span></span><br><span class="line">    <span class="keyword">var</span> offsetWid = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientWidth</span>;</span><br><span class="line">    <span class="keyword">if</span> (offsetWid &lt;= <span class="number">768</span>) &#123;</span><br><span class="line">        winbox.<span class="title function_">resize</span>(offsetWid * <span class="number">0.95</span> + <span class="string">&quot;px&quot;</span>, <span class="string">&quot;90%&quot;</span>).<span class="title function_">move</span>(<span class="string">&quot;center&quot;</span>, <span class="string">&quot;center&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        winbox.<span class="title function_">resize</span>(offsetWid * <span class="number">0.6</span> + <span class="string">&quot;px&quot;</span>, <span class="string">&quot;70%&quot;</span>).<span class="title function_">move</span>(<span class="string">&quot;center&quot;</span>, <span class="string">&quot;center&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 切换状态，窗口已创建则控制窗口显示和隐藏，没窗口则创建窗口</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">toggleWinbox</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#changeBgBox&#x27;</span>)) winbox.<span class="title function_">toggleClass</span>(<span class="string">&#x27;hide&#x27;</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="title function_">createWinbox</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-➕创建-博客根目录-source-css-xxx-css">3. ➕创建 <code>博客根目录/source/css/xxx.css</code></h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 由于全屏会出bug，所以直接给他隐藏 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.winbox</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.wb-full</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.wb-min</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span> <span class="selector-class">.wb-body</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span> <span class="selector-id">#changeBgBox</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#333</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bgbox</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pimgbox</span>,</span><br><span class="line"><span class="selector-class">.imgbox</span>,</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">166px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">background-size</span>: cover</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pimgbox</span>,</span><br><span class="line"><span class="selector-class">.imgbox</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pimgbox</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">240px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.imgbox</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">95px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">    <span class="comment">/* 背景 */</span></span><br><span class="line">    <span class="selector-class">.pimgbox</span>,</span><br><span class="line">    <span class="selector-class">.imgbox</span>,</span><br><span class="line">    <span class="selector-class">.box</span> &#123;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">73px</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">135px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.pimgbox</span> &#123;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">205px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* 2.0新增内容 */</span>    </span><br><span class="line">    <span class="selector-class">.wb-min</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: none;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-id">#changeBgBox</span> <span class="selector-class">.wb-body</span>::-webkit-scrollbar &#123;</span><br><span class="line">        <span class="attribute">display</span>: none;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-➕-引入-xxx-js和xxx-css">4. ➕ 引入 <code>xxx.js和xxx.css</code></h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/xxx.css&quot;&gt;</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;https://cdn.jsdelivr.net/gh/nextapps-de/winbox/dist/winbox.bundle.min.js&quot;&gt;&lt;/script&gt;</span> <span class="comment"># 引入 winbox</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;/js/xxx.js&quot;&gt;&lt;/script&gt;</span> <span class="comment"># 这个代表自定义js，放在最下面</span></span><br></pre></td></tr></table></figure><h4 id="5-🚀-清理并重启项目：">5. 🚀 清理并重启项目：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><hr><p><a id="visitor-welcome"></a></p><h2 id="👋-二十四、访客定位欢迎信息">👋 二十四、访客定位欢迎信息</h2><h3 id="✨-功能特点-24">✨ 功能特点</h3><p>根据访客IP地址显示定位信息和个性化欢迎语，增强用户参与感。</p><h3 id="🔧-实现步骤-9">🔧 实现步骤</h3><h4 id="1-➕-创建欢迎脚本：">1. ➕ 创建欢迎脚本：</h4><p>作者博客：<a href="https://blog.qjqq.cn/posts/2a52.html">https://blog.qjqq.cn/posts/2a52.html</a></p><p><strong>新建<code>[BlogRoot]/source/js/welcome.js</code>文件</strong></p><p>奶思猫key申请：<a href="https://api.nsmao.net">https://api.nsmao.net</a><br>查看个人经纬度：<a href="https://github.com/fomalhaut1998/hexo-theme-Fomalhaut">https://github.com/fomalhaut1998/hexo-theme-Fomalhaut</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 进行 fetch 请求</span></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;https://api.nsmao.net/api/ip/query?key=你的key&#x27;</span>) <span class="comment">// 申请地址：https://api.nsmao.net</span></span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!response.<span class="property">ok</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Network response was not ok&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> response.<span class="title function_">json</span>();</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        ipLocation = data;</span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_">isHomePage</span>()) &#123;</span><br><span class="line">            <span class="title function_">showWelcome</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error:&#x27;</span>, error));</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getDistance</span>(<span class="params">e1, n1, e2, n2</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> R = <span class="number">6371</span>;</span><br><span class="line">    <span class="keyword">const</span> &#123; sin, cos, asin, <span class="variable constant_">PI</span>, hypot &#125; = <span class="title class_">Math</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="title function_">getPoint</span> = (<span class="params">e, n</span>) =&gt; &#123;</span><br><span class="line">        e *= <span class="variable constant_">PI</span> / <span class="number">180</span>;</span><br><span class="line">        n *= <span class="variable constant_">PI</span> / <span class="number">180</span>;</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="attr">x</span>: <span class="title function_">cos</span>(n) * <span class="title function_">cos</span>(e), <span class="attr">y</span>: <span class="title function_">cos</span>(n) * <span class="title function_">sin</span>(e), <span class="attr">z</span>: <span class="title function_">sin</span>(n) &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> a = <span class="title function_">getPoint</span>(e1, n1);</span><br><span class="line">    <span class="keyword">let</span> b = <span class="title function_">getPoint</span>(e2, n2);</span><br><span class="line">    <span class="keyword">let</span> c = <span class="title function_">hypot</span>(a.<span class="property">x</span> - b.<span class="property">x</span>, a.<span class="property">y</span> - b.<span class="property">y</span>, a.<span class="property">z</span> - b.<span class="property">z</span>);</span><br><span class="line">    <span class="keyword">let</span> r = <span class="title function_">asin</span>(c / <span class="number">2</span>) * <span class="number">2</span> * R;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">round</span>(r);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">showWelcome</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!ipLocation || !ipLocation.<span class="property">data</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;ipLocation data is not available.&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> dist = <span class="title function_">getDistance</span>(<span class="number">116.680584</span>,<span class="number">35.649829</span>, ipLocation.<span class="property">data</span>.<span class="property">lng</span>, ipLocation.<span class="property">data</span>.<span class="property">lat</span>); <span class="comment">// 修改自己的经度（121.413921）纬度（31.089290）</span></span><br><span class="line">    <span class="keyword">let</span> pos = ipLocation.<span class="property">data</span>.<span class="property">country</span>;</span><br><span class="line">    <span class="keyword">let</span> ip = ipLocation.<span class="property">ip</span>;</span><br><span class="line">    <span class="keyword">let</span> posdesc;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 新增ipv6显示为指定内容</span></span><br><span class="line">    <span class="keyword">if</span> (ip.<span class="title function_">includes</span>(<span class="string">&quot;:&quot;</span>)) &#123;</span><br><span class="line">        ip = <span class="string">&quot;&lt;br&gt;好复杂，咱看不懂~(ipv6)&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 以下的代码需要根据新API返回的结果进行相应的调整</span></span><br><span class="line">    <span class="keyword">switch</span> (ipLocation.<span class="property">data</span>.<span class="property">country</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;日本&quot;</span>:</span><br><span class="line">            posdesc = <span class="string">&quot;よろしく，一起去看樱花吗&quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;美国&quot;</span>:</span><br><span class="line">            posdesc = <span class="string">&quot;Let us live in peace!&quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;英国&quot;</span>:</span><br><span class="line">            posdesc = <span class="string">&quot;想同你一起夜乘伦敦眼&quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;俄罗斯&quot;</span>:</span><br><span class="line">            posdesc = <span class="string">&quot;干了这瓶伏特加！&quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;法国&quot;</span>:</span><br><span class="line">            posdesc = <span class="string">&quot;C&#x27;est La Vie&quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;德国&quot;</span>:</span><br><span class="line">            posdesc = <span class="string">&quot;Die Zeit verging im Fluge.&quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;澳大利亚&quot;</span>:</span><br><span class="line">            posdesc = <span class="string">&quot;一起去大堡礁吧！&quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;加拿大&quot;</span>:</span><br><span class="line">            posdesc = <span class="string">&quot;拾起一片枫叶赠予你&quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;中国&quot;</span>:</span><br><span class="line">            pos = ipLocation.<span class="property">data</span>.<span class="property">prov</span> + <span class="string">&quot; &quot;</span> + ipLocation.<span class="property">data</span>.<span class="property">city</span> + <span class="string">&quot; &quot;</span> + ipLocation.<span class="property">data</span>.<span class="property">district</span>;</span><br><span class="line">            <span class="keyword">switch</span> (ipLocation.<span class="property">data</span>.<span class="property">prov</span>) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;北京市&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;北——京——欢迎你~~~&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;天津市&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;讲段相声吧&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;河北省&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;山势巍巍成壁垒，天下雄关铁马金戈由此向，无限江山&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;山西省&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;展开坐具长三尺，已占山河五百余&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;内蒙古自治区&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;天苍苍，野茫茫，风吹草低见牛羊&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;辽宁省&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;我想吃烤鸡架！&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;吉林省&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;状元阁就是东北烧烤之王&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;黑龙江省&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;很喜欢哈尔滨大剧院&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;上海市&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;众所周知，中国只有两个城市&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;江苏省&quot;</span>:</span><br><span class="line">                    <span class="keyword">switch</span> (ipLocation.<span class="property">data</span>.<span class="property">city</span>) &#123;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">&quot;南京市&quot;</span>:</span><br><span class="line">                            posdesc = <span class="string">&quot;这是我挺想去的城市啦&quot;</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">&quot;苏州市&quot;</span>:</span><br><span class="line">                            posdesc = <span class="string">&quot;上有天堂，下有苏杭&quot;</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="attr">default</span>:</span><br><span class="line">                            posdesc = <span class="string">&quot;散装是必须要散装的&quot;</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;浙江省&quot;</span>:</span><br><span class="line">                    <span class="keyword">switch</span> (ipLocation.<span class="property">data</span>.<span class="property">city</span>) &#123;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">&quot;杭州市&quot;</span>:</span><br><span class="line">                            posdesc = <span class="string">&quot;东风渐绿西湖柳，雁已还人未南归&quot;</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="attr">default</span>:</span><br><span class="line">                            posdesc = <span class="string">&quot;望海楼明照曙霞,护江堤白蹋晴沙&quot;</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;河南省&quot;</span>:</span><br><span class="line">                    <span class="keyword">switch</span> (ipLocation.<span class="property">data</span>.<span class="property">city</span>) &#123;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">&quot;郑州市&quot;</span>:</span><br><span class="line">                            posdesc = <span class="string">&quot;豫州之域，天地之中&quot;</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">&quot;信阳市&quot;</span>:</span><br><span class="line">                            posdesc = <span class="string">&quot;品信阳毛尖，悟人间芳华&quot;</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">&quot;南阳市&quot;</span>:</span><br><span class="line">                            posdesc = <span class="string">&quot;臣本布衣，躬耕于南阳此南阳非彼南阳！&quot;</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">&quot;驻马店市&quot;</span>:</span><br><span class="line">                            posdesc = <span class="string">&quot;峰峰有奇石，石石挟仙气嵖岈山的花很美哦！&quot;</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">&quot;开封市&quot;</span>:</span><br><span class="line">                            posdesc = <span class="string">&quot;刚正不阿包青天&quot;</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">&quot;洛阳市&quot;</span>:</span><br><span class="line">                            posdesc = <span class="string">&quot;洛阳牡丹甲天下&quot;</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="attr">default</span>:</span><br><span class="line">                            posdesc = <span class="string">&quot;可否带我品尝河南烩面啦？&quot;</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;安徽省&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;蚌埠住了，芜湖起飞&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;福建省&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;井邑白云间，岩城远带山&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;江西省&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;落霞与孤鹜齐飞，秋水共长天一色&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;山东省&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;遥望齐州九点烟，一泓海水杯中泻&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;湖北省&quot;</span>:</span><br><span class="line">                    <span class="keyword">switch</span> (ipLocation.<span class="property">data</span>.<span class="property">city</span>) &#123;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">&quot;黄冈市&quot;</span>:</span><br><span class="line">                            posdesc = <span class="string">&quot;红安将军县！辈出将才！&quot;</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="attr">default</span>:</span><br><span class="line">                            posdesc = <span class="string">&quot;来碗热干面~&quot;</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;湖南省&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;74751，长沙斯塔克&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;广东省&quot;</span>:</span><br><span class="line">                    <span class="keyword">switch</span> (ipLocation.<span class="property">data</span>.<span class="property">city</span>) &#123;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">&quot;广州市&quot;</span>:</span><br><span class="line">                            posdesc = <span class="string">&quot;看小蛮腰，喝早茶了嘛~&quot;</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">&quot;深圳市&quot;</span>:</span><br><span class="line">                            posdesc = <span class="string">&quot;今天你逛商场了嘛~&quot;</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">&quot;阳江市&quot;</span>:</span><br><span class="line">                            posdesc = <span class="string">&quot;阳春合水！博主家乡~ 欢迎来玩~&quot;</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="attr">default</span>:</span><br><span class="line">                            posdesc = <span class="string">&quot;来两斤福建人~&quot;</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;广西壮族自治区&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;桂林山水甲天下&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;海南省&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;朝观日出逐白浪，夕看云起收霞光&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;四川省&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;康康川妹子&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;贵州省&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;茅台，学生，再塞200&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;云南省&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;玉龙飞舞云缠绕，万仞冰川直耸天&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;西藏自治区&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;躺在茫茫草原上，仰望蓝天&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;陕西省&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;来份臊子面加馍&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;甘肃省&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;羌笛何须怨杨柳，春风不度玉门关&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;青海省&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;牛肉干和老酸奶都好好吃&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;宁夏回族自治区&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;大漠孤烟直，长河落日圆&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;新疆维吾尔自治区&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;驼铃古道丝绸路，胡马犹闻唐汉风&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;台湾省&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;我在这头，大陆在那头&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;香港特别行政区&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;永定贼有残留地鬼嚎，迎击光非岁玉&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;澳门特别行政区&quot;</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;性感荷官，在线发牌&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="attr">default</span>:</span><br><span class="line">                    posdesc = <span class="string">&quot;带我去你的城市逛逛吧！&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">            posdesc = <span class="string">&quot;带我去你的国家逛逛吧&quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据本地时间切换欢迎语</span></span><br><span class="line">    <span class="keyword">let</span> timeChange;</span><br><span class="line">    <span class="keyword">let</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">    <span class="keyword">if</span> (date.<span class="title function_">getHours</span>() &gt;= <span class="number">5</span> &amp;&amp; date.<span class="title function_">getHours</span>() &lt; <span class="number">11</span>) timeChange = <span class="string">&quot;&lt;span&gt;🌤️ 早上好，加油加油 💪&lt;/span&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (date.<span class="title function_">getHours</span>() &gt;= <span class="number">11</span> &amp;&amp; date.<span class="title function_">getHours</span>() &lt; <span class="number">13</span>) timeChange = <span class="string">&quot;&lt;span&gt;☀️ 中午好，记得午休喔 🍹&lt;/span&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (date.<span class="title function_">getHours</span>() &gt;= <span class="number">13</span> &amp;&amp; date.<span class="title function_">getHours</span>() &lt; <span class="number">17</span>) timeChange = <span class="string">&quot;&lt;span&gt;🕞 下午好，饮茶先啦 ☕&lt;/span&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (date.<span class="title function_">getHours</span>() &gt;= <span class="number">17</span> &amp;&amp; date.<span class="title function_">getHours</span>() &lt; <span class="number">19</span>) timeChange = <span class="string">&quot;&lt;span&gt;🚶‍♂️ 即将下班，按时吃饭喔 🍚&lt;/span&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (date.<span class="title function_">getHours</span>() &gt;= <span class="number">19</span> &amp;&amp; date.<span class="title function_">getHours</span>() &lt; <span class="number">24</span>) timeChange = <span class="string">&quot;&lt;span&gt;🌙 晚上好，夜生活嗨起来 🍻&lt;/span&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (date.<span class="title function_">getHours</span>() &gt;= <span class="number">0</span> &amp;&amp; date.<span class="title function_">getHours</span>() &lt; <span class="number">5</span>) timeChange = <span class="string">&quot;&lt;span&gt;🛏️ 夜深了，早点休息 🌃&lt;/span&gt;&quot;</span>;</span><br><span class="line">    <span class="comment">// else timeChange = &quot;夜深了，早点休息&quot;;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> welcomeInfoElement = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;welcome-info&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (welcomeInfoElement) &#123;</span><br><span class="line">        welcomeInfoElement.<span class="property">innerHTML</span> = <span class="string">`</span></span><br><span class="line"><span class="string">欢迎来自 &lt;b style=&quot;font-size: 15px; color: var(--theme-color)&quot;&gt;<span class="subst">$&#123;pos&#125;</span>&lt;/b&gt; 的朋友💖</span></span><br><span class="line"><span class="string">距博主约：&lt;b style=&quot;font-size: 15px; color: var(--theme-color)&quot;&gt;<span class="subst">$&#123;dist.toFixed(<span class="number">2</span>)&#125;</span>&lt;/b&gt; 公里 🚗</span></span><br><span class="line"><span class="string">IP地址是：&lt;b style=&quot;font-size: 15px; color: var(--theme-color)&quot;&gt;<span class="subst">$&#123;ip&#125;</span>&lt;/b&gt;</span></span><br><span class="line"><span class="string">&lt;span<span class="subst">$&#123;timeChange&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">&lt;b style=&quot;font-size: 15px; color: var(--theme-color)&quot;&gt;<span class="subst">$&#123;posdesc&#125;</span>&lt;/b&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Pjax无法获取元素&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Pjax完成页面切换的事件回调处理</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handlePjaxComplete</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">isHomePage</span>()) &#123;</span><br><span class="line">        <span class="title function_">showWelcome</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isHomePage</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">pathname</span> === <span class="string">&#x27;/&#x27;</span> || <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">pathname</span> === <span class="string">&#x27;/index.html&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加pjax:complete事件监听</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">isHomePage</span>()) &#123;</span><br><span class="line">        <span class="title function_">showWelcome</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;pjax:complete&quot;</span>, handlePjaxComplete);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="2-➕创建-welcome-css-文件">2. ➕创建 <code>welcome.css</code> 文件</h4><ul><li><strong>新建 <code>[BlogRoot]/source/css/welcome.css</code> 文件</strong></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 访客定位欢迎信息 */</span></span><br><span class="line"><span class="selector-id">#welcome-info</span> &#123;</span><br><span class="line">    <span class="attribute">white-space</span>: pre-wrap;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">6px</span>;  <span class="comment">/* 修改这里：左右内边距设为5px */</span></span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--border-style);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#welcome-info</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-dark);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-➕-引入-xxx-js和xxx-css">3. ➕ 引入 <code>xxx.js和xxx.css</code></h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/welcome.css&quot;&gt;</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;/js/welcome.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 主题配置文件</span></span><br><span class="line"><span class="attr">card_announcement:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">content:</span> <span class="string">&lt;div</span> <span class="string">id=&quot;welcome-info&quot;&gt;&lt;/div&gt;</span></span><br></pre></td></tr></table></figure><h4 id="4-🚀-清理并重启项目：-4">4. 🚀 清理并重启项目：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><hr><p><a id="footer-animal"></a></p><h2 id="🐾-二十五、脚页添加小动物">🐾 二十五、脚页添加小动物</h2><h3 id="✨-功能特点-25">✨ 功能特点</h3><p>在页脚区域添加可爱的小动物装饰，增加网站趣味性和亲和力。</p><h3 id="🔧-实现步骤-10">🔧 实现步骤</h3><h4 id="1-✍️-修改页脚模板：">1. ✍️ 修改页脚模板：</h4><p>作者博客：<a href="https://blog.qjqq.cn/posts/f69c.html">https://blog.qjqq.cn/posts/f69c.html</a></p><p><strong>修改<code>[BlogRoot]/themes/solitude/layout/includes/footer.pug</code>文件，新增以下代码（我是在末尾添加的）</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#footer-animal</span><br><span class="line">  .animal-wall</span><br><span class="line">  img.animal(</span><br><span class="line">    src=&quot;https://cdn.meimolihan.eu.org/hexo/img/color.avif&quot;</span><br><span class="line">    alt=&quot;动物&quot;</span><br><span class="line">    onerror=&quot;this.onerror=null;this.src=&#x27;/img/404.jpg&#x27;&quot;</span><br><span class="line">  )</span><br></pre></td></tr></table></figure><ul><li><strong>新建 <code>[BlogRoot]/source/css/welcome.css</code> 文件</strong></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 脚页添加小动物 */</span></span><br><span class="line"><span class="selector-id">#footer-animal</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">20px</span>; <span class="comment">/* 与上方内容间隔 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer-animal</span> <span class="selector-class">.animal-wall</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">36px</span>;</span><br><span class="line">    <span class="attribute">max-width</span>: none;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#bcb0a4</span> <span class="built_in">url</span>(<span class="string">&quot;https://cdn.meimolihan.eu.org/hexo/img/photo.avif&quot;</span>) repeat center;</span><br><span class="line">    <span class="attribute">background-size</span>: auto <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">7px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">15</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer-animal</span> <span class="selector-tag">img</span><span class="selector-class">.animal</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">974px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2</span>; <span class="comment">/* 确保在 .animal-wall 上方 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 响应式调整 */</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">1023px</span>) &#123;</span><br><span class="line">    <span class="selector-id">#footer-animal</span> <span class="selector-class">.animal-wall</span> &#123;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">4vw</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-id">#footer-animal</span> <span class="selector-tag">img</span><span class="selector-class">.animal</span> &#123;</span><br><span class="line">        <span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 确保页脚整体样式不受影响 */</span></span><br><span class="line"><span class="selector-id">#footer-bar</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 小动物移动 */</span></span><br><span class="line"><span class="comment">/* 容器：固定动画元素的布局空间 */</span></span><br><span class="line"><span class="selector-class">.animal-container</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">120px</span>;  <span class="comment">/* 根据动画位移范围调整 */</span></span><br><span class="line">    <span class="attribute">height</span>: auto;  <span class="comment">/* 确保高度足够容纳动画 */</span></span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">contain</span>: layout paint;  <span class="comment">/* 隔离布局和绘制影响 */</span></span><br><span class="line">    <span class="attribute">perspective</span>: <span class="number">1000px</span>;  <span class="comment">/* 启用3D渲染上下文 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 动画元素 */</span></span><br><span class="line"><span class="selector-class">.animal</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: sway <span class="number">3s</span> ease-in-out infinite;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">position</span>: relative;  <span class="comment">/* 脱离文档流，避免重排 */</span></span><br><span class="line">    <span class="attribute">will-change</span>: transform;  <span class="comment">/* 提前优化动画性能 */</span></span><br><span class="line">    <span class="attribute">backface-visibility</span>: hidden;  <span class="comment">/* 修复渲染闪烁 */</span></span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateZ</span>(<span class="number">0</span>);  <span class="comment">/* 强制GPU加速 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 关键帧动画 */</span></span><br><span class="line"><span class="keyword">@keyframes</span> sway &#123;</span><br><span class="line">    <span class="number">0%</span>, <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">5px</span>) <span class="built_in">translateZ</span>(<span class="number">0</span>);  <span class="comment">/* 减小位移范围 */</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">5px</span>) <span class="built_in">translateZ</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 在低于1100px的屏幕宽度下关闭动画 */</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">1099px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.animal</span> &#123;</span><br><span class="line">        <span class="attribute">animation</span>: none <span class="meta">!important</span>;  <span class="comment">/* 关闭动画 */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-➕引入-welcome-css">2. ➕引入 <code>welcome.css</code></h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/welcome.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-🚀-清理并重启项目：-2">3. 🚀 清理并重启项目：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><hr><p><a id="poem-widget"></a></p><h2 id="📜-二十六、今日诗词侧边栏">📜 二十六、今日诗词侧边栏</h2><h3 id="✨-功能特点-26">✨ 功能特点</h3><p>在侧边栏显示随机古诗词，每日更新，增添文化气息，提升博客品味。</p><h3 id="🔧-实现步骤-11">🔧 实现步骤</h3><h4 id="1-➕-创建诗词组件：">1. ➕ 创建诗词组件：</h4><p>张洪Heo：<a href="https://blog.zhheo.com/p/2ed9d8dd.html">https://blog.zhheo.com/p/2ed9d8dd.html</a><br>今日诗词API：<a href="https://www.jinrishici.com/">https://www.jinrishici.com/</a></p><p><strong>创建组件</strong><br>主题新建<code>[BlogRoot]/themes/butterfly/layout/includes/widget/card_poem.pug</code>内容如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#card-poem.card-widget</span><br><span class="line">    #poem_sentence</span><br><span class="line">    #poem_info</span><br><span class="line">        #poem_dynasty</span><br><span class="line">        span.dot &lt;!-- 插入一个元素 --&gt;</span><br><span class="line">        #poem_author</span><br><span class="line">script(src=&#x27;https://cdn.jsdelivr.net/npm/js-heo@1.0.11/poem/jinrishici.js&#x27;, charset=&#x27;utf-8&#x27;)</span><br><span class="line">script(type=&#x27;text/javascript&#x27;).</span><br><span class="line">    jinrishici.load(function(result) &#123;</span><br><span class="line">        var sentence = document.querySelector(&quot;#poem_sentence&quot;)</span><br><span class="line">        var author = document.querySelector(&quot;#poem_author&quot;)</span><br><span class="line">        var dynasty = document.querySelector(&quot;#poem_dynasty&quot;)</span><br><span class="line"></span><br><span class="line">        var sentenceText = result.data.content</span><br><span class="line">        sentenceText = sentenceText.substr(0, sentenceText.length - 1);</span><br><span class="line">        sentence.innerHTML = sentenceText</span><br><span class="line">        dynasty.innerHTML = result.data.origin.dynasty</span><br><span class="line">        author.innerHTML = result.data.origin.author + &#x27;《&#x27; + result.data.origin.title + &#x27;》&#x27;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><h4 id="2-🔨-配置侧边栏布局">2. 🔨 配置侧边栏布局</h4><ul><li>引入组件<ul><li>在 <code>[BlogRoot]/themes/butterfly/layout/includes/widget/index.pug</code> 中你需要的位置添加以下内容：</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!=partial(&#x27;includes/widget/card_poem&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br></pre></td></tr></table></figure><ul><li>填写示例，可以在俩个</li></ul><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#aside-content.aside-content</span><br><span class="line">  //- post</span><br><span class="line">  if is_post()</span><br><span class="line">    - const tocStyle = page.toc_style_simple</span><br><span class="line">    - const tocStyleVal = tocStyle <span class="comment">=== true || tocStyle === false ? tocStyle : theme.toc.style_simple</span></span><br><span class="line">    if showToc &amp;&amp; tocStyleVal</span><br><span class="line">      .sticky_layout</span><br><span class="line">        include ./card_post_toc.pug</span><br><span class="line">    else</span><br><span class="line">      !=partial(&#x27;includes/widget/card_author&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line"><span class="addition">+     !=partial(&#x27;includes/widget/card_poem&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span></span><br><span class="line">      !=partial(&#x27;includes/widget/card_announcement&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">      !=partial(&#x27;includes/widget/card_top_self&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">      .sticky_layout</span><br><span class="line">        if showToc</span><br><span class="line">          include ./card_post_toc.pug</span><br><span class="line">        !=partial(&#x27;includes/widget/card_weibo&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">        !=partial(&#x27;includes/widget/card_recent_post&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">        !=partial(&#x27;includes/widget/card_ad&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">  else</span><br><span class="line">    //- page</span><br><span class="line">    !=partial(&#x27;includes/widget/card_author&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line"><span class="addition">+   !=partial(&#x27;includes/widget/card_poem&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span></span><br><span class="line">    !=partial(&#x27;includes/widget/card_announcement&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">    !=partial(&#x27;includes/widget/card_top_self&#x27;, &#123;&#125;, &#123;cache: true&#125;)   </span><br></pre></td></tr></table></figure><ul><li><strong>创建 <code>Hexo根目录/source/css/custom.css</code> 文件，将代码复制粘贴到该文件中。</strong></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#card-poem</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0.5rem</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">130px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#poem_sentence</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">font-family</span>: serif,cursive;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.9</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">0.66rem</span>; <span class="comment">/* 诗词与作者 间距调整 */</span></span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">1rem</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">62px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--theme-color);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span> <span class="selector-tag">div</span><span class="selector-id">#poem_sentence</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-dark);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 朝代 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#poem_dynasty</span> &#123;</span><br><span class="line">    <span class="attribute">order</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">1px</span> <span class="number">5px</span> <span class="number">5px</span> <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--font-color);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span> <span class="selector-tag">div</span><span class="selector-id">#poem_dynasty</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-dark);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 诗词作者和名字 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#poem_info</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--font-color);</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0.5rem</span>;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">11px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#poem_author</span> &#123;</span><br><span class="line">    <span class="attribute">order</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span> <span class="selector-tag">div</span><span class="selector-id">#poem_author</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-dark);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 小点的样式 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#poem_info</span> <span class="selector-class">.dot</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">6px</span>; <span class="comment">/* 小点的宽度 */</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">6px</span>; <span class="comment">/* 小点的高度 */</span></span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--theme-color); <span class="comment">/* 小点的颜色，使用 CSS 变量 */</span></span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>; <span class="comment">/* 将小点变成圆形 */</span></span><br><span class="line">    <span class="attribute">position</span>: relative; <span class="comment">/* 使用相对定位 */</span></span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">6px</span>, <span class="number">15px</span>); <span class="comment">/* 向右移动 10 像素，向下移动 5 像素 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-➕引入-custom-css">2. ➕引入 <code>custom.css</code></h4><ul><li>在 <code>_config.butterfly.yml</code> 文件中找到 <code>inject</code> 部分，添加以下内容：</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-🚀-清理并重启项目：-3">3. 🚀 清理并重启项目：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><hr><p><a id="copy-popup"></a></p><h2 id="📋二十七、复制弹窗提醒">📋二十七、复制弹窗提醒</h2><ul><li><strong>修改 <code>_config.butterfly.yml</code></strong></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Snackbar - Toast 复制提醒通知</span></span><br><span class="line"><span class="comment"># https://github.com/polonel/SnackBar</span></span><br><span class="line"><span class="comment"># top-left      # 通知位置：屏幕左上角（默认位置）</span></span><br><span class="line"><span class="comment"># top-center  # 通知位置：屏幕顶部居中</span></span><br><span class="line"><span class="comment"># top-right     # 通知位置：屏幕右上角</span></span><br><span class="line"><span class="comment"># bottom-left   # 通知位置：屏幕左下角</span></span><br><span class="line"><span class="comment"># bottom-center# 通知位置：屏幕底部居中</span></span><br><span class="line"><span class="comment"># bottom-right# 通知位置：屏幕右下角</span></span><br><span class="line"><span class="attr">snackbar:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 是否启用 Snackbar</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">top-center</span> <span class="comment"># 通知位置：屏幕顶部居中</span></span><br><span class="line">  <span class="comment"># 浅色模式和深色模式下的通知背景颜色</span></span><br><span class="line">  <span class="attr">bg_light:</span> <span class="string">&#x27;#BDB76B&#x27;</span></span><br><span class="line">  <span class="attr">bg_dark:</span> <span class="string">&#x27;#BDB76B&#x27;</span></span><br></pre></td></tr></table></figure><hr><p><a id="butterfly-envelope"></a></p><h2 id="✨-二十八、留言板-Violet-风格">✨ 二十八、留言板 Violet 风格</h2><p><code>hexo-butterfly-envelope</code> 是一款专为 Butterfly 主题设计的留言板插件。它以其独特的信封抽拉动画和优雅的紫罗兰（Violet）风格设计而备受青睐。</p><h3 id="1-📦-安装插件">1.📦 安装插件</h3><p>在博客根目录下运行以下命令来安装插件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-envelope --save</span><br></pre></td></tr></table></figure><h3 id="2-⚙️-配置菜单">2. ⚙️ 配置菜单</h3><p>在主题配置文件 <code>_config.butterfly.yml</code> 中，为 <code>menu</code> 项添加【留言板】条目，并指定其图标。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">首页:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">icon-zhuye</span> <span class="string">||</span> <span class="string">faa-tada</span></span><br><span class="line">  <span class="string">文章</span> <span class="string">||</span> <span class="string">icon-wenzhang</span> <span class="string">||</span> <span class="string">faa-tada</span> <span class="string">||</span> <span class="attr">hide:</span></span><br><span class="line">  <span class="string">标签:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">icon-biaoqian</span> <span class="string">||</span> <span class="string">faa-tada</span></span><br><span class="line">  <span class="string">分类:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">icon-fenlei</span> <span class="string">||</span> <span class="string">faa-tada</span></span><br><span class="line">  <span class="string">留言板:</span> <span class="string">/comments/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-envelope</span> <span class="comment"># 新增此行</span></span><br><span class="line">  <span class="string">关于:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">icon-guanyu1</span> <span class="string">||</span> <span class="string">faa-tada</span></span><br></pre></td></tr></table></figure><h3 id="3-🔧-配置详解">3. 🔧 配置详解</h3><p>以下所有配置均需添加到主题配置文件 <code>_config.butterfly.yml</code> 中。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># see https://akilar.top/posts/e2d3c450/</span></span><br><span class="line"><span class="attr">envelope_comment:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#控制开关</span></span><br><span class="line">  <span class="attr">custom_pic:</span></span><br><span class="line">    <span class="attr">cover:</span> <span class="string">https://cdn.meimolihan.eu.org/hexo/violet/violet.webp</span> <span class="comment">#信笺头部图片</span></span><br><span class="line">    <span class="attr">line:</span> <span class="string">https://cdn.meimolihan.eu.org/hexo/violet/line.png</span> <span class="comment">#信笺底部图片</span></span><br><span class="line">    <span class="attr">beforeimg:</span> <span class="string">https://cdn.meimolihan.eu.org/hexo/violet/before.png</span> <span class="comment"># 信封前半部分</span></span><br><span class="line">    <span class="attr">afterimg:</span> <span class="string">https://cdn.meimolihan.eu.org/hexo/violet/after.png</span> <span class="comment"># 信封后半部分</span></span><br><span class="line">  <span class="attr">message:</span> <span class="comment">#信笺正文，多行文本，写法如下</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想问的？</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想说的？</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想吐槽的？</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">哪怕是有什么想吃的，都可以告诉我哦~</span></span><br><span class="line">  <span class="attr">bottom:</span> <span class="string">自动书记人偶竭诚为您服务！</span> <span class="comment">#仅支持单行文本</span></span><br><span class="line">  <span class="attr">height:</span> <span class="string">1050px</span> <span class="comment"># 信封划出的高度，可根据内容多少调整</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">comments</span> <span class="comment"># 【可选】留言板页面的路径名称。默认为 comments，访问地址是 /comments/</span></span><br><span class="line">  <span class="attr">front_matter:</span> <span class="comment"># 【可选】为留言板页面设置单独的 Front Matter</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">留言板</span></span><br><span class="line">    <span class="attr">comments:</span> <span class="literal">true</span> <span class="comment"># 确保此页面的评论功能是开启的</span></span><br></pre></td></tr></table></figure><h3 id="4-🌐-CDN-配置推荐">4. 🌐 CDN 配置推荐</h3><p>为了加速图片加载，建议使用 CDN 服务。以下是三种推荐的配置方案。</p><h4 id="🚀-jsDelivr-CDN">🚀 jsDelivr CDN</h4><p><a href="https://www.jsdelivr.com/">jsDelivr</a> 是一个免费的公共 CDN，速度快且稳定，非常适合开源项目。<strong>（推荐使用）</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_pic:</span></span><br><span class="line">  <span class="attr">cover:</span> <span class="string">https://cdn.jsdelivr.net/gh/meimolihan/cdn@v1.0.0/hexo/violet/violet.webp</span></span><br><span class="line">  <span class="attr">line:</span> <span class="string">https://cdn.jsdelivr.net/gh/meimolihan/cdn@v1.0.0/hexo/violet/line.png</span></span><br><span class="line">  <span class="attr">beforeimg:</span> <span class="string">https://cdn.jsdelivr.net/gh/meimolihan/cdn@v1.0.0/hexo/violet/before.png</span></span><br><span class="line">  <span class="attr">afterimg:</span> <span class="string">https://cdn.jsdelivr.net/gh/meimolihan/cdn@v1.0.0/hexo/violet/after.png</span></span><br></pre></td></tr></table></figure><h4 id="🦄-Vercel-CDN">🦄 Vercel CDN</h4><p>如果您希望使用自己的图床，可以将图片部署到 <a href="https://vercel.com/">Vercel</a> 等平台，获得更自主的控制权。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_pic:</span></span><br><span class="line">  <span class="attr">cover:</span> <span class="string">https://cdn.meimolihan.eu.org/hexo/violet/violet.webp</span> <span class="comment">#信笺头部图片</span></span><br><span class="line">  <span class="attr">line:</span> <span class="string">https://cdn.meimolihan.eu.org/hexo/violet/line.png</span> <span class="comment">#信笺底部图片</span></span><br><span class="line">  <span class="attr">beforeimg:</span> <span class="string">https://cdn.meimolihan.eu.org/hexo/violet/before.png</span> <span class="comment"># 信封前半部分</span></span><br><span class="line">  <span class="attr">afterimg:</span> <span class="string">https://cdn.meimolihan.eu.org/hexo/violet/after.png</span> <span class="comment"># 信封后半部分</span></span><br></pre></td></tr></table></figure><h4 id="🏢-官方-CDN">🏢 官方 CDN</h4><p>插件也提供了由 npm 分发的官方图片链接，作为备选方案。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_pic:</span></span><br><span class="line">  <span class="attr">cover:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-envelope/lib/violet.jpg</span></span><br><span class="line">  <span class="attr">line:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-envelope/lib/line.png</span></span><br><span class="line">  <span class="attr">beforeimg:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-envelope/lib/before.png</span></span><br><span class="line">  <span class="attr">afterimg:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-envelope/lib/after.png</span></span><br></pre></td></tr></table></figure><hr><p><a id="butterfly-swiper"></a></p><h2 id="二十九-、📖-文章置顶轮播图">二十九 、📖 文章置顶轮播图</h2><blockquote><p>🚀 提示：本插件基于Butterfly主题深度定制，安装后无需额外样式调整即可完美融入您的博客设计。<br><em>🔗 插件作者：Akilar</em><br><em>🌐 来源：<a href="https://akilar.top/posts/8e1264d1/">https://akilar.top/posts/8e1264d1/</a></em></p></blockquote><h3 id="📦-安装步骤">📦 安装步骤</h3><p>在博客根目录<code>[Blogroot]</code>下打开终端，运行以下安装指令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-swiper --save</span><br></pre></td></tr></table></figure><h3 id="⚙️-配置说明">⚙️ 配置说明</h3><p>在站点配置文件<code>_config.yml</code>或者主题配置文件<code>_config.butterfly.yml</code>中添加以下配置段：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo-butterfly-swiper</span></span><br><span class="line"><span class="comment"># 详细教程请参考：https://akilar.top/posts/8e1264d1/</span></span><br><span class="line"><span class="attr">swiper:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 功能开关</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">5</span> <span class="comment"># 过滤器优先权</span></span><br><span class="line">  <span class="attr">enable_page:</span> <span class="string">all</span> <span class="comment"># 应用页面</span></span><br><span class="line">  <span class="attr">timemode:</span> <span class="string">date</span> <span class="comment"># 时间显示模式：date/updated</span></span><br><span class="line">  <span class="attr">layout:</span> <span class="comment"># 挂载容器配置</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">id</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">recent-posts</span></span><br><span class="line">    <span class="attr">index:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">default_descr:</span> <span class="string">再怎么看我也不知道怎么描述它的啦！</span> <span class="comment"># 默认文章描述</span></span><br><span class="line">  <span class="attr">swiper_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css</span> <span class="comment"># swiper css依赖</span></span><br><span class="line">  <span class="attr">swiper_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js</span> <span class="comment"># swiper js依赖</span></span><br><span class="line">  <span class="attr">custom_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css</span> <span class="comment"># 适配主题样式补丁</span></span><br><span class="line">  <span class="attr">custom_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js</span> <span class="comment"># swiper初始化方法</span></span><br></pre></td></tr></table></figure><h3 id="🔧-参数详解">🔧 参数详解</h3><table><thead><tr><th>参数</th><th>备选值/类型</th><th>释义</th></tr></thead><tbody><tr><td><code>priority</code></td><td>number</td><td>【可选】过滤器优先级，数值越小，执行越早，默认为10</td></tr><tr><td><code>enable</code></td><td>true/false</td><td>【必选】功能控制开关</td></tr><tr><td><code>enable_page</code></td><td>path/all</td><td>【可选】填写想要应用的页面的相对路径（即路由地址）。如根目录填’/‘，分类页面填’/categories/'。填’all’应用于所有页面</td></tr><tr><td><code>timemode</code></td><td>date/updated</td><td>【可选】时间显示模式，date为创建日期，updated为更新日期</td></tr><tr><td><code>layout.type</code></td><td>id/class</td><td>【可选】挂载容器类型，填写id或class，默认为id</td></tr><tr><td><code>layout.name</code></td><td>text</td><td>【必选】挂载容器名称</td></tr><tr><td><code>layout.index</code></td><td>0和正整数</td><td>【可选】当layout.type为class时使用，指定同级class中的顺位</td></tr><tr><td><code>default_descr</code></td><td>text</td><td>【可选】默认文章描述文本</td></tr><tr><td><code>swiper_css</code></td><td>url</td><td>【可选】自定义swiper的CSS依赖链接</td></tr><tr><td><code>swiper_js</code></td><td>url</td><td>【可选】自定义swiper的JS依赖链接</td></tr><tr><td><code>custom_css</code></td><td>url</td><td>【可选】主题适配样式补丁</td></tr><tr><td><code>custom_js</code></td><td>url</td><td>【可选】swiper初始化方法脚本</td></tr></tbody></table><h3 id="📝-使用方法">📝 使用方法</h3><p>在需要置顶的文章的front-matter中添加<code>swiper_index</code>配置项：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 文章标题</span><br><span class="line">date: 创建日期</span><br><span class="line">updated: 更新日期</span><br><span class="line">cover: 文章封面</span><br><span class="line">description: 文章描述</span><br><span class="line"><span class="section">swiper<span class="emphasis">_index: 1 # 置顶轮播图顺序，非负整数（0,1,2,...），数字越大越靠前</span></span></span><br><span class="line"><span class="emphasis"><span class="section">---</span></span></span><br></pre></td></tr></table></figure><hr><h2 id="💫-总结">💫 总结</h2><p>本指南详细介绍了26种Hexo博客美化技巧，从基础的样式修改到高级的交互效果，全方位提升博客的视觉体验和用户体验。</p><h3 id="🔧-使用建议">🔧 使用建议</h3><ol><li><strong>按需启用</strong>：根据实际需求选择合适的功能</li><li><strong>逐步测试</strong>：每次只添加一个功能并进行测试</li><li><strong>定期备份</strong>：修改前备份原始文件</li><li><strong>自定义调整</strong>：根据个人喜好调整参数和样式</li></ol><h3 id="📚-学习资源">📚 学习资源</h3><ul><li><a href="https://hexo.io/zh-cn/docs/">Hexo官方文档</a></li><li><a href="https://butterfly.js.org/">Butterfly主题文档</a></li><li><a href="https://animate.style/">CSS动画指南</a></li><li><a href="https://fontawesome.com/">字体图标库</a></li></ul><p>🎉 祝你的博客美化之旅顺利！如有问题，欢迎在评论区交流讨论。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Hexo + Butterfly 主题美化指南 🎨&lt;/h1&gt;
&lt;p&gt;&lt;img src=&quot;https://file.meimolihan.eu.org/img/hexo-01.webp&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;✨ 特别说明</summary>
      
    
    
    
    <category term="默认分类" scheme="https://www.meimolihan.eu.org/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/"/>
    
    
    <category term="hexo" scheme="https://www.meimolihan.eu.org/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>Hexo + Butterfly 博客搭建指南 🎨</title>
    <link href="https://www.meimolihan.eu.org/posts/e3de0347.html"/>
    <id>https://www.meimolihan.eu.org/posts/e3de0347.html</id>
    <published>2025-09-13T02:15:59.000Z</published>
    <updated>2025-09-13T02:15:59.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Hexo + Butterfly 博客搭建指南 🎨</h1><p><img src="https://file.meimolihan.eu.org/img/hexo-01.webp" alt=""></p><blockquote><p><strong>✨ 特别说明</strong><br>欢迎访问**<a href="https://www.meimolihan.eu.org/">本站</a>**！本博客基于 <strong><a href="https://hexo.io/zh-cn/">Hexo</a></strong> 静态框架 + <strong><a href="https://butterfly.js.org/">Butterfly</a></strong> 主题构建，兼具简洁美观与强大功能。<br>📌 本站内容仅供学习交流，不承担因版本差异导致的问题。已适配版本：</p><ul><li>Hexo <code>7.3.0</code></li><li>Butterfly <code>5.5.0</code></li></ul></blockquote><hr><h2 id="📑-导航目录">📑 导航目录</h2><ul><li><a href="#install-basic-tools">🛠️ 一、下载安装基础运行程序</a></li><li><a href="#install-hexo">⚙️ 二、安装 Hexo</a></li><li><a href="#hexo-commands">🔧 三、Hexo 常用命令</a></li><li><a href="#install-butterfly">🎨 四、安装与配置 Butterfly 主题</a></li><li><a href="#setup-navigation">🧭 五、设置导航菜单</a></li><li><a href="#dynamic-effects">✨ 六、动态特效与功能增强</a></li><li><a href="#stats-and-search">📊 七、数据统计与搜索</a></li><li><a href="#random-cover-api">🖼️ 八、随机封面图 API</a></li><li><a href="#subtitle-and-sidebar">💫 九、副标题与侧边栏优化</a></li><li><a href="#permalinks">🔗 十、永久链接生成</a></li><li><a href="#blog-migration">🔄 十一、博客迁移指南</a></li><li><a href="#plugins-and-updates">📦 十二、插件列表与升级指南</a></li></ul><hr><p><a id="install-basic-tools"></a></p><h2 id="🛠️-一、下载安装基础运行程序">🛠️ 一、下载安装基础运行程序</h2><p>搭建博客前，需安装以下基础工具：</p><ol><li><strong>Git</strong>：<a href="https://git-scm.com/">下载地址</a><br>📌 安装时注意勾选“Add Git Bash Here”和“Add to PATH”选项。</li><li><strong>Node.js</strong>：<a href="https://nodejs.org/en/">下载地址</a><br>📌 建议选择 LTS 版本，确保环境稳定性。</li></ol><h3 id="🔄-切换淘宝镜像加速">🔄 切换淘宝镜像加速</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry http://registry.npm.taobao.org/</span><br><span class="line"><span class="comment"># 验证是否切换成功</span></span><br><span class="line">npm get registry</span><br></pre></td></tr></table></figure><p>🔧 如需切换回官方源：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npmmirror.com/</span><br></pre></td></tr></table></figure><hr><p><a id="install-hexo"></a></p><h2 id="⚙️-二、安装-Hexo">⚙️ 二、安装 Hexo</h2><h3 id="🌍-全局安装-Hexo-CLI">🌍 全局安装 Hexo CLI</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><h3 id="📦-局部安装（可选）">📦 局部安装（可选）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo</span><br></pre></td></tr></table></figure><h3 id="🔄-升级-Hexo">🔄 升级 Hexo</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm update hexo -g</span><br></pre></td></tr></table></figure><h3 id="查看当前版本">查看当前版本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm list hexo</span><br></pre></td></tr></table></figure><hr><p><a id="hexo-commands"></a></p><h2 id="🔧-三、Hexo-常用命令">🔧 三、Hexo 常用命令</h2><h3 id="1-初始化博客">1. 初始化博客</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo init blog  <span class="comment"># 创建名为 blog 的目录并初始化</span></span><br><span class="line"><span class="built_in">cd</span> blog &amp;&amp; npm install  <span class="comment"># 进入目录并安装依赖</span></span><br></pre></td></tr></table></figure><h3 id="2-常用命令组合">2. 常用命令组合</h3><table><thead><tr><th>组合命令</th><th>说明</th></tr></thead><tbody><tr><td><code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</code></td><td>清除缓存 → 生成静态文件 → 启动本地服务器（推荐）</td></tr><tr><td><code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</code></td><td>清除缓存 → 生成静态文件 → 部署到远程仓库</td></tr><tr><td><code>hexo clean &amp;&amp; hexo g -d</code></td><td>清除缓存后直接生成并部署（简化版）</td></tr><tr><td><code>hexo new &quot;文章标题&quot; &amp;&amp; hexo s</code></td><td>创建新文章后立即启动本地服务器预览</td></tr><tr><td><code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo s -p 5000</code></td><td>清除缓存 → 生成 → 在指定端口(5000)启动服务器</td></tr></tbody></table><hr><p><a id="install-butterfly"></a></p><h2 id="🎨-四、安装与配置-Butterfly-主题">🎨 四、安装与配置 Butterfly 主题</h2><h3 id="1-克隆主题仓库">1. 克隆主题仓库</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly</span><br></pre></td></tr></table></figure><h3 id="2-安装渲染器">2. 安装渲染器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure><h3 id="3-启用主题">3. 启用主题</h3><p>修改根目录 <code>_config.yml</code>：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">butterfly</span></span><br></pre></td></tr></table></figure><h3 id="4-主题配置优化">4. 主题配置优化</h3><p>将主题配置文件 <code>themes/butterfly/_config.yml</code> 移动至根目录并重命名为 <code>_config.butterfly.yml</code>，便于统一管理。</p><hr><p><a id="setup-navigation"></a></p><h2 id="🧭-五、设置导航菜单">🧭 五、设置导航菜单</h2><h3 id="1-配置菜单项">1. 配置菜单项</h3><ul><li><strong>编辑 <code>_config.butterfly.yml</code></strong></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">主页:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="string">标签:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="string">分类:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-archive</span></span><br><span class="line">  <span class="string">归档:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-folder-open</span></span><br><span class="line">  <span class="string">友链:</span> <span class="string">/link/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-link</span></span><br><span class="line">  <span class="string">关于:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-heart</span></span><br><span class="line">  <span class="string">留言板:</span> <span class="string">/comment/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-paper-plane</span></span><br></pre></td></tr></table></figure><h3 id="2-创建菜单页面">2. 创建菜单页面</h3><p>使用 Hexo 页面生成命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hexo new page tags      <span class="comment"># 创建“标签”页面</span></span><br><span class="line">hexo new page categories <span class="comment"># 创建“分类”页面</span></span><br><span class="line">hexo new page archives   <span class="comment"># 创建“归档”页面</span></span><br><span class="line">hexo new page <span class="built_in">link</span>       <span class="comment"># 创建“友链”页面</span></span><br><span class="line">hexo new page about      <span class="comment"># 创建“关于”页面</span></span><br><span class="line">hexo new page comment    <span class="comment"># 创建“留言板”页面</span></span><br></pre></td></tr></table></figure><h3 id="3-友链数据配置">3. 友链数据配置</h3><p>在 <code>source/_data/link.yml</code> 中配置友链信息（示例）：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">友情链接</span></span><br><span class="line">  <span class="attr">class_desc:</span> <span class="string">那些人，那些事</span></span><br><span class="line">  <span class="attr">link_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Hexo</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://hexo.io/zh-tw/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">快速、简单且强大的网志框架</span></span><br></pre></td></tr></table></figure><h3 id="4-文章模板优化">4. 文章模板优化</h3><p>编辑 <code>scaffolds/post.md</code> 可自定义文章 Front Matter：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> &#123;&#123; <span class="string">title</span> &#125;&#125;</span><br><span class="line"><span class="attr">date:</span> &#123;&#123; <span class="string">date</span> &#125;&#125;</span><br><span class="line"><span class="attr">description:</span> &#123;&#123; <span class="string">description</span> &#125;&#125;</span><br><span class="line"><span class="attr">top_img:</span> &#123;&#123; <span class="string">top_img</span> &#125;&#125;</span><br><span class="line"><span class="attr">sticky:</span> &#123;&#123; <span class="string">sticky</span> &#125;&#125;</span><br><span class="line"><span class="attr">categories:</span></span><br><span class="line">  <span class="bullet">-</span> </span><br><span class="line"><span class="attr">tags:</span></span><br><span class="line">  <span class="bullet">-</span> </span><br><span class="line"><span class="attr">cover:</span> &#123;&#123; <span class="string">cover</span> &#125;&#125;</span><br><span class="line"><span class="attr">updated:</span> &#123;&#123; <span class="string">date</span> &#125;&#125;</span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><hr><p><a id="dynamic-effects"></a></p><h2 id="✨-六、动态特效与功能增强">✨ 六、动态特效与功能增强</h2><h3 id="1-动态彩带效果">1. 动态彩带效果</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">canvas_fluttering_ribbon:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span>  <span class="comment"># 移动端禁用</span></span><br></pre></td></tr></table></figure><h3 id="2-鼠标点击特效">2. 鼠标点击特效</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">fireworks:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span>  <span class="comment"># 可开启烟花特效</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">9999</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h3 id="3-页面加载动画">3. 页面加载动画</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">preloader:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">source:</span> <span class="number">1</span>  <span class="comment"># 1=全屏加载动画，2=进度条</span></span><br></pre></td></tr></table></figure><hr><p><a id="stats-and-search"></a></p><h2 id="📊-七、数据统计与搜索">📊 七、数据统计与搜索</h2><h3 id="1-字数统计插件">1. 字数统计插件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-wordcount --save or yarn add hexo-wordcount</span><br></pre></td></tr></table></figure><p>配置主题文件：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">wordcount:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post_wordcount:</span> <span class="literal">true</span>    <span class="comment"># 文章字数</span></span><br><span class="line">  <span class="attr">min2read:</span> <span class="literal">true</span>          <span class="comment"># 阅读时间</span></span><br><span class="line">  <span class="attr">total_wordcount:</span> <span class="literal">true</span>   <span class="comment"># 总字数统计</span></span><br></pre></td></tr></table></figure><h3 id="2-本地搜索功能">2. 本地搜索功能</h3><ul><li><strong>安装搜索插件</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure><ul><li><strong>在 <code>_config.yml</code> 主配置文件中添加</strong></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">format:</span> <span class="string">html</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">10000</span></span><br></pre></td></tr></table></figure><ul><li><strong>在 <code>_config.butterfly.yml</code> 主题配置中启用</strong></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">use:</span> <span class="string">local_search</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><hr><p><a id="random-cover-api"></a></p><h2 id="🖼️-八、随机封面图-API">🖼️ 八、随机封面图 API</h2><h3 id="1-创建随机图脚本">1. 创建随机图脚本</h3><ul><li><strong>在 <code>themes/butterfly/scripts/</code> 下创建 <code>random_img.js</code></strong></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Butterfly</span></span><br><span class="line"><span class="comment"> * random cover</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 提取正则表达式作为常量，避免每次调用时都重新创建</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">IMG_TEST_REG</span> = <span class="regexp">/\.(png|jpe?g|gif|svg|webp)(\?.*)?$/</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注册过滤器，在文章渲染前处理文章数据</span></span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">filter</span>.<span class="title function_">register</span>(<span class="string">&#x27;before_post_render&#x27;</span>, <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; config &#125; = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="keyword">const</span> &#123; post_asset_folder &#125; = config;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果启用了文章资源文件夹</span></span><br><span class="line">    <span class="keyword">if</span> (post_asset_folder) &#123;</span><br><span class="line">        <span class="title function_">processImagePath</span>(data, <span class="string">&#x27;top_img&#x27;</span>);</span><br><span class="line">        <span class="title function_">processImagePath</span>(data, <span class="string">&#x27;cover&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果文章的 cover 为 false，使用随机封面</span></span><br><span class="line">    <span class="keyword">if</span> (data.<span class="property">cover</span> === <span class="literal">false</span>) &#123;</span><br><span class="line">        data.<span class="property">randomcover</span> = <span class="title function_">getRandomCover</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 否则，使用文章的 cover 或者随机封面</span></span><br><span class="line">        data.<span class="property">cover</span> = data.<span class="property">cover</span> || <span class="title function_">getRandomCover</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 处理图片路径的函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">processImagePath</span>(<span class="params">data, key</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> image = data[key];</span><br><span class="line">    <span class="keyword">if</span> (image &amp;&amp; image.<span class="title function_">indexOf</span>(<span class="string">&#x27;/&#x27;</span>) === -<span class="number">1</span> &amp;&amp; <span class="variable constant_">IMG_TEST_REG</span>.<span class="title function_">test</span>(image)) &#123;</span><br><span class="line">        data[key] = data.<span class="property">path</span> + image;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取随机封面的函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getRandomCover</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> theme = hexo.<span class="property">theme</span>.<span class="property">config</span>;</span><br><span class="line">    <span class="keyword">let</span> cover;</span><br><span class="line">    <span class="keyword">let</span> num;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> defaultCovers = theme.<span class="property">cover</span> &amp;&amp; theme.<span class="property">cover</span>.<span class="property">default_cover</span>;</span><br><span class="line">    <span class="keyword">if</span> (defaultCovers) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(defaultCovers)) &#123;</span><br><span class="line">            cover = defaultCovers;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            num = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * defaultCovers.<span class="property">length</span>);</span><br><span class="line">            cover = defaultCovers[num];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        cover = theme.<span class="property">default_top_img</span> || <span class="string">&#x27;data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据配置添加随机后缀</span></span><br><span class="line">    <span class="keyword">if</span> (theme.<span class="property">cover</span> &amp;&amp; theme.<span class="property">cover</span>.<span class="property">suffix</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> randomValue = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">10000</span>);</span><br><span class="line">        <span class="keyword">if</span> (theme.<span class="property">cover</span>.<span class="property">suffix</span> === <span class="number">1</span>) &#123;</span><br><span class="line">            cover += <span class="string">`?<span class="subst">$&#123;randomValue&#125;</span>`</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (theme.<span class="property">cover</span>.<span class="property">suffix</span> === <span class="number">2</span>) &#123;</span><br><span class="line">            cover += <span class="string">`&amp;<span class="subst">$&#123;randomValue&#125;</span>`</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> cover;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://file.meimolihan.eu.org/screenshot/random_img-01.jpg" alt="效果"></p><h3 id="2-配置封面设置">2. 配置封面设置</h3><ul><li><strong>在 <code>_config.butterfly.yml</code>  主题配置中修改</strong></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cover:</span></span><br><span class="line">  <span class="attr">index_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">aside_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">archives_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">both</span></span><br><span class="line">  <span class="attr">suffix:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">default_cover:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="string">https://api.mobufan.eu.org:666</span>  <span class="comment"># 随机图API</span></span><br></pre></td></tr></table></figure><hr><p><a id="subtitle-and-sidebar"></a></p><h2 id="💫-九、副标题与侧边栏优化">💫 九、副标题与侧边栏优化</h2><h3 id="1-动态副标题设置-config-butterfly-yml">1. 动态副标题设置  <code>_config.butterfly.yml</code></h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">subtitle:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">effect:</span> <span class="literal">true</span>  <span class="comment"># 打字机效果</span></span><br><span class="line">  <span class="attr">source:</span> <span class="number">1</span>     <span class="comment"># 调用一言API</span></span><br><span class="line">  <span class="attr">sub:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">你在抱怨什么呢</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">为明天到来的事，说人生像是没有意义</span></span><br></pre></td></tr></table></figure><h3 id="2-侧边栏配置-config-butterfly-yml">2. 侧边栏配置  <code>_config.butterfly.yml</code></h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"><span class="comment"># 侧边栏设置</span></span><br><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="attr">aside:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>      <span class="comment"># 启用侧边栏</span></span><br><span class="line">  <span class="attr">hide:</span> <span class="literal">false</span>       <span class="comment"># 默认不隐藏</span></span><br><span class="line">  <span class="attr">button:</span> <span class="literal">true</span>      <span class="comment"># 显示隐藏侧边栏的按钮（右下角）</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">true</span>      <span class="comment"># 在移动设备上启用</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">right</span>   <span class="comment"># 侧边栏位置：left / right</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># 页面显示设置</span></span><br><span class="line">  <span class="attr">display:</span></span><br><span class="line">    <span class="attr">archive:</span> <span class="literal">true</span>   <span class="comment"># 在归档页面显示</span></span><br><span class="line">    <span class="attr">tag:</span> <span class="literal">true</span>       <span class="comment"># 在标签页面显示</span></span><br><span class="line">    <span class="attr">category:</span> <span class="literal">true</span>  <span class="comment"># 在分类页面显示</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># 作者信息卡片</span></span><br><span class="line">  <span class="attr">card_author:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span>    <span class="comment"># 显示作者卡片</span></span><br><span class="line">    <span class="attr">description:</span>    <span class="comment"># 作者描述</span></span><br><span class="line">    <span class="attr">button:</span></span><br><span class="line">      <span class="attr">enable:</span> <span class="literal">true</span>  <span class="comment"># 显示按钮</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fab</span> <span class="string">fa-github</span>  <span class="comment"># 按钮图标</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">GitHub</span>  <span class="comment"># 按钮文本</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://github.com/meimolihan</span>  <span class="comment"># 按钮链接</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># 公告卡片</span></span><br><span class="line">  <span class="attr">card_announcement:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span>    <span class="comment"># 显示公告卡片</span></span><br><span class="line">    <span class="attr">content:</span> <span class="string">&lt;center&gt;&lt;b&gt;---</span> <span class="string">主域名</span> <span class="string">---&lt;br&gt;&lt;a</span> <span class="string">href=&quot;https://www.meimolihan.eu.org&quot;</span> <span class="string">title=&quot;此线路部署于Vercel&quot;</span> <span class="string">class=&quot;anno_content&quot;&gt;&lt;font</span> <span class="string">color=&quot;#5ea6e5&quot;&gt;www.meimolihan.eu.org&lt;/font&gt;&lt;/a&gt;&amp;nbsp;|&amp;nbsp;&lt;a</span> <span class="string">href=&quot;https://meimolihan.eu.org&quot;</span> <span class="string">title=&quot;此线路部署于Vercel&quot;</span> <span class="string">class=&quot;anno_content&quot;&gt;&lt;font</span> <span class="string">color=&quot;#5ea6e5&quot;&gt;meimolihan.eu.org&lt;/font&gt;&lt;/a&gt;&lt;/b&gt;&lt;/center&gt;</span></span><br></pre></td></tr></table></figure><hr><p><a id="permalinks"></a></p><h2 id="🔗-十、永久链接生成">🔗 十、永久链接生成</h2><p><strong>插件链接: <a href="https://github.com/ohroy/hexo-abbrlink">xo-abbrlink</a></strong></p><h3 id="1-安装-abbrlink-插件">1. 安装 abbrlink 插件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-abbrlink --save</span><br></pre></td></tr></table></figure><h3 id="2-配置永久链接">2. 配置永久链接</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">permalink_defaults:</span> <span class="comment"># 默认永久链接格式</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">posts/:abbrlink.html</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># abbrlink 文章缩写链接生成配置</span></span><br><span class="line"><span class="attr">abbrlink:</span></span><br><span class="line">  <span class="attr">alg:</span> <span class="string">crc32</span>       <span class="comment"># 生成算法：可选 crc16（默认）或 crc32</span></span><br><span class="line">  <span class="attr">rep:</span> <span class="string">hex</span>         <span class="comment"># 链接格式：dec（十进制）或 hex（十六进制）</span></span><br><span class="line">  <span class="attr">drafts:</span> <span class="literal">false</span>    <span class="comment"># 是否处理草稿文章</span></span><br><span class="line">  <span class="attr">auto_category:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span>   <span class="comment"># 是否自动从文件路径生成分类</span></span><br><span class="line">    <span class="attr">depth:</span> <span class="number">3</span>       <span class="comment"># 生成分类的最大目录深度</span></span><br><span class="line">    <span class="attr">over_write:</span> <span class="literal">false</span> <span class="comment"># 是否覆盖已有分类</span></span><br><span class="line">  <span class="attr">auto_title:</span> <span class="literal">false</span> <span class="comment"># 是否根据路径自动生成标题</span></span><br><span class="line">  <span class="attr">auto_date:</span> <span class="literal">false</span>  <span class="comment"># 是否自动填充当前日期</span></span><br><span class="line">  <span class="attr">force:</span> <span class="literal">false</span>      <span class="comment"># 是否强制重新生成所有链接（忽略缓存）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 永久链接美化设置</span></span><br><span class="line"><span class="attr">pretty_urls:</span></span><br><span class="line">  <span class="attr">trailing_index:</span> <span class="literal">true</span>  <span class="comment"># false：链接中移除 index.html</span></span><br><span class="line">  <span class="attr">trailing_html:</span> <span class="literal">true</span>  <span class="comment"># false：移除链接末尾的 .html 后缀</span></span><br></pre></td></tr></table></figure><p><font color=#98FB98 size=4 face="STCAIYUN">🟡 警告：谨慎修改，不然部署到 Vercel 文章无法解析</font></p><h3 id="3-配置说明">3. 配置说明</h3><h4 id="crc16">crc16</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">crc16 &amp; hex</span><br><span class="line"><span class="attr">http</span>:<span class="comment">//localhost:4000/posts/66c8</span></span><br><span class="line"></span><br><span class="line">crc16 &amp; dec</span><br><span class="line"><span class="attr">http</span>:<span class="comment">//localhost:4000/posts/65535</span></span><br></pre></td></tr></table></figure><h4 id="crc32">crc32</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">crc32 &amp; hex</span><br><span class="line"><span class="attr">http</span>:<span class="comment">//localhost:4000/posts/8ddf18fb</span></span><br><span class="line"></span><br><span class="line">crc32 &amp; dec</span><br><span class="line"><span class="attr">http</span>:<span class="comment">//localhost:4000/posts/1690090958</span></span><br></pre></td></tr></table></figure><hr><p><a id="blog-migration"></a></p><h2 id="🔄-十一、博客迁移指南">🔄 十一、博客迁移指南</h2><h3 id="🖥️-新电脑环境配置">🖥️ 新电脑环境配置</h3><ol><li><strong>Git</strong>：<a href="https://git-scm.com/">下载地址</a><br>📌 安装时注意勾选“Add Git Bash Here”和“Add to PATH”选项。</li><li><strong>Node.js</strong>：<a href="https://nodejs.org/en/">下载地址</a><br>📌 建议选择 LTS 版本，确保环境稳定性。</li><li>关闭 SSL 严格模式（解决证书问题）： <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="built_in">set</span> strict-ssl <span class="literal">false</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="📦-迁移项目文件">📦 迁移项目文件</h3><ul><li><strong>拷贝以下文件到新项目：</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- `_config.yml`</span><br><span class="line">- `_config.butterfly.yml`</span><br><span class="line">- `themes/`</span><br><span class="line">- `<span class="built_in">source</span>/`</span><br><span class="line">- `scaffolds/`</span><br><span class="line">- `package.json`</span><br><span class="line">- `.gitignore`</span><br></pre></td></tr></table></figure><h3 id="🔑-SSH密钥重新配置">🔑 SSH密钥重新配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;YourName&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;your@email.com&quot;</span></span><br><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;your@email.com&quot;</span></span><br><span class="line"><span class="comment"># 将新公钥添加到GitHub</span></span><br></pre></td></tr></table></figure><h3 id="🚀-部署测试">🚀 部署测试</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g </span><br><span class="line">npm install</span><br><span class="line">npm install hexo-deployer-git --save</span><br><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><hr><p><a id="plugins-and-updates"></a></p><h2 id="📦-十二、插件列表与升级指南">📦 十二、插件列表与升级指南</h2><h3 id="🔄-全局安装-升级-Hexo-及相关工具常用命令">🔄 全局安装/升级 Hexo 及相关工具常用命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 全局安装 Hexo 命令行工具（hexo-cli）</span></span><br><span class="line">npm i hexo-cli -g</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 全局安装 npm-check：检查过时、未使用、可升级的依赖</span></span><br><span class="line">npm install -g npm-check</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 全局安装 npm-upgrade：交互式批量升级依赖版本</span></span><br><span class="line">npm install -g npm-upgrade</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 运行 npm-check，查看当前项目依赖的健康状况</span></span><br><span class="line">npm-check</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. 运行 npm-upgrade，交互式选择要升级的依赖</span></span><br><span class="line">npm-upgrade</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6. 升级所有**全局**安装的包到最新版本</span></span><br><span class="line">npm update -g</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7. 根据 package.json 范围规则，升级**当前项目**的依赖，并自动修改 package.json 与 package-lock.json</span></span><br><span class="line">npm update --save</span><br></pre></td></tr></table></figure><hr><h3 id="🧩-常用插件列表">🧩 常用插件列表</h3><table><thead><tr><th>插件名称</th><th>功能描述</th><th>安装命令</th></tr></thead><tbody><tr><td>hexo-wordcount</td><td>字数统计</td><td><code>npm install hexo-wordcount --save</code></td></tr><tr><td>hexo-abbrlink</td><td>永久链接</td><td><code>npm install hexo-abbrlink --save</code></td></tr><tr><td>hexo-generator-search</td><td>本地搜索</td><td><code>npm install hexo-generator-search --save</code></td></tr><tr><td>hexo-deployer-git</td><td>Git部署</td><td><code>npm install hexo-deployer-git --save</code></td></tr></tbody></table><blockquote><p>📝 更多插件请参考原文中的完整插件表格，按需安装使用。</p></blockquote><hr><p><strong>🎉 恭喜！</strong> 您已完成 Hexo 博客的搭建与美化。如有问题，欢迎在评论区留言交流。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Hexo + Butterfly 博客搭建指南 🎨&lt;/h1&gt;
&lt;p&gt;&lt;img src=&quot;https://file.meimolihan.eu.org/img/hexo-01.webp&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;✨ 特别说明</summary>
      
    
    
    
    <category term="默认分类" scheme="https://www.meimolihan.eu.org/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/"/>
    
    
    <category term="hexo" scheme="https://www.meimolihan.eu.org/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>Docker 部署南墙 WAF 🛡️</title>
    <link href="https://www.meimolihan.eu.org/posts/29e622ca.html"/>
    <id>https://www.meimolihan.eu.org/posts/29e622ca.html</id>
    <published>2025-09-13T01:38:19.000Z</published>
    <updated>2025-09-13T01:38:19.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Docker 部署南墙 WAF 🛡️</h1><p><img src="https://file.meimolihan.eu.org/img/docker-uuwaf-01.webp" alt=""></p><hr><h2 id="📋-目录导航">📋 目录导航</h2><ul><li><a href="#project-intro">🎯 项目简介</a></li><li><a href="#features">🛠️ 核心特性</a></li><li><a href="#deploy">🐳 Docker 部署南墙 WAF</a><ul><li><a href="#auto-install">1. Linux 自动安装</a></li><li><a href="#manual-deploy">2. Docker 手动部署</a><ul><li><a href="#deploy-setup">创建部署目录和配置文件</a></li><li><a href="#deploy-start">拉取镜像并启动容器</a></li></ul></li></ul></li><li><a href="#usage">🚀 使用南墙 WAF</a><ul><li><a href="#usage-access">1. 访问 Web 界面</a></li><li><a href="#usage-first">2. 首次使用步骤</a></li></ul></li><li><a href="#nginx">🌐 Nginx 反向代理配置</a><ul><li><a href="#nginx-config">1. 创建 Nginx 配置文件</a></li><li><a href="#nginx-reload">2. 测试并重载 Nginx</a></li></ul></li><li><a href="#maintenance">🔧 容器维护命令</a><ul><li><a href="#docker-compose">1. Docker Compose 命令</a></li><li><a href="#docker">2. Docker 容器命令</a></li><li><a href="#docker-images">3. Docker 镜像管理</a></li></ul></li><li><a href="#conclusion">🌟 开启安全防护新篇章</a></li></ul><hr><p><a id="project-intro"></a></p><h2 id="🎯-项目简介">🎯 项目简介</h2><p>南墙 WAF (UUsec WAF) 是一款基于 Docker 容器化部署的 Web 应用防火墙，专为现代 Web 应用提供全方位安全防护。它能够有效防御 SQL 注入、XSS 跨站脚本、CSRF 攻击、恶意爬虫等常见 Web 安全威胁，同时具备高性能、易部署、可视化管理等优势。</p><ul><li><strong>🌐 南墙 WAF 官网地址：<a href="https://waf.uusec.com/">https://waf.uusec.com/</a></strong></li><li><strong>🐱 GitHub 项目地址：<a href="https://github.com/Safe3/uusec-waf">https://github.com/Safe3/uusec-waf</a></strong></li></ul><p><a id="features"></a></p><h2 id="🛠️-核心特性">🛠️ 核心特性</h2><p>✨ <strong>全面防护</strong> - 支持多种 Web 攻击检测和防御，包括 OWASP Top 10 常见漏洞<br>🚀 <strong>高性能</strong> - 基于智能引擎，低延迟、高并发处理能力，不影响业务正常访问<br>🔧 <strong>易于部署</strong> - 提供 Docker 一键部署方案，支持多种环境快速安装<br>📊 <strong>可视化管理</strong> - 提供友好的管理界面，实时展示安全态势和攻击日志<br>🛡️ <strong>智能学习</strong> - 支持正常流量学习，降低误报率，提高防护精度<br>🌐 <strong>灵活扩展</strong> - 支持自定义规则，可根据业务需求灵活调整防护策略</p><hr><p><a id="deploy"></a></p><h2 id="🐳-Docker-部署南墙-WAF">🐳 Docker 部署南墙 WAF</h2><p>南墙 WAF 提供两种部署方式：Linux 自动安装和 Docker 手动部署。您可以根据需求选择适合的方式。</p><p><a id="auto-install"></a></p><h3 id="1-Linux-自动安装命令">1. Linux 自动安装命令</h3><p>📦 一键安装：3 分钟即可完成自动安装，适合快速部署场景。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> bash -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://waf.uusec.com/installer.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure><p><a id="manual-deploy"></a></p><h3 id="2-Docker-手动部署">2. Docker 手动部署</h3><p><a id="deploy-setup"></a></p><h4 id="创建部署目录和配置文件-📁">创建部署目录和配置文件 📁</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建部署目录</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /vol1/1000/compose/uuwaf &amp;&amp; <span class="built_in">cd</span> <span class="variable">$_</span> &amp;&amp; \</span><br><span class="line"><span class="built_in">cat</span> &gt; docker-compose.yml &lt;&lt;<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">services:</span><br><span class="line">  uuwaf:</span><br><span class="line">    image: uusec/waf:7.0.3</span><br><span class="line">    ulimits:</span><br><span class="line">      <span class="built_in">nproc</span>: 65535</span><br><span class="line">      nofile:</span><br><span class="line">        soft: 102400</span><br><span class="line">        hard: 102400</span><br><span class="line">    container_name: uuwaf</span><br><span class="line">    networks:</span><br><span class="line">      - 1panel-network</span><br><span class="line">    ports:</span><br><span class="line">      - 880:80</span><br><span class="line">      - 666:443</span><br><span class="line">      - 4443:4443</span><br><span class="line">    volumes:</span><br><span class="line">      - /etc/localtime:/etc/localtime:ro  <span class="comment"># 修改为使用系统时区文件</span></span><br><span class="line">      - /etc/timezone:/etc/timezone:ro    <span class="comment"># 添加时区配置文件</span></span><br><span class="line">      - ./waf_config:/uuwaf/web/conf</span><br><span class="line">      - ./waf_acme:/uuwaf/acme</span><br><span class="line">      - ./waf_logs:/uuwaf/logs</span><br><span class="line">    environment:</span><br><span class="line">      - TZ=Asia/Shanghai                  <span class="comment"># 添加时区环境变量</span></span><br><span class="line">      - UUWAF_MYSQL_PASSWORD=Safe3.WAF</span><br><span class="line">      - UUWAF_RESOLVER=resolver 127.0.0.11 valid=30s ipv6=off;</span><br><span class="line">    depends_on:</span><br><span class="line">      wafdb:</span><br><span class="line">        condition: service_healthy</span><br><span class="line">  wafdb:</span><br><span class="line">    image: mysql:5.7.44</span><br><span class="line">    container_name: uuwaf-db</span><br><span class="line">    networks:</span><br><span class="line">      - 1panel-network</span><br><span class="line">    volumes:</span><br><span class="line">      - /etc/timezone:/etc/timezone:ro    <span class="comment"># 修改为使用系统时区文件</span></span><br><span class="line">      - /etc/localtime:/etc/localtime:ro  <span class="comment"># 修改为使用系统时区文件</span></span><br><span class="line">      - ./waf_data:/var/lib/mysql</span><br><span class="line">    environment:</span><br><span class="line">      - TZ=Asia/Shanghai                  <span class="comment"># 添加时区环境变量</span></span><br><span class="line">      - MYSQL_ROOT_PASSWORD=Safe3.WAF</span><br><span class="line">    <span class="built_in">command</span>: [<span class="string">&quot;--max_connections=512&quot;</span>]</span><br><span class="line">    healthcheck:</span><br><span class="line">      <span class="built_in">test</span>: [<span class="string">&quot;CMD&quot;</span>, <span class="string">&quot;mysqladmin&quot;</span>, <span class="string">&quot;-uroot&quot;</span>, <span class="string">&quot;-pSafe3.WAF&quot;</span>, <span class="string">&quot;ping&quot;</span>, <span class="string">&quot;-h&quot;</span>, <span class="string">&quot;127.0.0.1&quot;</span>, <span class="string">&quot;--silent&quot;</span>]</span><br><span class="line">      start_period: 3s</span><br><span class="line">      interval: 5s</span><br><span class="line">      <span class="built_in">timeout</span>: 3s</span><br><span class="line">      retries: 10</span><br><span class="line"></span><br><span class="line">networks:</span><br><span class="line">  1panel-network:</span><br><span class="line">    external: <span class="literal">true</span></span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p><a id="deploy-start"></a></p><h4 id="拉取镜像并启动容器-🚀">拉取镜像并启动容器 🚀</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拉取最新镜像</span></span><br><span class="line">docker compose pull</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动容器</span></span><br><span class="line">docker compose up -d</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看容器状态</span></span><br><span class="line">docker compose ps</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看启动日志</span></span><br><span class="line">docker compose logs -f</span><br></pre></td></tr></table></figure><hr><p><a id="usage"></a></p><h2 id="🚀-使用南墙-WAF">🚀 使用南墙 WAF</h2><p><a id="usage-access"></a></p><h3 id="1-访问-Web-界面-💻">1. 访问 Web 界面 💻</h3><ul><li><strong>本地访问</strong>：<a href="http://localhost:4443">http://localhost:4443</a></li><li><strong>域名访问</strong>：<a href="https://uuwaf.example.com:4443">https://uuwaf.example.com:4443</a>（配置反向代理后）</li></ul><p>默认登录信息：</p><ul><li>用户名：<code>admin</code></li><li>密码：<code>#Passw0rd</code>（首次登录后请立即修改）</li></ul><p><a id="usage-first"></a></p><h3 id="2-首次使用步骤-🎯">2. 首次使用步骤 🎯</h3><ol><li><p><strong>初始化设置</strong> 🔧</p><ul><li>打开浏览器访问管理界面</li><li>修改默认管理员密码</li><li>配置系统基本设置和通知方式</li></ul></li><li><p><strong>添加防护站点</strong> 🌐</p><ul><li>进入&quot;站点管理&quot; → “添加站点”</li><li>填写域名和上游服务器地址</li><li>配置 SSL 证书（如需要）</li></ul></li><li><p><strong>配置防护策略</strong> 🛡️</p><ul><li>启用基础防护规则集</li><li>根据业务特点调整防护等级</li><li>设置自定义规则应对特定场景</li></ul></li><li><p><strong>监控与优化</strong> 📊</p><ul><li>查看实时攻击日志和统计</li><li>分析安全事件和威胁情报</li><li>根据实际情况优化防护规则</li></ul></li></ol><hr><p><a id="nginx"></a></p><h2 id="🌐-Nginx-反向代理配置">🌐 Nginx 反向代理配置</h2><p>通过 Nginx 反向代理可以提供更灵活的访问方式和 SSL 终端卸载功能。</p><p><a id="nginx-config"></a></p><h3 id="1-创建-Nginx-配置文件-🔧">1. 创建 Nginx 配置文件 🔧</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /etc/nginx/conf.d &amp;&amp; \</span><br><span class="line"><span class="built_in">cat</span> &gt; /etc/nginx/conf.d/uuwaf.conf &lt;&lt;<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">server &#123;</span><br><span class="line">    listen 4443 ssl http2;</span><br><span class="line">    listen [::]:4443 ssl http2;</span><br><span class="line">    server_name uuwaf.yourdomain.com;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># SSL 配置</span></span><br><span class="line">    ssl_certificate /path/to/your/cert.pem;</span><br><span class="line">    ssl_certificate_key /path/to/your/private.key;</span><br><span class="line">    ssl_session_timeout 1d;</span><br><span class="line">    ssl_session_cache shared:MozSSL:10m;</span><br><span class="line">    ssl_protocols TLSv1.2 TLSv1.3;</span><br><span class="line">    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256;</span><br><span class="line">    ssl_prefer_server_ciphers off;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 安全头部</span></span><br><span class="line">    add_header X-Frame-Options DENY;</span><br><span class="line">    add_header X-Content-Type-Options nosniff;</span><br><span class="line">    add_header X-XSS-Protection <span class="string">&quot;1; mode=block&quot;</span>;</span><br><span class="line">    add_header Strict-Transport-Security <span class="string">&quot;max-age=63072000&quot;</span> always;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 代理配置</span></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass http://127.0.0.1:4443;</span><br><span class="line">        proxy_set_header Host <span class="variable">$host</span>;</span><br><span class="line">        proxy_set_header X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        proxy_set_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">        proxy_set_header X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># WebSocket 支持</span></span><br><span class="line">        proxy_http_version 1.1;</span><br><span class="line">        proxy_set_header Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">        proxy_set_header Connection <span class="string">&quot;upgrade&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    access_log /var/log/nginx/uuwaf.access.log;</span><br><span class="line">    error_log /var/log/nginx/uuwaf.error.log;</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p><a id="nginx-reload"></a></p><h3 id="2-测试并重载-Nginx-🔄">2. 测试并重载 Nginx 🔄</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 测试配置文件语法</span></span><br><span class="line">nginx -t</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重载 Nginx 配置</span></span><br><span class="line">systemctl reload nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看 Nginx 状态</span></span><br><span class="line">systemctl status nginx</span><br></pre></td></tr></table></figure><hr><p><a id="maintenance"></a></p><h2 id="🔧-容器维护命令">🔧 容器维护命令</h2><p><a id="docker-compose"></a></p><h3 id="1-Docker-Compose-命令-🐳">1. Docker Compose 命令 🐳</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看服务状态</span></span><br><span class="line">docker compose ps</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看日志</span></span><br><span class="line">docker compose logs</span><br><span class="line">docker compose logs -f  <span class="comment"># 实时日志</span></span><br><span class="line">docker compose logs uuwaf  <span class="comment"># 指定服务日志</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 服务管理</span></span><br><span class="line">docker compose stop     <span class="comment"># 停止服务</span></span><br><span class="line">docker compose start    <span class="comment"># 启动服务</span></span><br><span class="line">docker compose restart  <span class="comment"># 重启服务</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新和清理</span></span><br><span class="line">docker compose pull     <span class="comment"># 拉取最新镜像</span></span><br><span class="line">docker compose up -d    <span class="comment"># 重新创建并启动容器</span></span><br><span class="line">docker compose down     <span class="comment"># 停止并删除容器</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行命令</span></span><br><span class="line">docker compose <span class="built_in">exec</span> uuwaf bash  <span class="comment"># 进入容器</span></span><br></pre></td></tr></table></figure><p><a id="docker"></a></p><h3 id="2-Docker-容器命令-📦">2. Docker 容器命令 📦</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 容器管理</span></span><br><span class="line">docker ps -a                          <span class="comment"># 查看所有容器</span></span><br><span class="line">docker stop uuwaf                     <span class="comment"># 停止容器</span></span><br><span class="line">docker start uuwaf                    <span class="comment"># 启动容器</span></span><br><span class="line">docker restart uuwaf                  <span class="comment"># 重启容器</span></span><br><span class="line">docker <span class="built_in">rm</span> uuwaf                       <span class="comment"># 删除容器</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 日志管理</span></span><br><span class="line">docker logs uuwaf                     <span class="comment"># 查看日志</span></span><br><span class="line">docker logs -f uuwaf                  <span class="comment"># 实时日志</span></span><br><span class="line">docker logs --<span class="built_in">tail</span> 100 uuwaf          <span class="comment"># 查看最后100行</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行命令</span></span><br><span class="line">docker <span class="built_in">exec</span> -it uuwaf bash            <span class="comment"># 进入容器</span></span><br><span class="line">docker <span class="built_in">exec</span> uuwaf nginx -t            <span class="comment"># 在容器中执行命令</span></span><br></pre></td></tr></table></figure><p><a id="docker-images"></a></p><h3 id="3-Docker-镜像管理-📀">3. Docker 镜像管理 📀</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 镜像查看</span></span><br><span class="line">docker images                         <span class="comment"># 列出镜像</span></span><br><span class="line">docker image <span class="built_in">ls</span>                       <span class="comment"># 列出镜像（详细）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 镜像清理</span></span><br><span class="line">docker image prune                    <span class="comment"># 删除悬空镜像</span></span><br><span class="line">docker image prune -a                 <span class="comment"># 删除所有未使用镜像</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 镜像操作</span></span><br><span class="line">docker pull uusec/waf:latest          <span class="comment"># 拉取镜像</span></span><br><span class="line">docker rmi uusec/waf:latest           <span class="comment"># 删除镜像</span></span><br></pre></td></tr></table></figure><hr><p><a id="conclusion"></a></p><h2 id="🌟-开启安全防护新篇章">🌟 开启安全防护新篇章</h2><p>通过本文档，您已经成功使用 Docker 部署了南墙 WAF Web 应用防火墙，为您的 Web 应用建立了坚实的安全防线。现在，您可以：</p><p>🛡️ <strong>全面防护</strong> - 有效防御 SQL 注入、XSS 攻击等常见 Web 威胁<br>📊 <strong>实时监控</strong> - 可视化界面实时展示安全态势和攻击日志<br>⚡ <strong>高性能保障</strong> - 低延迟高并发处理，不影响业务正常访问<br>🔧 <strong>灵活配置</strong> - 根据业务需求自定义防护规则和策略<br>🌐 <strong>易扩展</strong> - 支持多种部署方式，轻松应对业务增长</p><p>南墙 WAF 将成为您 Web 应用的可靠守护者，7×24 小时不间断提供安全防护，让您专注于业务发展，无需担心安全威胁。</p><p>从现在开始，构建安全可靠的 Web 应用环境，为您的用户提供更安心的服务体验！✨</p><hr><p>📌 <strong>持续更新</strong>：建议定期检查 <a href="https://waf.uusec.com/">官方文档</a> 获取最新功能和安全更新<br>🐛 <strong>问题反馈</strong>：使用中遇到问题可前往 <a href="https://github.com/Safe3/uusec-waf/issues">GitHub Issues</a> 反馈<br>💬 <strong>社区支持</strong>：加入官方社区获取技术支持和最佳实践分享</p><p>祝您部署顺利，安全无忧！🎉</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Docker 部署南墙 WAF 🛡️&lt;/h1&gt;
&lt;p&gt;&lt;img src=&quot;https://file.meimolihan.eu.org/img/docker-uuwaf-01.webp&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;📋-目录导航&quot;&gt;📋 目录导航</summary>
      
    
    
    
    <category term="Docker" scheme="https://www.meimolihan.eu.org/categories/Docker/"/>
    
    
    <category term="compose" scheme="https://www.meimolihan.eu.org/tags/compose/"/>
    
  </entry>
  
  <entry>
    <title>零成本网站加速 Cloudflare 缓存从入门到精通 ✨</title>
    <link href="https://www.meimolihan.eu.org/posts/13e0677.html"/>
    <id>https://www.meimolihan.eu.org/posts/13e0677.html</id>
    <published>2025-09-13T01:37:35.000Z</published>
    <updated>2025-09-13T01:37:35.000Z</updated>
    
    <content type="html"><![CDATA[<h1>零成本网站加速 Cloudflare 缓存从入门到精通 ✨</h1><p><img src="https://file.meimolihan.eu.org/img/cloudflare-cache-rules-01.webp" alt=""></p><blockquote><p>难道除了加钱升级服务器，就没有别的办法了吗？<br>当然有！🚀</p></blockquote><p>今天，我将手把手带你利用强大的 Cloudflare，零成本地为你的网站“续命”，让低配服务器也能拥有闪电般的响应速度。我们将从一个最简单的“暴力”缓存方法开始，一步步带你踩坑、填坑，最终实现一套既能极致加速，又能保证内容实时更新的完美缓存策略。</p><ul><li><strong>原作者 ：<a href="https://joeyblog.net/">Joey Blog</a></strong></li></ul><hr><h2 id="📚-文章导航目录">📚 文章导航目录</h2><ul><li><a href="#problem-showcase">🔥 问题复现：我的小破站快“炸”了</a></li><li><a href="#aggressive-caching">⚡ 暴力缓存：一分钟，起死回生！</a></li><li><a href="#pitfall-one">⚠️ 踩坑一：警告！你的后台在“裸奔”！</a></li><li><a href="#advanced-rules">🔧 规则进阶：学会“区别对待”</a></li><li><a href="#pitfall-two">🔄 踩坑二：我发了新文章，为什么没人看得到？</a></li><li><a href="#ultimate-solution">🤖 终极方案：用 API 和插件实现“自动刷新”</a></li><li><a href="#miracle">🎉 见证奇迹：速度与更新兼得</a></li><li><a href="#conclusion">📌 总结</a></li></ul><hr><p><a id="problem-showcase"></a></p><h2 id="🔥-问题复现：我的小破站快“炸”了">🔥 问题复现：我的小破站快“炸”了</h2><p>为了让效果更具戏剧性，我特意准备了一台低配的谷歌云服务器，并将我的博客部署了上去。在没有任何优化的情况下，我们来看看它的表现。</p><p>随便打开一篇文章，加载速度肉眼可见的慢。</p><p><img src="https://file.meimolihan.eu.org/screenshot/cache-rules-001.webp" alt=""></p><p>这时，我们再用工具模拟一个简单的并发访问，服务器后台的 CPU 瞬间就“拉满”了，网站直接崩溃，无法访问。</p><p><img src="https://file.meimolihan.eu.org/screenshot/cache-rules-002.webp" alt=""></p><p>这就是我们即将要解决的典型场景。</p><hr><p><a id="aggressive-caching"></a></p><h2 id="⚡-暴力缓存：一分钟，起死回生！">⚡ 暴力缓存：一分钟，起死回生！</h2><p>现在，让我们请出今天的主角——<strong>Cloudflare</strong>。我们将使用它最强大的功能之一：<strong>缓存规则（Cache Rules）</strong>。</p><h3 id="🔧-功能特点：">🔧 功能特点：</h3><ul><li><strong>全球边缘节点</strong>：Cloudflare 拥有遍布全球的服务器，可缓存内容并就近分发给用户。</li><li><strong>零成本加速</strong>：免费套餐即可享受强大的缓存功能，减轻源服务器压力。</li><li><strong>简单易用</strong>：通过可视化界面配置规则，无需代码基础。</li></ul><h3 id="📝-操作步骤：">📝 操作步骤：</h3><ol><li>登录你的 Cloudflare 账户，选择你的域名，进入<strong>缓存（Caching）</strong> → <strong>缓存规则（Cache Rules）</strong>。</li><li>点击<strong>创建规则（Create rule）</strong>。</li><li>规则名称随便填，例如“缓存所有”。</li><li>在“When incoming requests match…”部分，直接使用 Cloudflare 提供的模板，选择<strong>缓存所有内容（Cache everything）</strong>。这个模板会自动帮你填充好所有动态、静态内容的匹配规则。</li></ol><p><img src="https://file.meimolihan.eu.org/screenshot/cache-rules-003.webp" alt=""><br><img src="https://file.meimolihan.eu.org/screenshot/cache-rules-004.webp" alt=""></p><p>好了，部署完成。现在我们再来访问网站试试？<br>奇迹发生了！网站秒开，页面切换如丝般顺滑。我们再看一眼服务器后台，CPU 占用率几乎为零，完全在“摸鱼”😴。</p><p><img src="https://file.meimolihan.eu.org/screenshot/cache-rules-005.webp" alt=""></p><p>原理很简单：Cloudflare 遍布全球的边缘节点已经将你的整个网站内容缓存了下来，所有用户的访问请求都由离他们最近的 Cloudflare 节点直接响应，根本不会再“打扰”你那台远在美国的低配源服务器了。</p><hr><p><a id="pitfall-one"></a></p><h2 id="⚠️-踩坑一：警告！你的后台在“裸奔”！">⚠️ 踩坑一：警告！你的后台在“裸奔”！</h2><p>正当你为这惊人的效果沾沾自喜时，一个巨大的安全漏洞已经悄然出现。</p><p>我们打开一个浏览器的“无痕模式”（确保没有任何登录信息），然后尝试访问 WordPress 的后台地址，例如 <code>https://你的域名.com/wp-admin/</code>。</p><p>按常理，它应该会跳转到登录页面。但现在……</p><p><img src="https://file.meimolihan.eu.org/screenshot/cache-rules-006.webp" alt=""></p><p>是的，你没看错。由于我们“暴力”地缓存了一切，连需要登录才能访问的后台管理页面，也被 Cloudflare 当成静态页面缓存起来，并毫无保留地展示给了所有访客。这是一个灾难性的安全问题！</p><hr><p><a id="advanced-rules"></a></p><h2 id="🔧-规则进阶：学会“区别对待”">🔧 规则进阶：学会“区别对待”</h2><p>问题的原因在于我们的缓存规则过于“一刀切”。现在，我们要教会 Cloudflare “区别对待”，告诉它哪些内容绝对不能缓存。</p><p>我们需要创建一条新的、更高优先级的规则来“跳过”缓存。</p><h3 id="📝-操作步骤：-2">📝 操作步骤：</h3><ol><li>再次回到<strong>缓存规则（Cache Rules）</strong> 页面，点击<strong>创建规则（Create rule）</strong>。</li><li>将这条新规则拖动到我们刚才创建的“缓存所有”规则的上方，确保它的优先级更高。</li><li>规则名称设为“跳过后台和登录用户”。</li><li>在“When incoming requests match…”部分，我们需要手动编辑表达式，使用 OR 逻辑组合两个条件：<ul><li>条件一：<code>(http.request.uri.path contains &quot;/wp-admin/&quot;)</code> —— 当 URL 路径包含后台地址时。</li><li>条件二：<code>(http.cookie contains &quot;wp&quot;)</code> —— 当请求的 Cookie 中包含 WordPress 登录凭证时。</li></ul></li></ol><p><img src="https://file.meimolihan.eu.org/screenshot/cache-rules-007.webp" alt=""></p><ol start="5"><li>在“Then…”部分，将缓存资格（Cache eligibility）选择为<strong>绕过缓存（Bypass cache）</strong>。</li><li>部署规则。</li></ol><p><img src="https://file.meimolihan.eu.org/screenshot/cache-rules-008.webp" alt=""></p><p>现在，后台裸奔的问题解决了。未登录用户访问后台会正确跳转到登录页，而已登录的用户则因为 Cookie 匹配成功，也不会被缓存，可以正常进行管理操作。</p><hr><p><a id="pitfall-two"></a></p><h2 id="🔄-踩坑二：我发了新文章，为什么没人看得到？">🔄 踩坑二：我发了新文章，为什么没人看得到？</h2><p>安全问题解决了，但新的问题又来了。</p><p>你在后台兴致勃勃地发布了一篇新文章，但在首页上，它却迟迟不出现。无论你怎么刷新，甚至“清空缓存并强制刷新”，新文章就是不见踪影。</p><p><img src="https://file.meimolihan.eu.org/screenshot/cache-rules-009.webp" alt=""></p><p>原因也很简单：对于未登录的访客，Cloudflare 依然在忠实地执行我们第一条“缓存所有”的规则——从它的边缘节点返回那个被缓存了“一年”的旧首页。它并不知道你的源服务器上内容已经更新了。</p><hr><p><a id="ultimate-solution"></a></p><h2 id="🤖-终极方案：用-API-和插件实现“自动刷新”">🤖 终极方案：用 API 和插件实现“自动刷新”</h2><p>要解决这个问题，我们需要一种方法：在内容更新时，主动通知 Cloudflare “你该清理一下这个页面的缓存了”。这就要用到 Cloudflare 强大的 <strong>API</strong>。</p><p>手动去 API 刷新显然不现实。因此，我特意为大家准备了一个自研的 WordPress 插件，它能完美地自动化这个过程。</p><h3 id="🔧-插件功能特点：">🔧 插件功能特点：</h3><ul><li><strong>自动触发</strong>：文章发布/更新时自动清理相关缓存。</li><li><strong>精准清理</strong>：可清理文章页、首页、分类页等多类页面。</li><li><strong>简单配置</strong>：只需填写邮箱、API 密钥和域名。</li></ul><h3 id="📝-配置方法：">📝 配置方法：</h3><ol><li>安装并启用插件后，进入<strong>设置 → CF Purge Cache</strong>。</li><li>你需要填写三项信息：<ul><li><strong>Cloudflare Email</strong>：你的登录邮箱。</li><li><strong>Cloudflare Global API Key</strong>：你的全局 API 密钥。</li><li><strong>Zone</strong>：选择需要操作的域名。</li></ul></li></ol><p>全局 API 密钥可以在 Cloudflare 仪表盘的<strong>我的个人资料 → API令牌</strong>中找到。</p><p><img src="https://file.meimolihan.eu.org/screenshot/cache-rules-010.webp" alt=""></p><hr><p><a id="miracle"></a></p><h2 id="🎉-见证奇迹：速度与更新兼得">🎉 见证奇迹：速度与更新兼得</h2><p>配置好插件后，我们来见证最终的完美效果。</p><p>我们再次编辑刚才发布的文章，随便修改点内容，然后点击“更新”。</p><p>现在，我们再打开一个无痕窗口访问首页，新文章赫然在列，并且整个网站的访问速度依然是秒开！</p><p>至此，我们成功地实现了我们的终极目标：</p><ul><li>🚀 <strong>极致的性能</strong>：99% 的访问压力都由 Cloudflare 承担，你的源服务器轻松无比。</li><li>🔄 <strong>智能的更新</strong>：内容一经修改，缓存自动刷新，访客永远能看到最新的内容。</li><li>💰 <strong>零成本</strong>：这一切都基于 Cloudflare 的免费套餐。</li></ul><hr><p><a id="conclusion"></a></p><h2 id="📌-总结">📌 总结</h2><p>从一个濒临崩溃的慢速网站，到一个兼具极致性能和动态更新的流畅站点，我们通过几条简单的 Cloudflare 规则和一个小插件就完成了蜕变。这套方法尤其适合个人博客、中小型企业网站等预算有限但对性能有追求的场景。</p><p>希望这篇从入门到填坑的终极指南能对你有所帮助。去试试吧，让你的网站也飞起来！</p><hr><p><a href="https://github.com/byJoey/cfc/tree/v0.0.1">📥 插件下载地址</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;零成本网站加速 Cloudflare 缓存从入门到精通 ✨&lt;/h1&gt;
&lt;p&gt;&lt;img src=&quot;https://file.meimolihan.eu.org/img/cloudflare-cache-rules-01.webp&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquo</summary>
      
    
    
    
    <category term="默认分类" scheme="https://www.meimolihan.eu.org/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/"/>
    
    
  </entry>
  
  <entry>
    <title>Google BBR 拥塞控制算法管理脚本 🚀</title>
    <link href="https://www.meimolihan.eu.org/posts/87b07522.html"/>
    <id>https://www.meimolihan.eu.org/posts/87b07522.html</id>
    <published>2025-09-13T01:36:09.000Z</published>
    <updated>2025-09-13T01:36:09.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Google BBR 拥塞控制算法管理脚本 🚀</h1><p><img src="https://file.meimolihan.eu.org/img/google-bbr-01.webp" alt=""></p><p>本文介绍一款功能强大的 BBR 拥塞控制算法管理脚本，支持一键安装、更新和管理 BBR v3 内核及拥塞控制配置，帮助您轻松优化服务器网络性能。</p><hr><h2 id="📋-导航目录">📋 导航目录</h2><ul><li><a href="#script-info">📋 脚本信息</a></li><li><a href="#supported-systems">🖥️ 支持的系统</a></li><li><a href="#main-features">🚀 主要功能</a></li><li><a href="#usage-guide">📥 使用方法</a></li><li><a href="#technical-details">⚙️ 技术细节</a></li><li><a href="#important-notes">💡 注意事项</a></li><li><a href="#troubleshooting">🔧 故障排除</a></li><li><a href="#script-features">✨ 脚本特点</a></li><li><a href="#use-cases">🎯 使用场景</a></li></ul><hr><p><a id="script-info"></a></p><h2 id="📋-脚本信息">📋 脚本信息</h2><ul><li><strong>脚本名称</strong>: <code>install-bbr.sh</code></li><li><strong>作者</strong>: Joey</li><li><strong>最新版本</strong>: 支持自动检测和安装最新版 BBR v3 内核</li><li><strong>反馈渠道</strong>: <a href="https://t.me/+ft-zI76oovgwNmRh">Telegram 群组</a> 提供技术交流和支持</li><li><strong>开源地址</strong>: 脚本基于开源项目开发，持续更新维护</li></ul><p><a id="supported-systems"></a></p><h2 id="🖥️-支持的系统">🖥️ 支持的系统</h2><h3 id="系统要求">系统要求</h3><ul><li><strong>仅支持基于 Debian/Ubuntu 的系统</strong> (包括 Ubuntu 18.04+, Debian 10+ 等主流版本)</li><li>需要 <code>apt-get</code> 包管理器</li><li>需要 root 权限执行管理操作</li></ul><h3 id="支持的架构">支持的架构</h3><ul><li><code>x86_64</code> (AMD64) - 大多数云服务器和物理机</li><li><code>aarch64</code> (ARM64) - 树莓派、ARM服务器和移动设备</li></ul><h3 id="自动安装的依赖">自动安装的依赖</h3><p>脚本会自动检查并安装以下必要工具：</p><ul><li><code>curl</code>, <code>wget</code> - 用于下载内核包和资源文件</li><li><code>dpkg</code> - 用于软件包管理操作</li><li><code>awk</code>, <code>sed</code> - 用于文本处理和配置修改</li><li><code>sysctl</code> - 用于内核参数调整</li><li><code>jq</code> - 用于解析JSON数据（获取版本信息）</li></ul><p><a id="main-features"></a></p><h2 id="🚀-主要功能">🚀 主要功能</h2><p>脚本提供以下七大操作选项，满足不同场景需求：</p><ol><li><strong>安装或更新 BBR v3 (最新版)</strong> - 自动获取并安装最新版本，保持系统最新</li><li><strong>指定版本安装</strong> - 从可用版本列表中选择安装，适合需要特定版本的场景</li><li><strong>检查 BBR v3 状态</strong> - 验证当前 BBR 版本和状态，快速诊断问题</li><li><strong>启用 BBR + FQ</strong> - 配置 BBR 与 FQ (Fair Queue) 队列算法，平衡流量分配</li><li><strong>启用 BBR + FQ_PIE</strong> - 配置 BBR 与 FQ_PIE 队列算法，增强网络稳定性</li><li><strong>启用 BBR + CAKE</strong> - 配置 BBR 与 CAKE 队列算法，提供高级流量管理功能</li><li><strong>卸载 BBR 内核</strong> - 安全移除由本脚本安装的内核，恢复原系统配置</li></ol><p><a id="usage-guide"></a></p><h2 id="📥-使用方法">📥 使用方法</h2><h3 id="一键执行脚本">一键执行脚本</h3><p><strong>使用 Vercel 仓库:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -sL script.meimolihan.eu.org/sh/bbr/install-bbr.sh)</span><br></pre></td></tr></table></figure><p><strong>使用 Gitee 仓库:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -sL gitee.com/meimolihan/script/raw/master/sh/bbr/install-bbr.sh)</span><br></pre></td></tr></table></figure><p><img src="https://file.meimolihan.eu.org/screenshot/google-bbr-001.webp" alt=""></p><h3 id="📝-执行流程">📝 执行流程</h3><ol><li>运行脚本后会显示当前系统状态和可选操作菜单</li><li>输入对应数字选择操作（1-7）</li><li>根据提示完成相应操作</li><li>对于内核安装，安装完成后可能需要重启系统生效</li></ol><h3 id="🔄-安装后验证">🔄 安装后验证</h3><p>安装完成后，可以通过以下命令验证 BBR 状态：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查当前启用拥塞控制算法</span></span><br><span class="line">sysctl net.ipv4.tcp_congestion_control</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查队列规则</span></span><br><span class="line">sysctl net.core.default_qdisc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看当前加载的内核模块</span></span><br><span class="line">lsmod | grep bbr</span><br></pre></td></tr></table></figure><p><a id="technical-details"></a></p><h2 id="⚙️-技术细节">⚙️ 技术细节</h2><h3 id="配置文件">配置文件</h3><ul><li>系统网络配置保存在 <code>/etc/sysctl.d/99-joeyblog.conf</code></li><li>内核包来自 GitHub Releases: <a href="https://github.com/byJoey/Actions-bbr-v3">byJoey/Actions-bbr-v3</a></li><li>脚本会自动备份原有配置，便于需要时恢复</li></ul><h3 id="引导更新">引导更新</h3><ul><li>脚本会自动检测并使用 <code>update-grub</code> 更新引导配置</li><li>对于 ARM 系统（如 U-Boot），提供相应提示信息</li><li>支持多内核并存，可自由选择启动内核</li></ul><h3 id="🔄-版本管理">🔄 版本管理</h3><ul><li>自动检测已安装版本和可用更新</li><li>支持版本列表显示和选择安装</li><li>自动清理旧内核包，节省磁盘空间</li></ul><p><a id="important-notes"></a></p><h2 id="💡-注意事项">💡 注意事项</h2><ol><li><strong>权限要求</strong> - 需要 root 权限执行内核安装和配置修改操作</li><li><strong>重启要求</strong> - 安装新内核后需要重启系统才能生效，脚本会提示重启</li><li><strong>兼容性</strong> - 脚本会自动卸载旧版本内核以避免冲突，但建议备份重要数据</li><li><strong>生产环境</strong> - 对于生产环境，建议先测试再部署，可在测试环境验证效果</li><li><strong>网络依赖</strong> - 安装过程需要联网下载内核包，请确保网络连接稳定</li></ol><p><a id="troubleshooting"></a></p><h2 id="🔧-故障排除">🔧 故障排除</h2><p>如果脚本执行出现问题，可以尝试以下排查步骤：</p><ol><li><strong>检查网络连接</strong> - 确保服务器可以正常访问互联网和GitHub</li><li><strong>确认系统兼容性</strong> - 检查系统是否为支持的Debian/Ubuntu版本</li><li><strong>查看错误信息</strong> - 仔细阅读脚本输出的错误信息，通常包含解决线索</li><li><strong>手动下载执行</strong> - 如果curl直接执行失败，可以尝试手动下载脚本：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://raw.githubusercontent.com/byJoey/Actions-bbr-v3/master/install-bbr.sh</span><br><span class="line"><span class="built_in">chmod</span> +x install-bbr.sh</span><br><span class="line">./install-bbr.sh</span><br></pre></td></tr></table></figure></li><li><strong>寻求帮助</strong> - 可以通过Telegram群组联系作者或社区获取支持</li></ol><p><a id="script-features"></a></p><h2 id="✨-脚本特点">✨ 脚本特点</h2><h3 id="🔄-自动化程度高">🔄 自动化程度高</h3><ul><li>自动检测系统架构和版本</li><li>自动安装所需依赖项</li><li>自动下载和验证内核包</li><li>自动配置优化参数</li></ul><h3 id="🛡️-安全可靠">🛡️ 安全可靠</h3><ul><li>使用官方源和验证过的内核包</li><li>提供卸载功能，可完整清理</li><li>配置修改前自动备份</li><li>错误处理机制完善，避免半完成状态</li></ul><h3 id="📊-用户体验好">📊 用户体验好</h3><ul><li>清晰的交互提示和进度显示</li><li>颜色区分不同类型信息</li><li>详细的状态检查和验证功能</li><li>多平台支持和完善的文档</li></ul><p><a id="use-cases"></a></p><h2 id="🎯-使用场景">🎯 使用场景</h2><p>这个BBR管理脚本特别适用于以下场景：</p><h3 id="🌐-网络优化需求">🌐 网络优化需求</h3><ul><li>海外服务器加速 - 减少国际链路延迟和丢包影响</li><li>视频流媒体服务 - 提供更稳定的带宽和更低的缓冲</li><li>游戏服务器 - 降低网络延迟和抖动，提升游戏体验</li><li>大文件传输 - 提高传输效率和速度稳定性</li></ul><h3 id="🖥️-服务器管理">🖥️ 服务器管理</h3><ul><li>批量服务器部署 - 一键标准化网络配置</li><li>自动化运维 - 可集成到自动化部署流程中</li><li>性能调优 - 快速测试不同拥塞算法效果</li><li>临时加速 - 活动期间临时提升网络性能</li></ul><hr><p>通过这个脚本，您可以轻松管理和优化服务器的网络性能，享受 BBR v3 带来的网络加速效果。无论是个人项目还是企业应用，都能从中获得显著的网络性能提升。</p><blockquote><p>💡 提示：建议定期检查更新，以获取最新版本的BBR改进和性能优化。</p></blockquote>]]></content>
    
    
    <summary type="html">本文介绍一款功能强大的 BBR 拥塞控制算法管理脚本，支持一键安装、更新和管理 BBR v3 内核及拥塞控制配置，帮助您轻松优化服务器网络性能。</summary>
    
    
    
    <category term="Linux" scheme="https://www.meimolihan.eu.org/categories/Linux/"/>
    
    
    <category term="脚本" scheme="https://www.meimolihan.eu.org/tags/%E8%84%9A%E6%9C%AC/"/>
    
  </entry>
  
  <entry>
    <title>Linux 配置 Google BBR 加速技术指南 📈</title>
    <link href="https://www.meimolihan.eu.org/posts/e5905f5b.html"/>
    <id>https://www.meimolihan.eu.org/posts/e5905f5b.html</id>
    <published>2025-09-13T01:35:16.000Z</published>
    <updated>2025-09-13T01:35:16.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Linux 配置 Google BBR 加速技术指南 📈</h1><p><img src="https://file.meimolihan.eu.org/img/google-bbr-01.webp" alt=""></p><hr><h2 id="📖-导航目录">📖 导航目录</h2><ul><li><a href="#bbr-overview">🚀 BBR技术概述</a></li><li><a href="#pre-check">📋 启用前的系统检查</a></li><li><a href="#flyingbull-os-setup">🛠️ 飞牛OS启用BBR完整步骤</a><ul><li><a href="#flyingbull-step1">📝 步骤1：加载BBR内核模块</a></li><li><a href="#flyingbull-step2">📝 步骤2：设置拥塞控制算法</a></li><li><a href="#flyingbull-step3">📝 步骤3：配置公平队列(FQ)</a></li><li><a href="#flyingbull-step4">📝 步骤4：创建持久化配置文件</a></li><li><a href="#flyingbull-step5">📝 步骤5：应用新配置</a></li></ul></li><li><a href="#proxmox-ve-setup">⚙️ Proxmox VE启用BBR完整步骤</a><ul><li><a href="#proxmox-step1">🔧 步骤1：加载BBR内核模块</a></li><li><a href="#proxmox-step2">🔧 步骤2：设置BBR为拥塞控制算法</a></li><li><a href="#proxmox-step3">🔧 步骤3：配置公平队列(FQ)</a></li><li><a href="#proxmox-step4">🔧 步骤4：创建持久化配置文件</a></li><li><a href="#proxmox-step5">🔧 步骤5：应用新配置并优化附加参数</a></li></ul></li><li><a href="#debian-setup">🐧 Debian系统启用BBR</a><ul><li><a href="#debian-method1">🪄 方法一：一键脚本配置</a></li><li><a href="#debian-method2">🛠️ 方法二：手动配置</a></li></ul></li><li><a href="#performance-test">🧪 网络性能测试方法</a></li><li><a href="#notes-and-rollback">⚠️ 注意事项与回退方案</a></li><li><a href="#faq">❓ 常见问题解答</a></li><li><a href="#optimization-tips">💎 性能优化建议</a></li></ul><hr><p><a id="bbr-overview"></a></p><h2 id="🚀-BBR技术概述">🚀 BBR技术概述</h2><p>BBR（Bottleneck Bandwidth and Round-trip propagation time）是Google开发的一种革命性TCP拥塞控制算法，通过智能测量网络路径的<strong>带宽容量</strong>和<strong>往返时间</strong>（RTT）来动态优化数据发送速率。与传统算法相比，BBR提供了更智能的网络流量管理方式！</p><h3 id="✨-BBR的核心优势">✨ BBR的核心优势</h3><ul><li><strong>📶 提升网络吞吐量</strong>：平均提升30%以上传输速度</li><li><strong>⏱️ 降低网络延迟</strong>：减少20-30%的网络响应时间</li><li><strong>📉 减少数据包丢失</strong>：更智能的拥塞预测机制</li><li><strong>🌐 高带宽高延迟优化</strong>：特别适合现代网络环境</li><li><strong>🔄 更好的公平性</strong>：与其他BBR流共享带宽更公平</li></ul><hr><p><a id="pre-check"></a></p><h2 id="📋-启用前的系统检查">📋 启用前的系统检查</h2><h3 id="🔍-1-验证内核版本">🔍 1. 验证内核版本</h3><p>BBR需要Linux内核4.9及以上版本。检查您的系统是否满足要求：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">uname</span> -r</span><br><span class="line"><span class="comment"># 飞牛OS 32.5 输出示例：5.15.0-xx-generic</span></span><br><span class="line"><span class="comment"># Proxmox VE 32.254 输出示例：6.2.16-xx-pve</span></span><br><span class="line"><span class="comment"># Debian 11/12 输出示例：5.10.0-xx-amd64 或 6.1.0-xx-amd64</span></span><br></pre></td></tr></table></figure><h3 id="🔍-2-检查当前拥塞控制算法">🔍 2. 检查当前拥塞控制算法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sysctl net.ipv4.tcp_congestion_control</span><br><span class="line"><span class="comment"># 默认输出可能为：cubic 或 reno</span></span><br></pre></td></tr></table></figure><h3 id="🔍-3-确认BBR模块可用性">🔍 3. 确认BBR模块可用性</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> modprobe tcp_bbr &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;✅ BBR模块可用&quot;</span></span><br><span class="line">lsmod | grep bbr</span><br></pre></td></tr></table></figure><hr><p><a id="flyingbull-os-setup"></a></p><h2 id="🛠️-飞牛OS启用BBR完整步骤">🛠️ 飞牛OS启用BBR完整步骤</h2><p><a id="flyingbull-step1"></a></p><h3 id="📝-步骤1：加载BBR内核模块">📝 步骤1：加载BBR内核模块</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> modprobe tcp_bbr</span><br></pre></td></tr></table></figure><p><a id="flyingbull-step2"></a></p><h3 id="📝-步骤2：设置拥塞控制算法">📝 步骤2：设置拥塞控制算法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> sysctl -w net.ipv4.tcp_congestion_control=bbr</span><br></pre></td></tr></table></figure><p><a id="flyingbull-step3"></a></p><h3 id="📝-步骤3：配置公平队列-FQ">📝 步骤3：配置公平队列(FQ)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> sysctl -w net.core.default_qdisc=fq</span><br></pre></td></tr></table></figure><p><a id="flyingbull-step4"></a></p><h3 id="📝-步骤4：创建持久化配置文件">📝 步骤4：创建持久化配置文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;net.ipv4.tcp_congestion_control=bbr&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> -a /etc/sysctl.d/99-bbr.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;net.core.default_qdisc=fq&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> -a /etc/sysctl.d/99-bbr.conf</span><br></pre></td></tr></table></figure><p><a id="flyingbull-step5"></a></p><h3 id="📝-步骤5：应用新配置">📝 步骤5：应用新配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> sysctl -p /etc/sysctl.d/99-bbr.conf</span><br></pre></td></tr></table></figure><hr><p><a id="proxmox-ve-setup"></a></p><h2 id="⚙️-Proxmox-VE启用BBR完整步骤">⚙️ Proxmox VE启用BBR完整步骤</h2><p><a id="proxmox-step1"></a></p><h3 id="🔧-步骤1：加载BBR内核模块">🔧 步骤1：加载BBR内核模块</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">modprobe tcp_bbr</span><br></pre></td></tr></table></figure><p><a id="proxmox-step2"></a></p><h3 id="🔧-步骤2：设置BBR为拥塞控制算法">🔧 步骤2：设置BBR为拥塞控制算法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl -w net.ipv4.tcp_congestion_control=bbr</span><br></pre></td></tr></table></figure><p><a id="proxmox-step3"></a></p><h3 id="🔧-步骤3：配置公平队列-FQ">🔧 步骤3：配置公平队列(FQ)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl -w net.core.default_qdisc=fq</span><br></pre></td></tr></table></figure><p><a id="proxmox-step4"></a></p><h3 id="🔧-步骤4：创建持久化配置文件">🔧 步骤4：创建持久化配置文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;net.ipv4.tcp_congestion_control=bbr&quot;</span> &gt;&gt; /etc/sysctl.d/99-bbr.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;net.core.default_qdisc=fq&quot;</span> &gt;&gt; /etc/sysctl.d/99-bbr.conf</span><br></pre></td></tr></table></figure><p><a id="proxmox-step5"></a></p><h3 id="🔧-步骤5：应用新配置并优化附加参数">🔧 步骤5：应用新配置并优化附加参数</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 应用BBR配置</span></span><br><span class="line">sysctl -p /etc/sysctl.d/99-bbr.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 优化网络内存参数（Proxmox特别推荐）</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;net.core.rmem_max=16777216&quot;</span> &gt;&gt; /etc/sysctl.d/99-bbr.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;net.core.wmem_max=16777216&quot;</span> &gt;&gt; /etc/sysctl.d/99-bbr.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;net.ipv4.tcp_rmem=4096 87380 16777216&quot;</span> &gt;&gt; /etc/sysctl.d/99-bbr.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;net.ipv4.tcp_wmem=4096 65536 16777216&quot;</span> &gt;&gt; /etc/sysctl.d/99-bbr.conf</span><br><span class="line">sysctl -p /etc/sysctl.d/99-bbr.conf</span><br></pre></td></tr></table></figure><hr><p><a id="debian-setup"></a></p><h2 id="🐧-Debian系统启用BBR">🐧 Debian系统启用BBR</h2><p><a id="debian-method1"></a></p><h3 id="🪄-方法一：一键脚本配置">🪄 方法一：一键脚本配置</h3><p>对于基于Debian的系统（包括Ubuntu、飞牛OS等），可使用一键配置脚本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用科技Lion的一键脚本</span></span><br><span class="line">bash &lt;(curl -sL kejilion.sh)</span><br></pre></td></tr></table></figure><p>选择菜单选项：<code>13. 系统工具</code> → <code>16. 设置BBR3加速</code></p><p><a id="debian-method2"></a></p><h3 id="🛠️-方法二：手动配置">🛠️ 方法二：手动配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 编辑sysctl配置文件</span></span><br><span class="line"><span class="built_in">sudo</span> nano /etc/sysctl.d/99-bbr.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 添加以下内容</span></span><br><span class="line">net.core.default_qdisc = fq</span><br><span class="line">net.ipv4.tcp_congestion_control = bbr</span><br><span class="line">net.ipv4.tcp_fastopen = 3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 保存并应用配置</span></span><br><span class="line"><span class="built_in">sudo</span> sysctl -p /etc/sysctl.d/99-bbr.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 检查是否生效</span></span><br><span class="line">sysctl net.ipv4.tcp_congestion_control</span><br><span class="line"><span class="comment"># 应该显示: net.ipv4.tcp_congestion_control = bbr</span></span><br></pre></td></tr></table></figure><hr><p><a id="performance-test"></a></p><h2 id="🧪-网络性能测试方法">🧪 网络性能测试方法</h2><h3 id="📊-验证BBR是否启用成功">📊 验证BBR是否启用成功</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sysctl net.ipv4.tcp_congestion_control</span><br><span class="line"><span class="comment"># 应输出：net.ipv4.tcp_congestion_control = bbr</span></span><br><span class="line"></span><br><span class="line">sysctl net.core.default_qdisc</span><br><span class="line"><span class="comment"># 应输出：net.core.default_qdisc = fq</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用ss命令检查实际连接</span></span><br><span class="line">ss -tin | grep bbr</span><br></pre></td></tr></table></figure><h3 id="🧪-性能基准测试">🧪 性能基准测试</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装iperf3（若未安装）</span></span><br><span class="line"><span class="built_in">sudo</span> apt install iperf3 -y</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立测试服务器（在另一台机器）</span></span><br><span class="line">iperf3 -s</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在已启用BBR的系统上运行客户端测试</span></span><br><span class="line">iperf3 -c &lt;server_ip&gt; -t 30 -P 4</span><br></pre></td></tr></table></figure><h3 id="📈-Proxmox特定测试">📈 Proxmox特定测试</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 虚拟机间网络性能测试</span></span><br><span class="line">vm_id=100</span><br><span class="line"><span class="keyword">time</span> qm migrate <span class="variable">$vm_id</span> &lt;target_node&gt; --online --with-local-disks</span><br><span class="line"></span><br><span class="line"><span class="comment"># 存储性能测试</span></span><br><span class="line">fio --name=<span class="built_in">test</span> --ioengine=libaio --rw=randrw --bs=4k --numjobs=4 --size=1G --time_based --runtime=60</span><br></pre></td></tr></table></figure><hr><p><a id="notes-and-rollback"></a></p><h2 id="⚠️-注意事项与回退方案">⚠️ 注意事项与回退方案</h2><h3 id="🎯-系统兼容性说明">🎯 系统兼容性说明</h3><ol><li><strong>飞牛OS</strong>：基于Ubuntu，内核版本通常≥5.15，完全支持BBR</li><li><strong>Proxmox VE</strong>：使用6.2+内核，BBR支持完善</li><li><strong>Debian系统</strong>：Debian 10+ 内核版本≥4.19，支持BBR</li><li><strong>虚拟化环境</strong>：在VMWare/KVM中性能提升显著</li><li><strong>容器环境</strong>：Docker容器内需在主OS启用BBR</li></ol><h3 id="🔙-回退到默认设置">🔙 回退到默认设置</h3><p>如遇到网络问题，可恢复默认配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 恢复默认拥塞控制算法</span></span><br><span class="line"><span class="built_in">sudo</span> sysctl -w net.ipv4.tcp_congestion_control=cubic</span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复默认排队规则</span></span><br><span class="line"><span class="built_in">sudo</span> sysctl -w net.core.default_qdisc=fq_codel</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除BBR配置文件</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> /etc/sysctl.d/99-bbr.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新加载系统配置</span></span><br><span class="line"><span class="built_in">sudo</span> sysctl -p /etc/sysctl.conf</span><br></pre></td></tr></table></figure><p><a id="faq"></a></p><h2 id="❓-常见问题解答">❓ 常见问题解答</h2><h3 id="❔-BBR是否会影响系统稳定性？">❔ BBR是否会影响系统稳定性？</h3><p><strong>A</strong>：BBR已集成在主流Linux内核中，经过广泛测试，不影响系统稳定性。</p><h3 id="❔-启用BBR需要重启系统吗？">❔ 启用BBR需要重启系统吗？</h3><p><strong>A</strong>：不需要立即重启，配置会立即生效且已持久化，但建议重启后验证配置。</p><h3 id="❔-BBRv2和BBRv1有什么区别？">❔ BBRv2和BBRv1有什么区别？</h3><p><strong>A</strong>：BBRv2进一步减少丢包率，但当前主流系统默认集成BBRv1。</p><h3 id="❔-如何监控BBR运行效果？">❔ 如何监控BBR运行效果？</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 实时监控BBR连接状态</span></span><br><span class="line">watch -d -n 1 <span class="string">&quot;ss -tin | grep bbr&quot;</span></span><br></pre></td></tr></table></figure><h3 id="❔-BBR对Proxmox集群有何影响？">❔ BBR对Proxmox集群有何影响？</h3><p><strong>A</strong>：建议在集群所有节点启用相同配置，可提升跨节点迁移和存储复制性能。</p><h3 id="❔-Debian系统启用BBR的最佳方法？">❔ Debian系统启用BBR的最佳方法？</h3><p><strong>A</strong>：对于新手推荐使用一键脚本，对于有经验的用户建议手动配置以便更好理解原理。</p><p><a id="optimization-tips"></a></p><h2 id="💎-性能优化建议">💎 性能优化建议</h2><h3 id="🚀-飞牛OS优化补充">🚀 飞牛OS优化补充</h3><ol><li><p><strong>📶 网络环境适配</strong>：</p><ul><li>高延迟网络（&gt;50ms）提升最明显</li><li>低带宽环境（&lt;10Mbps）可能提升有限</li></ul></li><li><p><strong>🔄 结合多队列网卡</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查并设置网卡多队列</span></span><br><span class="line">ethtool -l eth0</span><br><span class="line">ethtool -L eth0 combined 8</span><br></pre></td></tr></table></figure></li></ol><h3 id="🚀-Proxmox-VE高级优化">🚀 Proxmox VE高级优化</h3><ol><li><p><strong>🔧 中断平衡优化</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt install irqbalance</span><br><span class="line">systemctl <span class="built_in">enable</span> irqbalance &amp;&amp; systemctl start irqbalance</span><br></pre></td></tr></table></figure></li><li><p><strong>⏱️ 启用TCP时间戳</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;net.ipv4.tcp_timestamps=1&quot;</span> &gt;&gt; /etc/sysctl.d/99-bbr.conf</span><br><span class="line">sysctl -p /etc/sysctl.d/99-bbr.conf</span><br></pre></td></tr></table></figure></li><li><p><strong>🔄 SR-IOV优化</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查硬件卸载支持</span></span><br><span class="line">ethtool -k &lt;interface&gt; | grep hw-tc-offload</span><br></pre></td></tr></table></figure></li></ol><h3 id="🐧-Debian系统优化">🐧 Debian系统优化</h3><ol><li><p><strong>📊 内核参数调优</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 增加TCP连接数限制</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;net.core.somaxconn = 65535&quot;</span> &gt;&gt; /etc/sysctl.d/99-bbr.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;net.ipv4.tcp_max_syn_backlog = 65535&quot;</span> &gt;&gt; /etc/sysctl.d/99-bbr.conf</span><br></pre></td></tr></table></figure></li><li><p><strong>🔄 定期更新系统</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 保持系统最新以获得最佳BBR性能</span></span><br><span class="line"><span class="built_in">sudo</span> apt update &amp;&amp; <span class="built_in">sudo</span> apt upgrade -y</span><br></pre></td></tr></table></figure></li></ol><hr><p><strong>📈 效果评估</strong>：启用BBR后，您应该在以下场景观察到性能提升：</p><ul><li>视频流媒体播放更流畅</li><li>大文件传输速度提升</li><li>远程访问响应更快</li><li>虚拟机迁移时间减少（Proxmox）</li><li>存储复制同步加速</li></ul><p>建议观察24-48小时内的系统负载和网络延迟变化，使用系统内置监控工具进行前后对比评估。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Linux 配置 Google BBR 加速技术指南 📈&lt;/h1&gt;
&lt;p&gt;&lt;img src=&quot;https://file.meimolihan.eu.org/img/google-bbr-01.webp&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;📖-导航目录&quot;</summary>
      
    
    
    
    <category term="Linux" scheme="https://www.meimolihan.eu.org/categories/Linux/"/>
    
    
  </entry>
  
  <entry>
    <title>Linux SSH 服务一键配置脚本使用指南 🚀</title>
    <link href="https://www.meimolihan.eu.org/posts/c8d4d91e.html"/>
    <id>https://www.meimolihan.eu.org/posts/c8d4d91e.html</id>
    <published>2025-09-13T01:32:49.000Z</published>
    <updated>2025-09-13T01:32:49.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Linux SSH 服务一键配置脚本使用指南 🚀</h1><p><img src="https://file.meimolihan.eu.org/img/ssh-01.webp" alt=""></p><blockquote><p>本文详细介绍一个高效管理 SSH 服务的 Bash 脚本：<code>setup-ssh.sh</code>（SSH 服务端配置脚本）。<br>✅ 支持主流 Linux 发行版：Debian, Ubuntu, CentOS, RHEL, Fedora, OpenSUSE, Arch Linux。</p></blockquote><hr><h2 id="📖-导航目录">📖 导航目录</h2><ul><li><a href="#script-overview">📌 脚本概述</a><ul><li><a href="#ssh-setup-script">🔧 setup-ssh.sh - SSH 服务器配置脚本</a></li></ul></li><li><a href="#ssh-commands">🛠️ 补充 SSH 相关命令</a><ul><li><a href="#server-commands">📊 服务器端管理命令</a></li><li><a href="#client-commands">💻 客户端连接命令</a></li><li><a href="#troubleshooting-commands">🔍 故障排查命令</a></li></ul></li><li><a href="#usage-examples">🎯 SSH 使用示例</a><ul><li><a href="#example-1">🔑 1. SSH 密钥认证配置</a></li><li><a href="#example-2">🔄 2. SSH 端口转发</a></li></ul></li><li><a href="#common-issues">❓ 常见问题解决</a></li><li><a href="#security-tips">🔒 SSH 安全建议</a></li><li><a href="#summary">📝 总结</a></li></ul><hr><p><a id="script-overview"></a></p><h2 id="📌-脚本概述">📌 脚本概述</h2><p>SSH（Secure Shell）是用于安全远程登录和执行命令的网络协议，是管理 Linux 服务器的标准工具。下面介绍的脚本极大简化了 SSH 服务的配置和管理流程。✨</p><p><a id="ssh-setup-script"></a></p><h3 id="🔧-setup-ssh-sh-SSH-服务器配置脚本">🔧 <a href="http://setup-ssh.sh">setup-ssh.sh</a> - SSH 服务器配置脚本</h3><p>此脚本用于自动化安装和配置 SSH 服务器，优化连接参数并设置防火墙规则，特别适合快速部署和批量配置场景。🎯</p><p><strong>主要功能特点：</strong></p><ul><li>✅ 自动检测系统包管理器（APT/YUM/DNF/ZYPPER/PACMAN）并安装 SSH 服务</li><li>✅ 支持主流 Linux 发行版：Debian, Ubuntu, CentOS, RHEL, Fedora, OpenSUSE, Arch Linux</li><li>✅ 优化 SSH 连接参数（禁用 DNS 查询，启用压缩，保持连接等）</li><li>✅ 自动配置防火墙允许 SSH 连接（支持 ufw, firewalld, iptables）</li><li>✅ 备份原始配置文件，确保操作安全可逆</li><li>✅ 提供清晰的连接信息和安全建议</li><li>✅ 完整的错误处理和日志记录功能</li></ul><p><strong>使用方法：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Vercel 仓库</span></span><br><span class="line">bash &lt;(curl -sL script.meimolihan.eu.org/sh/ssh/setup-ssh.sh)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Gitee 仓库</span></span><br><span class="line">bash &lt;(curl -sL gitee.com/meimolihan/script/raw/master/sh/ssh/setup-ssh.sh)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者先下载再执行</span></span><br><span class="line">wget -c https://gitee.com/meimolihan/script/raw/master/sh/ssh/setup-ssh.sh</span><br><span class="line"><span class="built_in">chmod</span> +x setup-ssh.sh</span><br><span class="line"><span class="built_in">sudo</span> ./setup-ssh.sh</span><br></pre></td></tr></table></figure><p><img src="https://file.meimolihan.eu.org/screenshot/setup-ssh-001.webp" alt=""></p><p><a id="ssh-commands"></a></p><h2 id="🛠️-补充-SSH-相关命令">🛠️ 补充 SSH 相关命令</h2><p>除了使用脚本外，掌握以下 SSH 命令将帮助您更灵活地管理远程连接。📚</p><p><a id="server-commands"></a></p><h3 id="📊-服务器端管理命令">📊 服务器端管理命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看 SSH 服务状态</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl status ssh</span><br><span class="line"><span class="built_in">sudo</span> systemctl status sshd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动/停止/重启 SSH 服务</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl start ssh</span><br><span class="line"><span class="built_in">sudo</span> systemctl stop ssh</span><br><span class="line"><span class="built_in">sudo</span> systemctl restart ssh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新加载 SSH 配置（不中断现有连接）</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl reload ssh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看 SSH 连接日志</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">tail</span> -f /var/log/auth.log | grep ssh</span><br><span class="line"><span class="built_in">sudo</span> journalctl -u ssh -f</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看当前连接的 SSH 用户</span></span><br><span class="line"><span class="built_in">who</span></span><br><span class="line">w</span><br><span class="line">ps aux | grep sshd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看 SSH 配置文件语法</span></span><br><span class="line">sshd -t</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成 SSH 主机密钥</span></span><br><span class="line"><span class="built_in">sudo</span> ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key</span><br><span class="line"><span class="built_in">sudo</span> ssh-keygen -t ecdsa -f /etc/ssh/ssh_host_ecdsa_key</span><br><span class="line"><span class="built_in">sudo</span> ssh-keygen -t ed25519 -f /etc/ssh/ssh_host_ed25519_key</span><br></pre></td></tr></table></figure><p><a id="client-commands"></a></p><h3 id="💻-客户端连接命令">💻 客户端连接命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本连接</span></span><br><span class="line">ssh username@hostname</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定端口连接</span></span><br><span class="line">ssh -p 2222 username@hostname</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用特定私钥连接</span></span><br><span class="line">ssh -i ~/.ssh/mykey username@hostname</span><br><span class="line"></span><br><span class="line"><span class="comment"># 远程执行命令</span></span><br><span class="line">ssh username@hostname <span class="string">&quot;ls -la&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 启用详细模式（调试用）</span></span><br><span class="line">ssh -v username@hostname</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启用压缩（慢速网络有用）</span></span><br><span class="line">ssh -C username@hostname</span><br><span class="line"></span><br><span class="line"><span class="comment"># X11 转发（图形界面）</span></span><br><span class="line">ssh -X username@hostname</span><br><span class="line"></span><br><span class="line"><span class="comment"># 端口转发（本地端口转发）</span></span><br><span class="line">ssh -L 8080:localhost:80 username@hostname</span><br><span class="line"></span><br><span class="line"><span class="comment"># 端口转发（远程端口转发）</span></span><br><span class="line">ssh -R 9090:localhost:90 username@hostname</span><br><span class="line"></span><br><span class="line"><span class="comment"># SOCKS 代理</span></span><br><span class="line">ssh -D 1080 username@hostname</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件传输（SCP）</span></span><br><span class="line">scp file.txt username@hostname:/path/to/destination</span><br><span class="line">scp -r directory username@hostname:/path/to/destination</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安全文件传输（SFTP）</span></span><br><span class="line">sftp username@hostname</span><br><span class="line"></span><br><span class="line"><span class="comment"># 同步文件（RSYNC over SSH）</span></span><br><span class="line">rsync -avz -e ssh /local/path username@hostname:/remote/path</span><br></pre></td></tr></table></figure><p><a id="troubleshooting-commands"></a></p><h3 id="🔍-故障排查命令">🔍 故障排查命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查 SSH 端口是否开放</span></span><br><span class="line">nc -zv hostname 22</span><br><span class="line">nmap -p 22 hostname</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试连接（不执行命令）</span></span><br><span class="line">ssh -T username@hostname</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查公钥指纹</span></span><br><span class="line">ssh-keygen -lf /etc/ssh/ssh_host_rsa_key.pub</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调试 SSH 客户端</span></span><br><span class="line">ssh -vvv username@hostname</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调试 SSH 服务器端（临时启用调试模式）</span></span><br><span class="line"><span class="built_in">sudo</span> /usr/sbin/sshd -d -p 2222</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查 SSH 配置语法</span></span><br><span class="line"><span class="built_in">sudo</span> sshd -t</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看失败的登录尝试</span></span><br><span class="line"><span class="built_in">sudo</span> grep <span class="string">&quot;Failed password&quot;</span> /var/log/auth.log</span><br><span class="line"><span class="built_in">sudo</span> lastb</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看成功的登录记录</span></span><br><span class="line"><span class="built_in">sudo</span> last</span><br></pre></td></tr></table></figure><hr><p><a id="usage-examples"></a></p><h2 id="🎯-SSH-使用示例">🎯 SSH 使用示例</h2><p><a id="example-1"></a></p><h3 id="🔑-1-SSH-密钥认证配置">🔑 1. SSH 密钥认证配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成 SSH 密钥对（客户端）</span></span><br><span class="line">ssh-keygen -t rsa -b 4096 -C <span class="string">&quot;your_email@example.com&quot;</span></span><br><span class="line">ssh-keygen -t ed25519 -C <span class="string">&quot;your_email@example.com&quot;</span>  <span class="comment"># 更安全的选择</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 复制公钥到服务器</span></span><br><span class="line">ssh-copy-id username@hostname</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者手动复制</span></span><br><span class="line"><span class="built_in">cat</span> ~/.ssh/id_rsa.pub | ssh username@hostname <span class="string">&quot;mkdir -p ~/.ssh &amp;&amp; cat &gt;&gt; ~/.ssh/authorized_keys&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置正确的权限</span></span><br><span class="line">ssh username@hostname <span class="string">&quot;chmod 700 ~/.ssh; chmod 600 ~/.ssh/authorized_keys&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 禁用密码认证（服务器端）</span></span><br><span class="line"><span class="comment"># 编辑 /etc/ssh/sshd_config</span></span><br><span class="line"><span class="comment"># 设置 PasswordAuthentication no</span></span><br><span class="line"><span class="comment"># 然后重启 SSH 服务</span></span><br></pre></td></tr></table></figure><p><a id="example-2"></a></p><h3 id="🔄-2-SSH-端口转发和隧道">🔄 2. SSH 端口转发和隧道</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 本地端口转发（访问远程服务的本地端口）</span></span><br><span class="line">ssh -L 3306:localhost:3306 username@hostname  <span class="comment"># MySQL 隧道</span></span><br><span class="line">ssh -L 8080:localhost:80 username@hostname    <span class="comment"># Web 服务器隧道</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 远程端口转发（让远程访问本地服务）</span></span><br><span class="line">ssh -R 9090:localhost:3000 username@hostname  <span class="comment"># 本地开发服务器</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 动态端口转发（SOCKS 代理）</span></span><br><span class="line">ssh -D 1080 username@hostname</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多跳 SSH 连接（通过跳板机）</span></span><br><span class="line">ssh -J jumpuser@jumpserver username@targetserver</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保持连接活跃（客户端配置）</span></span><br><span class="line"><span class="comment"># 在 ~/.ssh/config 中添加：</span></span><br><span class="line"><span class="comment"># Host *</span></span><br><span class="line"><span class="comment">#   ServerAliveInterval 60</span></span><br><span class="line"><span class="comment">#   ServerAliveCountMax 3</span></span><br></pre></td></tr></table></figure><hr><p><a id="common-issues"></a></p><h2 id="❓-常见问题解决">❓ 常见问题解决</h2><ol><li><p><strong>连接被拒绝或超时</strong> 🤔</p><ul><li>检查 SSH 服务是否运行：<code>sudo systemctl status ssh</code></li><li>确认防火墙允许 SSH 端口：<code>sudo ufw status</code> 或 <code>sudo firewall-cmd --list-all</code></li><li>验证网络连通性：<code>ping hostname</code> 和 <code>telnet hostname 22</code></li></ul></li><li><p><strong>权限错误</strong> 🔐</p><ul><li>检查 <code>~/.ssh</code> 目录权限：应为 700</li><li>检查 <code>~/.ssh/authorized_keys</code> 文件权限：应为 600</li><li>确认 SELinux 或 AppArmor 没有阻止访问</li></ul></li><li><p><strong>主机密钥验证失败</strong> ⚠️</p><ul><li>清除过期的密钥：<code>ssh-keygen -R hostname</code></li><li>或者编辑 <code>~/.ssh/known_hosts</code> 手动删除对应行</li></ul></li><li><p><strong>认证失败</strong> 🔑</p><ul><li>确认服务器是否允许密码认证：<code>PasswordAuthentication yes</code></li><li>检查密钥是否正确复制到 <code>authorized_keys</code></li><li>验证服务器是否允许该用户登录：<code>AllowUsers</code> 设置</li></ul></li><li><p><strong>连接速度慢</strong> 🐢</p><ul><li>禁用 DNS 反向查询：在 <code>sshd_config</code> 设置 <code>UseDNS no</code></li><li>尝试使用更快的加密算法：<code>Ciphers aes128-gcm@openssh.com</code></li><li>启用压缩：<code>Compression yes</code></li></ul></li></ol><hr><p><a id="security-tips"></a></p><h2 id="🔒-SSH-安全建议">🔒 SSH 安全建议</h2><ol><li><p><strong>使用非标准端口</strong> 🚪</p><ul><li>修改默认 SSH 端口（22）为其他端口</li><li>在 <code>/etc/ssh/sshd_config</code> 中设置：<code>Port 2222</code></li></ul></li><li><p><strong>禁用 root 直接登录</strong> 👤</p><ul><li>禁止 root 用户直接 SSH 登录：</li><li><code>PermitRootLogin no</code></li><li>使用普通用户登录后切换 root</li></ul></li><li><p><strong>使用密钥认证</strong> 🔑</p><ul><li>完全禁用密码认证：<code>PasswordAuthentication no</code></li><li>强制使用公钥认证：<code>PubkeyAuthentication yes</code></li></ul></li><li><p><strong>限制用户访问</strong> 📋</p><ul><li>只允许特定用户访问：</li><li><code>AllowUsers user1 user2</code></li><li>或限制用户组：<code>AllowGroups ssh-users</code></li></ul></li><li><p><strong>使用 fail2ban 防止暴力破解</strong> 🛡️</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装 fail2ban</span></span><br><span class="line"><span class="built_in">sudo</span> apt install fail2ban</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置 SSH 保护</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> /etc/fail2ban/jail.conf /etc/fail2ban/jail.local</span><br><span class="line"><span class="comment"># 在 [sshd] 部分设置：</span></span><br><span class="line"><span class="comment"># enabled = true</span></span><br><span class="line"><span class="comment"># port = ssh</span></span><br><span class="line"><span class="comment"># logpath = /var/log/auth.log</span></span><br></pre></td></tr></table></figure></li><li><p><strong>定期更新 SSH</strong> 🔄</p><ul><li>保持 SSH 软件最新：<code>sudo apt update &amp;&amp; sudo apt upgrade openssh-server</code></li><li>关注 SSH 安全公告，及时应对漏洞</li></ul></li><li><p><strong>使用双因素认证</strong> ✅</p><ul><li>结合 Google Authenticator 等工具增强安全性</li><li>配置 SSH 与 PAM 集成实现双因素认证</li></ul></li></ol><hr><p><a id="summary"></a></p><h2 id="📝-总结">📝 总结</h2><p>通过本文介绍的脚本和一系列 SSH 管理命令，您可以轻松实现以下目标：🎯</p><ul><li><strong>快速部署</strong>：使用 <code>setup-ssh.sh</code> 在几分钟内完成 SSH 服务器配置和优化</li><li><strong>安全连接</strong>：掌握密钥认证、端口转发等高级 SSH 功能</li><li><strong>灵活管理</strong>：使用各种 SSH 命令应对不同管理场景和需求</li><li><strong>故障排除</strong>：使用专业工具诊断和解决连接、认证等问题</li><li><strong>安全保障</strong>：实施最佳实践，确保远程访问服务的安全性</li></ul><p>无论是单台服务器的日常管理，还是大规模集群的远程维护，SSH 都是不可或缺的核心工具。这个脚本和相关命令将帮助您更高效地使用这一工具，提升工作效率和系统安全性。💼</p><p>建议收藏本文作为 SSH 管理的参考手册，随时查阅相关命令和技巧。如有任何问题或建议，欢迎留言讨论！💬</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Linux SSH 服务一键配置脚本使用指南 🚀&lt;/h1&gt;
&lt;p&gt;&lt;img src=&quot;https://file.meimolihan.eu.org/img/ssh-01.webp&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;本文详细介绍一个高效管理 SSH</summary>
      
    
    
    
    <category term="Linux" scheme="https://www.meimolihan.eu.org/categories/Linux/"/>
    
    
    <category term="ssh" scheme="https://www.meimolihan.eu.org/tags/ssh/"/>
    
    <category term="脚本" scheme="https://www.meimolihan.eu.org/tags/%E8%84%9A%E6%9C%AC/"/>
    
  </entry>
  
  <entry>
    <title>Docker 部署雷池 WAF 🛡️</title>
    <link href="https://www.meimolihan.eu.org/posts/19079ac1.html"/>
    <id>https://www.meimolihan.eu.org/posts/19079ac1.html</id>
    <published>2025-09-13T01:32:03.000Z</published>
    <updated>2025-09-13T01:32:03.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Docker 部署雷池 WAF 🛡️</h1><p><img src="https://file.meimolihan.eu.org/img/docker-safeline-01.webp" alt=""></p><hr><h2 id="📋-目录导航">📋 目录导航</h2><ul><li><a href="#project-intro">🎯 项目简介</a></li><li><a href="#features">🛠️ 核心特性</a></li><li><a href="#deploy">🐳 Docker 部署雷池 WAF</a><ul><li><a href="#auto-install">1. Linux 自动安装</a></li><li><a href="#manual-deploy">2. Docker 手动部署</a><ul><li><a href="#deploy-setup">创建部署目录和配置文件</a></li><li><a href="#deploy-start">拉取镜像并启动容器</a></li></ul></li></ul></li><li><a href="#usage">🚀 使用雷池 WAF</a><ul><li><a href="#usage-access">1. 访问 Web 界面</a></li><li><a href="#usage-first">2. 首次使用步骤</a></li></ul></li><li><a href="#nginx">🌐 Nginx 反向代理配置</a><ul><li><a href="#nginx-config">1. 创建 Nginx 配置文件</a></li><li><a href="#nginx-reload">2. 测试并重载 Nginx</a></li></ul></li><li><a href="#maintenance">🔧 容器维护命令</a><ul><li><a href="#docker-compose">1. Docker Compose 命令</a></li><li><a href="#docker">2. Docker 容器命令</a></li><li><a href="#docker-images">3. Docker 镜像管理</a></li></ul></li><li><a href="#conclusion">🌟 开启安全防护新篇章</a></li></ul><hr><p><a id="project-intro"></a></p><h2 id="🎯-项目简介">🎯 项目简介</h2><p>雷池 WAF（Web Application Firewall）是一款开源的高性能 Web 应用防火墙，专门为现代 Web 应用提供全方位安全防护。它能够有效防御 SQL 注入、XSS 攻击、恶意爬虫、CC 攻击等常见 Web 攻击，同时具备低延迟、高并发和易扩展的特点。</p><ul><li><strong>🌐 雷池 WAF 官网地址：<a href="https://waf-ce.chaitin.cn/">https://waf-ce.chaitin.cn/</a></strong></li><li><strong>🐱 GitHub 项目地址：<a href="https://github.com/chaitin/SafeLine">https://github.com/chaitin/SafeLine</a></strong></li></ul><p><a id="features"></a></p><h2 id="🛠️-核心特性">🛠️ 核心特性</h2><p>✨ <strong>全面防护</strong> - 支持多种 Web 攻击检测和防御，包括 OWASP Top 10 常见漏洞<br>🚀 <strong>高性能</strong> - 基于智能引擎，低延迟、高并发处理能力，不影响业务正常访问<br>🔧 <strong>易于部署</strong> - 提供 Docker 一键部署方案，支持多种环境快速安装<br>📊 <strong>可视化管理</strong> - 提供友好的管理界面，实时展示安全态势和攻击日志<br>🛡️ <strong>智能学习</strong> - 支持正常流量学习，降低误报率，提高防护精度<br>🌐 <strong>灵活扩展</strong> - 支持自定义规则，可根据业务需求灵活调整防护策略</p><hr><p><a id="deploy"></a></p><h2 id="Docker-部署雷池-WAF-🛡️">Docker 部署雷池 WAF 🛡️</h2><p>雷池 WAF 提供两种部署方式：Linux 自动安装和 Docker 手动部署。您可以根据需求选择适合的方式。</p><p><a id="auto-install"></a></p><h3 id="1-Linux-自动安装命令">1. Linux 自动安装命令</h3><p>📦 一键安装：3 分钟即可完成自动安装，适合快速部署场景。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash -c <span class="string">&quot;<span class="subst">$(curl -fsSLk https://waf-ce.chaitin.cn/release/latest/manager.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure><p><a id="manual-deploy"></a></p><h3 id="2-Docker-手动部署">2. Docker 手动部署</h3><p><a id="deploy-setup"></a></p><h4 id="创建部署目录和配置文件-📁">创建部署目录和配置文件 📁</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建部署目录</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /vol1/1000/compose/safeline &amp;&amp; <span class="built_in">cd</span> <span class="variable">$_</span> &amp;&amp; \</span><br><span class="line"><span class="built_in">cat</span> &gt; docker-compose.yml &lt;&lt;<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">networks:</span><br><span class="line">  safeline-ce:</span><br><span class="line">    name: safeline-ce</span><br><span class="line">    driver: bridge</span><br><span class="line">    ipam:</span><br><span class="line">      driver: default</span><br><span class="line">      config:</span><br><span class="line">        - gateway: <span class="variable">$&#123;SUBNET_PREFIX:?SUBNET_PREFIX required&#125;</span>.1</span><br><span class="line">          subnet: <span class="variable">$&#123;SUBNET_PREFIX&#125;</span>.0/24</span><br><span class="line">    driver_opts:</span><br><span class="line">      com.docker.network.bridge.name: safeline-ce</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  postgres:</span><br><span class="line">    container_name: safeline-pg</span><br><span class="line">    restart: always</span><br><span class="line">    image: <span class="variable">$&#123;IMAGE_PREFIX&#125;</span>/safeline-postgres<span class="variable">$&#123;ARCH_SUFFIX&#125;</span>:15.2</span><br><span class="line">    volumes:</span><br><span class="line">      - <span class="variable">$&#123;SAFELINE_DIR&#125;</span>/resources/postgres/data:/var/lib/postgresql/data</span><br><span class="line">      - /etc/localtime:/etc/localtime:ro</span><br><span class="line">    environment:</span><br><span class="line">      - POSTGRES_USER=safeline-ce</span><br><span class="line">      - POSTGRES_PASSWORD=<span class="variable">$&#123;POSTGRES_PASSWORD:?postgres password required&#125;</span></span><br><span class="line">    networks:</span><br><span class="line">      safeline-ce:</span><br><span class="line">        ipv4_address: <span class="variable">$&#123;SUBNET_PREFIX&#125;</span>.2</span><br><span class="line">    <span class="built_in">command</span>: [postgres, -c, max_connections=600]</span><br><span class="line">    healthcheck:</span><br><span class="line">      <span class="built_in">test</span>: pg_isready -U safeline-ce -d safeline-ce</span><br><span class="line">  mgt:</span><br><span class="line">    container_name: safeline-mgt</span><br><span class="line">    restart: always</span><br><span class="line">    image: <span class="variable">$&#123;IMAGE_PREFIX&#125;</span>/safeline-mgt<span class="variable">$&#123;REGION&#125;</span><span class="variable">$&#123;ARCH_SUFFIX&#125;</span>:<span class="variable">$&#123;IMAGE_TAG:?image tag required&#125;</span></span><br><span class="line">    volumes:</span><br><span class="line">      - /etc/localtime:/etc/localtime:ro</span><br><span class="line">      - <span class="variable">$&#123;SAFELINE_DIR&#125;</span>/resources/mgt:/app/data</span><br><span class="line">      - <span class="variable">$&#123;SAFELINE_DIR&#125;</span>/logs/nginx:/app/log/nginx:z</span><br><span class="line">      - <span class="variable">$&#123;SAFELINE_DIR&#125;</span>/resources/sock:/app/sock</span><br><span class="line">      - /var/run:/app/run</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="variable">$&#123;MGT_PORT:-9443&#125;</span>:1443</span><br><span class="line">    healthcheck:</span><br><span class="line">      <span class="built_in">test</span>: curl -k -f https://localhost:1443/api/open/health</span><br><span class="line">    environment:</span><br><span class="line">      - MGT_PG=postgres://safeline-ce:<span class="variable">$&#123;POSTGRES_PASSWORD&#125;</span>@safeline-pg/safeline-ce?sslmode=<span class="built_in">disable</span></span><br><span class="line">      - MGT_PROXY=<span class="variable">$&#123;MGT_PROXY&#125;</span></span><br><span class="line">    depends_on:</span><br><span class="line">      - postgres</span><br><span class="line">      - fvm</span><br><span class="line">    logging:</span><br><span class="line">      driver: <span class="string">&quot;json-file&quot;</span></span><br><span class="line">      options:</span><br><span class="line">        max-size: <span class="string">&quot;100m&quot;</span></span><br><span class="line">        max-file: <span class="string">&quot;5&quot;</span></span><br><span class="line">    networks:</span><br><span class="line">      safeline-ce:</span><br><span class="line">        ipv4_address: <span class="variable">$&#123;SUBNET_PREFIX&#125;</span>.4</span><br><span class="line">  detect:</span><br><span class="line">    container_name: safeline-detector</span><br><span class="line">    restart: always</span><br><span class="line">    image: <span class="variable">$&#123;IMAGE_PREFIX&#125;</span>/safeline-detector<span class="variable">$&#123;REGION&#125;</span><span class="variable">$&#123;ARCH_SUFFIX&#125;</span>:<span class="variable">$&#123;IMAGE_TAG&#125;</span></span><br><span class="line">    volumes:</span><br><span class="line">      - <span class="variable">$&#123;SAFELINE_DIR&#125;</span>/resources/detector:/resources/detector</span><br><span class="line">      - <span class="variable">$&#123;SAFELINE_DIR&#125;</span>/logs/detector:/logs/detector</span><br><span class="line">      - /etc/localtime:/etc/localtime:ro</span><br><span class="line">    environment:</span><br><span class="line">      - LOG_DIR=/logs/detector</span><br><span class="line">    networks:</span><br><span class="line">      safeline-ce:</span><br><span class="line">        ipv4_address: <span class="variable">$&#123;SUBNET_PREFIX&#125;</span>.5</span><br><span class="line">  tengine:</span><br><span class="line">    container_name: safeline-tengine</span><br><span class="line">    restart: always</span><br><span class="line">    image: <span class="variable">$&#123;IMAGE_PREFIX&#125;</span>/safeline-tengine<span class="variable">$&#123;REGION&#125;</span><span class="variable">$&#123;ARCH_SUFFIX&#125;</span>:<span class="variable">$&#123;IMAGE_TAG&#125;</span></span><br><span class="line">    volumes:</span><br><span class="line">      - /etc/localtime:/etc/localtime:ro</span><br><span class="line">      - /etc/resolv.conf:/etc/resolv.conf:ro</span><br><span class="line">      - <span class="variable">$&#123;SAFELINE_DIR&#125;</span>/resources/nginx:/etc/nginx</span><br><span class="line">      - <span class="variable">$&#123;SAFELINE_DIR&#125;</span>/resources/detector:/resources/detector</span><br><span class="line">      - <span class="variable">$&#123;SAFELINE_DIR&#125;</span>/resources/chaos:/resources/chaos</span><br><span class="line">      - <span class="variable">$&#123;SAFELINE_DIR&#125;</span>/logs/nginx:/var/log/nginx:z</span><br><span class="line">      - <span class="variable">$&#123;SAFELINE_DIR&#125;</span>/resources/cache:/usr/local/nginx/cache</span><br><span class="line">      - <span class="variable">$&#123;SAFELINE_DIR&#125;</span>/resources/sock:/app/sock</span><br><span class="line">    environment:</span><br><span class="line">      - TCD_MGT_API=https://<span class="variable">$&#123;SUBNET_PREFIX&#125;</span>.4:1443/api/open/publish/server</span><br><span class="line">      - TCD_SNSERVER=<span class="variable">$&#123;SUBNET_PREFIX&#125;</span>.5:8000</span><br><span class="line">      <span class="comment"># deprecated</span></span><br><span class="line">      - SNSERVER_ADDR=<span class="variable">$&#123;SUBNET_PREFIX&#125;</span>.5:8000</span><br><span class="line">      - CHAOS_ADDR=<span class="variable">$&#123;SUBNET_PREFIX&#125;</span>.10</span><br><span class="line">    ulimits:</span><br><span class="line">      nofile: 131072</span><br><span class="line">    network_mode: host</span><br><span class="line">  luigi:</span><br><span class="line">    container_name: safeline-luigi</span><br><span class="line">    restart: always</span><br><span class="line">    image: <span class="variable">$&#123;IMAGE_PREFIX&#125;</span>/safeline-luigi<span class="variable">$&#123;REGION&#125;</span><span class="variable">$&#123;ARCH_SUFFIX&#125;</span>:<span class="variable">$&#123;IMAGE_TAG&#125;</span></span><br><span class="line">    environment:</span><br><span class="line">      - MGT_IP=<span class="variable">$&#123;SUBNET_PREFIX&#125;</span>.4</span><br><span class="line">      - LUIGI_PG=postgres://safeline-ce:<span class="variable">$&#123;POSTGRES_PASSWORD&#125;</span>@safeline-pg/safeline-ce?sslmode=<span class="built_in">disable</span></span><br><span class="line">    volumes:</span><br><span class="line">      - /etc/localtime:/etc/localtime:ro</span><br><span class="line">      - <span class="variable">$&#123;SAFELINE_DIR&#125;</span>/resources/luigi:/app/data</span><br><span class="line">    logging:</span><br><span class="line">      driver: <span class="string">&quot;json-file&quot;</span></span><br><span class="line">      options:</span><br><span class="line">        max-size: <span class="string">&quot;100m&quot;</span></span><br><span class="line">        max-file: <span class="string">&quot;5&quot;</span></span><br><span class="line">    depends_on:</span><br><span class="line">      - detect</span><br><span class="line">      - mgt</span><br><span class="line">    networks:</span><br><span class="line">      safeline-ce:</span><br><span class="line">        ipv4_address: <span class="variable">$&#123;SUBNET_PREFIX&#125;</span>.7</span><br><span class="line">  fvm:</span><br><span class="line">    container_name: safeline-fvm</span><br><span class="line">    restart: always</span><br><span class="line">    image: <span class="variable">$&#123;IMAGE_PREFIX&#125;</span>/safeline-fvm<span class="variable">$&#123;REGION&#125;</span><span class="variable">$&#123;ARCH_SUFFIX&#125;</span>:<span class="variable">$&#123;IMAGE_TAG&#125;</span></span><br><span class="line">    volumes:</span><br><span class="line">      - /etc/localtime:/etc/localtime:ro</span><br><span class="line">    logging:</span><br><span class="line">      driver: <span class="string">&quot;json-file&quot;</span></span><br><span class="line">      options:</span><br><span class="line">        max-size: <span class="string">&quot;100m&quot;</span></span><br><span class="line">        max-file: <span class="string">&quot;5&quot;</span></span><br><span class="line">    networks:</span><br><span class="line">      safeline-ce:</span><br><span class="line">        ipv4_address: <span class="variable">$&#123;SUBNET_PREFIX&#125;</span>.8</span><br><span class="line">  chaos:</span><br><span class="line">    container_name: safeline-chaos</span><br><span class="line">    restart: always</span><br><span class="line">    image: <span class="variable">$&#123;IMAGE_PREFIX&#125;</span>/safeline-chaos<span class="variable">$&#123;REGION&#125;</span><span class="variable">$&#123;ARCH_SUFFIX&#125;</span>:<span class="variable">$&#123;IMAGE_TAG&#125;</span></span><br><span class="line">    logging:</span><br><span class="line">      driver: <span class="string">&quot;json-file&quot;</span></span><br><span class="line">      options:</span><br><span class="line">        max-size: <span class="string">&quot;100m&quot;</span></span><br><span class="line">        max-file: <span class="string">&quot;10&quot;</span></span><br><span class="line">    environment:</span><br><span class="line">      - DB_ADDR=postgres://safeline-ce:<span class="variable">$&#123;POSTGRES_PASSWORD&#125;</span>@safeline-pg/safeline-ce?sslmode=<span class="built_in">disable</span></span><br><span class="line">    volumes:</span><br><span class="line">      - <span class="variable">$&#123;SAFELINE_DIR&#125;</span>/resources/sock:/app/sock</span><br><span class="line">      - <span class="variable">$&#123;SAFELINE_DIR&#125;</span>/resources/chaos:/app/chaos</span><br><span class="line">    networks:</span><br><span class="line">      safeline-ce:</span><br><span class="line">        ipv4_address: <span class="variable">$&#123;SUBNET_PREFIX&#125;</span>.10</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><h4 id="创建环境变量配置文件">创建环境变量配置文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建 .env 配置文件</span></span><br><span class="line"><span class="built_in">cat</span> &gt; .<span class="built_in">env</span> &lt;&lt;<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">SAFELINE_DIR=/vol1/1000/compose/safeline</span><br><span class="line">IMAGE_TAG=latest</span><br><span class="line">MGT_PORT=9443</span><br><span class="line">POSTGRES_PASSWORD=yourpassword <span class="comment">#-------（自定义密码使用数字+英文大小写组合，勿使用特殊字符）</span></span><br><span class="line">SUBNET_PREFIX=172.23.0</span><br><span class="line">IMAGE_PREFIX=swr.cn-east-3.myhuaweicloud.com/chaitin-safeline</span><br><span class="line">ARCH_SUFFIX=</span><br><span class="line">RELEASE=</span><br><span class="line">REGION=</span><br><span class="line">MGT_PROXY=0</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p><a id="deploy-start"></a></p><h4 id="拉取镜像并启动容器-🚀">拉取镜像并启动容器 🚀</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用 Docker Compose 启动所有服务</span></span><br><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><p>启动完成后，系统将自动创建以下容器：</p><ul><li>🗄️ <code>safeline-pg</code> - PostgreSQL 数据库</li><li>🖥️ <code>safeline-mgt</code> - 管理界面服务</li><li>🔍 <code>safeline-detector</code> - 攻击检测引擎</li><li>🌐 <code>safeline-tengine</code> - Tengine Web 服务器</li><li>📊 <code>safeline-luigi</code> - 日志处理服务</li><li>⚙️ <code>safeline-fvm</code> - 规则管理服务</li><li>🛡️ <code>safeline-chaos</code> - 核心防护引擎</li></ul><hr><p><a id="usage"></a></p><h2 id="🚀-使用雷池-WAF">🚀 使用雷池 WAF</h2><p><a id="usage-access"></a></p><h3 id="1-访问-Web-界面-💻">1. 访问 Web 界面 💻</h3><ul><li><strong>本地访问</strong>：<a href="http://localhost:9443">http://localhost:9443</a></li><li><strong>域名访问</strong>：<a href="https://safeline.example.com:666">https://safeline.example.com:666</a>（配置反向代理后）</li><li><strong>查看密码</strong>：<code>docker exec safeline-mgt resetadmin</code></li></ul><p><a id="usage-first"></a></p><h3 id="2-首次使用步骤-🎯">2. 首次使用步骤 🎯</h3><ol><li><p><strong>初始化设置</strong> 🔧</p><ul><li>打开浏览器访问管理界面</li><li>设置管理员账号和密码</li><li>配置邮箱通知等基本设置</li></ul></li><li><p><strong>添加防护站点</strong> 🌐</p><ul><li>进入&quot;站点管理&quot;页面</li><li>点击&quot;添加站点&quot;按钮</li><li>填写需要防护的域名和上游服务器地址</li></ul></li><li><p><strong>配置防护规则</strong> 🛡️</p><ul><li>根据业务特点选择合适的防护规则</li><li>可启用智能学习模式，降低误报率</li><li>设置自定义规则应对特定攻击</li></ul></li><li><p><strong>监控安全态势</strong> 📊</p><ul><li>查看实时攻击日志和统计信息</li><li>分析攻击来源和类型分布</li><li>调整防护策略优化效果</li></ul></li><li><p><strong>性能调优</strong> ⚡</p><ul><li>根据流量特点调整检测灵敏度</li><li>配置缓存策略提升性能</li><li>设置黑白名单管理访问控制</li></ul></li></ol><hr><p><a id="nginx"></a></p><h2 id="🌐-Nginx-反向代理配置">🌐 Nginx 反向代理配置</h2><blockquote><p><strong>访问地址示例：<a href="https://safeline.example.com:666">https://safeline.example.com:666</a></strong></p></blockquote><p>通过 Nginx 反向代理可以提供更灵活的访问方式和 SSL 终端卸载功能。</p><p><a id="nginx-config"></a></p><h3 id="1-创建-Nginx-配置文件-🔧">1. 创建 Nginx 配置文件 🔧</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /etc/nginx/conf.d &amp;&amp; \</span><br><span class="line"><span class="built_in">cat</span> &gt; /etc/nginx/conf.d/safeline.conf &lt;&lt;<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">server &#123;</span><br><span class="line">    listen 666 ssl;</span><br><span class="line">    listen [::]:666 ssl;</span><br><span class="line">    server_name safeline.example.com;   <span class="comment"># 🌐 替换为你的域名</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># SSL 证书</span></span><br><span class="line">    ssl_certificate /etc/nginx/keyfile/cert.pem;</span><br><span class="line">    ssl_certificate_key /etc/nginx/keyfile/key.pem;</span><br><span class="line">    ssl_protocols TLSv1.2 TLSv1.3;</span><br><span class="line">    ssl_prefer_server_ciphers off;</span><br><span class="line">    ssl_ciphers ECDHE+AESGCM:ECDHE+CHACHA20:!aNULL:!MD5;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 安全头部</span></span><br><span class="line">    add_header X-Frame-Options DENY;</span><br><span class="line">    add_header X-Content-Type-Options nosniff;</span><br><span class="line">    add_header X-XSS-Protection <span class="string">&quot;1; mode=block&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 文件大小限制</span></span><br><span class="line">    client_max_body_size 100M;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass http://127.0.0.1:9443;</span><br><span class="line">        proxy_set_header Host <span class="variable">$host</span>;</span><br><span class="line">        proxy_set_header X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        proxy_set_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">        proxy_set_header X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line">        proxy_http_version 1.1;</span><br><span class="line">        proxy_buffering off;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># WebSocket 支持</span></span><br><span class="line">        proxy_set_header Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">        proxy_set_header Connection <span class="string">&quot;upgrade&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 错误页</span></span><br><span class="line">    error_page 404 500 502 503 504 /50x.html;</span><br><span class="line">    location = /50x.html &#123;</span><br><span class="line">        root /usr/share/nginx/html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p><a id="nginx-reload"></a></p><h3 id="2-测试并重载-Nginx-🔄">2. 测试并重载 Nginx 🔄</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 测试配置文件语法</span></span><br><span class="line"><span class="built_in">sudo</span> nginx -t</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重载 Nginx 配置</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl reload nginx</span><br></pre></td></tr></table></figure><hr><p><a id="maintenance"></a></p><h2 id="🔧-容器维护命令">🔧 容器维护命令</h2><p><a id="docker-compose"></a></p><h3 id="1-Docker-Compose-命令-🐳">1. Docker Compose 命令 🐳</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入项目目录</span></span><br><span class="line"><span class="built_in">cd</span> /vol1/1000/compose/safeline</span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止并删除容器</span></span><br><span class="line">docker-compose down</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拉取最新镜像</span></span><br><span class="line">docker-compose pull</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动容器</span></span><br><span class="line">docker-compose up -d</span><br><span class="line"></span><br><span class="line"><span class="comment"># 仅启动指定服务</span></span><br><span class="line">docker-compose up -d &lt;service_name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看服务状态</span></span><br><span class="line">docker-compose ps</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看服务日志</span></span><br><span class="line">docker-compose logs</span><br><span class="line"></span><br><span class="line"><span class="comment"># 跟踪服务日志</span></span><br><span class="line">docker-compose logs -f</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看指定服务日志</span></span><br><span class="line">docker-compose logs &lt;service_name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 完整升级流程</span></span><br><span class="line">docker-compose down &amp;&amp; \</span><br><span class="line">docker-compose pull &amp;&amp; \</span><br><span class="line">docker-compose up -d &amp;&amp; \</span><br><span class="line">docker image prune -f</span><br></pre></td></tr></table></figure><p><a id="docker"></a></p><h3 id="2-Docker-容器命令-📦">2. Docker 容器命令 📦</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看所有容器名称</span></span><br><span class="line">docker ps -a --format <span class="string">&quot;&#123;&#123;.Names&#125;&#125;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看运行中容器</span></span><br><span class="line">docker ps</span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止/启动/重启容器</span></span><br><span class="line">docker stop &lt;container_name&gt;      <span class="comment"># 停止容器</span></span><br><span class="line">docker start &lt;container_name&gt;     <span class="comment"># 启动容器  </span></span><br><span class="line">docker restart &lt;container_name&gt;   <span class="comment"># 重启容器</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除容器</span></span><br><span class="line">docker <span class="built_in">rm</span> &lt;container_name&gt;        <span class="comment"># 删除已停止容器</span></span><br><span class="line">docker <span class="built_in">rm</span> -f &lt;container_name&gt;     <span class="comment"># 强制删除运行中容器</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入容器Shell</span></span><br><span class="line">docker <span class="built_in">exec</span> -it &lt;container_name&gt; sh      <span class="comment"># 使用sh进入容器</span></span><br><span class="line">docker <span class="built_in">exec</span> -it &lt;container_name&gt; bash    <span class="comment"># 使用bash进入容器</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 以root身份进入容器  </span></span><br><span class="line">docker <span class="built_in">exec</span> -u 0 -it &lt;container_name&gt; sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在容器中执行命令</span></span><br><span class="line">docker <span class="built_in">exec</span> &lt;container_name&gt; <span class="built_in">ls</span> -la</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看容器详情和资源使用</span></span><br><span class="line">docker inspect &lt;container_name&gt;     <span class="comment"># 查看详细配置</span></span><br><span class="line">docker stats &lt;container_name&gt;       <span class="comment"># 实时资源监控</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 容器日志管理</span></span><br><span class="line">docker logs &lt;container_name&gt;           <span class="comment"># 查看日志</span></span><br><span class="line">docker logs -f &lt;container_name&gt;        <span class="comment"># 实时跟踪日志</span></span><br><span class="line">docker logs --<span class="built_in">tail</span> 100 &lt;container_name&gt;  <span class="comment"># 查看最后100行</span></span><br><span class="line">docker logs -t &lt;container_name&gt;        <span class="comment"># 带时间戳的日志</span></span><br></pre></td></tr></table></figure><p><a id="docker-images"></a></p><h3 id="3-Docker-镜像管理-📀">3. Docker 镜像管理 📀</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker images                  <span class="comment"># 列出所有镜像</span></span><br><span class="line">docker rmi &lt;image_name:tag&gt;    <span class="comment"># 删除指定镜像</span></span><br><span class="line">docker image prune -f          <span class="comment"># 清理悬空镜像</span></span><br><span class="line">docker image prune -a -f       <span class="comment"># 清理所有未使用镜像</span></span><br></pre></td></tr></table></figure><hr><p><a id="conclusion"></a></p><h2 id="🌟-开启安全防护新篇章">🌟 开启安全防护新篇章</h2><p>通过本文档，您已经成功使用 Docker 部署了雷池 WAF Web 应用防火墙，为您的 Web 应用建立了坚实的安全防线。现在，您可以：</p><p>🛡️ <strong>全面防护</strong> - 有效防御 SQL 注入、XSS 攻击等常见 Web 威胁<br>📊 <strong>实时监控</strong> - 可视化界面实时展示安全态势和攻击日志<br>⚡ <strong>高性能保障</strong> - 低延迟高并发处理，不影响业务正常访问<br>🔧 <strong>灵活配置</strong> - 根据业务需求自定义防护规则和策略<br>🌐 <strong>易扩展</strong> - 支持多种部署方式，轻松应对业务增长</p><p>雷池 WAF 将成为您 Web 应用的可靠守护者，7×24 小时不间断提供安全防护，让您专注于业务发展，无需担心安全威胁。</p><p>从现在开始，构建安全可靠的 Web 应用环境，为您的用户提供更安心的服务体验！✨</p><hr><p>📌 <strong>持续更新</strong>：建议关注 <a href="https://waf-ce.chaitin.cn/">雷池 WAF 官方更新</a>，及时获取新功能与安全增强<br>🐛 <strong>社区支持</strong>：使用中如有疑问或建议，可前往 <a href="https://github.com/chaitin/SafeLine/issues">GitHub Issues</a> 参与讨论</p><p>祝您部署顺利，安全无忧！🎉</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Docker 部署雷池 WAF 🛡️&lt;/h1&gt;
&lt;p&gt;&lt;img src=&quot;https://file.meimolihan.eu.org/img/docker-safeline-01.webp&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;📋-目录导航&quot;&gt;📋 目</summary>
      
    
    
    
    <category term="Docker" scheme="https://www.meimolihan.eu.org/categories/Docker/"/>
    
    
    <category term="compose" scheme="https://www.meimolihan.eu.org/tags/compose/"/>
    
  </entry>
  
</feed>
